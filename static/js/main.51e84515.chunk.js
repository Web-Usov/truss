(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{137:function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"url",function(){return p}),n.d(t,"title",function(){return v}),n.d(t,"description",function(){return b}),n.d(t,"favicon",function(){return g}),n.d(t,"UI_cellSize",function(){return y}),n.d(t,"UI_nodeSize",function(){return E}),n.d(t,"UI_beamSize",function(){return k});var a=n(129),r=n.n(a),o=n(138),i=n.n(o);n.d(t,"ogImage",function(){return i.a});var c=n(139),s=n.n(c);n.d(t,"bridgeIcon_1",function(){return s.a});var l=n(140),u=n.n(l);n.d(t,"bridgeIcon_2",function(){return u.a});var d=n(141),m=n.n(d);n.d(t,"airBridge",function(){return m.a});var f=n(142),h=n.n(f);n.d(t,"FixationIcon",function(){return h.a});var p="https://web-usov.github.io/truss",v="Truss - \u0444\u0435\u0440\u043c\u0430 \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e",b="\u0424\u0435\u0440\u043c\u0430 (farm \u0438\u043b\u0438 truss) \u2014 \u0441\u0442\u0435\u0440\u0436\u043d\u0435\u0432\u0430\u044f \u0441\u0438\u0441\u0442\u0435\u043c\u0430 \u0432 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0439 \u043c\u0435\u0445\u0430\u043d\u0438\u043a\u0435, \u043e\u0441\u0442\u0430\u044e\u0449\u0430\u044f\u0441\u044f \u0433\u0435\u043e\u043c\u0435\u0442\u0440\u0438\u0447\u0435\u0441\u043a\u0438 \u043d\u0435\u0438\u0437\u043c\u0435\u043d\u044f\u0435\u043c\u043e\u0439 \u043f\u043e\u0441\u043b\u0435 \u0437\u0430\u043c\u0435\u043d\u044b \u0435\u0451 \u0436\u0451\u0441\u0442\u043a\u0438\u0445 \u0443\u0437\u043b\u043e\u0432 \u0448\u0430\u0440\u043d\u0438\u0440\u043d\u044b\u043c\u0438.",g=r.a.resolve(e,"favicon.ico"),y=50,E=15,k=6}.call(this,"/")},138:function(e,t,n){e.exports=n.p+"static/media/ogImage.0619e300.png"},139:function(e,t,n){e.exports=n.p+"static/media/icon.68e274b2.png"},140:function(e,t,n){e.exports=n.p+"static/media/bridge.e53bced3.png"},141:function(e,t,n){e.exports=n.p+"static/media/airBridge.7d581a65.png"},142:function(e,t,n){e.exports=n.p+"static/media/fixation.dd261ca6.svg"},216:function(e,t,n){e.exports=n(397)},301:function(e,t){},302:function(e,t){},303:function(e,t){},307:function(e,t){},309:function(e,t){},344:function(e,t){},345:function(e,t){},396:function(e,t,n){},397:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"UIModes",function(){return s}),n.d(a,"theme",function(){return k}),n.d(a,"getNodeColor",function(){return O}),n.d(a,"getNodeStorkeColor",function(){return x}),n.d(a,"getNodeStorkeWidth",function(){return j}),n.d(a,"getBeamColor",function(){return I}),n.d(a,"nodeMouseEnter",function(){return w}),n.d(a,"nodeMouseLeave",function(){return S}),n.d(a,"beamMouseEnter",function(){return N}),n.d(a,"beamMouseLeave",function(){return C});var r={};n.r(r),n.d(r,"mainBackGround",function(){return D}),n.d(r,"node",function(){return M}),n.d(r,"staticNode",function(){return B}),n.d(r,"fixedNode",function(){return _}),n.d(r,"beam",function(){return F});var o={};n.r(o),n.d(o,"defaultState",function(){return z}),n.d(o,"reducer",function(){return P});var i={};n.r(i),n.d(i,"setTitle",function(){return J});var c={};n.r(c),n.d(c,"defaultHomeState",function(){return $}),n.d(c,"reducer",function(){return Q});var s,l=n(0),u=n.n(l),d=n(22),m=n.n(d),f=n(107),h=n(41),p=Object(h.a)(),v=n(18),b=n(16),g=n(137),y=n(209);!function(e){e[e.none=0]="none",e[e.move=1]="move",e[e.addNode=2]="addNode",e[e.addBeam=3]="addBeam",e[e.addBeamStart=4]="addBeamStart",e[e.delete=5]="delete"}(s||(s={}));var E,k=Object(y.a)({palette:{primary:{dark:"#0A4467",main:"#1e779e",light:"#51A8D6"},secondary:{dark:"#a83e19",main:"#f15a24",light:"#F39B7C"},background:{default:"linear-gradient(35deg, #6863bf 0%, #067d93 50%, #e68a68 100%)"}}}),O=function(e){return e.isStatic?e.fixation?r.fixedNode:r.staticNode:r.node},x=function(e,t){switch(t){case s.move:return e.isStatic?k.palette.secondary.dark:k.palette.primary.light;case s.addBeam:case s.addBeamStart:return k.palette.primary.light;default:return k.palette.secondary.main}},j=function(e,t){switch(t){case s.move:return e.isStatic?0:2;case s.addBeam:case s.addBeamStart:return 2;default:return 0}},I=function(e){return r.beam},w=function(e,t,n){var a=e.target.getStage();switch(n){case s.delete:if(t.isStatic){a.container().style.cursor="default";break}a.container().style.cursor="pointer";break;case s.none:a.container().style.cursor="pointer";break;case s.addBeam:case s.addBeamStart:a.container().style.cursor="crosshair";break;case s.move:if(t.isStatic){a.container().style.cursor="default";break}a.container().style.cursor="move"}},S=function(e){var t=e.target.getStage();t&&(t.container().style.cursor="default")},N=function(e,t,n){var a=e.target.getStage();switch(n){case s.delete:case s.none:a.container().style.cursor="pointer"}},C=function(e){var t=e.target.getStage();t&&(t.container().style.cursor="default")},D="#09B4D3",M=k.palette.secondary.main,B=k.palette.secondary.light,_=k.palette.secondary.dark,F=k.palette.secondary.light,U=n(448),X=function(){function e(){Object(v.a)(this,e)}return Object(b.a)(e,null,[{key:"angleBePoints",value:function(e,t,n,a){return Math.atan2(-t+a,-e+n)/Math.PI}},{key:"lengthBePoints",value:function(e,t,n,a){return Math.sqrt(Math.pow(e-n,2)+Math.pow(t-a,2))}},{key:"cellX",value:function(e){return Math.round(e/g.UI_cellSize)*g.UI_cellSize}},{key:"cellY",value:function(e){return Math.round(e/g.UI_cellSize)*g.UI_cellSize}},{key:"signum",value:function(e){return e>0?1:e<0?-1:0}},{key:"multMatrxi",value:function(e,t){var n=e.length,a=t.length,r=e[0].length,o=t[0].length,i=[];if(r!==a)throw new Error("\u0420\u0430\u0437\u043c\u0435\u0440\u043d\u043e\u0441\u0442\u044c \u043c\u0430\u0442\u0440\u0438\u0446 \u043d\u0435 \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u043f\u0435\u0440\u0435\u0443\u043c\u043d\u043e\u0436\u0438\u0442\u044c \u0438\u0445");for(var c=0;c<n;c++){for(var s=[],l=0;l<o;l++)s.push(0);i.push(s)}for(var u=0;u<o;u++)for(var d=0;d<n;d++){for(var m=0,f=0;f<a;f++)m+=e[d][f]+t[f][u];i[d][u]=m}return i}},{key:"multMatrxiV2",value:function(e,t){var n=[];try{n=U.a(e,t)}catch(a){console.error("multMatrxiV2:",a)}return n}}]),e}(),Y=n(57),L=n(36),T=n(6),z={nodes:[],beams:[],forces:[]},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_NODE":var n=t.node;return Object(T.a)({},e,{nodes:[].concat(Object(L.a)(e.nodes),[n])});case"ADD_BEAM":var a=t.beam;return Object(T.a)({},e,{beams:[].concat(Object(L.a)(e.beams),[a])});case"ADD_FORCE":var r=t.force;return Object(T.a)({},e,{forces:[].concat(Object(L.a)(e.forces),[r])});case"EDIT_NODE":return Object(T.a)({},e,{nodes:e.nodes.map(function(e){return e.id===t.node.id?Object(T.a)({},e,t.node):e})});case"EDIT_BEAM":return Object(T.a)({},e,{beams:e.beams.map(function(e){return e.id===t.beam.id?Object(T.a)({},e,t.beam):e})});case"DELETE_ENTITY":return{beams:e.beams.filter(function(e){return e.id!==t.id}),nodes:e.nodes.filter(function(e){return e.id!==t.id}),forces:e.forces.filter(function(e){return e.id!==t.id})};default:return e}},W=n(58),A=n.n(W),H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.x,n=e.y,a=e.name,r=e.angle,o=e.id,i=e.newX,c=e.newY,s=e.type,l={id:o||A()(),x:t||0,y:n||0,angle:r||0,name:a||"",newX:i||t||0,newY:c||n||0,type:s||"entity"};return l.name=a||l.id,l},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.angle,n=e.nodeID,a=e.value,r=H(e);return Object(T.a)({},r,{type:"force",angle:t||0,nodeID:n||"",value:a||0})},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.length,n=e.startConnectedNodeID,a=e.endConnectedNodeID,r=e.endX,o=e.endY,i=H(e);return Object(T.a)({},i,{type:"beam",length:t||0,startConnectedNodeID:n,endConnectedNodeID:a,endX:r||i.x||0,endY:o||i.y||0})},G=function(e){return e&&"beam"===e.type};!function(e){e[e.None=0]="None",e[e.X=1]="X",e[e.Y=2]="Y",e[e.XY=3]="XY",e[e.YX=3]="YX"}(E||(E={}));var K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.beamsID,n=e.forceX,a=e.forceY,r=e.isStatic,o=e.fixation,i=H(e);return Object(T.a)({},i,{type:"node",beamsID:t||[],forceX:n,forceY:a,isStatic:r||!1,fixation:o||E.None})},q=function(e){return e&&"node"===e.type},J=function(e){return{type:"SET_TITLE",title:e}},$={title:"Hello, world!"},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TITLE":return Object(T.a)({},e,{title:t.title});default:return e}},Z=n(198),ee=Object(Y.c)({farm:o.reducer,home:c.reducer}),te=Object(Y.d)(ee,Object(Y.a)(Z.a)),ne=n(64),ae=n(60),re=n(28),oe=n(27),ie=n(29),ce=n(199),se=n.n(ce),le=n(454),ue=n(447),de=n(73),me=n.n(de),fe=n(99),he=n(17),pe=n(34),ve=g.UI_nodeSize,be=function(e){function t(e){var n;return Object(v.a)(this,t),(n=Object(re.a)(this,Object(oe.a)(t).call(this,e))).viewForce=n.viewForce.bind(Object(he.a)(n)),n}return Object(ie.a)(t,e),Object(b.a)(t,[{key:"shouldComponentUpdate",value:function(e){return e.node!==this.props.node||e.mode!==this.props.mode||e.selected!==this.props.selected}},{key:"viewForce",value:function(e){return l.createElement(l.Fragment,null,l.createElement(pe.Arrow,{points:[0,0,g.UI_cellSize,0],stroke:a.theme.palette.grey[300],strokeWidth:ve/3,shadowBlur:2,pointerLength:g.UI_cellSize/10,pointerWidth:g.UI_cellSize/10,hitStrokeWidth:2*ve,rotation:e.value>0?e.angle:180+e.angle}),l.createElement(pe.Text,{x:0===e.angle?e.value>0?g.UI_cellSize/3:-g.UI_cellSize:g.UI_cellSize/3,y:90===e.angle?e.value>0?g.UI_cellSize/3:-g.UI_cellSize/2:-g.UI_cellSize/1.5,text:e.value+"H"}))}},{key:"viewFixation",value:function(e){return l.createElement(pe.Group,{x:0,y:0,rotation:e},l.createElement(pe.Line,{points:[0,0,0,g.UI_cellSize,-g.UI_cellSize/2,g.UI_cellSize,g.UI_cellSize/2,g.UI_cellSize],stroke:a.theme.palette.grey[300],strokeWidth:ve/4,shadowBlur:2}),l.createElement(pe.Circle,{radius:ve/2,fill:a.theme.palette.grey[500],x:0,y:g.UI_cellSize-ve/1.7}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.onClick,r=t.mode,o=t.selected,i=t.node;return l.createElement(pe.Group,{x:i.x,y:i.y,_useStrictMode:!0,onClick:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return n(e,i)})},i.forceX&&this.viewForce(i.forceX),i.forceY&&this.viewForce(i.forceY),i.fixation===E.X&&this.viewFixation(90),i.fixation===E.Y&&this.viewFixation(0),i.fixation===E.XY&&this.viewFixation(90),i.fixation===E.YX&&this.viewFixation(0),l.createElement(pe.Circle,{radius:ve,x:0,y:0,fill:a.getNodeColor(i),shadowBlur:o?8:2,stroke:a.getNodeStorkeColor(i,r),strokeWidth:a.getNodeStorkeWidth(i,r),hitStrokeWidth:2*ve}),l.createElement(pe.Text,{x:-ve,y:-ve/2-1,align:"center",fontSize:18,fill:"#fff",shadowBlur:8,fontFamily:"Trebuchet MS",width:2*ve,verticalAlign:"middle",text:i.name}),l.createElement(pe.Circle,{radius:ve,x:i.x-i.x,y:i.y-i.y,onDragEnd:function(e){e.target.to({x:0,y:0})},hitStrokeWidth:2*ve,draggable:r===s.move&&!i.isStatic,onMouseEnter:function(e){return a.nodeMouseEnter(e,i,r)},onMouseLeave:function(e){return a.nodeMouseLeave(e)},onDragMove:function(t){return e.props.drag(t,i)}}))}}]),t}(l.Component),ge=n(130),ye=function(e){function t(){return Object(v.a)(this,t),Object(re.a)(this,Object(oe.a)(t).apply(this,arguments))}return Object(ie.a)(t,e),Object(b.a)(t,[{key:"shouldComponentUpdate",value:function(e){var t=this.props,n=t.beam,a=t.mode,r=t.selected;return e.beam!==n||e.mode!==a||e.selected!==r}},{key:"render",value:function(){var e=this.props,t=e.onClick,n=e.mode,r=e.selected,o=e.beam,i=g.UI_beamSize;return l.createElement(ge.Line,{points:[o.x,o.y,o.endX,o.endY],stroke:a.getBeamColor(o),strokeWidth:i,shadowBlur:r?8:2,hitStrokeWidth:4*i,onClick:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return t(e,o)}),onMouseEnter:function(e){return a.beamMouseEnter(e,o,n)},onMouseLeave:function(e){return a.beamMouseLeave(e)}})}}]),t}(l.Component),Ee=n(453),ke=n(7),Oe=function(e){var t=e.widthCell,n=e.heightCell,a=e.heightBox,r=e.widthBox,o=r/t,i=a/n;return l.createElement(l.Fragment,null,function(){for(var e=[],n=0;n<o;n++)e.push(l.createElement(pe.Line,{points:[n*t,0,n*t,a],stroke:"#ddd",strokeWidth:1,key:n}));return e}(),function(){for(var e=[],t=0;t<i;t++)e.push(l.createElement(pe.Line,{points:[0,t*n,r,t*n],stroke:"#ddd",strokeWidth:1,key:t}));return e}())},xe=n(200),je=n.n(xe),Ie=Object(ke.a)(function(e){return Object(Ee.a)({root:{flexGrow:1,backgroundColor:"#fff"},stage:{backgroundColor:"#fff"}})})(function(e){var t=e.classes,n=e.stage,a=e.stageHeight,r=e.stageWidth,o=e.onClick,i=e.onMouseMove,c=e.onDrag,s=e.beams,u=e.nodes,d=e.uiMode,m=e.selectedEntity;return l.createElement(je.a,{className:t.root,autoHide:!0},l.createElement(pe.Stage,{height:a,width:r,style:{height:a,width:r},className:t.stage,onClick:o,onMouseMove:i,ref:n},l.createElement(pe.Layer,{className:"layer"},l.createElement(Oe,{heightCell:g.UI_cellSize,widthCell:g.UI_cellSize,heightBox:a,widthBox:r}),s.map(function(e){return l.createElement(ye,{key:e.id,beam:e,mode:d,onClick:o,selected:m===e})}),u.map(function(e){return l.createElement(be,{key:e.id,node:e,mode:d,drag:c,onClick:o,selected:m===e})}))))}),we=n(428),Se=n(451),Ne=n(108),Ce=n(422),De=n(452),Me=n(423),Be=n(424),_e=function(e){function t(e){var n;return Object(v.a)(this,t),(n=Object(re.a)(this,Object(oe.a)(t).call(this,e))).state={open:!1,viewTooltip:!1},n.switchDrawer=n.switchDrawer.bind(Object(he.a)(n)),n}return Object(ie.a)(t,e),Object(b.a)(t,[{key:"switchDrawer",value:function(){this.setState({open:!this.state.open,viewTooltip:!1})}},{key:"changeViewtooltip",value:function(e){this.setState({viewTooltip:e})}},{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=t.children,r=t.title,o=t.btnIcon,i=t.anchor,c=this.state,s=c.open,u=c.viewTooltip;return l.createElement(l.Fragment,null,l.createElement(Se.a,{className:n.drawer,variant:"persistent",open:s,anchor:i,classes:{paper:n.drawerPaper}},l.createElement("div",{className:n.toolbar}),l.createElement(Ne.a,{variant:"body2",align:"center",className:n.title},r),l.createElement(Ce.a,null),a),l.createElement(De.a,{title:r,open:void 0!==r&&u&&!s,onOpen:function(){return e.changeViewtooltip(!0)},onClose:function(){return e.changeViewtooltip(!1)}},l.createElement(Me.a,{style:{left:"left"===i?s?255:15:"auto",right:"right"===i?s?255:15:"auto"},color:"secondary",size:"medium",className:n.toogleIcon,onClick:this.switchDrawer},s?l.createElement(Be.a,null):o)))}}]),t}(l.PureComponent),Fe=Object(ke.a)(function(e){return Object(Ee.a)({drawer:{position:"relative"},drawerPaper:{width:240},toogleIcon:{position:"absolute",top:e.spacing(10),zIndex:e.zIndex.drawer+1},title:{padding:e.spacing(1)},toolbar:e.mixins.toolbar})})(_e),Ue=n(4),Xe=n(425),Ye=n(426),Le=Object(ke.a)(function(e){return Object(Ee.a)({appBar:{zIndex:e.zIndex.drawer+1},logo:{marginRight:e.spacing(4),marginLeft:e.spacing(2),"& img":{width:50,height:"auto"}}})})(function(e){var t=e.classes,n=e.children,a=e.className,r=e.color,o=e.position,i=e.withLogo,c=void 0===i||i;return l.createElement(Xe.a,{position:o||"fixed",className:Object(Ue.a)(t.appBar,a),color:r||"primary"},l.createElement(Ye.a,null,function(){if(c)return l.createElement(ne.b,{to:"/",className:t.logo},l.createElement("img",{alt:"Logo Icon",src:g.bridgeIcon_2}))}(),n))}),Te=n(97),ze=n(206),Pe=n(427),We=n(20),Ae=Object(ke.a)(function(e){return Object(Ee.a)({btn:{marginLeft:e.spacing(2),marginRight:e.spacing(2),borderRadius:"50% !important",border:"1px solid ".concat(Object(We.b)(e.palette.action.active,.2)," !important"),transition:e.transitions.create(["background-color","box-shadow","border"],{duration:e.transitions.duration.short}),color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.light,"&$selected":{backgroundColor:e.palette.secondary.main,"&:hover":{backgroundColor:e.palette.secondary.dark}},"&:hover":{backgroundColor:e.palette.secondary.dark,"@media (hover: none)":{backgroundColor:e.palette.secondary.main},"&$disabled":{backgroundColor:e.palette.secondary.main}}},selected:{}})})(function(e){var t=e.selected,n=e.classes,a=e.value,r=e.name,o=e.icon,i=Object(ze.a)(e,["selected","classes","value","name","icon"]);return l.createElement(Pe.a,Object.assign({key:r,value:a,className:Object(Ue.a)(n.btn,Object(Te.a)({},n.selected,t))},i),l.createElement(De.a,{title:r},o))}),He=Object(ke.a)(function(e){return Object(Ee.a)({root:{},btn:{marginLeft:e.spacing(2),marginRight:e.spacing(2)},grow:{flexGrow:1}})})(function(e){var t=e.classes,n=e.hundleSave,a=void 0===n?function(e){alert("\u0411\u0443\u0435\u0434\u0435\u0442 \u0440\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u043e \u0432 \u0431\u0443\u0434\u0443\u0449\u0435\u043c")}:n,r=e.hundleClear,o=void 0===r?function(e){alert("\u0411\u0443\u0435\u0434\u0435\u0442 \u0440\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u043e \u0432 \u0431\u0443\u0434\u0443\u0449\u0435\u043c")}:r,i=e.hundleCalculate,c=void 0===i?function(e){alert("\u0411\u0443\u0435\u0434\u0435\u0442 \u0440\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u043e \u0432 \u0431\u0443\u0434\u0443\u0449\u0435\u043c")}:i,s=e.disabled,u=void 0!==s&&s;return l.createElement(Le,{className:t.root},l.createElement("div",{className:t.grow}),l.createElement(we.a,{color:"secondary",variant:"contained",className:t.btn,onClick:c,disabled:u},"\u0420\u0430\u0441\u0447\u0435\u0442"),l.createElement(we.a,{color:"secondary",variant:"contained",className:t.btn,onClick:a,disabled:u},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),l.createElement(we.a,{color:"secondary",variant:"contained",className:t.btn,onClick:o,disabled:u},"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"))}),Ve=n(429),Re=n(430),Ge=n(431),Ke=n(432),qe=n(435),Je=n(436),$e=n(433),Qe=n(434),Ze=n(437),et=n(438),tt=n(439),nt=n(440),at=function(e){function t(e){var n;return Object(v.a)(this,t),(n=Object(re.a)(this,Object(oe.a)(t).call(this,e))).state={open:!1,tabs:new Map},n.openTab=n.openTab.bind(Object(he.a)(n)),n.viewListItem=n.viewListItem.bind(Object(he.a)(n)),n}return Object(ie.a)(t,e),Object(b.a)(t,[{key:"componentWillMount",value:function(){var e=this.state.tabs;e.set("\u0423\u0437\u043b\u044b",!1),e.set("\u0421\u0442\u0435\u0440\u0436\u043d\u0438",!1),this.setState({tabs:new Map(e)})}},{key:"openTab",value:function(e){var t=this.state.tabs;t.set(e,!t.get(e)),this.setState({tabs:new Map(t)})}},{key:"viewListItem",value:function(e,t,n){var r=this,o=this.props,i=o.selectedEntity,c=o.classes,s=o.onSelect,u=this.state.tabs;return l.createElement(l.Fragment,null,l.createElement(Ve.a,{button:!0,onClick:function(){return r.openTab(t)}},n&&l.createElement(Re.a,null,l.createElement(Ge.a,{badgeContent:e.length,color:"secondary"},n)),l.createElement(Ke.a,{primary:t}),u.get(t)?l.createElement($e.a,null):l.createElement(Qe.a,null)),l.createElement(qe.a,{in:u.get(t),timeout:"auto",unmountOnExit:!0},l.createElement(Je.a,{component:"div",disablePadding:!0},e.map(function(e){return l.createElement(Ve.a,{button:!0,className:c.nested,key:e.id,selected:i===e,onClick:function(t){return s(e)}},q(e)&&l.createElement(Re.a,null,l.createElement(Ze.a,{style:{color:a.getNodeColor(e)}})),l.createElement(Ke.a,{primary:e.name}))}))),l.createElement(Ce.a,null))}},{key:"render",value:function(){var e=this.props,t=e.nodes,n=e.beams;return n.sort(function(e,t){return e.name>t.name?1:-1}),l.createElement(Fe,{anchor:"left",title:"\u0421\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0430 \u043f\u0440\u043e\u0435\u043a\u0442\u0430",btnIcon:l.createElement(et.a,null)},this.viewListItem(t,"\u0423\u0437\u043b\u044b",l.createElement(tt.a,null)),this.viewListItem(n,"\u0421\u0442\u0435\u0440\u0436\u043d\u0438",l.createElement(nt.a,null)))}}]),t}(l.PureComponent),rt=Object(ke.a)(function(e){return Object(Ee.a)({nested:{paddingLeft:e.spacing(6)}})})(at),ot=n(449),it=n(441),ct=n(442),st=n(443),lt=function(){function e(){Object(v.a)(this,e)}return Object(b.a)(e,null,[{key:"init",value:function(){}},{key:"Kmest_i",value:function(e,t,n){var a=e*t/n,r=[];return r.push([a,-a]),r.push([-a,a]),r}},{key:"Lambda_i",value:function(e,t,n){return{x:(t.x-e.x)/n,y:(t.y-e.y)/-n}}},{key:"Kobs_i",value:function(e,t,n,a){for(var r=e*t/n,o=[{x:a.x*a.x,y:a.x*a.y},{x:a.x*a.y,y:a.y*a.y}],i=[{x:-a.x*a.x,y:-a.x*a.y},{x:-a.x*a.y,y:-a.y*a.y}],c=[],s=[],l=0;l<2;l++)c.push({x1:o[l].x,y1:o[l].y,x2:i[l].x,y2:i[l].y}),s.push({x1:i[l].x,y1:i[l].y,x2:o[l].x,y2:o[l].y});return Array.prototype.concat(c,s).map(function(e){var t=e.x1,n=e.y1,a=e.x2,o=e.y2;return[t*r,n*r,a*r,o*r]})}},{key:"IndexV_i",value:function(e,t){return[e.x,e.y,t.x,t.y]}},{key:"K",value:function(e,t,n){for(var a=[],r=0;r<e;r++){for(var o=[],i=0;i<e;i++)o.push(0);a.push(o)}for(var c=0;c<t.length;c++)for(var s=0;s<4;s++){var l=t[c][s];if(0!==l)for(var u=0;u<4;u++){var d=t[c][u];0!==d&&(a[d-1][l-1]=a[d-1][l-1]+n[c][s][u])}}return a}},{key:"SquareRoot",value:function(e,t){if(e.length!==t.length)throw Error("SquareRoot - \u041c\u0430\u0441\u0441\u0438\u0432\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u043e\u0434\u0438\u043d\u0430\u043a\u043e\u0432\u043e\u0439 \u0434\u043b\u0438\u043d\u044b");for(var n=t.length,a=[],r=[],o=[],i=[],c=[],s=[],l=0;l<n+1;l++){for(var u=[],d=0;d<n;d++)u.push(0);c.push(u),a.push(u),r.push(0),o.push(0),i.push(0),s.push(0)}for(var m=1;m<=n;m++){for(var f=0;f<=n;f++)a[m][f]=e[m-1][f-1];r[m]=t[m-1]}i[1]=X.signum(a[1][1]),c[1][1]=Math.sqrt(Math.abs(a[1][1]));for(var h=2;h<=n;h++)c[1][h]=a[1][h]/(c[1][1]*i[1]);for(var p=2;p<=n;p++){for(var v=0,b=1;b<=p-1;b++)v+=c[b][p]*c[b][p]*i[b];i[p]=X.signum(a[p][p]-v),c[p][p]=Math.sqrt(Math.abs(a[p][p]-v));for(var g=1/(c[p][p]*i[p]),y=p+1;y<=n;y++){for(var E=0,k=1;k<=p-1;k++)E+=c[k][p]*i[k]*c[k][y];c[p][y]=g*(a[p][y]-E)}}s[1]=r[1]/(c[1][1]*i[1]);for(var O=2;O<=n;O++){for(var x=0,j=1;j<=O-1;j++)x+=c[j][O]*i[j]*s[j];s[O]=(r[O]-x)/(c[O][O]*i[O])}o[n]=s[n]/c[n][n];for(var I=n-1;I>=1;I--){for(var w=0,S=I+1;S<=n;S++)w+=c[I][S]*o[S];o[I]=(s[I]-w)/c[I][I]}var N=[];return o.forEach(function(e,t){0!==t&&N.push(e)}),N}},{key:"Vi",value:function(e,t){for(var n=[],a=0;a<e.length;a++){var r=Object(T.a)({},e[a]);r.x=0===r.x?0:t[r.x-1],r.y=0===r.y?0:t[r.y-1],n.push(r)}return n}},{key:"Vij",value:function(e,t){for(var n=[],a=0;a<e.length;a++){var r=e[a].x,o=e[a].y;n.push([[t[r].x],[t[r].y],[t[o].x],[t[o].y]])}return n}},{key:"V_i",value:function(e,t){return X.multMatrxiV2(e,t)}},{key:"P_i",value:function(e,t){return X.multMatrxiV2(e,t)}}]),e}(),ut=function(){function e(){Object(v.a)(this,e)}return Object(b.a)(e,null,[{key:"addNode",value:function(e,t){if(e.length>12)return null;if(e.find(function(e){return e.x===t.x&&e.y===t.y}))return null;var n=A()();if(!n)return null;var a=e.length+1+"";return K(Object(T.a)({},t,{name:t.name||a,id:n}))}},{key:"addBeam",value:function(e,t){if(e.length>36)return null;var n=A()();return n?R(Object(T.a)({},t,{id:n})):null}},{key:"moveEntity",value:function(e,t,n){e.x=t,e.y=n,G(e)&&(e.length=this.getBeamLength(e))}},{key:"moveBeamEnd",value:function(e,t,n){e.endX=t,e.endY=n}},{key:"createNodes",value:function(e,t,n){var a=0;return[].concat(e.map(function(e){return a++,K(Object(T.a)({},e,{isStatic:!0,name:a+""}))}),t.map(function(e){a++;var t=K(Object(T.a)({},e,{isStatic:!0,name:a+""}));return 0===e.angle?t.forceX=V({nodeID:t.id,value:e.value,angle:e.angle}):t.forceY=V({nodeID:t.id,value:e.value,angle:e.angle}),t}),n.map(function(e){return a++,K(Object(T.a)({},e,{name:a+""}))}))}},{key:"findOldBeam",value:function(e,t,n){return n.startConnectedNodeID===t.startConnectedNodeID&&n.endConnectedNodeID===e.id||n.startConnectedNodeID===e.id&&n.endConnectedNodeID===t.startConnectedNodeID||n.id===t.id&&n.startConnectedNodeID===e.id}},{key:"getBeamLength",value:function(e){return Math.round(X.lengthBePoints(e.x,e.y,e.endX,e.endY)-.5)}},{key:"setNodesName",value:function(e){return e.map(function(e,t){return Object(T.a)({},e,{name:t+1+""})})}},{key:"setBeamsName",value:function(e,t){var n=new Map;t.forEach(function(e){n.set(e.id,e)});var a="";return e.map(function(e){if(!e.startConnectedNodeID||!e.endConnectedNodeID)return e;var t=n.get(e.startConnectedNodeID),r=n.get(e.endConnectedNodeID);return t&&r?(a=t.name<r.name?"".concat(t.name," - ").concat(r.name):"".concat(r.name," - ").concat(t.name),Object(T.a)({},e,{name:a})):e}).sort(function(e,t){var n=e.name.split(" - "),a=Number(n[0]+n[1]),r=t.name.split(" - ");return a>Number(r[0]+r[1])?1:-1})}},{key:"sortNodes",value:function(e){return e.sort(function(e,t){return e.y<t.y?-1:e.y===t.y&&e.x<t.x?-1:1}).map(function(e,t){return Object(T.a)({},e,{name:t+1+""})})}},{key:"calculateFarm",value:function(){var t=Object(fe.a)(me.a.mark(function t(n,a,r){var o,i,c,s,l,u,d,m,f,h,p,v,b,g,y,k,O,x,j,I,w,S,N,C,D,M;return me.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(o=Object(L.a)(n),i=Object(L.a)(a),c=new Map,s=new Map,l=225,u=72e3,d=[],m=[],f=[],h=[],p=[],v=[],b=[],g=[],y=[],k=[],O=[],x=[],j=[],I=[],w=[],S=[],!o.find(function(e){return 0===e.beamsID.length&&e.isStatic})){t.next=24;break}throw new Error("\u041d\u0435 \u0432\u0441\u0435 \u0443\u0437\u043b\u044b\u0439 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u044b");case 24:for(t.prev=24,N=0,o.forEach(function(e){switch(c.set(e.id,e),d.push({x:e.x,y:e.y}),e.fixation){case E.X:N++,m.push({x:0,y:N}),e.forceY&&f.push(-e.forceY.value);break;case E.Y:N++,m.push({x:N,y:0}),e.forceX?f.push(-e.forceX.value):f.push(0);break;case E.YX:case E.XY:m.push({x:0,y:0});break;case E.None:N++,m.push({x:N,y:N+1}),N++,e.forceX?f.push(-e.forceX.value):f.push(0),e.forceY?f.push(-e.forceY.value):f.push(0)}}),i.forEach(function(t,n){s.set(t.id,t);var a=t.name.split(" - ");h.push({x:Number(a[0])-1,y:Number(a[1])-1});var r=e.getBeamLength(t);p.push(r),v.push(lt.Kmest_i(l,u,r));var o=lt.Lambda_i(d[h[n].x],d[h[n].y],p[n]);b.push(o),g.push([[o.x,o.y,0,0],[0,0,o.x,o.y]]),y.push(lt.Kobs_i(l,u,p[n],b[n])),k.push(lt.IndexV_i(m[h[n].x],m[h[n].y]))}),C=h.length,m.length,D=Math.max.apply(Math,Object(L.a)(m.map(function(e){var t=e.x,n=e.y;return Math.max(t,n)}))),O=lt.K(D,k,y),x=lt.SquareRoot(O,f),j=lt.Vi(m,x),I=lt.Vij(h,j),M=0;M<C;M++)w.push(lt.V_i(g[M],I[M])),S.push(lt.P_i(v[M],w[M]));return t.abrupt("return",{P:S,LinkNodes:h});case 40:throw t.prev=40,t.t0=t.catch(24),new Error(t.t0);case 43:case"end":return t.stop()}},t,null,[[24,40]])}));return function(e,n,a){return t.apply(this,arguments)}}()}]),e}(),dt=function(e){function t(e){var n;return Object(v.a)(this,t),(n=Object(re.a)(this,Object(oe.a)(t).call(this,e))).state={},n}return Object(ie.a)(t,e),Object(b.a)(t,[{key:"viewForceInfo",value:function(e){return l.createElement(l.Fragment,null,l.createElement(Ne.a,{variant:"subtitle2"},"\u0421\u0438\u043b\u0430: ",e.value," H"),l.createElement(Ne.a,{variant:"subtitle2"},"\u0423\u0433\u043e\u043b: ",e.angle),l.createElement(Ce.a,null))}},{key:"viewFixationInfo",value:function(e){switch(e.fixation){case E.X:return l.createElement(l.Fragment,null,l.createElement(Ne.a,{variant:"subtitle2"},"\u0424\u0438\u043a\u0441\u0430\u0446\u0438\u044f \u043f\u043e \u043e\u0441\u0438 X"),l.createElement(Ce.a,null));case E.Y:return l.createElement(l.Fragment,null,l.createElement(Ne.a,{variant:"subtitle2"},"\u0424\u0438\u043a\u0441\u0430\u0446\u0438\u044f \u043f\u043e \u043e\u0441\u0438 Y"),l.createElement(Ce.a,null));case E.XY:return l.createElement(l.Fragment,null,l.createElement(Ne.a,{variant:"subtitle2"},"\u0424\u0438\u043a\u0441\u0430\u0446\u0438\u044f \u043f\u043e \u043e\u0441\u0438 X \u0438 Y"),l.createElement(Ce.a,null));default:return}}},{key:"viewInfo",value:function(e){var t=this.props,n=t.classes,a=t.onDelete;return q(e)?l.createElement(ot.a,{className:n.root},l.createElement(Ne.a,{variant:"h6",className:n.title},"\u0423\u0437\u0435\u043b ",e.name),e.forceX&&this.viewForceInfo(e.forceX),e.forceY&&this.viewForceInfo(e.forceY),this.viewFixationInfo(e),l.createElement("div",{className:n.btnGroup},l.createElement(it.a,{"aria-label":"Delete",onClick:function(){return a(e)}},l.createElement(ct.a,null)))):G(e)?l.createElement(ot.a,{className:n.root},l.createElement(Ne.a,{variant:"h6",className:n.title},"\u0421\u0442\u0435\u0440\u0436\u0435\u043d\u044c ",e.name),l.createElement(Ne.a,{variant:"subtitle2"},"\u0414\u043b\u0438\u043d\u0430: ",e.length||ut.getBeamLength(e)),l.createElement(Ce.a,null),l.createElement("div",{className:n.btnGroup},l.createElement(it.a,{"aria-label":"Delete",onClick:function(){return a(e)}},l.createElement(ct.a,null)))):void 0}},{key:"render",value:function(){var e=this.props.entity;return l.createElement(Fe,{anchor:"right",title:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u043e\u043c \u043e\u0431\u044a\u0435\u043a\u0442\u0435",btnIcon:l.createElement(st.a,null)},this.viewInfo(e),l.createElement(Ce.a,null))}}]),t}(l.PureComponent),mt=Object(ke.a)(function(e){return Object(Ee.a)({root:{padding:e.spacing(2)},title:{marginBottom:e.spacing(2)},btnGroup:{marginTop:e.spacing(2)}})})(dt),ft=n(398),ht=n(455),pt=n(444),vt=n(445),bt=n(446),gt=Object(ke.a)(function(e){return Object(Ee.a)({root:{position:"absolute",padding:e.spacing(1),bottom:e.spacing(2),left:"50%",transform:"translateX(-50%)",backgroundColor:Object(We.b)(e.palette.primary.light,.4),transition:e.transitions.create(["background-color","box-shadow","border"],{duration:e.transitions.duration.short}),"&:hover":{backgroundColor:e.palette.primary.light}},modsBtnGroup:{borderRadius:0,backgroundColor:"transparent"}})})(function(e){var t=e.onSelect,n=e.selected,a=e.classes,r=[{name:"\u041f\u0435\u0440\u0435\u043c\u0435\u0449\u0435\u043d\u0438\u0435",mod:s.move,icon:l.createElement(pt.a,null)},{name:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0443\u0437\u0435\u043b",mod:s.addNode,icon:l.createElement(vt.a,null)},{name:"\u0421\u043e\u0435\u0434\u0438\u043d\u0438\u0442\u044c \u0443\u0437\u043b\u044b",mod:s.addBeam,icon:l.createElement(bt.a,null)},{name:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",mod:s.delete,icon:l.createElement(ct.a,null)}];return l.createElement(ft.a,{className:a.root},l.createElement(ht.a,{value:n,exclusive:!0,onChange:function(e,n){return t(n)},size:"medium",className:a.modsBtnGroup},r.map(function(e){return l.createElement(Ae,{key:e.mod,value:e.mod,selected:e.mod===n,icon:e.icon,name:e.name})})))}),yt=n(207),Et=n(208),kt=function(e){function t(e){var n;return Object(v.a)(this,t),(n=Object(re.a)(this,Object(oe.a)(t).call(this,e))).stage=void 0,n.state={stageHeight:1500,stageWidth:2500,uiMode:s.none,selectedEntity:void 0,paintEntity:void 0},n.UIonClick=n.UIonClick.bind(Object(he.a)(n)),n.UIonDrag=n.UIonDrag.bind(Object(he.a)(n)),n.UIonMouseMove=n.UIonMouseMove.bind(Object(he.a)(n)),n.onKeyHandle=n.onKeyHandle.bind(Object(he.a)(n)),n.selectEntity=n.selectEntity.bind(Object(he.a)(n)),n.clearFarm=n.clearFarm.bind(Object(he.a)(n)),n.deleteEntity=n.deleteEntity.bind(Object(he.a)(n)),n.saveFarm=n.saveFarm.bind(Object(he.a)(n)),n.calculateFarm=n.calculateFarm.bind(Object(he.a)(n)),n.stage=l.createRef(),n}return Object(ie.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){var e=this.stage.current;if(e){var t=e.attrs.container.parentElement;t&&(t.scrollTop=(t.scrollHeight-t.offsetHeight)/2,t.scrollLeft=(t.scrollWidth-t.offsetWidth)/2)}}},{key:"UIonClick",value:function(e,t){var n=this.state,a=n.uiMode,r=n.paintEntity,o=this.props.calculation,i=e.target.getStage()===e.target;if(e.evt.preventDefault(),0===e.evt.button&&!o)switch(a){case s.none:i?this.setState({selectedEntity:void 0}):this.selectEntity(t);break;case s.addNode:if(i){var c=e.evt,l=c.layerX,u=c.layerY,d=X.cellX(l),m=X.cellX(u);this.props.addNode(d,m)}break;case s.addBeam:if(!i&&q(t)){var f=this.props.addBeam({x:t.x,y:t.y});if(G(f)){var h=this.props.connectBeamToNode(t,f,"start");G(h)?this.setState({paintEntity:h,uiMode:s.addBeamStart}):this.props.deleteEntity(f.id)}}break;case s.addBeamStart:!i&&q(t)&&G(r)&&this.props.connectBeamToNode(t,r,"end")&&this.setState({uiMode:s.addBeam,paintEntity:void 0});break;case s.delete:!i&&t&&this.deleteEntity(t)}i&&this.setState({selectedEntity:void 0})}},{key:"UIonMouseMove",value:function(e){if(!this.props.calculation){var t=this.state,n=t.uiMode,a=t.paintEntity,r=e.evt,o=r.layerX,i=r.layerY;switch(n){case s.addBeamStart:e.target.getStage()&&(a&&G(a)?this.props.moveBeam(a,o,i):this.setState({uiMode:s.addBeam}));break;case s.delete:var c=e.target.getStage();c===e.target&&(c.container().style.cursor="default")}}}},{key:"UIonDrag",value:function(e,t){if(!this.props.calculation)switch(this.state.uiMode){case s.move:if(q(t)&&e.evt.defaultPrevented){var n=e.evt,a=n.layerX,r=n.layerY;this.props.moveNode(t,X.cellX(a),X.cellY(r))}}}},{key:"onKeyHandle",value:function(e){switch(e.key){case"Escape":this.deletePaintEntity()}}},{key:"deletePaintEntity",value:function(){this.state.paintEntity&&this.props.deleteEntity(this.state.paintEntity.id),this.setState({paintEntity:void 0})}},{key:"deleteEntity",value:function(e){this.props.calculation||(this.state.selectedEntity&&this.state.selectedEntity.id===e.id&&this.setState({selectedEntity:void 0}),this.props.deleteEntity(e.id))}},{key:"selectEntity",value:function(e){this.props.calculation||e&&this.setState({selectedEntity:e})}},{key:"clearFarm",value:function(){window.confirm("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u0445\u043e\u043b\u0441\u0442?")&&this.props.defautlFarm()}},{key:"saveFarm",value:function(e){window.confirm("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0445\u043e\u043b\u0441\u0442 \u0432 \u043a\u044d\u0448?")&&this.props.saveFarm()}},{key:"calculateFarm",value:function(e){this.props.calculateFarm()}},{key:"setSelectedMode",value:function(e){this.props.calculation||(this.state.paintEntity&&this.props.deleteEntity(this.state.paintEntity.id),this.setState({uiMode:e||0,paintEntity:void 0}))}},{key:"render",value:function(){var e=this.state,t=e.stageHeight,n=e.stageWidth,a=e.uiMode,r=e.selectedEntity,o=this.props,i=o.classes,c=o.nodes,s=o.beams,u=o.calculation;return l.createElement(ot.a,{className:i.root},l.createElement(Et.a,{isActive:!0}),l.createElement(yt.a,{keyEventName:"keyup",keyValue:"Escape",onKeyHandle:this.onKeyHandle}),l.createElement(He,{hundleClear:this.clearFarm,hundleSave:this.saveFarm,hundleCalculate:this.calculateFarm,disabled:u}),l.createElement("div",{className:i.toolbar}),l.createElement(ot.a,{className:i.stageBox},l.createElement("div",{className:i.toolbar}),l.createElement(rt,{nodes:c,beams:s,selectedEntity:r,onSelect:this.selectEntity}),l.createElement(Ie,{onClick:this.UIonClick,onDrag:this.UIonDrag,onMouseMove:this.UIonMouseMove,stageHeight:t,stageWidth:n,nodes:c,beams:s,stage:this.stage,selectedEntity:r,uiMode:a}),l.createElement(mt,{entity:r,onDelete:this.deleteEntity})),l.createElement(gt,{selected:a,onSelect:this.setSelectedMode.bind(this)}))}}]),t}(l.Component),Ot=Object(ke.a)(function(e){return Object(Ee.a)({root:{width:"100%",height:"100%",overflow:"hidden",background:e.palette.background.default,display:"flex",flexDirection:"column"},stageBox:{display:"flex",flexGrow:1,overflow:"hidden"},toolbar:e.mixins.toolbar})})(kt),xt=function(e){function t(e){var n;return Object(v.a)(this,t),(n=Object(re.a)(this,Object(oe.a)(t).call(this,e))).addNode=function(e,t,a){var r=ut.addNode(n.state.nodes,Object(T.a)({},a,{x:e,y:t}));return r?(n.setState({nodes:[].concat(Object(L.a)(n.state.nodes),[r])}),r):null},n.addBeam=function(e){var t=ut.addBeam(n.state.beams,Object(T.a)({},e));return t?(n.setState({beams:[].concat(Object(L.a)(n.state.beams),[t])}),t):null},n.connectBeamToNode=function(e,t,a){var r=Object(T.a)({},e),o=Object(T.a)({},t);switch(a){case"start":return o.startConnectedNodeID=r.id,o.name=r.name+" - ",r.beamsID.push(o.id),ut.moveEntity(o,r.x,r.y),n.setState(function(e){return{nodes:e.nodes.map(function(e){return e.id===r.id?r:e}),beams:e.beams.map(function(e){return e.id===o.id?o:e})}}),o;case"end":return!n.state.beams.filter(function(e){return r&&r.beamsID.includes(e.id)}).find(function(e){return ut.findOldBeam(r,o,e)})&&(r.beamsID.push(o.id),o.endConnectedNodeID=r.id,o.name=o.name+r.name,ut.moveBeamEnd(o,r.x,r.y),n.setState(function(e){return{nodes:e.nodes.map(function(e){return e.id===r.id?r:e}),beams:e.beams.map(function(e){return e.id===o.id?o:e})}}),!0);default:return!1}},n.addForceToNode=function(e,t){var a=V(Object(T.a)({},t,{nodeID:e.id}));return 0===a.angle?e.forceX=a:e.forceY=a,n.setState(function(t){return{nodes:t.nodes.map(function(t){return e&&t.id===e.id?e:t})}}),a},n.moveNode=function(e,t,a){if(e.isStatic)return!1;if(!n.state.nodes.find(function(e){return e.x===t&&e.y===a})){var r=Object(T.a)({},e,{x:t,y:a});return n.state.beams.filter(function(e){return r&&r.beamsID.includes(e.id)}).forEach(function(e){if(r){var o=Object(T.a)({},e);o.startConnectedNodeID===r.id?ut.moveEntity(o,t,a):e.endConnectedNodeID===r.id&&ut.moveBeamEnd(o,t,a),n.setState(function(e){return{beams:e.beams.map(function(e){return e.id===o.id?o:e})}})}}),n.setState(function(e){return{nodes:e.nodes.map(function(e){return e.id===r.id?r:e})}}),!0}return!1},n.moveBeam=function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"end";return e=Object(T.a)({},e),"start"===r?ut.moveEntity(e,t,a):ut.moveBeamEnd(e,t,a),n.setState(function(t){return{beams:t.beams.map(function(t){return e&&t.id===e.id?e:t})}}),!0},n.deleteEntity=function(e){var t=Object(L.a)(n.state.nodes),a=Object(L.a)(n.state.beams),r=n.state.beams.find(function(t){return t.id===e})||n.state.nodes.find(function(t){return t.id===e});return q(r)?!r.isStatic&&(a.filter(function(e){return q(r)&&r.beamsID.includes(e.id)}).forEach(function(e){var n;q(r)&&((n=e.startConnectedNodeID===r.id?t.find(function(t){return t.id===e.endConnectedNodeID}):t.find(function(t){return t.id===e.startConnectedNodeID}))&&((n=Object(T.a)({},n)).beamsID=n.beamsID.filter(function(t){return t!==e.id}),t=t.map(function(e){return n&&e.id===n.id?n:e})),a=a.filter(function(t){return t.id!==e.id}))}),t=t.filter(function(e){return q(r)&&e.id!==r.id}),t=ut.setNodesName(t),a=ut.setBeamsName(a,t),n.setState({nodes:t,beams:a}),!0):!!G(r)&&([r.startConnectedNodeID,r.endConnectedNodeID].forEach(function(e){if(e&&e.length>0){var n=t.find(function(t){return t.id===e});n&&G(r)&&((n=Object(T.a)({},n)).beamsID=n.beamsID.filter(function(e){return!!r&&e!==r.id}),t=t.map(function(e){return n&&e.id===n.id?n:e}))}}),a=a.filter(function(e){return G(r)&&e.id!==r.id}),n.setState({nodes:t,beams:a}),!0)},n.state={nodes:[],beams:[],calculation:!1},n.defautlFarm=n.defautlFarm.bind(Object(he.a)(n)),n.saveFarm=n.saveFarm.bind(Object(he.a)(n)),n.calculateFarm=n.calculateFarm.bind(Object(he.a)(n)),n}return Object(ie.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("nodes"),t=localStorage.getItem("beams");if(e&&t){var n=JSON.parse(e),a=JSON.parse(t);this.setState({nodes:n,beams:a})}else this.defautlFarm()}},{key:"calculateFarm",value:function(){var e=Object(fe.a)(me.a.mark(function e(){var t,n,a,r,o,i;return me.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.nodes.filter(function(e){return 0!==e.beamsID.length||e.isStatic}),t=ut.sortNodes(t),n=ut.setBeamsName(this.state.beams,t),this.setState({nodes:t,beams:n}),e.prev=4,e.next=7,ut.calculateFarm(t,n);case 7:a=e.sent,r=a.P,o=a.LinkNodes,i=void 0===o?[]:o,r.forEach(function(e,t){var n=i[t].x+1+" - "+(i[t].y+1);console.log("".concat(t+1," - [").concat(n,"] P1: ").concat(e[0],"; P2: ").concat(e[1],"; "))}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4),console.error(e.t0);case 17:case"end":return e.stop()}},e,this,[[4,14]])}));return function(){return e.apply(this,arguments)}}()},{key:"defautlFarm",value:function(){var e={nodes:ut.createNodes([{x:1e3,y:1e3,fixation:E.XY},{x:1450,y:1e3,fixation:E.Y}],[{x:1150,y:1e3,angle:90,value:9e3}],[]),beams:[]},t=e.nodes,n=e.beams;localStorage.removeItem("nodes"),localStorage.removeItem("beams"),this.setState({nodes:t,beams:n})}},{key:"saveFarm",value:function(){var e=this.state,t=e.nodes,n=e.beams;localStorage.setItem("nodes",JSON.stringify(t)),localStorage.setItem("beams",JSON.stringify(n))}},{key:"render",value:function(){return l.createElement(Ot,Object.assign({},this.state,this))}}]),t}(l.Component),jt="/",It="/farm",wt=n(399),St=Object(wt.a)(function(e){return Object(Ee.a)({root:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start"},logo:{width:"20%",height:"20%"},title:{padding:40},descripton:{padding:40},btn:{}})})(function(e){var t=e.classes;return l.createElement("header",{className:t.root},l.createElement("img",{src:g.bridgeIcon_2,alt:"logo",className:t.logo}),l.createElement(Ne.a,{variant:"h3",className:t.title},g.title),l.createElement(Ne.a,{variant:"subtitle1",align:"center",className:t.descripton},g.description),l.createElement(we.a,{component:ne.b,to:It,variant:"contained",size:"large",color:"secondary"},"\u041f\u043e\u0435\u0445\u0430\u043b\u0438"))}),Nt=function(e){function t(){return Object(v.a)(this,t),Object(re.a)(this,Object(oe.a)(t).apply(this,arguments))}return Object(ie.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){var e=this.props.classes;return l.createElement("div",{className:e.root},l.createElement(St,null))}}]),t}(l.Component),Ct=Object(ke.a)(function(e){return Object(Ee.a)({root:{width:"100%",minHeight:"100%",display:"block",background:e.palette.background.default,padding:e.spacing(4)}})})(Nt),Dt=Object(f.b)(function(e){return{title:e.home.title}},function(e){return Object(Y.b)(Object(T.a)({},i),e)})(Ct),Mt=function(e){function t(){return Object(v.a)(this,t),Object(re.a)(this,Object(oe.a)(t).apply(this,arguments))}return Object(ie.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return l.createElement(l.Fragment,null,l.createElement(se.a,{htmlAttributes:{leng:"en"},titleTemplate:"Truss - %s",defaultTitle:g.title,link:[{rel:"shortcut icon",href:g.bridgeIcon_2},{rel:"image_src",href:g.airBridge},{rel:"stylesheet",href:"https://fonts.googleapis.com/css?family=Roboto:300,400,500"},{rel:"stylesheet",href:"https://fonts.googleapis.com/icon?family=Material+Icons"}],meta:[{charSet:"utf-8"},{name:"viewport",content:"minimum-scale=1, initial-scale=1, width=device-width, shrink-to-fit=no"},{name:"theme-color",content:"#000000"},{name:"description",content:g.description},{property:"og:type",content:"website"},{property:"og:title",content:g.title},{property:"og:image",content:g.airBridge},{property:"vk:image",content:g.airBridge},{property:"twitter:image",content:g.airBridge},{property:"og:url",content:g.url}]}),l.createElement(le.a,null),l.createElement(ue.a,{theme:k},l.createElement(ae.c,null,l.createElement(ae.a,{path:jt,component:Dt,exact:!0}),l.createElement(ae.a,{path:It,component:xt}))))}}]),t}(l.Component),Bt=(n(396),Object({NODE_ENV:"production",PUBLIC_URL:"https://web-usov.github.io/truss",REACT_APP_FARM_CALC_DEBUG:"false"}).REACT_APP_GHP||"false");m.a.render(u.a.createElement(f.a,{store:te},u.a.createElement(function(){return"true"===Bt?u.a.createElement(ne.a,null,u.a.createElement(Mt,null)):u.a.createElement(ae.b,{history:p},u.a.createElement(Mt,null))},null)),document.getElementById("root"))}},[[216,1,2]]]);
//# sourceMappingURL=main.51e84515.chunk.js.map