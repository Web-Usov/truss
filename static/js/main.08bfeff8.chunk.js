(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{108:function(e,t,n){},110:function(e,t,n){},111:function(e,t,n){},112:function(e,t,n){"use strict";n.r(t);var i={};n.r(i),n.d(i,"update",function(){return S});var r={};n.r(r),n.d(r,"setTitle",function(){return W});var a=n(0),o=n.n(a),c=n(31),s=n.n(c),u=n(21),d=n(8),l=(Object(d.a)(),n(14)),h=n(10),f=n(13),m=n(17),v=n(16),p=n(18),b=function(e){function t(e,n){var i;return Object(h.a)(this,t),(i=Object(m.a)(this,Object(v.a)(t).call(this,e))).beamsID=void 0,i.forcesID=void 0,i.beamsID=n?n.beamsID:[],i.forcesID=n?n.forcesID:[],i}return Object(p.a)(t,e),Object(f.a)(t,[{key:"connectBeam",value:function(e){this.beamsID.find(function(t){return t===e})||this.beamsID.push(e)}},{key:"deleteBeam",value:function(e){this.beamsID.filter(function(t){return t!==e})}},{key:"addForce",value:function(e){this.forcesID.find(function(t){return t===e})||this.forcesID.push(e)}},{key:"deleteForce",value:function(e){this.forcesID.filter(function(t){return t!==e})}}]),t}(function e(t){Object(h.a)(this,e),this.id=void 0,this.x=void 0,this.y=void 0,this.angle=void 0,this.name=void 0,this.newX=void 0,this.newY=void 0,this.id=Date.now(),this.x=t.x||0,this.y=t.y||0,this.angle=t.angle||0,this.name=t.name||this.id+"",this.newX=this.x,this.newY=this.y}),g=function(){function e(t){Object(h.a)(this,e),this.fixedNodes=void 0,this.forces=void 0,this.nodes=void 0,this.beams=void 0,this.time=void 0,this.nodes=t?t.nodes:[],this.fixedNodes=t?t.fixedNodes:[],this.forces=t?t.forces:[],this.beams=t?t.beams:[],this.time=Date.now()}return Object(f.a)(e,[{key:"addNode",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=new b({x:e,y:t,angle:n,name:i});this.nodes.push(r)}},{key:"deleteNode",value:function(e){this.nodes.filter(function(t){return t.id!==e})}},{key:"getNode",value:function(e){var t=this.nodes.find(function(t){return t.id===e});if(!t)throw Error("\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d \u0443\u0437\u0435\u043b \u0441 ID ".concat(e));return t}},{key:"getBeam",value:function(e){var t=this.beams.find(function(t){return t.id===e});if(!t)throw Error("\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d \u043b\u0443\u0447 \u0441 ID ".concat(e));return t}},{key:"getForce",value:function(e){var t=this.forces.find(function(t){return t.id===e});if(!t)throw Error("\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430 \u0441\u0438\u043b\u0430 \u0441 ID ".concat(e));return t}},{key:"getForcesOnNode",value:function(e){return this.forces.filter(function(t){return t.nodeID===e})}},{key:"getBeamsOnNode",value:function(e){var t=this.getNode(e);return this.beams.filter(function(e){return void 0!==t.beamsID.find(function(t){return t===e.id})})}},{key:"getNodesOnBeam",value:function(e){var t=this.getBeam(e),n=t.startConnectedNodeID,i=t.endConnectedNodeID;return[this.getNode(n),this.getNode(i)]}}]),e}(),y={workSpace:new g},O=n(22),k={title:"Hello, world!"},w=Object(l.b)({farm:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FARM_UPDATE":return{workSpace:new g(t.workSpace)};default:return e}},home:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TITLE":return Object(O.a)({},e,{title:t.title});default:return e}}}),j=Object(l.c)(w),E=n(26),N=n(19),D=n(33),I=n(23),x=(n(108),function(e){var t=e.node,n=e.dragNode;return a.createElement(a.Fragment,null,a.createElement(I.Text,{x:t.x-4*t.name.length,y:t.y-30,text:t.name,_useStrictMode:!0}),a.createElement(I.Circle,{key:t.id,radius:10,x:t.x,y:t.y,fill:"#ddd",stroke:"#888",strokeWidth:3,draggable:!0,_useStrictMode:!0,onDragMove:function(e){return n(t,e)}}))}),T=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(m.a)(this,Object(v.a)(t).call(this,e))).state={stageHeight:.75*window.innerHeight,stageWidth:.75*window.innerWidth,farm:e.workSpace},n.addNode=n.addNode.bind(Object(D.a)(n)),n}return Object(p.a)(t,e),Object(f.a)(t,[{key:"addNode",value:function(e){if(e.target.getStage()===e.target){var t=e.evt,n=t.layerX,i=t.layerY,r=this.props.update;this.state.farm.addNode(n,i,0),r(this.state.farm)}}},{key:"dragNode",value:function(e,t){var n=this.props.update,i=this.state.farm.getNode(e.id);i.x=t.evt.layerX,i.y=t.evt.layerY,n(this.state.farm)}},{key:"componentWillReceiveProps",value:function(e){console.log(e),this.setState({farm:e.workSpace})}},{key:"render",value:function(){var e=this,t=this.state,n=t.stageHeight,i=t.stageWidth,r=t.farm;return a.createElement("div",null,a.createElement(I.Stage,{height:n,width:i,className:"stage",style:{height:n+"px",width:i+"px"},onClick:this.addNode},a.createElement(I.Layer,{className:"layer"},r.nodes.map(function(t){return a.createElement(x,{key:t.id,node:t,dragNode:e.dragNode.bind(e)})}))))}}]),t}(a.Component),S=function(e){return{type:"FARM_UPDATE",workSpace:e}},C=Object(u.b)(function(e){return{workSpace:e.farm.workSpace}},function(e){return Object(l.a)(Object(O.a)({},i),e)})(T),F=n(53),A=n.n(F),_="/",B="/farm",M=function(e){function t(){return Object(h.a)(this,t),Object(m.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(f.a)(t,[{key:"_setTitle",value:function(){var e=this.props.title===k.title?"To Farm":k.title;this.props.setTitle(e+"")}},{key:"render",value:function(){return a.createElement("div",{className:"App"},a.createElement("header",{className:"App-header"},a.createElement("img",{src:A.a,className:"App-logo",alt:"logo"}),a.createElement("p",null,"TypeScript - pain first, then nice"),a.createElement(E.b,{to:B,className:"App-link"},this.props.title||"To Farm )"),a.createElement("button",{className:"btn",onClick:this._setTitle.bind(this)},"Change title")))}}]),t}(a.Component),W=function(e){return{type:"SET_TITLE",title:e}},H=Object(u.b)(function(e){return{title:e.home.title}},function(e){return Object(l.a)(Object(O.a)({},r),e)})(M),X=(n(110),function(e){function t(e){var n;return Object(h.a)(this,t),n=Object(m.a)(this,Object(v.a)(t).call(this,e)),document.title="Truss - \u0444\u0435\u0440\u043c\u0430 \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e",n}return Object(p.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return a.createElement("main",null,a.createElement(N.c,null,a.createElement(N.a,{path:_,component:H,exact:!0}),a.createElement(N.a,{path:B,component:C})))}}]),t}(a.Component));n(111);s.a.render(o.a.createElement(u.a,{store:j},o.a.createElement(function(){return o.a.createElement(E.a,null,o.a.createElement(X,null))},null)),document.getElementById("root"))},53:function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},55:function(e,t,n){e.exports=n(112)}},[[55,1,2]]]);
//# sourceMappingURL=main.08bfeff8.chunk.js.map