(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{129:function(e,t,n){e.exports=n(213)},212:function(e,t,n){},213:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"mainBackGround",function(){return y}),n.d(a,"node",function(){return E}),n.d(a,"staticNode",function(){return k}),n.d(a,"fixedNode",function(){return S}),n.d(a,"beam",function(){return O});var r={};n.r(r),n.d(r,"UIModes",function(){return c}),n.d(r,"getNodeColor",function(){return w}),n.d(r,"getNodeStorkeColor",function(){return I}),n.d(r,"getNodeStorkeWidth",function(){return x}),n.d(r,"getBeamColor",function(){return C}),n.d(r,"nodeMouseEnter",function(){return N}),n.d(r,"nodeMouseLeave",function(){return D}),n.d(r,"beamMouseEnter",function(){return M}),n.d(r,"beamMouseLeave",function(){return B});var i={};n.r(i),n.d(i,"defaultState",function(){return T}),n.d(i,"reducer",function(){return U});var o={};n.r(o),n.d(o,"setTitle",function(){return gt});var c,s=n(0),l=n.n(s),d=n(17),u=n.n(d),m=n(78),f=n(33),h=(Object(f.a)(),n(22)),b=n(16),p=n(37),g=n(122),v=Object(g.a)({palette:{primary:{dark:"#0A4467",main:"#1e779e",light:"#51A8D6"},secondary:{dark:"#a83e19",main:"#f15a24",light:"#F39B7C"},background:{default:"linear-gradient(35deg, #6863bf 0%, #067d93 50%, #e68a68 100%)"}}}),y="#09B4D3",E=v.palette.secondary.main,k=v.palette.secondary.light,S=v.palette.secondary.dark,O=v.palette.secondary.light,j=function(){function e(){Object(h.a)(this,e)}return Object(b.a)(e,null,[{key:"angleBePoints",value:function(e,t,n,a){return Math.atan2(-t+a,-e+n)/Math.PI}},{key:"lengthBePoints",value:function(e,t,n,a){return Math.sqrt(Math.pow(e-n,2)+Math.pow(t-a,2))}},{key:"cellX",value:function(e){return Math.round(e/p.UI_cellSize)*p.UI_cellSize}},{key:"cellY",value:function(e){return Math.round(e/p.UI_cellSize)*p.UI_cellSize}}]),e}();!function(e){e[e.none=0]="none",e[e.move=1]="move",e[e.addNode=2]="addNode",e[e.addBeam=3]="addBeam",e[e.addBeamStart=4]="addBeamStart",e[e.delete=5]="delete"}(c||(c={}));var w=function(e){return e.isStatic?e.isFixed?a.fixedNode:a.staticNode:a.node},I=function(e,t){switch(t){case c.move:return e.isStatic?v.palette.secondary.dark:v.palette.primary.light;case c.addBeam:case c.addBeamStart:return v.palette.primary.light;default:return v.palette.secondary.main}},x=function(e,t){switch(t){case c.move:return e.isStatic?0:2;case c.addBeam:case c.addBeamStart:return 2;default:return 0}},C=function(e){return a.beam},N=function(e,t,n){var a=e.target.getStage();switch(n){case c.delete:if(t.isStatic){a.container().style.cursor="default";break}a.container().style.cursor="pointer";break;case c.none:a.container().style.cursor="pointer";break;case c.addBeam:case c.addBeamStart:a.container().style.cursor="crosshair";break;case c.move:if(t.isStatic){a.container().style.cursor="default";break}a.container().style.cursor="move"}},D=function(e){var t=e.target.getStage();t&&(t.container().style.cursor="default")},M=function(e,t,n){var a=e.target.getStage();switch(n){case c.delete:case c.none:a.container().style.cursor="pointer"}},B=function(e){var t=e.target.getStage();t&&(t.container().style.cursor="default")},_=n(48),z=n(38),F=n(12),T={nodes:[],beams:[],forces:[]},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_NODE":var n=t.node;return Object(F.a)({},e,{nodes:[].concat(Object(z.a)(e.nodes),[n])});case"ADD_BEAM":var a=t.beam;return Object(F.a)({},e,{beams:[].concat(Object(z.a)(e.beams),[a])});case"ADD_FORCE":var r=t.force;return Object(F.a)({},e,{forces:[].concat(Object(z.a)(e.forces),[r])});case"EDIT_NODE":return Object(F.a)({},e,{nodes:e.nodes.map(function(e){return e.id===t.node.id?Object(F.a)({},e,t.node):e})});case"EDIT_BEAM":return Object(F.a)({},e,{beams:e.beams.map(function(e){return e.id===t.beam.id?Object(F.a)({},e,t.beam):e})});case"DELETE_ENTITY":return{beams:e.beams.filter(function(e){return e.id!==t.id}),nodes:e.nodes.filter(function(e){return e.id!==t.id}),forces:e.forces.filter(function(e){return e.id!==t.id})};default:return e}},L=n(44),X=n.n(L),W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.x,n=e.y,a=e.name,r=e.angle,i=e.id,o=e.newX,c=e.newY,s=e.type,l={id:i||X()(),x:t||0,y:n||0,angle:r||0,name:a||"",newX:o||t||0,newY:c||n||0,type:s||"entity"};return l.name=a||l.id,l},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.angle,n=e.nodeID,a=e.value,r=W(e);return Object(F.a)({},r,{type:"force",angle:t||0,nodeID:n||"",value:a||0})},H=function(e){return e&&"force"===e.type},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.length,n=e.startConnectedNodeID,a=e.endConnectedNodeID,r=e.endX,i=e.endY,o=W(e);return Object(F.a)({},o,{type:"beam",length:t||0,startConnectedNodeID:n,endConnectedNodeID:a,endX:r||o.x||0,endY:i||o.y||0})},A=function(e){return e&&"beam"===e.type},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.beamsID,n=e.forceX,a=e.forceY,r=e.isStatic,i=e.isFixed,o=W(e);return Object(F.a)({},o,{type:"node",beamsID:t||[],forceX:n,forceY:a,isStatic:r||!1,isFixed:i||!1})},R=function(e){return e&&"node"===e.type},K={title:"Hello, world!"},V=n(114),J=Object(_.c)({farm:i.reducer,home:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TITLE":return Object(F.a)({},e,{title:t.title});default:return e}}}),$=Object(_.d)(J,Object(_.a)(V.a)),q=n(53),Q=n(50),Z=n(25),ee=n(24),te=n(26),ne=n(18),ae=n(115),re=n(267),ie=n(262),oe=n(5),ce=n(28),se=p.UI_nodeSize,le=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(Z.a)(this,Object(ee.a)(t).call(this,e))).viewForce=n.viewForce.bind(Object(ne.a)(n)),n}return Object(te.a)(t,e),Object(b.a)(t,[{key:"shouldComponentUpdate",value:function(e){return e.node!==this.props.node||e.mode!==this.props.mode||e.selected!==this.props.selected}},{key:"viewForce",value:function(e){return s.createElement(s.Fragment,null,s.createElement(ce.Arrow,{points:[0,0,p.UI_cellSize,0],stroke:v.palette.grey[300],strokeWidth:se/3,shadowBlur:2,pointerLength:p.UI_cellSize/10,pointerWidth:p.UI_cellSize/10,hitStrokeWidth:2*se,rotation:e.value>0?e.angle:180+e.angle}),s.createElement(ce.Text,{x:0===e.angle?e.value>0?p.UI_cellSize/3:-p.UI_cellSize:p.UI_cellSize/3,y:90===e.angle?e.value>0?p.UI_cellSize/3:-p.UI_cellSize/2:-p.UI_cellSize/1.5,text:e.value+"H"}))}},{key:"viewFixation",value:function(e){return s.createElement(ce.Group,{x:0,y:0,rotation:e},s.createElement(ce.Line,{points:[0,0,0,p.UI_cellSize,-p.UI_cellSize/2,p.UI_cellSize,p.UI_cellSize/2,p.UI_cellSize],stroke:v.palette.grey[300],strokeWidth:se/4,shadowBlur:2}),s.createElement(ce.Circle,{radius:se/2,fill:v.palette.grey[500],x:0,y:p.UI_cellSize-se/1.7}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.onClick,a=t.mode,i=t.selected,o=t.node;return s.createElement(ce.Group,{x:o.x,y:o.y,_useStrictMode:!0,onClick:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return n(e,o)})},o.forceX&&this.viewForce(o.forceX),o.forceY&&this.viewForce(o.forceY),"x"===o.isFixed&&this.viewFixation(90),"y"===o.isFixed&&this.viewFixation(0),"xy"===o.isFixed&&this.viewFixation(90),"xy"===o.isFixed&&this.viewFixation(0),s.createElement(ce.Circle,{radius:se,x:0,y:0,fill:r.getNodeColor(o),shadowBlur:i?8:2,stroke:r.getNodeStorkeColor(o,a),strokeWidth:r.getNodeStorkeWidth(o,a),hitStrokeWidth:2*se}),s.createElement(ce.Text,{x:-se,y:-se/2-1,align:"center",fontSize:18,fill:"#fff",shadowBlur:8,fontFamily:"Trebuchet MS",width:2*se,verticalAlign:"middle",text:o.name}),s.createElement(ce.Circle,{radius:se,x:o.x-o.x,y:o.y-o.y,onDragEnd:function(e){e.target.to({x:0,y:0})},hitStrokeWidth:2*se,draggable:a===c.move&&!o.isStatic,onMouseEnter:function(e){return r.nodeMouseEnter(e,o,a)},onMouseLeave:function(e){return r.nodeMouseLeave(e)},onDragMove:function(t){return e.props.drag(t,o)}}))}}]),t}(s.Component),de=n(84),ue=function(e){function t(){return Object(h.a)(this,t),Object(Z.a)(this,Object(ee.a)(t).apply(this,arguments))}return Object(te.a)(t,e),Object(b.a)(t,[{key:"shouldComponentUpdate",value:function(e){var t=this.props,n=t.beam,a=t.mode,r=t.selected;return e.beam!==n||e.mode!==a||e.selected!==r}},{key:"render",value:function(){var e=this.props,t=e.onClick,n=e.mode,a=e.selected,i=e.beam,o=p.UI_beamSize;return s.createElement(de.Line,{points:[i.x,i.y,i.endX,i.endY],stroke:r.getBeamColor(i),strokeWidth:o,shadowBlur:a?8:2,hitStrokeWidth:4*o,onClick:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return t(e,i)}),onMouseEnter:function(e){return r.beamMouseEnter(e,i,n)},onMouseLeave:function(e){return r.beamMouseLeave(e)}})}}]),t}(s.Component),me=function(e){var t=e.widthCell,n=e.heightCell,a=e.heightBox,r=e.widthBox,i=r/t,o=a/n;return s.createElement(s.Fragment,null,function(){for(var e=[],n=0;n<i;n++)e.push(s.createElement(ce.Line,{points:[n*t,0,n*t,a],stroke:"#ddd",strokeWidth:1,key:n}));return e}(),function(){for(var e=[],t=0;t<o;t++)e.push(s.createElement(ce.Line,{points:[0,t*n,r,t*n],stroke:"#ddd",strokeWidth:1,key:t}));return e}())},fe=n(116),he=n.n(fe),be=Object(oe.a)(function(e){return Object(re.a)({root:{flexGrow:1,backgroundColor:"#fff"},stage:{backgroundColor:"#fff"}})})(function(e){var t=e.classes,n=e.stage,a=e.stageHeight,r=e.stageWidth,i=e.onClick,o=e.onMouseMove,c=e.onDrag,l=(e.forces,e.beams),d=e.nodes,u=e.uiMode,m=e.selectedEntity;return s.createElement(he.a,{className:t.root,autoHide:!0},s.createElement(ce.Stage,{height:a,width:r,style:{height:a,width:r},className:t.stage,onClick:i,onMouseMove:o,ref:n},s.createElement(ce.Layer,{className:"layer"},s.createElement(me,{heightCell:p.UI_cellSize,widthCell:p.UI_cellSize,heightBox:a,widthBox:r}),l.map(function(e){return s.createElement(ue,{key:e.id,beam:e,mode:u,onClick:i,selected:m===e})}),d.map(function(e){return s.createElement(le,{key:e.id,node:e,mode:u,drag:c,onClick:i,selected:m===e})}))))}),pe=n(242),ge=n(264),ve=n(79),ye=n(236),Ee=n(265),ke=n(237),Se=n(238),Oe=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(Z.a)(this,Object(ee.a)(t).call(this,e))).state={open:!1,viewTooltip:!1},n.switchDrawer=n.switchDrawer.bind(Object(ne.a)(n)),n}return Object(te.a)(t,e),Object(b.a)(t,[{key:"switchDrawer",value:function(){this.setState({open:!this.state.open,viewTooltip:!1})}},{key:"changeViewtooltip",value:function(e){this.setState({viewTooltip:e})}},{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=t.children,r=t.title,i=t.btnIcon,o=t.anchor,c=this.state,l=c.open,d=c.viewTooltip;return s.createElement(s.Fragment,null,s.createElement(ge.a,{className:n.drawer,variant:"persistent",open:l,anchor:o,classes:{paper:n.drawerPaper}},s.createElement("div",{className:n.toolbar}),s.createElement(ve.a,{variant:"body2",align:"center",className:n.title},r),s.createElement(ye.a,null),a),s.createElement(Ee.a,{title:r,open:void 0!==r&&d&&!l,onOpen:function(){return e.changeViewtooltip(!0)},onClose:function(){return e.changeViewtooltip(!1)}},s.createElement(ke.a,{style:{left:"left"===o?l?255:15:"auto",right:"right"===o?l?255:15:"auto"},color:"secondary",size:"medium",className:n.toogleIcon,onClick:this.switchDrawer},l?s.createElement(Se.a,null):i)))}}]),t}(s.PureComponent),je=Object(oe.a)(function(e){return Object(re.a)({drawer:{position:"relative"},drawerPaper:{width:240},toogleIcon:{position:"absolute",top:e.spacing(10),zIndex:e.zIndex.drawer+1},title:{padding:e.spacing(1)},toolbar:e.mixins.toolbar})})(Oe),we=n(4),Ie=n(239),xe=n(240),Ce=Object(oe.a)(function(e){return Object(re.a)({appBar:{zIndex:e.zIndex.drawer+1},logo:{marginRight:e.spacing(4),marginLeft:e.spacing(2),"& img":{width:50,height:"auto"}}})})(function(e){var t=e.classes,n=e.children,a=e.className,r=e.color,i=e.position,o=e.withLogo,c=void 0===o||o;return s.createElement(Ie.a,{position:i||"fixed",className:Object(we.a)(t.appBar,a),color:r||"primary"},s.createElement(xe.a,null,function(){if(c)return s.createElement(q.b,{to:"/",className:t.logo},s.createElement("img",{alt:"Logo Icon",src:p.bridgeIcon_2}))}(),n))}),Ne=n(71),De=n(119),Me=n(241),Be=n(14),_e=Object(oe.a)(function(e){return Object(re.a)({btn:{marginLeft:e.spacing(2),marginRight:e.spacing(2),borderRadius:"50% !important",border:"1px solid ".concat(Object(Be.b)(e.palette.action.active,.2)," !important"),transition:e.transitions.create(["background-color","box-shadow","border"],{duration:e.transitions.duration.short}),color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.light,"&$selected":{backgroundColor:e.palette.secondary.main,"&:hover":{backgroundColor:e.palette.secondary.dark}},"&:hover":{backgroundColor:e.palette.secondary.dark,"@media (hover: none)":{backgroundColor:e.palette.secondary.main},"&$disabled":{backgroundColor:e.palette.secondary.main}}},selected:{}})})(function(e){var t=e.selected,n=e.classes,a=e.value,r=e.name,i=e.icon,o=Object(De.a)(e,["selected","classes","value","name","icon"]);return s.createElement(Me.a,Object.assign({key:r,value:a,className:Object(we.a)(n.btn,Object(Ne.a)({},n.selected,t))},o),s.createElement(Ee.a,{title:r},i))}),ze=Object(oe.a)(function(e){return Object(re.a)({root:{},btn:{marginLeft:e.spacing(2),marginRight:e.spacing(2)},grow:{flexGrow:1}})})(function(e){var t=e.classes,n=e.hundleSave,a=void 0===n?function(e){alert("\u0411\u0443\u0435\u0434\u0435\u0442 \u0440\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u043e \u0432 \u0431\u0443\u0434\u0443\u0449\u0435\u043c")}:n,r=e.hundleClear,i=void 0===r?function(e){alert("\u0411\u0443\u0435\u0434\u0435\u0442 \u0440\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u043e \u0432 \u0431\u0443\u0434\u0443\u0449\u0435\u043c")}:r;return s.createElement(Ce,{className:t.root},s.createElement("div",{className:t.grow}),s.createElement(pe.a,{color:"secondary",variant:"contained",className:t.btn,onClick:a},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),s.createElement(pe.a,{color:"secondary",variant:"contained",className:t.btn,onClick:i},"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"))}),Fe=n(243),Te=n(244),Ue=n(245),Le=n(246),Xe=n(249),We=n(250),Ye=n(247),He=n(248),Pe=n(251),Ae=n(252),Ge=n(253),Re=n(254),Ke=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(Z.a)(this,Object(ee.a)(t).call(this,e))).state={open:!1,tabs:new Map},n.openTab=n.openTab.bind(Object(ne.a)(n)),n.viewListItem=n.viewListItem.bind(Object(ne.a)(n)),n}return Object(te.a)(t,e),Object(b.a)(t,[{key:"componentWillMount",value:function(){var e=this.state.tabs;e.set("\u0423\u0437\u043b\u044b",!1),e.set("\u0421\u0442\u0435\u0440\u0436\u043d\u0438",!1),this.setState({tabs:new Map(e)})}},{key:"openTab",value:function(e){var t=this.state.tabs;t.set(e,!t.get(e)),this.setState({tabs:new Map(t)})}},{key:"viewListItem",value:function(e,t,n){var a=this,i=this.props,o=i.selectedEntity,c=i.classes,l=i.onSelect,d=this.state.tabs;return s.createElement(s.Fragment,null,s.createElement(Fe.a,{button:!0,onClick:function(){return a.openTab(t)}},n&&s.createElement(Te.a,null,s.createElement(Ue.a,{badgeContent:e.length,color:"secondary"},n)),s.createElement(Le.a,{primary:t}),d.get(t)?s.createElement(Ye.a,null):s.createElement(He.a,null)),s.createElement(Xe.a,{in:d.get(t),timeout:"auto",unmountOnExit:!0},s.createElement(We.a,{component:"div",disablePadding:!0},e.map(function(e){return s.createElement(Fe.a,{button:!0,className:c.nested,key:e.id,selected:o===e,onClick:function(t){return l(e)}},R(e)&&s.createElement(Te.a,null,s.createElement(Pe.a,{style:{color:r.getNodeColor(e)}})),s.createElement(Le.a,{primary:e.name}))}))),s.createElement(ye.a,null))}},{key:"render",value:function(){var e=this.props,t=e.nodes,n=e.beams;return s.createElement(je,{anchor:"left",title:"\u0421\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0430 \u043f\u0440\u043e\u0435\u043a\u0442\u0430",btnIcon:s.createElement(Ae.a,null)},this.viewListItem(t,"\u0423\u0437\u043b\u044b",s.createElement(Ge.a,null)),this.viewListItem(n,"\u0421\u0442\u0435\u0440\u0436\u043d\u0438",s.createElement(Re.a,null)))}}]),t}(s.PureComponent),Ve=Object(oe.a)(function(e){return Object(re.a)({nested:{paddingLeft:e.spacing(6)}})})(Ke),Je=n(255),$e=n(256),qe=n(257),Qe=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(Z.a)(this,Object(ee.a)(t).call(this,e))).state={},n}return Object(te.a)(t,e),Object(b.a)(t,[{key:"getTypeStr",value:function(e){return R(e)?"\u0423\u0437\u0435\u043b":A(e)?"\u0421\u0442\u0435\u0440\u0436\u0435\u043d\u044c":"\u042d\u043b\u0435\u043c\u0435\u043d\u0442"}},{key:"viewInfo",value:function(e){var t=this.props,n=t.classes,a=t.onDelete;if(e)return s.createElement(ie.a,{className:n.root},s.createElement(ve.a,{className:n.subTitle,color:"textSecondary",gutterBottom:!0},this.getTypeStr(e)),s.createElement(ve.a,{variant:"h5",className:n.title},e.name),s.createElement(Je.a,{"aria-label":"Delete",onClick:function(){return a(e)}},s.createElement($e.a,null)))}},{key:"render",value:function(){var e=this.props.entity;return s.createElement(je,{anchor:"right",title:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u043e\u043c \u043e\u0431\u044a\u0435\u043a\u0442\u0435",btnIcon:s.createElement(qe.a,null)},this.viewInfo(e),s.createElement(ye.a,null))}}]),t}(s.PureComponent),Ze=Object(oe.a)(function(e){return Object(re.a)({root:{padding:e.spacing(2)},subTitle:{fontSize:14},title:{marginBottom:e.spacing(2)}})})(Qe),et=n(214),tt=n(266),nt=n(258),at=n(259),rt=n(260),it=Object(oe.a)(function(e){return Object(re.a)({root:{position:"absolute",padding:e.spacing(1),bottom:e.spacing(2),left:"50%",transform:"translateX(-50%)",backgroundColor:Object(Be.b)(e.palette.primary.light,.4),transition:e.transitions.create(["background-color","box-shadow","border"],{duration:e.transitions.duration.short}),"&:hover":{backgroundColor:e.palette.primary.light}},modsBtnGroup:{borderRadius:0,backgroundColor:"transparent"}})})(function(e){var t=e.onSelect,n=e.selected,a=e.classes,r=[{name:"\u041f\u0435\u0440\u0435\u043c\u0435\u0449\u0435\u043d\u0438\u0435",mod:c.move,icon:s.createElement(nt.a,null)},{name:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0443\u0437\u0435\u043b",mod:c.addNode,icon:s.createElement(at.a,null)},{name:"\u0421\u043e\u0435\u0434\u0438\u043d\u0438\u0442\u044c \u0443\u0437\u043b\u044b",mod:c.addBeam,icon:s.createElement(rt.a,null)},{name:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",mod:c.delete,icon:s.createElement($e.a,null)}];return s.createElement(et.a,{className:a.root},s.createElement(tt.a,{value:n,exclusive:!0,onChange:function(e,n){return t(n)},size:"medium",className:a.modsBtnGroup},r.map(function(e){return s.createElement(_e,{key:e.mod,value:e.mod,selected:e.mod===n,icon:e.icon,name:e.name})})))}),ot=n(120),ct=n.n(ot),st=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(Z.a)(this,Object(ee.a)(t).call(this,e))).stage=void 0,n.state={stageHeight:3e3,stageWidth:3e3,uiMode:c.none,selectedEntity:void 0,paintEntity:void 0},n.onClick=n.onClick.bind(Object(ne.a)(n)),n.onDrag=n.onDrag.bind(Object(ne.a)(n)),n.onMouseMove=n.onMouseMove.bind(Object(ne.a)(n)),n.onKeyHandle=n.onKeyHandle.bind(Object(ne.a)(n)),n._setStageSize=n._setStageSize.bind(Object(ne.a)(n)),n.selectEntity=n.selectEntity.bind(Object(ne.a)(n)),n.clearFarm=n.clearFarm.bind(Object(ne.a)(n)),n.deleteEntity=n.deleteEntity.bind(Object(ne.a)(n)),n.stage=s.createRef(),n}return Object(te.a)(t,e),Object(b.a)(t,[{key:"componentWillMount",value:function(){this._setStageSize()}},{key:"componentDidMount",value:function(){window.addEventListener("resize",this._setStageSize);var e=this.stage.current;if(e){var t=e.attrs.container.parentElement;t&&(t.scrollTop=(t.scrollHeight-t.offsetHeight)/2,t.scrollLeft=(t.scrollWidth-t.offsetWidth)/2)}}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this._setStageSize)}},{key:"onClick",value:function(e,t){var n=this.state,a=n.uiMode,r=n.paintEntity,i=e.target.getStage()===e.target;if(e.evt.preventDefault(),0===e.evt.button)switch(a){case c.none:i?this.setState({selectedEntity:void 0}):this.selectEntity(t);break;case c.addNode:if(i){var o=e.evt,s=o.layerX,l=o.layerY,d=j.cellX(s),u=j.cellX(l);this.props.addNode(d,u)}break;case c.addBeam:if(!i&&R(t)){var m=this.props.addBeam({x:t.x,y:t.y});if(A(m)){var f=this.props.connectBeamToNode(t,m,"start");console.log("PAM",f),A(f)?this.setState({paintEntity:f,uiMode:c.addBeamStart}):this.props.deleteEntity(m.id)}}break;case c.addBeamStart:!i&&R(t)&&A(r)&&this.props.connectBeamToNode(t,r,"end")&&this.setState({uiMode:c.addBeam,paintEntity:void 0});break;case c.delete:!i&&t&&this.deleteEntity(t)}i&&this.setState({selectedEntity:void 0})}},{key:"onMouseMove",value:function(e){var t=this.state,n=t.uiMode,a=t.paintEntity,r=e.evt,i=r.layerX,o=r.layerY;switch(n){case c.addBeamStart:e.target.getStage()&&(a&&A(a)?this.props.moveBeam(a,i,o):this.setState({uiMode:c.addBeam}));break;case c.delete:var s=e.target.getStage();s===e.target&&(s.container().style.cursor="default")}}},{key:"onDrag",value:function(e,t){switch(this.state.uiMode){case c.move:if(R(t)&&e.evt.defaultPrevented){var n=e.evt,a=n.layerX,r=n.layerY;this.props.moveNode(t,j.cellX(a),j.cellY(r))}}}},{key:"onKeyHandle",value:function(e){switch(e.key){case"Escape":this.deletePaintEntity()}}},{key:"setSelectedMode",value:function(e){this.state.paintEntity&&this.props.deleteEntity(this.state.paintEntity.id),this.setState({uiMode:e||0,paintEntity:void 0})}},{key:"_setStageSize",value:function(e){this.setState({stageHeight:1.5*window.innerHeight,stageWidth:1.5*window.innerWidth})}},{key:"selectEntity",value:function(e){e&&this.setState({selectedEntity:e})}},{key:"clearFarm",value:function(){window.confirm("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u0445\u043e\u043b\u0441\u0442?")&&this.props.defautlFarm()}},{key:"deletePaintEntity",value:function(){this.state.paintEntity&&this.props.deleteEntity(this.state.paintEntity.id),this.setState({paintEntity:void 0})}},{key:"deleteEntity",value:function(e){this.state.selectedEntity&&this.state.selectedEntity.id===e.id&&this.setState({selectedEntity:void 0}),this.props.deleteEntity(e.id)}},{key:"render",value:function(){var e=this.state,t=e.stageHeight,n=e.stageWidth,a=e.uiMode,r=e.selectedEntity,i=this.props,o=i.classes,c=i.nodes,l=i.beams,d=i.forces;return s.createElement(ie.a,{className:o.root},s.createElement(ct.a.FPSStats,{isActive:!0}),s.createElement(ae.a,{keyEventName:"keyup",keyValue:"Escape",onKeyHandle:this.onKeyHandle}),s.createElement(ze,{hundleClear:this.clearFarm}),s.createElement("div",{className:o.toolbar}),s.createElement(ie.a,{className:o.stageBox},s.createElement("div",{className:o.toolbar}),s.createElement(Ve,{nodes:c,beams:l,selectedEntity:r,onSelect:this.selectEntity}),s.createElement(be,{onClick:this.onClick,onDrag:this.onDrag,onMouseMove:this.onMouseMove,stageHeight:t,stageWidth:n,nodes:c,beams:l,forces:d,stage:this.stage,selectedEntity:r,uiMode:a}),s.createElement(Ze,{entity:r,onDelete:this.deleteEntity})),s.createElement(it,{selected:a,onSelect:this.setSelectedMode.bind(this)}))}}]),t}(s.Component),lt=Object(oe.a)(function(e){return Object(re.a)({root:{width:"100%",height:"100%",overflow:"hidden",background:e.palette.background.default,display:"flex",flexDirection:"column"},stageBox:{display:"flex",flexGrow:1,overflow:"hidden"},toolbar:e.mixins.toolbar})})(st),dt=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(Z.a)(this,Object(ee.a)(t).call(this,e))).addNode=function(e,t,a){if(n.state.nodes.length>12)return!1;if(n.state.nodes.find(function(n){return n.x===e&&n.y===t}))return!1;var r=X()();if(!r)return!1;var i=n.state.nodes.length+1+"",o=G(Object(F.a)({},a,{name:a&&a.name||i,id:r,x:e,y:t}));return n.setState({nodes:[].concat(Object(z.a)(n.state.nodes),[o])}),o},n.addBeam=function(e){if(n.state.beams.length>36)return!1;var t=X()();if(!t)return!1;var a=P(Object(F.a)({},e,{id:t}));return n.setState({beams:[].concat(Object(z.a)(n.state.beams),[a])}),a},n.addForce=function(e){var t=X()();if(!t)return!1;var a=Y(Object(F.a)({},e,{id:t}));return n.setState({forces:[].concat(Object(z.a)(n.state.forces),[a])}),a},n.connectBeamToNode=function(e,t,a){var r=G(e),i=P(t);switch(a){case"start":var o;return i.startConnectedNodeID=r.id,r.beamsID.push(i.id),i.x=r.x,i.y=r.y,n.setState(function(e){return{nodes:e.nodes.map(function(e){return e.id===r.id?r:e}),beams:e.beams.map(function(e){return e.id===i.id?i:e})}}),(o=console).log.apply(o,Object(z.a)(n.state.beams)),i;case"end":return!n.state.beams.filter(function(e){return r&&r.beamsID.includes(e.id)}).find(function(e){return r&&i&&(e.startConnectedNodeID===i.startConnectedNodeID&&e.endConnectedNodeID===r.id||e.startConnectedNodeID===r.id&&e.endConnectedNodeID===i.startConnectedNodeID||e.id===i.id&&e.startConnectedNodeID===r.id)})&&(r.beamsID.push(i.id),i.endConnectedNodeID=r.id,i.endX=r.x,i.endY=r.y,n.setState(function(e){return{nodes:e.nodes.map(function(e){return e.id===r.id?r:e}),beams:e.beams.map(function(e){return e.id===i.id?i:e})}}),!0);default:return!1}},n.addForceToNode=function(e,t){var a=Y(Object(F.a)({},t,{nodeID:e.id}));return 0===a.angle?e.forceX=a:e.forceY=a,n.setState(function(t){return{nodes:t.nodes.map(function(t){return e&&t.id===e.id?e:t}),forces:[].concat(Object(z.a)(t.forces),[a])}}),a},n.moveNode=function(e,t,a){if(e.isStatic)return!1;if(!n.state.nodes.find(function(e){return e.x===t&&e.y===a})){var r=G(Object(F.a)({},e,{x:t,y:a}));return n.state.beams.filter(function(e){return r&&r.beamsID.includes(e.id)}).forEach(function(e){if(r){var i=P(e);i.startConnectedNodeID===r.id?(i.x=t,i.y=a):e.endConnectedNodeID===r.id&&(i.endX=t,i.endY=a),n.setState(function(e){return{beams:e.beams.map(function(e){return e.id===i.id?i:e})}})}}),n.setState(function(e){return{nodes:e.nodes.map(function(e){return e.id===r.id?r:e})}}),!0}return!1},n.moveBeam=function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"end";return e=P(e),"start"===r?(e.x=t,e.y=a):(e.endX=t,e.endY=a),n.setState(function(t){return{beams:t.beams.map(function(t){return e&&t.id===e.id?e:t})}}),!0},n.deleteEntity=function(e){var t=n.state.beams.find(function(t){return t.id===e})||n.state.nodes.find(function(t){return t.id===e})||n.state.forces.find(function(t){return t.id===e});return R(t)?!t.isStatic&&(n.state.beams.filter(function(e){return R(t)&&t.beamsID.includes(e.id)}).forEach(function(e){var a;R(t)&&((a=e.startConnectedNodeID===t.id?n.state.nodes.find(function(t){return t.id===e.endConnectedNodeID}):n.state.nodes.find(function(t){return t.id===e.startConnectedNodeID}))&&((a=G(a)).beamsID=a.beamsID.filter(function(t){return t!==e.id}),n.setState(function(e){return{nodes:e.nodes.map(function(e){return a&&e.id===a.id?a:e})}})),n.setState(function(t){return{beams:t.beams.filter(function(t){return t.id!==e.id})}}))}),t.forceX&&n.setState(function(e){return{forces:e.forces.filter(function(e){return R(t)&&H(t.forceX)&&e.id!==t.forceX.id})}}),t.forceY&&n.setState(function(e){return{forces:e.forces.filter(function(e){return R(t)&&H(t.forceY)&&e.id!==t.forceY.id})}}),n.setState(function(e){return{nodes:e.nodes.filter(function(e){return R(t)&&e.id!==t.id}).map(function(e,t){return Object(F.a)({},e,{name:t+1+""})})}}),!0):!!A(t)&&([t.startConnectedNodeID,t.endConnectedNodeID].forEach(function(e){if(e&&e.length>0){var a=n.state.nodes.find(function(t){return t.id===e});a&&A(t)&&((a=G(a)).beamsID=a.beamsID.filter(function(e){return!!t&&e!==t.id}),n.setState(function(e){return{nodes:e.nodes.map(function(e){return a&&e.id===a.id?a:e})}}))}}),n.setState(function(e){return{beams:e.beams.filter(function(e){return A(t)&&e.id!==t.id})}}),!0)},n.state={nodes:[],beams:[],forces:[]},n.defautlFarm=n.defautlFarm.bind(Object(ne.a)(n)),n}return Object(te.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){this.defautlFarm()}},{key:"defautlFarm",value:function(){var e=function(){var e,t=[],n=[],a=G({x:1e3,y:560,isStatic:!0,isFixed:"xy",name:"1"});return t.push(a),a=G({x:1200,y:640,isStatic:!0,name:"2"}),e=Y({nodeID:a.id,value:100}),a.forceX=e,t.push(a),n.push(e),{n:t,b:[],f:n}}(),t=e.n,n=e.b,a=e.f;this.setState({nodes:t,beams:n,forces:a})}},{key:"render",value:function(){return s.createElement(lt,Object.assign({},this.state,this))}}]),t}(s.Component),ut="/",mt="/farm",ft=n(215),ht=Object(ft.a)(function(e){return Object(re.a)({root:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start"},logo:{width:"20%",height:"20%"},title:{padding:40},descripton:{padding:40},btn:{}})})(function(e){var t=e.classes;return s.createElement("header",{className:t.root},s.createElement("img",{src:p.bridgeIcon_2,alt:"logo",className:t.logo}),s.createElement(ve.a,{variant:"h3",className:t.title},p.title),s.createElement(ve.a,{variant:"subtitle1",align:"center",className:t.descripton},p.description),s.createElement(pe.a,{component:q.b,to:mt,variant:"contained",size:"large",color:"secondary"},"\u041f\u043e\u0435\u0445\u0430\u043b\u0438"))}),bt=function(e){function t(){return Object(h.a)(this,t),Object(Z.a)(this,Object(ee.a)(t).apply(this,arguments))}return Object(te.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){var e=this.props.classes;return s.createElement("div",{className:e.root},s.createElement(ht,null))}}]),t}(s.Component),pt=Object(oe.a)(function(e){return Object(re.a)({root:{width:"100%",minHeight:"100%",display:"block",background:e.palette.background.default,padding:e.spacing(4)}})})(bt),gt=function(e){return{type:"SET_TITLE",title:e}},vt=Object(m.b)(function(e){return{title:e.home.title}},function(e){return Object(_.b)(Object(F.a)({},o),e)})(pt),yt=n(121),Et=n.n(yt),kt=n(268),St=n(261),Ot=function(e){function t(){return Object(h.a)(this,t),Object(Z.a)(this,Object(ee.a)(t).apply(this,arguments))}return Object(te.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return s.createElement(s.Fragment,null,s.createElement(Et.a,{htmlAttributes:{leng:"en"},titleTemplate:"Truss - %s",defaultTitle:p.title,link:[{rel:"shortcut icon",href:p.bridgeIcon_2},{rel:"image_src",href:p.airBridge},{rel:"stylesheet",href:"https://fonts.googleapis.com/css?family=Roboto:300,400,500"},{rel:"stylesheet",href:"https://fonts.googleapis.com/icon?family=Material+Icons"}],meta:[{charSet:"utf-8"},{name:"viewport",content:"minimum-scale=1, initial-scale=1, width=device-width, shrink-to-fit=no"},{name:"theme-color",content:"#000000"},{name:"description",content:p.description},{property:"og:type",content:"website"},{property:"og:title",content:p.title},{property:"og:image",content:p.airBridge},{property:"vk:image",content:p.airBridge},{property:"twitter:image",content:p.airBridge},{property:"og:url",content:p.url}]}),s.createElement(kt.a,null),s.createElement(St.a,{theme:v},s.createElement(Q.c,null,s.createElement(Q.a,{path:ut,component:vt,exact:!0}),s.createElement(Q.a,{path:mt,component:dt}))))}}]),t}(s.Component);n(212);u.a.render(l.a.createElement(m.a,{store:$},l.a.createElement(function(){return l.a.createElement(q.a,null,l.a.createElement(Ot,null))},null)),document.getElementById("root"))},37:function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"url",function(){return b}),n.d(t,"title",function(){return p}),n.d(t,"description",function(){return g}),n.d(t,"favicon",function(){return v}),n.d(t,"UI_cellSize",function(){return y}),n.d(t,"UI_nodeSize",function(){return E}),n.d(t,"UI_beamSize",function(){return k});var a=n(113),r=n.n(a),i=n(93),o=n.n(i);n.d(t,"ogImage",function(){return o.a});var c=n(94),s=n.n(c);n.d(t,"bridgeIcon_1",function(){return s.a});var l=n(95),d=n.n(l);n.d(t,"bridgeIcon_2",function(){return d.a});var u=n(96),m=n.n(u);n.d(t,"airBridge",function(){return m.a});var f=n(97),h=n.n(f);n.d(t,"FixationIcon",function(){return h.a});var b=".",p="Truss - \u0444\u0435\u0440\u043c\u0430 \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e",g="\u0424\u0435\u0440\u043c\u0430 (farm \u0438\u043b\u0438 truss) \u2014 \u0441\u0442\u0435\u0440\u0436\u043d\u0435\u0432\u0430\u044f \u0441\u0438\u0441\u0442\u0435\u043c\u0430 \u0432 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0439 \u043c\u0435\u0445\u0430\u043d\u0438\u043a\u0435, \u043e\u0441\u0442\u0430\u044e\u0449\u0430\u044f\u0441\u044f \u0433\u0435\u043e\u043c\u0435\u0442\u0440\u0438\u0447\u0435\u0441\u043a\u0438 \u043d\u0435\u0438\u0437\u043c\u0435\u043d\u044f\u0435\u043c\u043e\u0439 \u043f\u043e\u0441\u043b\u0435 \u0437\u0430\u043c\u0435\u043d\u044b \u0435\u0451 \u0436\u0451\u0441\u0442\u043a\u0438\u0445 \u0443\u0437\u043b\u043e\u0432 \u0448\u0430\u0440\u043d\u0438\u0440\u043d\u044b\u043c\u0438.",v=r.a.resolve(e,"favicon.ico"),y=40,E=15,k=6}.call(this,"/")},93:function(e,t,n){e.exports=n.p+"static/media/ogImage.0619e300.png"},94:function(e,t,n){e.exports=n.p+"static/media/icon.68e274b2.png"},95:function(e,t,n){e.exports=n.p+"static/media/bridge.e53bced3.png"},96:function(e,t,n){e.exports=n.p+"static/media/airBridge.7d581a65.png"},97:function(e,t,n){e.exports=n.p+"static/media/fixation.9b63597e.svg"}},[[129,1,2]]]);
//# sourceMappingURL=main.720f6d88.chunk.js.map