{"version":3,"sources":["static/const.ts","static/images/ogImage.png","static/images/icon.png","static/images/bridge.png","static/images/airBridge.png","static/images/fixation.svg","utils/UI.ts","utils/history.ts","models/Farm/ModelNode.ts","static/colors.ts","utils/math.ts","store/farm/farmReducer.ts","store/farm/farmTypes.ts","models/Farm/ModelEntity.ts","models/Farm/ModelForce.ts","models/Farm/ModelBeam.ts","store/home/homeActions.ts","store/home/homeTypes.ts","store/home/homeReducer.ts","store/index.ts","pages/Farm/components/UIFarmEntities/UINode.tsx","pages/Farm/components/UIFarmEntities/UIBeam.tsx","pages/Farm/components/UIFarmEntities/UIGrid.tsx","pages/Farm/components/UIFarmEntities/UIStage.tsx","components/sidebar.tsx","components/appBar.tsx","components/myToggleButton.tsx","pages/Farm/components/UIHeader.tsx","pages/Farm/components/UITreePanel.tsx","models/Farm/FarmCalc.ts","models/Farm/Farm.ts","pages/Farm/components/UIEntityInfo.tsx","pages/Farm/components/UIToolPanel.tsx","pages/Farm/components/UIFarm.tsx","models/Farm/FarmFactory.ts","pages/Farm/index.ts","pages/Farm/FarmContainer.tsx","pages/Farm/_testFarm.ts","navigation/index.ts","pages/Home/components/homeHeader.tsx","pages/Home/home.tsx","pages/Home/index.ts","App.tsx","index.tsx"],"names":["__webpack_require__","r","__webpack_exports__","__dirname","d","str","UI","canvas","img","path__WEBPACK_IMPORTED_MODULE_0__","path__WEBPACK_IMPORTED_MODULE_0___default","n","_images_ogImage_png__WEBPACK_IMPORTED_MODULE_1__","_images_ogImage_png__WEBPACK_IMPORTED_MODULE_1___default","_images_icon_png__WEBPACK_IMPORTED_MODULE_2__","_images_icon_png__WEBPACK_IMPORTED_MODULE_2___default","_images_bridge_png__WEBPACK_IMPORTED_MODULE_3__","_images_bridge_png__WEBPACK_IMPORTED_MODULE_3___default","_images_airBridge_png__WEBPACK_IMPORTED_MODULE_4__","_images_airBridge_png__WEBPACK_IMPORTED_MODULE_4___default","_images_fixation_svg__WEBPACK_IMPORTED_MODULE_5__","_images_fixation_svg__WEBPACK_IMPORTED_MODULE_5___default","url","process","title","description","favicon","path","resolve","cellSize","MMinCell","koefOfNewPos","nodeSize","beamSize","koefOnGrid","sidebarWidth","width","height","ogImage","bridgeIcon_1","bridgeIcon_2","airBridge","FixationIcon","module","exports","p","UIModes","createBrowserHistory","NodeFixation","theme","createMuiTheme","palette","primary","dark","main","light","secondary","background","default","getNodeColor","node","isStatic","fixation","colors","fixedNode","staticNode","getNodeStorkeColor","mode","move","addBeam","addBeamStart","getNodeStorkeWidth","getBeamColor","beam","nodeMouseEnter","e","stage","target","getStage","delete","container","style","cursor","none","nodeMouseLeave","beamMouseEnter","beamMouseLeave","mainBackGround","MyMath","x1","y1","x2","y2","Math","atan2","PI","sqrt","pow","x","round","consts","y","a","b","rowsA","length","rowsB","colsA","colsB","result","Error","i","row","j","push","k","sum","MathJs","error","console","array","defaultState","nodes","beams","forces","reducer","state","arguments","undefined","action","type","Object","objectSpread","concat","toConsumableArray","force","map","item","id","filter","createEntity","props","name","angle","newX","newY","withNewPosition","entity","uuid","createForce","nodeID","value","createBeam","startConnectedNodeID","endConnectedNodeID","endX","endY","newEndX","newEndY","startForce","endForce","instanceOfBeam","object","createNode","beamsID","forceX","forceY","isFixed","None","instanceOfNode","setTitle","defaultHomeState","mainReducer","combineReducers","farm","FarmReducer","home","HomeReducer","createStore","applyMiddleware","thunk","size","UINode","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","refGroup","viewForce","bind","assertThisInitialized","React","nextProps","viewNewPos","selected","group","current","_this$props","to","Y","react","ReactKonva","points","stroke","grey","strokeWidth","shadowBlur","pointerLength","pointerWidth","hitStrokeWidth","rotation","text","radius","fill","_this2","_this$props2","onClick","opacity","_useStrictMode","ref","X","viewFixation","XY","YX","align","fontSize","fontFamily","verticalAlign","onDragEnd","draggable","onMouseEnter","onMouseLeave","onDragMove","drag","UIBeam","refLine","_this$props3","UIGrid","countOfX","widthBox","widthCell","countOfY","heightBox","heightCell","nextState","rows","index","key","columns","log","viewColumns","viewRows","withStyles","createStyles","root","backgroundColor","display","alignItems","justifyContent","boxShadow","shadows","borderRadius","_ref","classes","stageHeight","stageWidth","onMouseMove","onDrag","uiMode","selectedEntity","lib_default","autoHide","Box","className","UIFarmEntities_UIGrid","UIFarmEntities_UIBeam","UIFarmEntities_UINode","Sidebar","open","viewTooltip","switchDrawer","localState","localStorage","getItem","setState","setItem","flag","children","btnIcon","anchor","_this$state","Drawer","drawer","variant","paper","drawerPaper","toolbar","Typography","Divider","Tooltip","onOpen","changeViewtooltip","onClose","Fab","left","right","color","toogleIcon","Close","position","top","spacing","zIndex","padding","mixins","appBar","logo","marginRight","marginLeft","& img","_ref$withLogo","withLogo","AppBar","clsx","Toolbar","react_router_dom","alt","src","viewLogo","btn","border","fade","active","transition","transitions","create","duration","short","contrastText","&$selected","&:hover","@media (hover: none)","&$disabled","icon","other","objectWithoutProperties","ToggleButton","assign","defineProperty","grow","flexGrow","_ref$hundleSave","hundleSave","alert","_ref$hundleClear","hundleClear","_ref$hundleCalculate","hundleCalculate","_ref$disabled","disabled","Button","UITreePanel","tabs","Map","openTab","viewListItem","set","tab","get","entityArray","onSelect","ListItem","button","ListItemIcon","Badge","badgeContent","ListItemText","ExpandLess","ExpandMore","Collapse","in","timeout","unmountOnExit","List","component","disablePadding","nested","Brightness1","sort","sidebar","esm_List","GpsNotFixed","Timeline","paddingLeft","FarmCalc","createClass","_init","asyncToGenerator","regenerator_default","mark","_callee","NodeCoord","NodeV","Forces","LinkNodes","LinkLength","area","ModUpr","Kmest","Lambda0","Lambda","Kobs","IndexV","K","Va","Vi","Vij","V","P","N_Link","N_Nodes","N_DOF","_args","wrap","_context","prev","next","modUpr","forEach","Kmest_i","l_i","Lambda_i","Kobs_i","IndexV_i","max","apply","getDetMatrix","SquareRoot","V_i","P_i","farmCalcDebug","abrupt","stop","_x","_x2","_x3","_x4","_x5","length_i","mnoz","nodeCoordOfX","nodeCoordOfY","LTxL","_LTxL","augmnet1","augment2","Array","prototype","_ref2","nodeV1","nodeV2","n_dof","indexV","k_obs","t","A","B","_a","_b","s","signum","abs","l","SDSsum","nodeV","vi","q","linkNodes","vij","n_start","n_ends","multMatrxiV2","v","Farm","find","getBeamLength","checkingBeam","lengthBePoints","_beams","nodesMap","startNode","endNode","numsA","split","numA","Number","numsB","_nodes","setNodesName","setBeamsName","sortNodes","_calculate","_NodeMap","_nodeVindex","data","nums","init","sent","bufNodeMap","TextRow","TextRows","UIEntityInfo","UIEntityInfo_TextRow","onDelete","UIEntityInfo_TextRows","viewFixationInfo","btnGroup","IconButton","aria-label","Delete","NodeInfo","BeamInfo","Info","viewInfo","marginBottom","marginTop","bottom","transform","modsBtnGroup","mods","mod","ZoomOutMap","addNode","MyLocation","Power","Paper","ToggleButtonGroup","exclusive","onChange","myToggleButton","UIFarm","selectedEntityID","paintEntity","UIonClick","UIonDrag","UIonMouseMove","onKeyHandle","selectEntity","clearFarm","deleteEntity","saveFarm","calculateFarm","attrs","parentElement","scrollTop","scrollHeight","offsetHeight","scrollLeft","scrollWidth","offsetWidth","calculation","isEmptyPlace","evt","preventDefault","_e$evt","layerX","layerY","cellX","cellY","connectedBeam","connectBeamToNode","_this$state2","_e$evt2","moveBeam","defaultPrevented","_e$evt3","moveNode","deletePaintEntity","window","confirm","defautlFarm","_this$state3","calculated","react_stats","isActive","esm","keyEventName","keyValue","components_UIHeader","stageBox","components_UITreePanel","UIFarmEntities_UIStage","components_UIEntityInfo","components_UIToolPanel","setSelectedMode","overflow","flexDirection","FarmFactory","nodesJSON","beamsJSON","JSON","parse","_fixedNodes","_staticNodes","_node","FarmPage","_React$Component","FarmContainer","options","_beam","place","moveEntity","includes","findOldBeam","moveBeamEnd","addForceToNode","_y","_Farm$update","update","upNodes","upBeams","inherits","_FarmFactory$parse","_calculateFarm","_Farm$normalize","withNewPos","normalize","calculate","correctAfterCalc","t0","message","_farm","createNodes","removeItem","_farm2","firstPlacement","stringify","components_UIFarm","navPath","descripton","Link","Home","homeHeader","minHeight","connect","dispatch","bindActionCreators","homeActions","App","Helmet_default","htmlAttributes","leng","titleTemplate","defaultTitle","link","rel","href","meta","charSet","content","property","CssBaseline","ThemeProvider","react_router","exact","ReactDOM","render","react_default","createElement","es","store","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.9ec48784.chunk.js","sourcesContent":["// import favicon from './images/favicon.ico'\r\nimport path from 'path'\r\nimport ogImage from './images/ogImage.png'\r\nimport bridgeIcon_1 from './images/icon.png'\r\nimport bridgeIcon_2 from './images/bridge.png'\r\nimport airBridge from './images/airBridge.png'\r\nimport FixationIcon from './images/fixation.svg'\r\n\r\n// Strings\r\nexport const str = {\r\n    url: process.env.PUBLIC_URL,\r\n    title: \"Truss - ферма для каждого\",\r\n    description: \"Ферма (farm или truss) — стержневая система в строительной механике, остающаяся геометрически неизменяемой после замены её жёстких узлов шарнирными.\",\r\n    favicon: path.resolve(__dirname, \"favicon.ico\")\r\n}\r\n\r\n// UI\r\nexport const UI = {\r\n    cellSize: 45,\r\n    MMinCell: 200,\r\n    koefOfNewPos:100,\r\n    nodeSize: 0,\r\n    beamSize: 0,\r\n    koefOnGrid: 0,\r\n    sidebarWidth: 240,\r\n\r\n}\r\nUI.nodeSize = UI.cellSize / 3\r\nUI.beamSize = UI.cellSize / 7\r\nUI.koefOnGrid = UI.MMinCell / UI.cellSize\r\n\r\nexport const canvas = {\r\n    width: 2500,\r\n    height: 1500\r\n}\r\n\r\n\r\n// Images\r\nexport const img = {\r\n    ogImage,\r\n    bridgeIcon_1,\r\n    bridgeIcon_2,\r\n    airBridge,\r\n    FixationIcon\r\n}","module.exports = __webpack_public_path__ + \"static/media/ogImage.0619e300.png\";","module.exports = __webpack_public_path__ + \"static/media/icon.68e274b2.png\";","module.exports = __webpack_public_path__ + \"static/media/bridge.e53bced3.png\";","module.exports = __webpack_public_path__ + \"static/media/airBridge.7d581a65.png\";","module.exports = __webpack_public_path__ + \"static/media/fixation.dd261ca6.svg\";","import { FarmNode } from \"src/models/Farm/ModelNode\";\r\nimport { colors } from \"src/static\";\r\nimport { Beam } from \"src/models/Farm/ModelBeam\";\r\nimport Konva from \"konva\";\r\nimport { Stage } from \"konva/types/Stage\";\r\nimport { createMuiTheme } from \"@material-ui/core\";\r\n\r\nexport enum UIModes {\r\n    none,\r\n    move,\r\n    addNode,\r\n    addBeam,\r\n    addBeamStart,\r\n    delete\r\n}\r\nexport const theme = createMuiTheme({\r\n    palette: {\r\n        primary: {\r\n            dark:\"#0A4467\",\r\n            main: \"#1e779e\",\r\n            light:'#51A8D6'\r\n        },\r\n        secondary: {\r\n            dark: \"#a83e19\",\r\n            main: \"#f15a24\",\r\n            light: \"#F39B7C\",\r\n            // light:\"#f0965d\"\r\n        },\r\n        background:{\r\n            default:'linear-gradient(35deg, #6863bf 0%, #067d93 50%, #e68a68 100%)'\r\n        }  \r\n        \r\n    },\r\n});\r\nexport const getNodeColor = (node: FarmNode):string => {\r\n    \r\n    if (node.isStatic) {\r\n        if (node.fixation) return colors.fixedNode\r\n        return colors.staticNode\r\n    }\r\n    return colors.node\r\n}\r\nexport const getNodeStorkeColor = (node: FarmNode, mode : UIModes):string => {\r\n    switch (mode) {\r\n        case UIModes.move: {\r\n            if (node.isStatic) return theme.palette.secondary.dark\r\n            return theme.palette.primary.light\r\n        }\r\n        case UIModes.addBeam:\r\n        case UIModes.addBeamStart: {\r\n            return theme.palette.primary.light\r\n        }\r\n        default:\r\n            return theme.palette.secondary.main\r\n    }\r\n}\r\nexport const getNodeStorkeWidth = (node: FarmNode, mode : UIModes): number =>  {\r\n    switch (mode) {\r\n        case UIModes.move: {\r\n            if (node.isStatic) return 0\r\n            return 2\r\n        }\r\n        case UIModes.addBeam:\r\n        case UIModes.addBeamStart: {\r\n            return 2\r\n        }\r\n        default:\r\n            return 0\r\n    }\r\n}\r\n\r\nexport const getBeamColor = (beam : Beam) : string => {\r\n    return colors.beam\r\n}\r\n\r\n\r\nexport const nodeMouseEnter = (e: Konva.KonvaEventObject<MouseEvent>, node:FarmNode, mode: UIModes):void => {\r\n    const stage: typeof Stage & Konva.Stage = e.target.getStage()\r\n    switch (mode) {\r\n        case UIModes.delete:\r\n            if (node.isStatic) {\r\n                stage.container().style.cursor = 'default'\r\n                break\r\n            }\r\n            stage.container().style.cursor = 'pointer'\r\n            break\r\n        case UIModes.none: {\r\n            stage.container().style.cursor = 'pointer'\r\n            break;\r\n        }\r\n\r\n        case UIModes.addBeam:\r\n        case UIModes.addBeamStart: {\r\n            stage.container().style.cursor = 'crosshair'\r\n            break\r\n        }\r\n        case UIModes.move: {\r\n            if (node.isStatic) {\r\n                stage.container().style.cursor = 'default'\r\n                break\r\n            }\r\n            stage.container().style.cursor = 'move'\r\n            break\r\n        }\r\n\r\n        default: {\r\n            break;\r\n        }\r\n    }\r\n\r\n}\r\nexport const nodeMouseLeave = (e: Konva.KonvaEventObject<MouseEvent>):void => {\r\n    const stage: typeof Stage & Konva.Stage = e.target.getStage()\r\n    if (stage) stage.container().style.cursor = 'default'\r\n}\r\n\r\nexport const beamMouseEnter = (e: Konva.KonvaEventObject<MouseEvent>, beam:Beam, mode: UIModes) :void =>  {\r\n    const stage: typeof Stage & Konva.Stage = e.target.getStage()\r\n\r\n    switch (mode) {\r\n        case UIModes.delete:\r\n        case UIModes.none: {\r\n            stage.container().style.cursor = 'pointer'\r\n            break\r\n        }\r\n\r\n        default: {\r\n            break\r\n        }\r\n    }\r\n\r\n}\r\nexport const beamMouseLeave = (e: Konva.KonvaEventObject<MouseEvent>) :void => {\r\n    const stage: typeof Stage & Konva.Stage = e.target.getStage()\r\n    if (stage) stage.container().style.cursor = 'default'\r\n}","import {createBrowserHistory} from 'history';\r\n\r\nexport default createBrowserHistory();","import { IEntity, Entity, createEntity } from './ModelEntity';\r\nimport { Force } from './ModelForce';\r\n\r\nexport enum NodeFixation {\r\n    None = 0,\r\n    X = 1,\r\n    Y = 2,\r\n    XY = 3,\r\n    YX = XY\r\n\r\n}\r\nexport interface INode extends IEntity {\r\n    beamsID?: string[]\r\n    forceX?: Force,\r\n    forceY?: Force,\r\n    isStatic?: boolean\r\n    fixation?: NodeFixation\r\n}\r\n\r\nexport interface FarmNode extends Entity {\r\n    beamsID: string[];\r\n    forceX: Force | undefined\r\n    forceY: Force | undefined\r\n    isStatic: boolean\r\n    fixation: NodeFixation\r\n}\r\n\r\nexport const createNode = (props: INode = {}): FarmNode => {\r\n    const { beamsID, forceX, forceY, isStatic, fixation: isFixed } = props\r\n    const entity = createEntity(props)\r\n    const node: FarmNode = {\r\n        ...entity,\r\n        type: \"node\",\r\n        beamsID: beamsID || [],\r\n        forceX: forceX,\r\n        forceY: forceY,\r\n        isStatic: isStatic || false,\r\n        fixation: isFixed || NodeFixation.None\r\n    }\r\n    return node\r\n}\r\nexport const instanceOfNode = (object: any): object is FarmNode => object && object.type === 'node'","import { theme } from \"src/utils/UI\";\r\n\r\nexport const mainBackGround = \"#09B4D3\"\r\n\r\nexport const node = theme.palette.secondary.main\r\nexport const staticNode = theme.palette.secondary.dark\r\nexport const fixedNode = theme.palette.secondary.dark\r\n\r\nexport const beam = theme.palette.secondary.light","import { consts } from \"src/static\";\r\nimport * as MathJs from 'mathjs'\r\n\r\nclass MyMath {\r\n    static angleBePoints(x1: number, y1: number, x2: number, y2: number): number {\r\n        return Math.atan2(-y1 + y2, -x1 + x2) / (Math.PI)\r\n    }\r\n\r\n    static lengthBePoints(x1: number, y1: number, x2: number, y2: number): number {\r\n        return Math.sqrt(Math.pow(x1 - x2, 2) + Math.pow(y1 - y2, 2))\r\n    }\r\n\r\n    static cellX(x: number): number {\r\n        return Math.round(x / consts.UI.cellSize) * consts.UI.cellSize\r\n    }\r\n    static cellY(y: number): number {\r\n        return Math.round(y / consts.UI.cellSize) * consts.UI.cellSize\r\n    }\r\n    static signum(x: number) {\r\n        if (x > 0) return 1\r\n        else if (x < 0) return -1\r\n        else return 0\r\n    }\r\n    static multMatrxi(a: number[][], b: number[][]) {\r\n        const rowsA = a.length\r\n        const rowsB = b.length\r\n        const colsA = a[0].length\r\n        const colsB = b[0].length\r\n        const result: number[][] = []\r\n        if (colsA !== rowsB) throw new Error(\"Размерность матриц не позволяет переумножить их\")\r\n\r\n        for (let i = 0; i < rowsA; i++) {\r\n            const row: number[] = []\r\n            for (let j = 0; j < colsB; j++) {\r\n                row.push(0)\r\n            }\r\n            result.push(row)\r\n        }\r\n        for (let k = 0; k < colsB; k++) {\r\n            for (let i = 0; i < rowsA; i++) {\r\n                let sum = 0\r\n                for (let j = 0; j < rowsB; j++)\r\n                    sum += a[i][j] + b[j][k]\r\n                result[i][k] = sum\r\n            }\r\n        }\r\n        // console.log(result);\r\n        return result\r\n\r\n    }\r\n    static multMatrxiV2(a: number[][], b: number[][]) : number[][]{\r\n        let result: number[][] = []\r\n        try {\r\n            result = (MathJs.multiply(a,b) as number[][])\r\n            \r\n        } catch (error) {\r\n            console.error(\"multMatrxiV2:\", error);\r\n        }        \r\n        return result\r\n    }\r\n    static getDetMatrix(array:number[][]) : number{\r\n        const d = MathJs.det(array)        \r\n        return d\r\n    }\r\n}\r\n\r\n\r\nexport default MyMath","\r\nimport * as FarmTypes from './farmTypes'\r\nimport { Beam } from 'src/models/Farm/ModelBeam';\r\nimport { Force } from 'src/models/Farm/ModelForce';\r\nimport { FarmNode } from 'src/models/Farm/ModelNode';\r\n\r\nexport interface IFarmStore {\r\n    nodes:FarmNode[],\r\n    beams:Beam[],\r\n    forces:Force[]\r\n}\r\n\r\nexport const defaultState: IFarmStore = {\r\n    nodes:[],\r\n    beams:[],\r\n    forces:[]\r\n}\r\n\r\nexport const reducer = (state: IFarmStore = defaultState, action: FarmTypes.FarmActions): IFarmStore => {\r\n    switch (action.type) {\r\n        // Add\r\n        case FarmTypes.ADD_NODE : {\r\n            const {node} = action\r\n            return {\r\n                ...state,\r\n                nodes : [\r\n                    ...state.nodes,\r\n                    node\r\n                ]\r\n            }\r\n            \r\n        }\r\n        case FarmTypes.ADD_BEAM : {\r\n            const {beam} = action\r\n            return {\r\n                ...state,\r\n                beams : [\r\n                    ...state.beams,\r\n                    beam\r\n                ]\r\n            }            \r\n        }\r\n        case FarmTypes.ADD_FORCE : {\r\n            const {force} = action\r\n            return {\r\n                ...state,\r\n                forces : [\r\n                    ...state.forces,\r\n                    force\r\n                ]\r\n            }            \r\n        }\r\n        // Edit\r\n        case FarmTypes.EDIT_NODE : {\r\n            return {\r\n                ...state,\r\n                nodes : state.nodes.map(item => {\r\n                    if(item.id === action.node.id){      \r\n                        // const node : Node = {\r\n                        //     ...item,\r\n                        //     ...action.node\r\n                        // }\r\n                        return {\r\n                                ...item,\r\n                                ...action.node\r\n                            }\r\n                    }\r\n                    return item\r\n                })\r\n            }            \r\n        }\r\n        case FarmTypes.EDIT_BEAM : {\r\n            return {\r\n                ...state,\r\n                beams : state.beams.map(item => {\r\n                    if(item.id === action.beam.id){ \r\n                        return {\r\n                            ...item,\r\n                            ...action.beam\r\n                        }   \r\n                    }\r\n                    return item\r\n                })\r\n            }            \r\n        }\r\n        // Delete\r\n        case FarmTypes.DELETE_ENTITY : {\r\n            return {\r\n                beams : state.beams.filter(item => item.id !== action.id),\r\n                nodes : state.nodes.filter(item => item.id !== action.id),\r\n                forces : state.forces.filter(item => item.id !== action.id),\r\n            }            \r\n        }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\n","import { Action } from \"redux\";\r\nimport {  Beam } from \"src/models/Farm/ModelBeam\";\r\nimport {  FarmNode } from \"src/models/Farm/ModelNode\";\r\nimport { Force } from \"src/models/Farm/ModelForce\";\r\n\r\nexport const DELETE_EN = \"DELETE_EN\"\r\nexport const ADD_NODE = \"ADD_NODE\"\r\nexport const ADD_BEAM = \"ADD_BEAM\"\r\nexport const ADD_FORCE = \"ADD_FORCE\"\r\nexport const DELETE_ENTITY = \"DELETE_ENTITY\"\r\nexport const EDIT_NODE = \"EDIT_NODE\"\r\nexport const EDIT_BEAM = \"EDIT_BEAM\"\r\n\r\n// Add\r\nexport interface ActionAddNode extends Action {    \r\n    type: typeof ADD_NODE,\r\n    node:FarmNode\r\n}\r\nexport interface ActionAddBeam extends Action {    \r\n    type: typeof ADD_BEAM,\r\n    beam:Beam\r\n}\r\nexport interface ActionAddForce extends Action {    \r\n    type: typeof ADD_FORCE,\r\n    force:Force\r\n}\r\n// Delete\r\nexport interface ActionDeleteEntity extends Action {    \r\n    type: typeof DELETE_ENTITY,\r\n    id:string\r\n}\r\n// Edit\r\nexport interface ActionEditNode extends Action {    \r\n    type: typeof EDIT_NODE,\r\n    node:FarmNode\r\n}\r\nexport interface ActionEditBeam extends Action {    \r\n    type: typeof EDIT_BEAM,\r\n    beam:Beam\r\n}\r\n\r\nexport type FarmActions = (\r\n    ActionAddNode | \r\n    ActionAddBeam |\r\n    ActionAddForce |\r\n    ActionDeleteEntity |\r\n    ActionEditNode | \r\n    ActionEditBeam\r\n);","import uuid from 'uuid'\r\n\r\nexport interface IEntity {\r\n    id?: string\r\n    x?: number\r\n    y?: number\r\n    angle?: number\r\n    name?: string\r\n    newX?: number\r\n    newY?: number\r\n    type?:'entity' | 'node' | 'beam' | 'force',\r\n    withNewPosition?: boolean\r\n}\r\nexport interface Entity {    \r\n    id: string\r\n    x: number;\r\n    y: number;\r\n    angle: number;\r\n    name: string;\r\n    newX: number;\r\n    newY: number;\r\n    type:'entity' | 'node' | 'beam' | 'force',\r\n    withNewPosition:boolean\r\n}\r\n\r\nexport const createEntity = (props:IEntity = {}) :Entity => {\r\n    const { x, y, name, angle, id, newX, newY, type, withNewPosition } = props\r\n    const entity : Entity =  {\r\n        id: id || uuid(),\r\n        x: x || 0,\r\n        y: y || 0,\r\n        angle: angle || 0,\r\n        name: name || \"\",\r\n        newX: newX || x || 0,\r\n        newY: newY || y || 0,\r\n        type:type || 'entity',\r\n        withNewPosition: withNewPosition || false\r\n    }\r\n    entity.name = name || entity.id\r\n    return entity\r\n\r\n}\r\nexport const instanceOfEntity = (object: any): object is Entity => object && object.type === 'entity';","import { IEntity, Entity, createEntity } from \"./ModelEntity\";\r\n\r\nexport interface IForce extends IEntity {\r\n    value?: number,\r\n    angle?: 0 | 90,\r\n    nodeID?: string\r\n}\r\n\r\nexport interface Force extends Entity {\r\n    value: number\r\n    angle: 0 | 90\r\n    nodeID: string\r\n}\r\nexport const createForce = (props: IForce = {}): Force => {\r\n    const {  angle, nodeID, value } = props\r\n    const entity = createEntity(props)\r\n    const force : Force =  {\r\n        ...entity,\r\n        type:\"force\",\r\n        angle: angle || 0,\r\n        nodeID: nodeID || \"\",\r\n        value: value || 0\r\n    }\r\n    return force\r\n}\r\nexport const instanceOfForce = (object: any): object is Force => object && object.type === 'force';","import { IEntity, Entity, createEntity } from \"./ModelEntity\";\r\n\r\nexport interface IBeam extends IEntity {\r\n    length?: number\r\n    startConnectedNodeID?: string\r\n    endConnectedNodeID?: string\r\n    endX?: number,\r\n    endY?: number,\r\n    newEndX?:number,\r\n    newEndY?:number,\r\n    startForce?:number,\r\n    endForce?:number\r\n}\r\n\r\nexport interface Beam extends Entity {\r\n    length: number\r\n    startConnectedNodeID: string \r\n    endConnectedNodeID: string \r\n    endX: number\r\n    endY: number\r\n    newEndX:number,\r\n    newEndY:number,\r\n    startForce:number,\r\n    endForce:number\r\n}\r\nexport const createBeam = (props: IBeam = {}): Beam => {\r\n    const { length, startConnectedNodeID, endConnectedNodeID, endX, endY,newEndX,newEndY,startForce, endForce } = props\r\n    const entity = createEntity(props)\r\n    const bram: Beam = {\r\n        ...entity,\r\n        type: \"beam\",\r\n        length: length || 0,\r\n        startConnectedNodeID: startConnectedNodeID || \"\",\r\n        endConnectedNodeID: endConnectedNodeID || \"\",\r\n        endX: endX || entity.x || 0,\r\n        endY: endY || entity.y || 0,\r\n        newEndX: newEndX || endX || entity.x || 0,\r\n        newEndY: newEndY || endY || entity.y || 0,\r\n        startForce:startForce || 0,\r\n        endForce:endForce || 0,\r\n    }\r\n    return bram\r\n}\r\n\r\n\r\nexport const instanceOfBeam = (object: any): object is Beam => object && object.type === 'beam';\r\n","import { HomeActions, SET_TITLE } from \"./homeTypes\";\r\n\r\nexport const setTitle = (title :string) : HomeActions => ({\r\n    type:SET_TITLE,\r\n    title\r\n})","import { Action } from \"redux\";\r\n\r\nexport const SET_TITLE = 'SET_TITLE'\r\n\r\nexport interface IActionHomeSetTitle extends Action {\r\n    type: typeof SET_TITLE,\r\n    title : string,\r\n}\r\n\r\nexport type HomeActions = IActionHomeSetTitle ;","import { SET_TITLE, HomeActions } from \"./homeTypes\";\r\n\r\nexport interface IHomeStore {\r\n    title: string,\r\n}\r\n\r\nexport const defaultHomeState : IHomeStore = {\r\n    title: 'Hello, world!',\r\n}\r\n\r\nexport const reducer = (state: IHomeStore = defaultHomeState, action: HomeActions): IHomeStore => {\r\n    switch (action.type) {\r\n        case SET_TITLE:\r\n            return {\r\n                ...state,\r\n                title: action.title\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}","import { combineReducers, createStore, applyMiddleware } from 'redux';\r\nimport { FarmReducer, FarmTypes } from './farm';\r\nimport { HomeReducer, HomeTypes } from './home';\r\nimport thunk, { ThunkMiddleware } from 'redux-thunk'\r\n\r\n\r\n\r\nexport const mainReducer = combineReducers({\r\n    farm : FarmReducer.reducer,\r\n    home : HomeReducer.reducer\r\n})\r\n\r\nexport type AppState = ReturnType<typeof mainReducer> \r\nexport type AppActions = FarmTypes.FarmActions | HomeTypes.HomeActions\r\n\r\nexport default createStore(mainReducer, applyMiddleware(thunk as ThunkMiddleware<AppState,AppActions>));\r\n","import * as React from 'react'\r\nimport { Circle,  Text, Group, Arrow, Line } from 'react-konva'\r\nimport Konva from 'konva'\r\nimport { FarmNode, NodeFixation } from 'src/models/Farm/ModelNode';\r\nimport { consts } from 'src/static';\r\nimport { Force } from 'src/models/Farm/ModelForce';\r\nimport { KonvaEventObject } from 'konva/types/Node';\r\nimport { UI } from 'src/utils';\r\nimport { UIModes } from 'src/utils/UI';\r\n\r\nconst size = consts.UI.nodeSize\r\ninterface UINodeProps {\r\n    node: FarmNode,\r\n    drag(e: Konva.KonvaEventObject<DragEvent>, node: FarmNode): void\r\n    onClick(e: Konva.KonvaEventObject<MouseEvent>, node: FarmNode): void\r\n    mode: UIModes,\r\n    selected: boolean,    \r\n    viewNewPos?:boolean\r\n}\r\nclass UINode extends React.Component<UINodeProps>{\r\n    refGroup: React.RefObject<Konva.Group>\r\n    constructor(props: UINodeProps) {\r\n        super(props)\r\n        this.viewForce = this.viewForce.bind(this)\r\n        this.refGroup = React.createRef()\r\n    }\r\n    shouldComponentUpdate(nextProps: UINodeProps) {\r\n        if(this.props.viewNewPos) return false\r\n        return (\r\n            nextProps.node !== this.props.node ||\r\n            nextProps.mode !== this.props.mode ||\r\n            nextProps.selected !== this.props.selected\r\n        )\r\n    }\r\n    componentDidMount(){\r\n        const {current:group} = this.refGroup\r\n        const {node, viewNewPos} = this.props\r\n        if(group && viewNewPos){\r\n            group.to({\r\n                x:node.newX / consts.UI.koefOnGrid,\r\n                Y:node.newY / consts.UI.koefOnGrid\r\n            })\r\n        }\r\n    }\r\n    viewForce(force: Force) {\r\n        const {viewNewPos } = this.props\r\n        if(!viewNewPos)  return (\r\n            <React.Fragment>\r\n                <Arrow\r\n                    points={[\r\n                        0,\r\n                        0,\r\n                        consts.UI.cellSize,\r\n                        0,\r\n                    ]}\r\n                    stroke={UI.theme.palette.grey[300]}\r\n                    strokeWidth={size / 3}\r\n                    shadowBlur={2}\r\n                    pointerLength={consts.UI.cellSize / 10}\r\n                    pointerWidth={consts.UI.cellSize / 10}\r\n                    hitStrokeWidth={size * 2}\r\n                    rotation={force.value > 0 ? force.angle : 180 + force.angle}\r\n                />\r\n                <Text\r\n                    x={force.angle === 0 ? (force.value > 0 ? consts.UI.cellSize / 3 : -consts.UI.cellSize) : consts.UI.cellSize / 3}\r\n                    y={force.angle === 90 ? (force.value > 0 ? consts.UI.cellSize / 3 : -consts.UI.cellSize / 2) : -consts.UI.cellSize / 1.5}\r\n                    text={force.value + \" H\"}\r\n                />\r\n            </React.Fragment>\r\n\r\n        )\r\n    }\r\n    viewFixation(angle: 0 | 90) {\r\n        return (<Group\r\n            x={0}\r\n            y={0}\r\n            rotation={angle}\r\n        >\r\n            <Line\r\n                points={[\r\n                    0, 0,\r\n                    0, consts.UI.cellSize,\r\n                    -consts.UI.cellSize / 2, consts.UI.cellSize,\r\n                    consts.UI.cellSize / 2, consts.UI.cellSize,\r\n                ]}\r\n                stroke={UI.theme.palette.grey[300]}\r\n                strokeWidth={size / 4}\r\n                shadowBlur={2}\r\n            />\r\n            <Circle\r\n                radius={size / 2}\r\n                fill={UI.theme.palette.grey[500]}\r\n                x={0}\r\n                y={consts.UI.cellSize - (size / 1.7)}\r\n            />\r\n        </Group>)\r\n    }\r\n    render() {\r\n        const { onClick, mode, selected, node, viewNewPos } = this.props\r\n        const x =  node.x / consts.UI.koefOnGrid\r\n        const y =  node.y / consts.UI.koefOnGrid\r\n        // const x = viewNewPos ? node.newX / consts.UI.koefOnGrid : node.x / consts.UI.koefOnGrid\r\n        // const y = viewNewPos ? node.newY / consts.UI.koefOnGrid : node.y / consts.UI.koefOnGrid\r\n        if(viewNewPos){\r\n            if(node.x === node.newX && node.y === node.newY)\r\n            return <React.Fragment/>\r\n        }\r\n        return (\r\n            <Group\r\n            \r\n                opacity={viewNewPos ? 0.3 : 1}\r\n                x={x}\r\n                y={y}\r\n                _useStrictMode\r\n                onClick={viewNewPos ? () => {} : (e: any) => onClick(e, node)}\r\n                ref={this.refGroup}\r\n                \r\n            >\r\n                {node.forceX && this.viewForce(node.forceX)}\r\n                {node.forceY && this.viewForce(node.forceY)}\r\n                {node.fixation === NodeFixation.X && this.viewFixation(90)}\r\n                {node.fixation === NodeFixation.Y && this.viewFixation(0)}\r\n                {node.fixation === NodeFixation.XY && this.viewFixation(90)}\r\n                {node.fixation === NodeFixation.YX && this.viewFixation(0)}\r\n                <Circle\r\n                    radius={size}\r\n                    x={0}\r\n                    y={0}\r\n                    fill={UI.getNodeColor(node)}\r\n                    shadowBlur={selected && !viewNewPos ? 8 : 2}\r\n                    stroke={UI.getNodeStorkeColor(node,mode)}\r\n                    strokeWidth={UI.getNodeStorkeWidth(node, mode)}\r\n                    hitStrokeWidth={viewNewPos ? 0 : size * 2}\r\n                />\r\n                <Text\r\n                    x={-size}\r\n                    y={-size / 2 - 1}\r\n                    align=\"center\"\r\n                    fontSize={18}\r\n                    fill=\"#fff\"\r\n                    shadowBlur={8}\r\n                    fontFamily='Trebuchet MS'\r\n                    width={size * 2}\r\n                    verticalAlign=\"middle\"\r\n                    text={node.name}\r\n                />\r\n                <Circle\r\n                    radius={size}\r\n                    x={0}\r\n                    y={0}\r\n                    onDragEnd={(e: KonvaEventObject<DragEvent>) => {\r\n                        e.target.to({\r\n                            x: 0,\r\n                            y: 0,\r\n                        })\r\n                    }}\r\n                    hitStrokeWidth={viewNewPos ? 0 : size * 2}\r\n                    draggable={mode === UIModes.move && !node.isStatic && !viewNewPos}\r\n                    onMouseEnter={viewNewPos ? () => {} : (e: any) => UI.nodeMouseEnter(e, node, mode)}\r\n                    onMouseLeave={viewNewPos ? () => {} :(e: any) => UI.nodeMouseLeave(e)}\r\n                    onDragMove={(e: KonvaEventObject<DragEvent>) => this.props.drag(e, node)}\r\n                />\r\n            </Group>\r\n        )\r\n    }\r\n}\r\nexport default UINode","import * as React from 'react'\r\nimport { Line } from 'react-konva'\r\nimport Konva from 'konva'\r\nimport { Beam } from 'src/models/Farm/ModelBeam';\r\nimport { consts } from 'src/static';\r\nimport { UI } from 'src/utils';\r\nimport { UIModes } from 'src/utils/UI';\r\n\r\ninterface UIBeamProps {\r\n    onClick(e: Konva.KonvaEventObject<MouseEvent>, beam: Beam): void\r\n    mode: UIModes,\r\n    selected: boolean,\r\n    beam: Beam,\r\n    viewNewPos?: boolean\r\n}\r\n\r\nclass UIBeam extends React.Component<UIBeamProps>{\r\n    refLine: React.RefObject<Konva.Line>\r\n    constructor(props  :UIBeamProps){\r\n        super(props)    \r\n        this.refLine = React.createRef()\r\n\r\n    }\r\n\r\n    componentDidMount(){\r\n        const {current:group} = this.refLine\r\n        const {beam, viewNewPos} = this.props\r\n        if(group && viewNewPos){\r\n            group.to({\r\n                points: [\r\n                    beam.newX / consts.UI.koefOnGrid,\r\n                    beam.newY / consts.UI.koefOnGrid,\r\n                    beam.newEndX / consts.UI.koefOnGrid,\r\n                    beam.newEndY / consts.UI.koefOnGrid\r\n                ]\r\n            })\r\n        }\r\n    }\r\n    shouldComponentUpdate(nextProps: UIBeamProps) {\r\n        const { beam, mode, selected,viewNewPos } = this.props\r\n        if(viewNewPos) return false\r\n        return (\r\n            nextProps.beam !== beam ||\r\n            nextProps.mode !== mode ||\r\n            nextProps.selected !== selected\r\n        )\r\n    }\r\n    render() {\r\n        const { onClick, mode, selected, beam, viewNewPos } = this.props\r\n        const size = consts.UI.beamSize\r\n\r\n        const points: number[] = [\r\n            beam.x / consts.UI.koefOnGrid,\r\n            beam.y / consts.UI.koefOnGrid,\r\n            beam.endX / consts.UI.koefOnGrid,\r\n            beam.endY / consts.UI.koefOnGrid\r\n        ]\r\n\r\n        return (\r\n            <Line\r\n                ref={this.refLine}\r\n                opacity={viewNewPos ? 0.3 : 1}\r\n                points={points}\r\n                stroke={UI.getBeamColor(beam)}\r\n                strokeWidth={size}\r\n                shadowBlur={selected && !viewNewPos ? 8 : 2}\r\n\r\n                hitStrokeWidth={viewNewPos ? 0 : size * 4}\r\n                onClick={viewNewPos ? () => { } : (e: any) => onClick(e, beam)}\r\n                onMouseEnter={viewNewPos ? () => { } : (e: any) => UI.beamMouseEnter(e, beam, mode)}\r\n                onMouseLeave={viewNewPos ? () => { } : (e: any) => UI.beamMouseLeave(e)}\r\n            />\r\n        )\r\n\r\n    }\r\n}\r\nexport default UIBeam","import * as React from 'react'\r\nimport { Line } from 'react-konva'\r\n\r\nexport interface UIGridProps {\r\n    widthCell: number,\r\n    heightCell: number,\r\n    heightBox: number,\r\n    widthBox: number\r\n\r\n}\r\nclass UIGrid extends React.Component<UIGridProps>{\r\n    private countOfX: number = this.props.widthBox / this.props.widthCell\r\n    private countOfY: number = this.props.heightBox / this.props.heightCell\r\n    constructor(props: UIGridProps){\r\n        super(props)\r\n    }\r\n    shouldComponentUpdate(nextProps: Readonly<UIGridProps>, nextState: Readonly<{}>){\r\n        return nextProps.widthBox !== this.props.widthBox\r\n    }\r\n    viewRows() {\r\n        const rows = []\r\n        for (let index = 0; index < this.countOfY; index++) {\r\n            rows.push(<Line\r\n                points={[\r\n                    0,\r\n                    index * this.props.heightCell,\r\n                    this.props.widthBox,\r\n                    index * this.props.heightCell,\r\n\r\n                ]}\r\n                stroke=\"#ddd\"\r\n                strokeWidth={1}\r\n                key={index}\r\n            />)\r\n        }\r\n        return rows\r\n    }\r\n\r\n    viewColumns() {\r\n        const columns = []\r\n        for (let index = 0; index < this.countOfX; index++) {\r\n\r\n            columns.push(<Line\r\n                points={[\r\n                    index * this.props.widthCell,\r\n                    0,\r\n                    index * this.props.widthCell,\r\n                    this.props.heightBox,\r\n\r\n                ]}\r\n                stroke=\"#ddd\"\r\n                strokeWidth={1}\r\n                key={index}\r\n            />)\r\n\r\n        }\r\n        return columns\r\n    }\r\n    render() {\r\n        console.log(\"pop\");\r\n\r\n        return (\r\n            <React.Fragment>\r\n                {this.viewColumns()}\r\n                {this.viewRows()}\r\n\r\n            </React.Fragment>\r\n        )\r\n    }\r\n}\r\nexport default UIGrid","import * as React from 'react'\r\nimport { Theme, createStyles, withStyles, Box } from '@material-ui/core';\r\nimport { WithStyles } from '@material-ui/styles';\r\nimport { Stage, Layer, } from 'react-konva';\r\nimport { Entity } from 'src/models/Farm/ModelEntity';\r\nimport Konva from 'konva';\r\nimport UIGrid from './UIGrid';\r\nimport { consts } from 'src/static';\r\nimport ScrollBar from 'react-custom-scrollbars';\r\nimport { UIBeam, UINode } from '..';\r\nimport { UIModes } from 'src/utils/UI';\r\nimport { IFarm } from 'src/models/Farm/FarmTypes';\r\n\r\nconst styles = (theme: Theme) => createStyles({\r\n    root: {\r\n        backgroundColor: \"#ddd\",\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center'\r\n    },\r\n    stage: {\r\n        backgroundColor: \"#fff\",\r\n        boxShadow: theme.shadows[2],\r\n        borderRadius: 8,\r\n    }\r\n})\r\n\r\nexport interface UIStageProps extends IFarm, WithStyles<typeof styles> {\r\n    uiMode: UIModes,\r\n    selectedEntity: Entity | undefined,\r\n    stageHeight: number,\r\n    stageWidth: number,\r\n    onClick(e: Konva.KonvaEventObject<MouseEvent>, entity?: Entity): void,\r\n    onMouseMove(e: Konva.KonvaEventObject<MouseEvent | TouchEvent>): void,\r\n    onDrag(e: Konva.KonvaEventObject<DragEvent>, entity: Entity): void,\r\n    stage: React.RefObject<Stage & Konva.Stage>,\r\n    viewNewPos: boolean\r\n}\r\n\r\nconst UIStage: React.FC<UIStageProps> = ({ classes, stage, stageHeight, stageWidth, onClick, onMouseMove, onDrag, beams, nodes, uiMode, selectedEntity, viewNewPos }) => {\r\n    return (\r\n        <ScrollBar\r\n            autoHide>\r\n            <Box style={{ width: stageWidth + consts.UI.sidebarWidth * 2 + 20, height: stageHeight + consts.UI.sidebarWidth }}\r\n                className={classes.root}>\r\n                <Stage\r\n                    height={stageHeight}\r\n                    width={stageWidth}\r\n                    style={{ height: stageHeight, width: stageWidth }}\r\n                    className={classes.stage}\r\n                    onClick={onClick}\r\n                    onMouseMove={onMouseMove}\r\n                    ref={stage}\r\n                >\r\n\r\n                    <Layer className=\"layer\" >\r\n\r\n                        <UIGrid\r\n                            heightCell={consts.UI.cellSize}\r\n                            widthCell={consts.UI.cellSize}\r\n                            heightBox={stageHeight}\r\n                            widthBox={stageWidth}\r\n                        />\r\n\r\n                        {beams.map(beam => (\r\n                            <UIBeam\r\n                                key={beam.id}\r\n                                beam={beam}\r\n                                mode={uiMode}\r\n                                onClick={onClick}\r\n                                selected={selectedEntity === beam}\r\n                            />\r\n                        ))}\r\n\r\n                        {nodes.map(node => (\r\n                            <UINode\r\n                                key={node.id}\r\n                                node={node}\r\n                                mode={uiMode}\r\n                                drag={onDrag}\r\n                                onClick={onClick}\r\n                                selected={selectedEntity === node}\r\n                            />\r\n                        ))}\r\n\r\n                        {viewNewPos && beams.map(beam => (\r\n                            <UIBeam\r\n                                key={beam.id}\r\n                                beam={beam}\r\n                                mode={uiMode}\r\n                                onClick={onClick}\r\n                                selected={selectedEntity === beam}\r\n                                viewNewPos={true}\r\n                            />\r\n                        ))}\r\n                        {viewNewPos && nodes.map(node => (\r\n                            <UINode\r\n                                key={node.id}\r\n                                node={node}\r\n                                mode={uiMode}\r\n                                drag={onDrag}\r\n                                onClick={onClick}\r\n                                selected={selectedEntity === node}\r\n                                viewNewPos={true}\r\n                            />\r\n                        ))}\r\n                    </Layer>\r\n                </Stage>\r\n            </Box>\r\n\r\n        </ScrollBar>\r\n\r\n\r\n\r\n    )\r\n}\r\n\r\nexport default withStyles(styles)(UIStage)","import * as React from 'react'\r\nimport { Theme, createStyles, withStyles, Fab, Drawer, Tooltip, Typography, Divider } from '@material-ui/core';\r\nimport { WithStyles } from '@material-ui/styles';\r\nimport { Close as CloseIcon } from '@material-ui/icons';\r\nimport { UI } from 'src/static/const';\r\n\r\n\r\nconst styles = (theme: Theme) => createStyles({\r\n    drawer: {\r\n        position: 'relative'\r\n    },\r\n    drawerPaper: {\r\n        width: UI.sidebarWidth,\r\n    },\r\n    toogleIcon: {\r\n        position: 'absolute',\r\n        top: theme.spacing(10),\r\n        zIndex: theme.zIndex.drawer + 1\r\n    },\r\n    title:{\r\n        padding:theme.spacing(1)\r\n    },\r\n    toolbar: theme.mixins.toolbar,\r\n})\r\n\r\n\r\n\r\n\r\ninterface SidebarProps extends WithStyles<typeof styles> {\r\n    anchor: 'left' | 'right',\r\n    title? : string,\r\n    btnIcon : JSX.Element\r\n}\r\n\r\ninterface SidebarState {\r\n    open: boolean,\r\n    viewTooltip: boolean\r\n\r\n}\r\nconst localStr = \"Sidebar_state:\"\r\nclass Sidebar extends React.PureComponent<SidebarProps, SidebarState>{\r\n    constructor(props: SidebarProps) {\r\n        super(props)\r\n        this.state = {\r\n            open: true,\r\n            viewTooltip: false\r\n        }\r\n        this.switchDrawer = this.switchDrawer.bind(this)\r\n    }\r\n    componentWillMount(){\r\n        if(this.props.title){\r\n            const localState = localStorage.getItem(localStr+this.props.title)\r\n            if(localState)\r\n            this.setState({open: localState === \"true\"})\r\n        }\r\n    }\r\n    switchDrawer() {\r\n        localStorage.setItem(localStr+this.props.title,(!this.state.open ? \"true\" : \"false\"))\r\n        this.setState(\r\n            {\r\n                open: !this.state.open,\r\n                viewTooltip: false\r\n            }\r\n        )\r\n    }\r\n    \r\n    changeViewtooltip(flag: boolean) {\r\n        this.setState({ viewTooltip: flag })\r\n    }\r\n    render() {\r\n        const { classes,children, title, btnIcon, anchor } = this.props\r\n        const { open, viewTooltip } = this.state\r\n        return (\r\n            <React.Fragment>\r\n                <Drawer\r\n                    className={classes.drawer}\r\n                    variant=\"persistent\"\r\n                    open={open}\r\n                    anchor={anchor}\r\n                    classes={{\r\n                        paper: classes.drawerPaper,\r\n                    }}\r\n                >\r\n                    <div className={classes.toolbar} />\r\n                    \r\n                    <Typography \r\n                        variant='body2'\r\n                        align=\"center\"\r\n                        className={classes.title}>\r\n                        {title}\r\n                    </Typography>\r\n                    <Divider/>\r\n                    {children}\r\n                </Drawer>\r\n                <Tooltip\r\n                    title={title}\r\n                    open={title !== undefined && viewTooltip && !open}\r\n                    onOpen={() => this.changeViewtooltip(true)}\r\n                    onClose={() => this.changeViewtooltip(false)}>\r\n                    <Fab\r\n                        style={{\r\n                            left: anchor === 'left' ? !open ? 15 : UI.sidebarWidth + 15 : \"auto\",\r\n                            \r\n                            right: anchor === 'right' ? !open ? 15 : UI.sidebarWidth + 15 : \"auto\"\r\n                        }}\r\n                        color=\"secondary\"\r\n                        size=\"medium\"\r\n                        className={classes.toogleIcon}\r\n                        onClick={this.switchDrawer}\r\n                    >\r\n                        {open ? <CloseIcon /> : btnIcon}\r\n                    </Fab>\r\n                </Tooltip>\r\n            </React.Fragment>\r\n        )\r\n    }\r\n\r\n}\r\n\r\nexport default withStyles(styles)(Sidebar)","import * as React from 'react'\r\nimport clsx from 'clsx'\r\nimport { Theme, createStyles, withStyles, AppBar, Toolbar } from '@material-ui/core';\r\nimport { WithStyles } from '@material-ui/styles';\r\nimport { img } from 'src/static/const';\r\nimport { Link } from 'react-router-dom';\r\nimport { AppBarProps } from '@material-ui/core/AppBar';\r\n\r\nconst styles = (theme: Theme) => createStyles({\r\n    appBar: {\r\n        zIndex: theme.zIndex.drawer + 1,\r\n    },\r\n    logo: {\r\n        marginRight: theme.spacing(4),\r\n        marginLeft: theme.spacing(2),\r\n        '& img': {\r\n            width: 50,\r\n            height: 'auto'\r\n        }\r\n    }\r\n})\r\n\r\nexport interface UIToolBarProps extends WithStyles<typeof styles>, React.HTMLAttributes<HTMLDivElement> {\r\n    color?: AppBarProps['color'],\r\n    position?: AppBarProps['position'],\r\n    withLogo?: boolean\r\n}\r\n\r\nconst UIAppBar: React.FC<UIToolBarProps> = ({ classes, children, className, color, position, withLogo = true }) => {\r\n    const viewLogo = () => {\r\n        if (withLogo) return ((\r\n            <Link\r\n                to={'/'}\r\n                className={classes.logo}\r\n            >\r\n                <img\r\n                    alt=\"Logo Icon\"\r\n                    src={img.bridgeIcon_2}\r\n                />\r\n            </Link>\r\n        ))\r\n    }\r\n    return (\r\n        <AppBar\r\n            position={position || 'fixed'}\r\n            className={clsx(classes.appBar, className)}\r\n            color={color || 'primary'}>\r\n            <Toolbar >\r\n                {viewLogo()}\r\n                {children}\r\n            </Toolbar>\r\n        </AppBar>\r\n    )\r\n}\r\n\r\nexport default withStyles(styles)(UIAppBar)","import * as React from 'react'\r\nimport { Theme, createStyles, withStyles, Tooltip } from '@material-ui/core';\r\nimport {  ToggleButton } from '@material-ui/lab'\r\nimport { WithStyles } from '@material-ui/styles';\r\nimport clsx from 'clsx';\r\nimport { fade } from '@material-ui/core/styles';\r\nimport { ToggleButtonProps } from '@material-ui/lab/ToggleButton';\r\n\r\n\r\nconst styles = (theme: Theme) => createStyles({\r\n    btn: {\r\n        marginLeft: theme.spacing(2),\r\n        marginRight: theme.spacing(2),\r\n        borderRadius: '50% !important',\r\n        border: `1px solid ${fade(theme.palette.action.active, 0.2)} !important`,\r\n        transition: theme.transitions.create(['background-color', 'box-shadow', 'border'], {\r\n            duration: theme.transitions.duration.short,\r\n        }),\r\n\r\n        color: theme.palette.secondary.contrastText,\r\n        backgroundColor: theme.palette.secondary.light,\r\n\r\n        '&$selected': {\r\n            backgroundColor: theme.palette.secondary.main,\r\n            '&:hover': {\r\n                backgroundColor: theme.palette.secondary.dark,\r\n            }\r\n        },\r\n        '&:hover': {\r\n            backgroundColor: theme.palette.secondary.dark,\r\n            '@media (hover: none)': {\r\n                backgroundColor: theme.palette.secondary.main,\r\n            },\r\n            '&$disabled': {\r\n                backgroundColor: theme.palette.secondary.main,\r\n            },\r\n        },\r\n    },\r\n    selected: {},\r\n})\r\n\r\n\r\n\r\nexport interface MyToggleButtonProps extends WithStyles<typeof styles> {\r\n    selected: boolean,\r\n    value?:any,\r\n    name?:string,\r\n    icon:JSX.Element\r\n}\r\n\r\nconst MyToggleButton: React.FC<MyToggleButtonProps & ToggleButtonProps> = ({  selected, classes , value, name, icon, ...other}) => {\r\n    return (\r\n        <ToggleButton\r\n            key={name}\r\n            value={value}\r\n            className={clsx(\r\n                classes.btn,\r\n                {\r\n                    [classes.selected]: selected,\r\n                }\r\n            )}\r\n            {...other}\r\n            \r\n        >\r\n            <Tooltip title={name}>\r\n                {icon}\r\n            </Tooltip>\r\n        </ToggleButton>\r\n    )\r\n}\r\n\r\nexport default withStyles(styles)(MyToggleButton)","import * as React from 'react'\r\nimport { Theme, createStyles, withStyles, Button } from '@material-ui/core';\r\nimport { WithStyles } from '@material-ui/styles';\r\nimport { AppBar } from 'src/components';\r\n\r\nconst styles = (theme: Theme) => createStyles({\r\n    root:{\r\n\r\n    },\r\n    btn:{\r\n        marginLeft:theme.spacing(2),\r\n        marginRight:theme.spacing(2)\r\n    },\r\n    grow:{\r\n        flexGrow:1\r\n    }\r\n})\r\n\r\nexport interface UIHeaderProps extends WithStyles<typeof styles> {\r\n    hundleSave?:(e: React.FormEvent<HTMLButtonElement>) => void,\r\n    hundleClear?:(e: React.FormEvent<HTMLButtonElement>) => void,\r\n    hundleCalculate?:(e: React.FormEvent<HTMLButtonElement>) => void,\r\n    disabled?:boolean\r\n}\r\n\r\nconst UIHeader: React.FC<UIHeaderProps> = (\r\n    { \r\n        classes, \r\n        hundleSave = (e) => {alert(\"Буедет реализовано в будущем\")},\r\n        hundleClear = (e) => {alert(\"Буедет реализовано в будущем\")},\r\n        hundleCalculate = (e) => {alert(\"Буедет реализовано в будущем\")},\r\n        disabled = false\r\n    }) => {\r\n\r\n    return (\r\n        <AppBar \r\n            className={classes.root}\r\n        >\r\n            <div className={classes.grow}/>\r\n            <Button\r\n                color=\"secondary\"\r\n                variant=\"contained\"\r\n                className={classes.btn}\r\n                onClick={hundleCalculate}\r\n                disabled={disabled}\r\n            >\r\n                Расчет\r\n            </Button>\r\n            <Button\r\n                color=\"secondary\"\r\n                variant=\"contained\"\r\n                className={classes.btn}\r\n                onClick={hundleSave}\r\n                disabled={disabled}\r\n            >\r\n                Сохранить\r\n            </Button>\r\n            <Button\r\n                color=\"secondary\"\r\n                variant=\"contained\"\r\n                className={classes.btn}\r\n                onClick={hundleClear}\r\n                disabled={disabled}\r\n            >\r\n                Очистить\r\n            </Button>\r\n        </AppBar>\r\n    )\r\n}\r\n\r\nexport default withStyles(styles)(UIHeader)","import * as React from 'react'\r\nimport { Theme, createStyles, withStyles, List, ListItem, ListItemText, Collapse, ListItemIcon, Divider, Badge, Box } from '@material-ui/core';\r\nimport { WithStyles } from '@material-ui/styles';\r\nimport { GpsNotFixed as NodeIcon, Timeline as BeamIcon, List as TreePanelIcon, ExpandLess, ExpandMore, Brightness1 as CircleIcon } from '@material-ui/icons';\r\nimport { Sidebar } from 'src/components';\r\nimport { Entity } from 'src/models/Farm/ModelEntity';\r\nimport { Beam } from 'src/models/Farm/ModelBeam';\r\nimport { FarmNode, instanceOfNode } from 'src/models/Farm/ModelNode';\r\nimport { UI } from 'src/utils';\r\n\r\nconst styles = (theme: Theme) => createStyles({\r\n    nested: {\r\n        paddingLeft: theme.spacing(6)\r\n    },\r\n})\r\n\r\ninterface TreePanelProps extends WithStyles<typeof styles> {\r\n    nodes: FarmNode[],\r\n    beams: Beam[]\r\n    selectedEntity: Entity | undefined\r\n    onSelect(entity: Entity): void\r\n}\r\n\r\ninterface TreeState {\r\n    tabs: Map<string, boolean>,\r\n    open: boolean,\r\n\r\n}\r\n\r\nclass UITreePanel extends React.PureComponent<TreePanelProps, TreeState>{\r\n    constructor(props: TreePanelProps) {\r\n        super(props)\r\n        this.state = {\r\n            open: false,\r\n            tabs: new Map()\r\n        }\r\n        this.openTab = this.openTab.bind(this)\r\n        this.viewListItem = this.viewListItem.bind(this)\r\n    }\r\n    componentWillMount() {\r\n        const { tabs } = this.state\r\n        tabs.set('Узлы', true)\r\n        tabs.set('Стержни', true)\r\n        this.setState({ tabs: new Map(tabs) })\r\n    }\r\n    openTab(tab: string): void {\r\n        const { tabs } = this.state\r\n        tabs.set(tab, !tabs.get(tab))\r\n        this.setState({ tabs: new Map(tabs) })\r\n    }\r\n    viewListItem(entityArray: Entity[], title: string, icon?: JSX.Element) {\r\n        const { selectedEntity, classes, onSelect } = this.props\r\n        const { tabs } = this.state\r\n        return (\r\n            <Box>\r\n                <ListItem button onClick={() => this.openTab(title)}>\r\n                    {icon && (\r\n                        <ListItemIcon>\r\n                            <Badge badgeContent={entityArray.length} color=\"secondary\">\r\n                                {icon}\r\n                            </Badge>\r\n                        </ListItemIcon>\r\n                    )}\r\n                    <ListItemText primary={title} />\r\n                    {tabs.get(title) ? <ExpandLess /> : <ExpandMore />}\r\n                </ListItem>\r\n                <Collapse in={tabs.get(title)} timeout=\"auto\" unmountOnExit>\r\n                    <List component=\"div\" disablePadding>\r\n                        {entityArray.map(item => (\r\n                            <ListItem\r\n                                button\r\n                                className={classes.nested}\r\n                                key={item.id}\r\n                                selected={selectedEntity === item}\r\n                                onClick={(e) => onSelect(item)}\r\n                            >\r\n                                {instanceOfNode(item) && (\r\n                                    <ListItemIcon>\r\n                                        <CircleIcon style={{ color: UI.getNodeColor(item) }} />\r\n                                    </ListItemIcon>\r\n                                )}\r\n                                <ListItemText primary={item.name} />\r\n                            </ListItem>\r\n                        ))}\r\n                    </List>\r\n                </Collapse>\r\n                <Divider />\r\n            </Box>\r\n        )\r\n    }\r\n    render() {\r\n        const { nodes, beams } = this.props\r\n        beams.sort((a: Beam, b: Beam) => {\r\n            return a.name > b.name ? 1 : -1\r\n        })\r\n        return (\r\n            <Sidebar\r\n                anchor=\"left\"\r\n                title=\"Структура проекта\"\r\n                btnIcon={(<TreePanelIcon />)}\r\n            >\r\n\r\n                {this.viewListItem(nodes, 'Узлы', (<NodeIcon />))}\r\n                {this.viewListItem(beams, 'Стержни', (<BeamIcon />))}\r\n\r\n            </Sidebar>\r\n        )\r\n    }\r\n\r\n}\r\n\r\nexport default withStyles(styles)(UITreePanel)","import { FarmCalcProps, FarmCalcData, ICoord } from \"./FarmTypes\";\r\nimport { MyMath } from \"src/utils\";\r\n\r\nexport class FarmCalc {\r\n\r\n    private static farmCalcDebug = process.env.REACT_APP_FARM_CALC_DEBUG === \"true\" || false\r\n    static async init(NodeCoord: ICoord[], NodeV: ICoord[], Forces: number[], LinkNodes: ICoord[], LinkLength: number[], props: FarmCalcProps = {}): Promise<FarmCalcData> {\r\n\r\n        const area: number = props.area || 225 //Площадь стержней\r\n        const ModUpr: number = props.modUpr || 72000 // Модуль упругости \r\n\r\n        const Kmest: number[][][] = [] // Матрица жесткости\r\n        const Lambda0: ICoord[] = []\r\n        const Lambda: number[][][] = []\r\n        const Kobs: number[][][] = []\r\n        const IndexV: number[][] = []\r\n\r\n        let K: number[][] = []\r\n        let Va: number[] = []\r\n        let Vi: ICoord[] = []\r\n        let Vij: number[][][] = []\r\n        let V: number[][][] = []\r\n        let P: number[][][] = []\r\n\r\n        LinkNodes.forEach((beam, i) => {\r\n            Kmest.push(this.Kmest_i(area, ModUpr, LinkLength[i]))\r\n\r\n            const l_i = this.Lambda_i(NodeCoord[LinkNodes[i].x], NodeCoord[LinkNodes[i].y], LinkLength[i])\r\n            Lambda0.push(l_i)\r\n            Lambda.push([\r\n                [l_i.x, l_i.y, 0, 0],\r\n                [0, 0, l_i.x, l_i.y]\r\n            ])\r\n            Kobs.push(this.Kobs_i(area, ModUpr, LinkLength[i], Lambda0[i]))\r\n            IndexV.push(this.IndexV_i(NodeV[LinkNodes[i].x], NodeV[LinkNodes[i].y]))\r\n        })\r\n\r\n        const N_Link = LinkNodes.length\r\n        const N_Nodes = NodeV.length\r\n        const N_DOF = Math.max(...NodeV.map(({ x, y }) => Math.max(x, y)))\r\n\r\n        K = this.K(N_DOF, IndexV, Kobs)\r\n        \r\n        if(MyMath.getDetMatrix(K) < 1000 ) throw Error(\"Данная конструкция (статически неопределимая) является механизмом\")\r\n\r\n        Va = this.SquareRoot(K, Forces)\r\n        Vi = this.Vi(NodeV, Va)\r\n        Vij = this.Vij(LinkNodes, Vi)\r\n\r\n        for (let i = 0; i < N_Link; i++) {\r\n            V.push(this.V_i(Lambda[i], Vij[i]))\r\n            P.push(this.P_i(Kmest[i], V[i]))\r\n        }\r\n\r\n        if (this.farmCalcDebug) {\r\n            console.log(\"NodeCoord, LinkNodes, NodeV\", NodeCoord, LinkNodes, NodeV);\r\n            console.log(\"Kobs, Kmest\", Kobs, Kmest);\r\n            console.log(\"Lambda0, Lambda,\", Lambda0, Lambda);\r\n            console.log(\"IndexV\", IndexV);\r\n            console.log(\"N_Link, N_Nodes, N_DOF\", N_Link, N_Nodes, N_DOF);\r\n            console.log(\"K, Force\", K, Forces);\r\n            console.log(\"Va\", Va);\r\n            console.log(\"Vi\", Vi);\r\n            console.log(\"Vij\", Vij);\r\n            console.log(\"V\", V);\r\n            console.log(\"P\", P);\r\n        }\r\n\r\n        return { P, LinkNodes, Vi }\r\n    }\r\n\r\n    private static Kmest_i(area: number, modUpr: number, length_i: number) {\r\n        const mnoz = (area * modUpr) / length_i\r\n        const result = []\r\n        result.push([mnoz, -mnoz])\r\n        result.push([-mnoz, mnoz])\r\n        return result\r\n    }\r\n    private static Lambda_i(nodeCoordOfX: ICoord, nodeCoordOfY: ICoord, length_i: number): ICoord {\r\n        const l_x = (nodeCoordOfY.x - nodeCoordOfX.x) / length_i\r\n        const l_y = (nodeCoordOfY.y - nodeCoordOfX.y) / -length_i\r\n        return { x: l_x, y: l_y }\r\n    }\r\n    private static Kobs_i(area: number, modUpr: number, length_i: number, l_i: ICoord) {\r\n        const mnoz = (area * modUpr) / length_i\r\n        const LTxL: ICoord[] = [{ x: l_i.x * l_i.x, y: l_i.x * l_i.y }, { x: l_i.x * l_i.y, y: l_i.y * l_i.y }]\r\n        const _LTxL: ICoord[] = [{ x: -l_i.x * l_i.x, y: -l_i.x * l_i.y }, { x: -l_i.x * l_i.y, y: -l_i.y * l_i.y }]\r\n        const augmnet1 = []\r\n        const augment2 = []\r\n        for (let i = 0; i < 2; i++) {\r\n            augmnet1.push({ x1: LTxL[i].x, y1: LTxL[i].y, x2: _LTxL[i].x, y2: _LTxL[i].y })\r\n            augment2.push({ x1: _LTxL[i].x, y1: _LTxL[i].y, x2: LTxL[i].x, y2: LTxL[i].y })\r\n        }\r\n        const stack: { x1: number, y1: number, x2: number, y2: number }[] = Array.prototype.concat(augmnet1, augment2)\r\n        const result = stack.map(({ x1, y1, x2, y2 }) => ([\r\n            x1 * mnoz,\r\n            y1 * mnoz,\r\n            x2 * mnoz,\r\n            y2 * mnoz\r\n        ]))\r\n        return result\r\n\r\n    }\r\n    private static IndexV_i(nodeV1: ICoord, nodeV2: ICoord): number[] {\r\n        return [\r\n            nodeV1.x,\r\n            nodeV1.y,\r\n            nodeV2.x,\r\n            nodeV2.y\r\n        ]\r\n    }\r\n    private static K(n_dof: number, indexV: number[][], k_obs: number[][][]) {\r\n        const K: number[][] = []\r\n\r\n        for (let t = 0; t < n_dof; t++) {\r\n            const row: number[] = []\r\n            for (let r = 0; r < n_dof; r++) {\r\n                row.push(0)\r\n            }\r\n            K.push(row)\r\n        }\r\n\r\n        for (let e = 0; e < indexV.length; e++) {\r\n            for (let i = 0; i < 4; i++) {\r\n                const A = indexV[e][i]\r\n                if (A !== 0)\r\n                    for (let j = 0; j < 4; j++) {\r\n                        const B = indexV[e][j]\r\n                        if (B !== 0)\r\n                            K[B - 1][A - 1] = K[B - 1][A - 1] + k_obs[e][i][j]\r\n                    }\r\n\r\n            }\r\n        }\r\n        return K\r\n    }\r\n    private static SquareRoot(_a: number[][], _b: number[]) {\r\n        if (_a.length !== _b.length) {\r\n            throw Error(\"SquareRoot - Массивы должны быть одинаковой длины\")\r\n        }\r\n\r\n        const n = _b.length\r\n        const a: number[][] = []\r\n        const b: number[] = []\r\n        const x: number[] = []\r\n        const d: number[] = []\r\n        const s: number[][] = []\r\n        const y: number[] = []\r\n\r\n        for (let i = 0; i < n + 1; i++) {\r\n            const row: number[] = []\r\n            for (let r = 0; r < n; r++) {\r\n                row.push(0)\r\n            }\r\n            s.push(row)\r\n            a.push(row)\r\n            b.push(0)\r\n            x.push(0)\r\n            d.push(0)\r\n            y.push(0)\r\n        }\r\n\r\n        for (let j = 1; j <= n; j++) {\r\n            for (let r = 0; r <= n; r++) {\r\n                a[j][r] = _a[j - 1][r - 1]\r\n            }\r\n            b[j] = _b[j - 1]\r\n        }\r\n\r\n        d[1] = MyMath.signum(a[1][1]);\r\n        s[1][1] = Math.sqrt(Math.abs(a[1][1]));\r\n        for (let j = 2; j <= n; j++) {\r\n            s[1][j] = a[1][j] / (s[1][1] * d[1]);\r\n        }\r\n\r\n        for (let i = 2; i <= n; i++) {\r\n            let sum = 0;\r\n            for (let k = 1; k <= i - 1; k++) {\r\n                sum += s[k][i] * s[k][i] * d[k];\r\n            }\r\n            d[i] = MyMath.signum(a[i][i] - sum);\r\n            s[i][i] = Math.sqrt(Math.abs(a[i][i] - sum));\r\n\r\n            const l = 1 / (s[i][i] * d[i]);\r\n            for (let j = i + 1; j <= n; j++) {\r\n                let SDSsum = 0;\r\n                for (let k = 1; k <= i - 1; k++) {\r\n                    SDSsum += s[k][i] * d[k] * s[k][j];\r\n                }\r\n                s[i][j] = l * (a[i][j] - SDSsum);\r\n            }\r\n        }\r\n\r\n        y[1] = b[1] / (s[1][1] * d[1]);\r\n\r\n        for (let i = 2; i <= n; i++) {\r\n            let sum = 0;\r\n\r\n            for (let j = 1; j <= i - 1; j++) {\r\n                sum += s[j][i] * d[j] * y[j];\r\n            }\r\n\r\n            y[i] = (b[i] - sum) / (s[i][i] * d[i]);\r\n        }\r\n\r\n        x[n] = y[n] / s[n][n];\r\n\r\n        for (let i = n - 1; i >= 1; i--) {\r\n            let sum = 0;\r\n\r\n            for (let k = i + 1; k <= n; k++) {\r\n                sum += s[i][k] * x[k];\r\n            }\r\n\r\n            x[i] = (y[i] - sum) / s[i][i];\r\n        }\r\n\r\n        const result: number[] = []\r\n        x.forEach((item, i) => {\r\n            if (i !== 0) result.push(item)\r\n        })\r\n\r\n        return result\r\n    }\r\n\r\n    private static Vi(nodeV: ICoord[], Va: number[]) {\r\n        const vi: ICoord[] = []\r\n        for (let e = 0; e < nodeV.length; e++) {\r\n            const q: ICoord = { ...nodeV[e] }\r\n            q.x = q.x === 0 ? 0 : Va[q.x - 1]\r\n            q.y = q.y === 0 ? 0 : Va[q.y - 1]\r\n            vi.push(q)\r\n        }\r\n        return vi\r\n    }\r\n    private static Vij(linkNodes: ICoord[], vi: ICoord[]) {\r\n        const vij: number[][][] = []\r\n        for (let e = 0; e < linkNodes.length; e++) {\r\n            const n_start = linkNodes[e].x\r\n            const n_ends = linkNodes[e].y\r\n\r\n            vij.push([\r\n                [vi[n_start].x],\r\n                [vi[n_start].y],\r\n                [vi[n_ends].x],\r\n                [vi[n_ends].y],\r\n            ])\r\n        }\r\n        return vij\r\n    }\r\n    private static V_i(l: number[][], vij: number[][]) {\r\n        const v: number[][] = MyMath.multMatrxiV2(l, vij)\r\n        return v\r\n    }\r\n    private static P_i(k: number[][], v: number[][]) {\r\n        const p: number[][] = MyMath.multMatrxiV2(k, v)\r\n        return p\r\n    }\r\n}\r\nexport default FarmCalc","import FarmCalc from './FarmCalc';\r\nimport { FarmNode, createNode, INode, NodeFixation } from \"./ModelNode\";\r\nimport { Beam, IBeam, createBeam, instanceOfBeam } from \"./ModelBeam\";\r\nimport { Entity } from \"./ModelEntity\";\r\nimport uuid from 'uuid'\r\nimport { MyMath } from \"src/utils\";\r\nimport { IFarm, ICoord, FarmCalcData, FarmCalcProps } from './FarmTypes';\r\nimport { consts } from 'src/static';\r\n\r\nexport class Farm {\r\n    static addNode(nodes: FarmNode[], props: INode): FarmNode | null {\r\n        if (nodes.length > 12) return null\r\n        const { x, y } = props\r\n        const oldNode = nodes.find(item => item.x === x && item.y === y)\r\n        if (oldNode) return null\r\n        const id = uuid()\r\n        if (!id) return null\r\n        const name = (nodes.length + 1) + \"\"\r\n        const node = createNode({\r\n            ...props,\r\n            x,\r\n            y,\r\n            name: props.name || name,\r\n            id,\r\n        })\r\n        return node\r\n    }\r\n    static addBeam(beams: Beam[], props: IBeam): Beam | null {\r\n        if (beams.length > 36) return null\r\n        let x = props.x\r\n        let y = props.y\r\n        if (props.x && props.y) {\r\n            x = props.x\r\n            y = props.y\r\n        }\r\n        const id = uuid()\r\n        if (!id) return null\r\n        const beam = createBeam({\r\n            ...props,\r\n            x,\r\n            y,\r\n            id,\r\n        })\r\n        return beam\r\n    }\r\n    static moveEntity(entity: Entity, x: number, y: number) {\r\n\r\n        entity.x = x\r\n        entity.y = y\r\n        if (instanceOfBeam(entity)) {\r\n            entity.length = this.getBeamLength(entity)\r\n        }\r\n    }\r\n    static moveBeamEnd(beam: Beam, x: number, y: number) {\r\n        beam.endX = x\r\n        beam.endY = y\r\n        beam.length = this.getBeamLength(beam)\r\n    }\r\n\r\n    static findOldBeam(node: FarmNode, beam: Beam, checkingBeam: Beam) {\r\n        return (\r\n            (checkingBeam.startConnectedNodeID === beam.startConnectedNodeID && checkingBeam.endConnectedNodeID === node.id) ||\r\n            (checkingBeam.startConnectedNodeID === node.id && checkingBeam.endConnectedNodeID === beam.startConnectedNodeID) ||\r\n            (checkingBeam.id === beam.id && checkingBeam.startConnectedNodeID === node.id)\r\n        )\r\n    }\r\n    static getBeamLength(beam: Beam): number {\r\n        return Math.round(MyMath.lengthBePoints(beam.x, beam.y, beam.endX, beam.endY) - 0.5)\r\n    }\r\n    static setNodesName(nodes: FarmNode[]) {\r\n        return nodes.map((node, index) => ({ ...node, name: (index + 1) + \"\" }))\r\n    }\r\n    static setBeamsName(_beams: Beam[], nodes: FarmNode[]): Beam[] {\r\n\r\n        const nodesMap: Map<string, FarmNode> = new Map()\r\n        nodes.forEach(node => {\r\n            nodesMap.set(node.id, node)\r\n        })\r\n        let name: string = \"\"\r\n\r\n        let beams = _beams.map(beam => {\r\n            if (!beam.startConnectedNodeID || !beam.endConnectedNodeID) return beam\r\n            const startNode = nodesMap.get(beam.startConnectedNodeID)\r\n            const endNode = nodesMap.get(beam.endConnectedNodeID)\r\n            if (startNode && endNode) {\r\n                if (startNode.name < endNode.name) name = `${startNode.name} - ${endNode.name}`\r\n                else name = `${endNode.name} - ${startNode.name}`\r\n\r\n                return {\r\n                    ...beam,\r\n                    name: name\r\n                }\r\n            }\r\n            return beam\r\n        })\r\n            .sort((a: Beam, b: Beam) => {\r\n                const numsA = a.name.split(' - ')\r\n                const numA = Number(numsA[0] + numsA[1])\r\n                const numsB = b.name.split(' - ')\r\n                const numB = Number(numsB[0] + numsB[1])\r\n\r\n                return numA > numB ? 1 : -1\r\n            })\r\n        return beams\r\n    }\r\n    static sortNodes(_nodes: FarmNode[]) {\r\n        let nodes = [..._nodes]\r\n        nodes = nodes.sort((a: FarmNode, b: FarmNode) => {\r\n            if (a.y < b.y) return -1\r\n            else if (a.y === b.y) if (a.x < b.x) return -1; else return 1\r\n            else return 1\r\n        })\r\n        nodes = this.setNodesName(nodes)\r\n        return nodes\r\n    }\r\n    static update(_nodes: FarmNode[], _beams: Beam[]): IFarm {\r\n        let nodes = [..._nodes]\r\n        let beams = [..._beams]\r\n        nodes = Farm.setNodesName(nodes)\r\n        beams = Farm.setBeamsName(beams, nodes)\r\n        return { nodes, beams }\r\n    }\r\n    static normalize(_nodes: FarmNode[], _beams: Beam[]): IFarm {\r\n        let nodes = [..._nodes]\r\n        let beams = [..._beams]\r\n        nodes = _nodes.filter(node => (node.beamsID.length !== 0 || node.isStatic))\r\n        nodes = Farm.sortNodes(nodes)\r\n        beams = Farm.setBeamsName(_beams, nodes)\r\n        return {\r\n            nodes,\r\n            beams\r\n        }\r\n    }\r\n\r\n    static async calculate(nodes: FarmNode[], beams: Beam[], props?: FarmCalcProps): Promise<FarmCalcData> {\r\n        const NodeCoord: ICoord[] = []\r\n        const NodeV: ICoord[] = []\r\n        const LinkNodes: ICoord[] = []\r\n        const Forces: number[] = []\r\n        const LinkLength: number[] = []\r\n        const _NodeMap: Map<string, FarmNode> = new Map()\r\n\r\n        if (nodes.find(node => node.beamsID.length === 0 && node.isStatic)) throw new Error(\"Не все узлы соединены\")\r\n        let _nodeVindex = 0;\r\n        nodes.forEach((node, i) => {\r\n            NodeCoord.push({ x: node.x, y: node.y })\r\n            _NodeMap.set(node.id, node)\r\n            switch (node.fixation) {\r\n                case NodeFixation.X: {\r\n                    _nodeVindex++\r\n                    NodeV.push({ x: 0, y: _nodeVindex })\r\n                    if (node.forceY) Forces.push(-node.forceY.value)\r\n\r\n                    break;\r\n                }\r\n                case NodeFixation.Y: {\r\n                    _nodeVindex++\r\n                    NodeV.push({ x: _nodeVindex, y: 0 })\r\n                    if (node.forceX) Forces.push(-node.forceX.value)\r\n                    else Forces.push(0)\r\n                    break;\r\n                }\r\n                case NodeFixation.YX:\r\n                case NodeFixation.XY: {\r\n                    NodeV.push({ x: 0, y: 0 })\r\n                    break;\r\n                }\r\n                case NodeFixation.None: {\r\n                    _nodeVindex++\r\n                    NodeV.push({ x: _nodeVindex, y: _nodeVindex + 1 })\r\n                    _nodeVindex++\r\n                    if (node.forceX) Forces.push(-node.forceX.value)\r\n                    else Forces.push(0)\r\n                    if (node.forceY) Forces.push(-node.forceY.value)\r\n                    else Forces.push(0)\r\n                    break;\r\n                }\r\n                default: break;\r\n            }\r\n        })\r\n        beams.forEach((beam, i) => {\r\n            const nums = beam.name.split(' - ')\r\n            LinkNodes.push({\r\n                x: Number(nums[0]) - 1,\r\n                y: Number(nums[1]) - 1\r\n            })\r\n            LinkLength.push(Farm.getBeamLength(beam))\r\n        })\r\n\r\n        const data = await FarmCalc.init(NodeCoord, NodeV, Forces, LinkNodes, LinkLength, props)\r\n        return data\r\n    }\r\n\r\n    static correctAfterCalc(nodes: FarmNode[], beams:Beam[], {Vi,P}:FarmCalcData) : IFarm{\r\n        const bufNodeMap: Map<string, FarmNode> = new Map()\r\n        let _nodes = nodes.map((item, i) => {\r\n            const node = {\r\n                ...item,\r\n                newX: Math.round(item.x + (Vi[i].x * consts.UI.koefOfNewPos)),\r\n                newY: Math.round(item.y - (Vi[i].y * consts.UI.koefOfNewPos)),\r\n                withNewPosition: true\r\n            }\r\n            bufNodeMap.set(node.id,node)\r\n            return node\r\n        })\r\n        let _beams = beams.map((beam, i) => {\r\n            const startNode = (bufNodeMap.get(beam.startConnectedNodeID) as FarmNode)\r\n            const endNode = (bufNodeMap.get(beam.endConnectedNodeID) as FarmNode)\r\n            return {\r\n                ...beam,\r\n                newX: startNode.newX,\r\n                newY: startNode.newY,\r\n                newEndX: endNode.newX,\r\n                newEndY: endNode.newY,\r\n                startForce:Math.round(P[i][0][0]),\r\n                endForce:Math.round(P[i][1][0]),\r\n                withNewPosition: true\r\n            }\r\n        })\r\n\r\n        return {\r\n            nodes:_nodes,\r\n            beams:_beams\r\n        }\r\n        \r\n    }\r\n}\r\n\r\nexport default Farm","import * as React from 'react'\r\nimport { Theme, createStyles, withStyles, Typography, IconButton, Box, Divider } from '@material-ui/core';\r\nimport { WithStyles } from '@material-ui/styles';\r\nimport { Delete as DeleteIcon, Info as InfoEntityIcon } from '@material-ui/icons';\r\nimport { Sidebar } from 'src/components';\r\nimport { Entity } from 'src/models/Farm/ModelEntity';\r\nimport { instanceOfNode, FarmNode, NodeFixation } from 'src/models/Farm/ModelNode';\r\nimport { instanceOfBeam, Beam } from 'src/models/Farm/ModelBeam';\r\nimport Farm from 'src/models/Farm/Farm';\r\nimport { Force } from 'src/models/Farm/ModelForce';\r\n\r\nconst styles = (theme: Theme) => createStyles({\r\n    root: {\r\n        padding: theme.spacing(2)\r\n    },\r\n    title: {\r\n        marginBottom: theme.spacing(2)\r\n    },\r\n    btnGroup: {\r\n        marginTop: theme.spacing(2)\r\n    }\r\n})\r\n\r\ninterface EntityInfoProps extends WithStyles<typeof styles> {\r\n    entity?: Entity | undefined,\r\n    onDelete(entity: Entity): void\r\n}\r\n\r\ninterface EntityInfoState {\r\n\r\n}\r\nconst TextRow = ({ text, className }: { text: string, className?: string }) =>     (\r\n    <React.Fragment>\r\n        <Typography variant=\"subtitle2\">\r\n            {text}\r\n        </Typography>\r\n        <Divider />\r\n    </React.Fragment>\r\n)\r\nconst TextRows = ({ text, className }: { text: string[], className?: string }) => {\r\n    if (text.length === 0) return (<React.Fragment />)\r\n    return (\r\n        <React.Fragment>\r\n            {text.map((str,i) => (\r\n                <Typography variant=\"subtitle2\" key={i}>\r\n                    {str}\r\n                </Typography>\r\n            ))}\r\n            <Divider />\r\n        </React.Fragment>\r\n    )\r\n}\r\nclass UIEntityInfo extends React.PureComponent<EntityInfoProps, EntityInfoState>{\r\n    constructor(props: EntityInfoProps) {\r\n        super(props)\r\n        this.state = {\r\n        }\r\n    }\r\n    viewFixationInfo(node: FarmNode) {\r\n        switch (node.fixation) {\r\n            case NodeFixation.X: return (\r\n                <TextRow text={\"Фиксация по оси X\"} />\r\n            )\r\n            case NodeFixation.Y: return (\r\n                <TextRow text={\"Фиксация по оси Y\"} />\r\n            )\r\n            case NodeFixation.XY: return (\r\n                <TextRow text={\"Фиксация по осям Х и Y\"} />\r\n            )\r\n            default: return undefined\r\n        }\r\n    }\r\n    NodeInfo(node: FarmNode) {\r\n        const { classes, onDelete } = this.props        \r\n        return (\r\n            <Box className={classes.root}>\r\n                <Typography variant=\"h6\" className={classes.title}>\r\n                    Узел {node.name}\r\n                </Typography>\r\n                <TextRows text={[`X: ${node.x} мм`,`Y: ${node.y} мм`]}/>\r\n                {node.withNewPosition && (<TextRows text={[`ΔX: ${node.newX-node.x} мм`,`ΔY': ${node.newY - node.y} мм`]}/>)}\r\n                {node.forceX && (<TextRows text={[`Сила: ${node.forceX.value} H`, `Угол: ${node.forceX.angle}°`]} />)}\r\n                {node.forceY && (<TextRows text={[`Сила: ${node.forceY.value} H`, `Угол: ${node.forceY.angle}°`]} />)}\r\n                {this.viewFixationInfo(node)}\r\n                <div className={classes.btnGroup}>\r\n                    <IconButton\r\n                        aria-label=\"Delete\"\r\n                        onClick={() => onDelete(node)}\r\n                    >\r\n                        <DeleteIcon />\r\n                    </IconButton>\r\n\r\n                </div>\r\n            </Box>\r\n        )\r\n    }\r\n    BeamInfo(beam: Beam) {\r\n        const { classes, onDelete } = this.props\r\n        return (\r\n            <Box className={classes.root}>\r\n                <Typography variant=\"h6\" className={classes.title}>\r\n                    Стержень {beam.name}\r\n                </Typography>\r\n                <TextRow text={`Длина: ${beam.length || Farm.getBeamLength(beam)} мм`}/>\r\n                {beam.withNewPosition && (<TextRows text={[`Сила в начале: ${beam.startForce} H`,`Сила в конце: ${beam.endForce} H`]} />)}\r\n                <div className={classes.btnGroup}>\r\n                    <IconButton\r\n                        aria-label=\"Delete\"\r\n                        onClick={() => onDelete(beam)}\r\n                    >\r\n                        <DeleteIcon />\r\n                    </IconButton>\r\n                </div>\r\n            </Box>\r\n        )\r\n    }\r\n    viewInfo(entity: Entity | undefined) {\r\n        if (instanceOfNode(entity)) return this.NodeInfo(entity)\r\n        else if (instanceOfBeam(entity)) return this.BeamInfo(entity)\r\n    }\r\n    render() {\r\n        const { entity } = this.props\r\n        return (\r\n            <Sidebar\r\n                anchor=\"right\"\r\n                title=\"Информация о выбранном объекте\"\r\n                btnIcon={(<InfoEntityIcon />)}\r\n            >\r\n                {this.viewInfo(entity)}\r\n                <Divider />\r\n            </Sidebar>\r\n        )\r\n    }\r\n\r\n}\r\n\r\nexport default withStyles(styles)(UIEntityInfo)","import * as React from 'react'\r\nimport { Theme, createStyles, withStyles,  Paper } from '@material-ui/core';\r\nimport { ToggleButtonGroup } from '@material-ui/lab'\r\nimport { WithStyles } from '@material-ui/styles';\r\nimport { ZoomOutMap as MoveIcon, MyLocation as AddNodeIcon, Delete as DeleteIcon, Power as ConnectIcon } from '@material-ui/icons';\r\n\r\nimport { fade } from '@material-ui/core/styles';\r\nimport { MyToggleButton } from 'src/components';\r\nimport { UIModes } from 'src/utils/UI';\r\n\r\nconst styles = (theme: Theme) => createStyles({\r\n    root: {\r\n        position: 'absolute',\r\n        padding: theme.spacing(1),\r\n        bottom: theme.spacing(2),\r\n        left: \"50%\",\r\n        transform: 'translateX(-50%)',\r\n        backgroundColor: fade(theme.palette.primary.light, 0.4),\r\n        transition: theme.transitions.create(['background-color', 'box-shadow', 'border'], {\r\n            duration: theme.transitions.duration.short,\r\n        }),\r\n        '&:hover':{\r\n            backgroundColor: theme.palette.primary.light,\r\n        }\r\n    },\r\n    modsBtnGroup: {\r\n        borderRadius: 0,\r\n        backgroundColor: 'transparent'\r\n    }\r\n})\r\n\r\n\r\nexport interface IMode {\r\n    name: string,\r\n    mod: UIModes\r\n    icon: JSX.Element\r\n}\r\n\r\n\r\n\r\nexport interface UIToolPanelProps extends WithStyles<typeof styles> {\r\n    selected: UIModes\r\n    onSelect(mod: UIModes): void\r\n}\r\n\r\nconst UIToolPanel: React.FC<UIToolPanelProps> = ({ onSelect, selected, classes }) => {\r\n    const mods: IMode[] = [\r\n        {\r\n            name: \"Перемещение\",\r\n            mod: UIModes.move,\r\n            icon: (<MoveIcon />)\r\n        },\r\n        {\r\n            name: \"Добавить узел\",\r\n            mod: UIModes.addNode,\r\n            icon: (<AddNodeIcon />)\r\n        },\r\n        {\r\n            name: \"Соединить узлы\",\r\n            mod: UIModes.addBeam,\r\n            icon: (<ConnectIcon />)\r\n        },\r\n        {\r\n            name: \"Удалить\",\r\n            mod: UIModes.delete,\r\n            icon: (<DeleteIcon />)\r\n        }\r\n    ]\r\n    return (\r\n        <Paper className={classes.root}>\r\n            <ToggleButtonGroup\r\n                value={selected}\r\n                exclusive\r\n                onChange={(e, value) => onSelect(value)}\r\n                size=\"medium\"\r\n                className={classes.modsBtnGroup}\r\n            >\r\n                {mods.map(item => (\r\n                    <MyToggleButton\r\n                        key={item.mod}\r\n                        value={item.mod}\r\n                        selected={item.mod === selected}\r\n                        icon={item.icon}\r\n                        name={item.name}\r\n                        \r\n                    />\r\n                ))}\r\n            </ToggleButtonGroup>\r\n        </Paper>\r\n    )\r\n}\r\n\r\nexport default withStyles(styles)(UIToolPanel)","import * as React from 'react'\r\nimport KeyHandler from 'react-key-handler'\r\nimport Konva from \"konva\"\r\nimport { Stage } from \"react-konva\"\r\nimport { createStyles, Theme, WithStyles, withStyles, Box } from '@material-ui/core';\r\nimport { UITreePanel, UIEntityInfo, UIStage, UIHeader, UIToolPanel } from '.';\r\nimport { MyMath } from 'src/utils';\r\nimport Stats from 'react-stats'\r\nimport { instanceOfBeam } from 'src/models/Farm/ModelBeam';\r\nimport { Entity } from 'src/models/Farm/ModelEntity';\r\nimport { instanceOfNode } from 'src/models/Farm/ModelNode';\r\nimport { FarmContainer } from '../FarmContainer'\r\nimport { UIModes } from 'src/utils/UI';\r\nimport {  canvas} from 'src/static/const';\r\nimport { IFarm } from 'src/models/Farm/FarmTypes';\r\n\r\n\r\n\r\nconst styles = (theme: Theme) => createStyles({\r\n    root: {\r\n        width: \"100%\",\r\n        height: \"100%\",\r\n        overflow: \"hidden\",\r\n        background: theme.palette.background.default,\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n    },\r\n    stageBox: {\r\n        display: 'flex',\r\n        flexGrow: 1,\r\n        overflow: 'hidden',\r\n\r\n    },\r\n    toolbar: theme.mixins.toolbar,\r\n})\r\nexport interface UIFarmProps extends IFarm, WithStyles<typeof styles> {\r\n    addNode: typeof FarmContainer.prototype.addNode,\r\n    addBeam: typeof FarmContainer.prototype.addBeam,\r\n    moveNode: typeof FarmContainer.prototype.moveNode,\r\n    moveBeam: typeof FarmContainer.prototype.moveBeam,\r\n    connectBeamToNode: typeof FarmContainer.prototype.connectBeamToNode,\r\n    deleteEntity: typeof FarmContainer.prototype.deleteEntity\r\n    defautlFarm: typeof FarmContainer.prototype.defautlFarm\r\n    saveFarm: typeof FarmContainer.prototype.saveFarm,\r\n    calculateFarm: typeof FarmContainer.prototype.calculateFarm\r\n    calculation: boolean,\r\n    calculated: boolean,\r\n}\r\n\r\nexport interface UIFarmState {\r\n    stageWidth: number,\r\n    stageHeight: number,\r\n    uiMode: UIModes,\r\n    selectedEntityID: string,\r\n    paintEntity: Entity | undefined\r\n}\r\n\r\nclass UIFarm extends React.Component<UIFarmProps, UIFarmState>{\r\n    private stage: React.RefObject<Stage & Konva.Stage>\r\n    constructor(props: UIFarmProps) {\r\n        super(props)\r\n        this.state = {\r\n            stageHeight: canvas.height,\r\n            stageWidth: canvas.width,\r\n            uiMode: UIModes.none,\r\n            selectedEntityID: \"\",\r\n            paintEntity: undefined,\r\n        }\r\n        this.UIonClick = this.UIonClick.bind(this)\r\n        this.UIonDrag = this.UIonDrag.bind(this)\r\n        this.UIonMouseMove = this.UIonMouseMove.bind(this)\r\n        this.onKeyHandle = this.onKeyHandle.bind(this)\r\n        this.selectEntity = this.selectEntity.bind(this)\r\n        this.clearFarm = this.clearFarm.bind(this)\r\n        this.deleteEntity = this.deleteEntity.bind(this)\r\n        this.saveFarm = this.saveFarm.bind(this)\r\n        this.calculateFarm = this.calculateFarm.bind(this)\r\n        this.stage = React.createRef();\r\n    }\r\n    componentDidMount() {\r\n        const { current: stage } = this.stage\r\n        if (stage) {\r\n            const container: HTMLDivElement = stage.attrs.container.parentElement.parentElement            \r\n            if (container) {\r\n                container.scrollTop = (container.scrollHeight - container.offsetHeight) / 2\r\n                container.scrollLeft = (container.scrollWidth - container.offsetWidth) / 2\r\n            }\r\n        }\r\n    }\r\n\r\n    UIonClick(e: Konva.KonvaEventObject<MouseEvent>, entity?: Entity) {\r\n        const { uiMode, paintEntity } = this.state\r\n        const { calculation } = this.props\r\n        const isEmptyPlace = e.target.getStage() === e.target\r\n        e.evt.preventDefault()\r\n        if (e.evt.button === 0 && !calculation) {\r\n            switch (uiMode) {\r\n                case UIModes.none: {\r\n                    if (!isEmptyPlace) {\r\n                        this.selectEntity(entity);\r\n                    } else this.setState({ selectedEntityID: \"\" })\r\n\r\n                    break;\r\n                }\r\n                case UIModes.addNode: {\r\n                    if (isEmptyPlace) {\r\n                        const { layerX, layerY } = e.evt\r\n                        const cellX = MyMath.cellX(layerX)\r\n                        const cellY = MyMath.cellX(layerY)\r\n                        this.props.addNode(cellX, cellY)\r\n                    }\r\n                    break;\r\n                }\r\n                case UIModes.addBeam: {\r\n                    if (!isEmptyPlace && instanceOfNode(entity)) {\r\n                        const beam = this.props.addBeam({\r\n                            x: entity.x,\r\n                            y: entity.y\r\n                        })\r\n                        if (instanceOfBeam(beam)) {\r\n                            const connectedBeam = this.props.connectBeamToNode(entity, beam, 'start')\r\n                            if (instanceOfBeam(connectedBeam))\r\n                                this.setState({\r\n                                    paintEntity: connectedBeam,\r\n                                    uiMode: UIModes.addBeamStart\r\n                                })\r\n                            else this.props.deleteEntity(beam.id)\r\n                        }\r\n                    }\r\n                    break;\r\n                }\r\n                case UIModes.addBeamStart: {\r\n                    if (!isEmptyPlace && instanceOfNode(entity) && instanceOfBeam(paintEntity)) {\r\n                        if (this.props.connectBeamToNode(entity, paintEntity, 'end'))\r\n                            this.setState({\r\n                                uiMode: UIModes.addBeam,\r\n                                paintEntity: undefined\r\n                            })\r\n                    }\r\n                    break;\r\n                }\r\n                case UIModes.delete: {\r\n                    if (!isEmptyPlace && entity) {\r\n                        this.deleteEntity(entity)\r\n                    }\r\n                    break;\r\n                }\r\n                default:\r\n                    break;\r\n            }\r\n            \r\n            if (isEmptyPlace) this.setState({ selectedEntityID: \"\" })\r\n        }\r\n\r\n\r\n\r\n    }\r\n    UIonMouseMove(e: Konva.KonvaEventObject<MouseEvent>) {        \r\n        const { calculation } = this.props\r\n        if (calculation) return\r\n        const { uiMode, paintEntity } = this.state\r\n        const { layerX, layerY } = e.evt\r\n        switch (uiMode) {\r\n            case UIModes.addBeamStart: {\r\n                if (e.target.getStage()) {\r\n                    if (paintEntity && instanceOfBeam(paintEntity)) {\r\n                        this.props.moveBeam(paintEntity, layerX, layerY)\r\n                    } else this.setState({ uiMode: UIModes.addBeam })\r\n                }\r\n                break;\r\n            }\r\n            case UIModes.delete: {\r\n                const stage: Stage & Konva.Stage = e.target.getStage()\r\n                if (stage === e.target) {\r\n                    stage.container().style.cursor = 'default'\r\n                }\r\n                break;\r\n            }\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n    UIonDrag(e: Konva.KonvaEventObject<DragEvent>, entity: Entity) {\r\n        const { calculation } = this.props\r\n        if (calculation) return\r\n        const { uiMode } = this.state\r\n        switch (uiMode) {\r\n            case UIModes.move: {\r\n                if (instanceOfNode(entity)) {\r\n                    if (e.evt.defaultPrevented) {\r\n                        const { layerX, layerY } = e.evt\r\n                        this.props.moveNode(entity, MyMath.cellX(layerX), MyMath.cellY(layerY))\r\n                    }\r\n                }\r\n                break\r\n            }\r\n            default:\r\n                break;\r\n        }\r\n\r\n    }\r\n    onKeyHandle(e: KeyboardEvent) {\r\n        switch (e.key) {\r\n            case \"Escape\": {\r\n                this.deletePaintEntity()\r\n                this.setState({\r\n                    uiMode:0\r\n                })\r\n                break;\r\n            }\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n    deletePaintEntity() {\r\n        if (this.state.paintEntity)\r\n            this.props.deleteEntity(this.state.paintEntity.id)\r\n        this.setState({\r\n            paintEntity: undefined\r\n        })\r\n    }\r\n    deleteEntity(entity: Entity) {\r\n        const { calculation } = this.props\r\n        if (calculation) return\r\n        if (this.state.selectedEntityID && this.state.selectedEntityID === entity.id)\r\n            this.setState({\r\n                selectedEntityID: \"\"\r\n            })\r\n        this.props.deleteEntity(entity.id)\r\n    }\r\n    selectEntity(entity: Entity | undefined) {\r\n        const { calculation } = this.props\r\n        if (calculation) return\r\n        if (entity) this.setState({ selectedEntityID: entity.id })\r\n    }\r\n    clearFarm(): void {\r\n        if (window.confirm('Вы уверены, что хотите очистить холст?'))\r\n            this.props.defautlFarm()\r\n    }\r\n    saveFarm(e: React.FormEvent<HTMLButtonElement>) {\r\n        if (window.confirm('Вы уверены, что хотите сохранить холст в кэш?'))\r\n            this.props.saveFarm()\r\n    }\r\n    calculateFarm(e: React.FormEvent<HTMLButtonElement>) {\r\n        this.props.calculateFarm()\r\n    }\r\n    setSelectedMode(mode: UIModes) {\r\n        const { calculation } = this.props\r\n        if (calculation) return\r\n        if (this.state.paintEntity)\r\n            this.props.deleteEntity(this.state.paintEntity.id)\r\n        this.setState({\r\n            uiMode: mode || 0,\r\n            paintEntity: undefined\r\n        })\r\n    }\r\n    render() {\r\n        const { stageHeight, stageWidth, uiMode, selectedEntityID} = this.state\r\n        const { classes, nodes, beams, calculation, calculated } = this.props\r\n        const selectedEntity = ([...nodes,...beams].find(item => item.id === selectedEntityID) as Entity)\r\n        return (\r\n            <Box className={classes.root}>\r\n                <Stats isActive={true} />\r\n                <KeyHandler\r\n                    keyEventName={\"keyup\"}\r\n                    keyValue={\"Escape\"}\r\n                    onKeyHandle={this.onKeyHandle}\r\n                />\r\n                <UIHeader\r\n                    hundleClear={this.clearFarm}\r\n                    hundleSave={this.saveFarm}\r\n                    hundleCalculate={this.calculateFarm}\r\n                    disabled={calculation} />\r\n\r\n                <div className={classes.toolbar} />\r\n                <Box className={classes.stageBox}>\r\n                    <div className={classes.toolbar} />\r\n                    <UITreePanel\r\n                        nodes={nodes}\r\n                        beams={beams}\r\n                        selectedEntity={selectedEntity}\r\n                        onSelect={this.selectEntity}\r\n                    />\r\n                    <UIStage\r\n                        onClick={this.UIonClick}\r\n                        onDrag={this.UIonDrag}\r\n                        onMouseMove={this.UIonMouseMove}\r\n                        stageHeight={stageHeight}\r\n                        stageWidth={stageWidth}\r\n                        nodes={nodes}\r\n                        beams={beams}\r\n                        stage={this.stage}\r\n                        selectedEntity={selectedEntity}\r\n                        uiMode={uiMode}\r\n                        viewNewPos={calculated}\r\n                    />\r\n                    <UIEntityInfo\r\n                        entity={selectedEntity}\r\n                        onDelete={this.deleteEntity} />\r\n                </Box>\r\n                <UIToolPanel\r\n                    selected={uiMode}\r\n                    onSelect={this.setSelectedMode.bind(this)} />\r\n            </Box>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withStyles(styles)(UIFarm)","import { FarmNode, createNode } from \"./ModelNode\";\r\nimport { createForce } from \"./ModelForce\";\r\nimport { canvas, UI } from \"src/static/const\";\r\nimport { Beam } from \"./ModelBeam\";\r\nimport { IFarm, IFixedNodeCreate, IStaticNodeCreate, ISimpleNodeCreate } from \"./FarmTypes\";\r\n\r\nexport class FarmFactory {\r\n    static firstPlacement(_nodes: FarmNode[], _beams: Beam[]): IFarm {\r\n\r\n        const nodes = _nodes.map(node => {\r\n            const x = node.x + Math.round((canvas.width / 3) / UI.cellSize) * UI.MMinCell\r\n            const y = node.y + Math.round((canvas.height / 3) / UI.cellSize) * UI.MMinCell\r\n            return {\r\n                ...node,\r\n                x,\r\n                y\r\n            }\r\n        })\r\n        const beams = _beams.map(beam => {\r\n            const x = beam.x + Math.round((canvas.width / 3) / UI.cellSize) * UI.MMinCell\r\n            const y = beam.y + Math.round((canvas.height / 3) / UI.cellSize) * UI.MMinCell\r\n            return {\r\n                ...beam,\r\n                x,\r\n                y\r\n            }\r\n        })\r\n\r\n        return { nodes, beams }\r\n    }\r\n    static parse(nodesJSON:string, beamsJSON:string):IFarm{\r\n        let nodes:FarmNode[] = JSON.parse(nodesJSON)\r\n        let beams:Beam[] = JSON.parse(beamsJSON)\r\n\r\n        nodes = nodes.map((node) => {\r\n            return {\r\n                ...node,\r\n                newX:node.x,\r\n                newY:node.y,\r\n                withNewPosition:false,\r\n            }\r\n        })\r\n        beams = beams.map((beam) => {\r\n            return {\r\n                ...beam,\r\n                withNewPosition:false,\r\n            }\r\n        })\r\n\r\n        return {\r\n            nodes,\r\n            beams\r\n        }\r\n    }\r\n    static createNodes(_fixedNodes: IFixedNodeCreate[], _staticNodes: IStaticNodeCreate[], _nodes: ISimpleNodeCreate[]): FarmNode[] {\r\n        const nodes: FarmNode[] = []\r\n        let index: number = 0;\r\n        return nodes.concat(\r\n            _fixedNodes.map(item => {\r\n                index++\r\n                return createNode({ ...item, isStatic: true, name: index + \"\" })\r\n            }),\r\n            _staticNodes.map(item => {\r\n                index++\r\n                const _node = createNode({ ...item, isStatic: true, name: index + \"\" })\r\n                if (item.angle === 0) _node.forceX = createForce({ nodeID: _node.id, value: item.value, angle: item.angle })\r\n                else _node.forceY = createForce({ nodeID: _node.id, value: item.value, angle: item.angle })\r\n                return _node\r\n            }),\r\n            _nodes.map(item => {\r\n                index++\r\n                return createNode({ ...item, name: index + \"\" })\r\n            })\r\n        )\r\n    }\r\n}\r\n\r\nexport default FarmFactory","import FarmPage from './FarmContainer'\r\n\r\nexport default FarmPage","import * as React from 'react'\r\nimport { UIFarm } from './components'\r\nimport { FarmNode, INode, instanceOfNode } from 'src/models/Farm/ModelNode';\r\nimport { Beam, IBeam, instanceOfBeam } from 'src/models/Farm/ModelBeam';\r\nimport { Force, IForce, createForce } from 'src/models/Farm/ModelForce';\r\nimport Farm from 'src/models/Farm/Farm';\r\nimport testFarm from './_testFarm'\r\nimport { consts } from 'src/static';\r\nimport { IFarm } from 'src/models/Farm/FarmTypes';\r\nimport FarmFactory from 'src/models/Farm/FarmFactory';\r\n\r\ninterface State extends IFarm {\r\n    calculation: boolean,\r\n    calculated:boolean\r\n}\r\ninterface Props {\r\n\r\n}\r\nexport class FarmContainer extends React.Component<Props, State> {\r\n    constructor(props: Props) {\r\n        super(props)\r\n        this.state = {\r\n            nodes: [],\r\n            beams: [],\r\n            calculation: false,\r\n            calculated: false,\r\n        }\r\n        this.defautlFarm = this.defautlFarm.bind(this)\r\n        this.saveFarm = this.saveFarm.bind(this)\r\n        this.calculateFarm = this.calculateFarm.bind(this)\r\n    }\r\n    componentDidMount() {\r\n        const nodesJSON = localStorage.getItem(\"nodes\")\r\n        const beamsJSON = localStorage.getItem(\"beams\")\r\n        if (nodesJSON && beamsJSON) {\r\n            const {nodes, beams} = FarmFactory.parse(nodesJSON, beamsJSON)\r\n            this.setState({ nodes, beams })\r\n        } else this.defautlFarm()\r\n    }\r\n    componentWillUpdate(nextProps:Props,nextState:State){\r\n        if(this.state.calculated && nextState.calculated ) this.setState({calculated:false})\r\n    }\r\n    addNode = (x: number, y: number, options?: INode) => {\r\n        const node = Farm.addNode(this.state.nodes, { ...options, x: x * consts.UI.koefOnGrid, y: y * consts.UI.koefOnGrid })\r\n        if (node) {\r\n            this.setState({\r\n                nodes: [...this.state.nodes, node]\r\n            })\r\n            return node\r\n        }\r\n        return null\r\n    }\r\n    addBeam = (options?: IBeam) => {\r\n        const beam = Farm.addBeam(this.state.beams, { ...options })\r\n        if (beam) {\r\n            this.setState({\r\n                beams: [...this.state.beams, beam]\r\n            })\r\n            return beam\r\n        }\r\n        return null\r\n    }\r\n    connectBeamToNode = (_node: FarmNode, _beam: Beam, place: 'start' | 'end') => {\r\n\r\n        const node: FarmNode = { ..._node }\r\n        const beam: Beam = { ..._beam }\r\n\r\n        switch (place) {\r\n            case 'start': {\r\n                beam.startConnectedNodeID = node.id\r\n                beam.name = node.name + \" - \"\r\n                node.beamsID.push(beam.id)\r\n                Farm.moveEntity(beam, node.x, node.y)\r\n                this.setState(state => ({\r\n                    nodes: state.nodes.map(item => {\r\n                        if (item.id === node.id) return node\r\n                        return item\r\n                    }),\r\n                    beams: state.beams.map(item => {\r\n                        if (item.id === beam.id) return beam\r\n                        return item\r\n                    })\r\n                }))\r\n                return beam;\r\n            }\r\n            case 'end': {\r\n                const beamsOfNode = this.state.beams.filter(item => (node && node.beamsID.includes(item.id)))\r\n                const oldBeam = beamsOfNode.find(item => Farm.findOldBeam(node, beam, item))\r\n                if (!oldBeam) {\r\n                    node.beamsID.push(beam.id)\r\n                    beam.endConnectedNodeID = node.id\r\n                    beam.name = beam.name + node.name\r\n                    Farm.moveBeamEnd(beam, node.x, node.y)\r\n                    this.setState(state => ({\r\n                        nodes: state.nodes.map(item => {\r\n                            if (item.id === node.id) return node\r\n                            return item\r\n                        }),\r\n                        beams: state.beams.map(item => {\r\n                            if (item.id === beam.id) return beam\r\n                            return item\r\n                        })\r\n                    }))\r\n                    return true\r\n                }\r\n                return false\r\n            }\r\n            default: return false\r\n        }\r\n    }\r\n    addForceToNode = (node: FarmNode, options?: IForce) => {\r\n        let force: Force = createForce({\r\n            ...options,\r\n            nodeID: node.id,\r\n        })\r\n\r\n        if (force.angle === 0) node.forceX = force\r\n        else node.forceY = force\r\n        this.setState(state => ({\r\n            nodes: state.nodes.map(item => {\r\n                if (node && item.id === node.id) return node\r\n                return item\r\n            }),\r\n        }))\r\n        return force\r\n\r\n    }\r\n    moveNode = (_node: FarmNode, _x: number, _y: number, ) => {\r\n        const x = _x * consts.UI.koefOnGrid\r\n        const y = _y * consts.UI.koefOnGrid\r\n        if (_node.isStatic) return false\r\n        const oldNode = this.state.nodes.find(item => item.x === x && item.y === y)\r\n        if (!oldNode) {\r\n            const node: FarmNode = { ..._node }\r\n            Farm.moveEntity(node, x, y)\r\n            const beamsOfNode = this.state.beams.filter(item => (node && node.beamsID.includes(item.id)))\r\n            beamsOfNode.forEach(item => {\r\n                if (node) {\r\n                    const beam: Beam = { ...item }\r\n                    if (beam.startConnectedNodeID === node.id) Farm.moveEntity(beam, x, y)\r\n                    else if (item.endConnectedNodeID === node.id) Farm.moveBeamEnd(beam, x, y)\r\n                    this.setState(state => ({\r\n                        beams: state.beams.map(item => {\r\n                            if (item.id === beam.id) return beam\r\n                            return item\r\n                        })\r\n                    }))\r\n                }\r\n            })\r\n            this.setState(state => ({\r\n                nodes: state.nodes.map(item => {\r\n                    if (item.id === node.id) return node\r\n                    return item\r\n                }),\r\n            }))\r\n\r\n            return true\r\n        }\r\n        return false\r\n    }\r\n    moveBeam = (beam: Beam, _x: number, _y: number, place: 'start' | 'end' = 'end') => {\r\n\r\n        const x = _x * consts.UI.koefOnGrid\r\n        const y = _y * consts.UI.koefOnGrid\r\n        beam = { ...beam }\r\n        if (place === 'start') Farm.moveEntity(beam, x, y)\r\n        else Farm.moveBeamEnd(beam, x, y)\r\n        this.setState(state => ({\r\n            beams: state.beams.map(item => {\r\n                if (beam && item.id === beam.id) return beam\r\n                return item\r\n            })\r\n        }))\r\n        return true\r\n    }\r\n    deleteEntity = (id: string) => {\r\n        let nodes: FarmNode[] = [...this.state.nodes]\r\n        let beams: Beam[] = [...this.state.beams]\r\n        let entity: Beam | FarmNode | undefined =\r\n            this.state.beams.find(item => item.id === id) ||\r\n            this.state.nodes.find(item => item.id === id)\r\n        if (instanceOfNode(entity)) {\r\n            if (entity.isStatic) return false\r\n            const beamsOfNode = beams.filter(item => (instanceOfNode(entity) && entity.beamsID.includes(item.id)))\r\n            beamsOfNode.forEach(beam => {\r\n                if (instanceOfNode(entity)) {\r\n                    let _node: FarmNode | undefined\r\n                    if (beam.startConnectedNodeID === entity.id) _node = nodes.find(item => item.id === beam.endConnectedNodeID)\r\n                    else _node = nodes.find(item => item.id === beam.startConnectedNodeID)\r\n                    if (_node) {\r\n                        _node = { ..._node }\r\n                        _node.beamsID = _node.beamsID.filter(id => id !== beam.id)\r\n                        nodes = nodes.map(item => {\r\n                            if (_node && item.id === _node.id) return _node\r\n                            return item\r\n                        })\r\n                    }\r\n                    beams = beams.filter(i => i.id !== beam.id)\r\n                }\r\n            })\r\n            nodes = nodes.filter(i => (instanceOfNode(entity) && i.id !== entity.id))\r\n            const { nodes: upNodes, beams: upBeams } = Farm.update(nodes, beams)\r\n            this.setState({\r\n                nodes: upNodes,\r\n                beams: upBeams\r\n            })\r\n            return true\r\n\r\n        } else if (instanceOfBeam(entity)) {\r\n            [entity.startConnectedNodeID, entity.endConnectedNodeID].forEach(nodeID => {\r\n                if (nodeID && nodeID.length > 0) {\r\n                    let _node = nodes.find(item => item.id === nodeID)\r\n                    if (_node && instanceOfBeam(entity)) {\r\n                        _node = { ..._node }\r\n                        _node.beamsID = _node.beamsID.filter(id => {\r\n                            if (entity) return id !== entity.id\r\n                            return false\r\n                        })\r\n                        nodes = nodes.map(item => {\r\n                            if (_node && item.id === _node.id) return _node\r\n                            return item\r\n                        })\r\n                    }\r\n                }\r\n            })\r\n            beams = beams.filter(i => (instanceOfBeam(entity) && i.id !== entity.id))\r\n            this.setState({\r\n                nodes, beams\r\n            })\r\n            return true\r\n        }\r\n\r\n        return false\r\n    }\r\n    async calculateFarm() {\r\n        let { nodes, beams } = Farm.normalize(this.state.nodes, this.state.beams)\r\n        this.setState({\r\n            nodes,\r\n            beams,\r\n            calculation:true\r\n        })\r\n        try {\r\n            const data = await Farm.calculate(nodes, beams)\r\n            const withNewPos = Farm.correctAfterCalc(nodes, beams, data)\r\n            this.setState({\r\n                nodes:withNewPos.nodes,\r\n                beams:withNewPos.beams,\r\n                calculation:false,\r\n                calculated:true\r\n            })\r\n\r\n        } catch (e) {\r\n            if (e.message)\r\n                alert(e.message)\r\n            else alert(e)\r\n            console.error(e);\r\n            \r\n            this.setState({\r\n                calculation:false\r\n            })\r\n        }\r\n    }\r\n    defautlFarm() {\r\n        let _farm = testFarm()\r\n        localStorage.removeItem('nodes')\r\n        localStorage.removeItem('beams')\r\n        _farm = FarmFactory.firstPlacement(_farm.nodes, _farm.beams)\r\n        const { nodes, beams } = _farm\r\n        this.setState({\r\n            nodes,\r\n            beams,\r\n        })\r\n    }\r\n    saveFarm() {\r\n        const { nodes, beams } = this.state\r\n        localStorage.setItem('nodes', JSON.stringify(nodes))\r\n        localStorage.setItem('beams', JSON.stringify(beams))\r\n    }\r\n    render() {\r\n        return (\r\n            <UIFarm\r\n                {...this.state}\r\n                {...this}\r\n            />\r\n        )\r\n    }\r\n}\r\nexport default FarmContainer","import { FarmNode, NodeFixation } from \"src/models/Farm/ModelNode\";\r\nimport { Beam } from \"src/models/Farm/ModelBeam\";\r\nimport { FarmFactory } from \"src/models/Farm/FarmFactory\";\r\n\r\nexport default () => {\r\n    let nodes: FarmNode[] = []\r\n    let beams: Beam[] = []\r\n\r\n    nodes = FarmFactory.createNodes(\r\n        [\r\n            {\r\n                x: 0,\r\n                y: 1000,\r\n                fixation: NodeFixation.XY,\r\n            },\r\n            {\r\n                x: 3000,\r\n                y: 1000,\r\n                fixation: NodeFixation.Y,\r\n            }\r\n        ],\r\n        [\r\n            {\r\n                x: 1000,\r\n                y: 1000,\r\n                angle: 90,\r\n                value: 9000\r\n            }\r\n        ],\r\n        [\r\n            // {\r\n            //     x: 1000,\r\n            //     y: 1000\r\n            // }, {\r\n            //     x: 700,\r\n            //     y: 700\r\n            // }, {\r\n            //     x: 1000,\r\n            //     y: 700\r\n            // }\r\n        ]\r\n    )\r\n\r\n    return { nodes, beams }\r\n}","export const navPath = {\r\n    HOME_PAGE: '/',\r\n    FARM_PAGE: '/farm'\r\n}\r\n\r\n","import * as React from 'react'\r\nimport { consts } from 'src/static';\r\nimport { Typography, Button, Theme, createStyles } from '@material-ui/core';\r\nimport { Link } from 'react-router-dom';\r\nimport { navPath } from 'src/navigation';\r\nimport { WithStyles, withStyles } from '@material-ui/styles';\r\n\r\n\r\nconst styles = (theme: Theme) => createStyles({\r\n\troot:{\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"column\",\r\n\t\talignItems: \"center\",\r\n\t\tjustifyContent: \"flex-start\",\r\n\r\n\t},\r\n\tlogo: {\r\n\t\twidth: \"20%\",\r\n\t\theight:'20%'\r\n\t},\r\n\ttitle: {\r\n\t\tpadding: 40\r\n\t},\r\n\tdescripton: {\r\n\t\tpadding: 40\r\n\t},\r\n\tbtn: {\r\n\r\n\t}\r\n})\r\n\r\n\r\nconst HomeHeader = ({classes} : WithStyles<typeof styles>) => {\r\n\treturn (\r\n\t\t<header className={classes.root}>\r\n\t\t\t<img \r\n\t\t\t\tsrc={consts.img.bridgeIcon_2} \r\n\t\t\t\talt=\"logo\" \r\n\t\t\t\tclassName={classes.logo} \r\n\t\t\t/>\r\n\t\t\t<Typography variant=\"h3\" className={classes.title}>\r\n\t\t\t\t{consts.str.title}\r\n\t\t\t</Typography>\r\n\t\t\t<Typography variant=\"subtitle1\" align=\"center\" className={classes.descripton}>\r\n\t\t\t\t{consts.str.description}\r\n\t\t\t</Typography>\r\n\t\t\t<Button\r\n\t\t\t\tcomponent={Link}\r\n\t\t\t\tto={navPath.FARM_PAGE}\r\n\t\t\t\tvariant=\"contained\"\r\n\t\t\t\tsize=\"large\"\r\n\t\t\t\tcolor=\"secondary\"\r\n\t\t\t>\r\n\t\t\t\tПоехали\r\n\t\t\t</Button>\r\n\t\t</header>\r\n\r\n\t)\r\n}\r\n\r\nexport default withStyles(styles)(HomeHeader)","import * as React from 'react'\r\nimport { IHomeStore } from 'src/store/home/homeReducer';\r\nimport { Theme, WithStyles, createStyles, withStyles } from '@material-ui/core'\r\nimport { HomeHeader } from './components';\r\n\r\nconst styles = (theme: Theme) => createStyles({\r\n\troot: {\r\n\t\twidth:'100%',\r\n\t\tminHeight:'100%',\r\n\t\tdisplay:'block',\r\n\t\tbackground: theme.palette.background.default,\r\n\t\tpadding: theme.spacing(4)\r\n\t}\r\n})\r\n\r\nexport interface IHomeProps extends IHomeStore, WithStyles<typeof styles> {\r\n\tsetTitle: (title: string) => void,\r\n}\r\n\r\nclass Home extends React.Component<IHomeProps> {\r\n\trender() {\r\n\t\tconst { classes } = this.props\r\n\t\treturn (\r\n\t\t\t<div className={classes.root}>\r\n\t\t\t\t<HomeHeader/>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default withStyles(styles)(Home)","import {connect} from 'react-redux'\r\nimport Home from './home'\r\nimport { AppState } from 'src/store';\r\nimport { Dispatch, bindActionCreators } from 'redux';\r\nimport * as homeActions from 'src/store/home/homeActions';\r\n\r\nconst mapStateToProps =  ({home}: AppState) => ({\r\n    title:home.title,\r\n})\r\nconst mapDispatchToProps = (dispatch: Dispatch) => bindActionCreators({...homeActions}, dispatch)\r\n\r\nexport default connect(mapStateToProps,mapDispatchToProps)(Home);","import * as React from 'react';\r\nimport { Switch, Route } from 'react-router-dom';\r\nimport Helment from 'react-helmet'\r\nimport {CssBaseline} from '@material-ui/core';\r\nimport { ThemeProvider } from '@material-ui/styles';\r\nimport { FarmPage, Home } from './pages'\r\nimport { navPath } from './navigation'\r\nimport {str, img} from './static/const';\r\nimport { theme } from './utils/UI';\r\n\r\ninterface IAppProps {}\r\n\r\nclass App extends React.Component<IAppProps> {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<Helment\r\n\t\t\t\t\thtmlAttributes={{\"leng\":\"en\"}}\r\n\t\t\t\t\ttitleTemplate=\"Truss - %s\"\r\n\t\t\t\t\tdefaultTitle={str.title}\r\n\t\t\t\t\tlink={[\r\n\t\t\t\t\t\t{\"rel\":\"shortcut icon\", \"href\":img.bridgeIcon_2},\r\n\t\t\t\t\t\t{\"rel\":\"image_src\", \"href\":img.airBridge},\r\n\t\t\t\t\t\t{\"rel\":\"stylesheet\", \"href\":'https://fonts.googleapis.com/css?family=Roboto:300,400,500'},\r\n\t\t\t\t\t\t{\"rel\":\"stylesheet\", \"href\":'https://fonts.googleapis.com/icon?family=Material+Icons'}\r\n\t\t\t\t\t]}\r\n\t\t\t\t\tmeta={[\r\n\t\t\t\t\t\t{\"charSet\":\"utf-8\"},\r\n\t\t\t\t\t\t{\"name\": \"viewport\", \"content\": \"minimum-scale=1, initial-scale=1, width=device-width, shrink-to-fit=no\" },\r\n\t\t\t\t\t\t{\"name\": \"theme-color\", \"content\": \"#000000\" },\r\n\t\t\t\t\t\t{\"name\": \"description\", \"content\": str.description },\r\n\t\t\t\t\t\t{\"property\": \"og:type\", \"content\": \"website\"},\r\n\t\t\t\t\t\t{\"property\": \"og:title\", \"content\": str.title},\r\n\t\t\t\t\t\t{\"property\": \"og:image\", \"content\": img.airBridge},\r\n\t\t\t\t\t\t{\"property\": \"vk:image\", \"content\": img.airBridge},\r\n\t\t\t\t\t\t{\"property\": \"twitter:image\", \"content\": img.airBridge},\r\n\t\t\t\t\t\t{\"property\": \"og:url\", \"content\": str.url},\r\n\t\t\t\t\t]}\r\n\r\n\t\t\t\t/>\r\n\t\t\t\t<CssBaseline/>\r\n\t\t\t\t<ThemeProvider theme={theme}>\r\n\t\t\t\t\t<Switch>\r\n\t\t\t\t\t\t<Route path={navPath.HOME_PAGE} component={Home} exact />\r\n\t\t\t\t\t\t<Route path={navPath.FARM_PAGE} component={FarmPage} />\r\n\t\t\t\t\t</Switch>\r\n\r\n\t\t\t\t</ThemeProvider>\r\n\r\n\t\t\t</React.Fragment>\r\n\t\t)\r\n\t}\r\n}\r\n\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux'\r\nimport { history } from './utils';\r\nimport store from './store';\r\nimport { HashRouter, Router } from 'react-router-dom';\r\nimport App from './App';\r\nimport './index.css';\r\n\r\nconst isGitHubPages = process.env.REACT_APP_GHP === 'true' || false;\r\n\r\nconst Root = () => {    \r\n    if (isGitHubPages) return (\r\n        <HashRouter>\r\n            <App />\r\n        </HashRouter>\r\n    )\r\n    else return (\r\n        <Router history={history}>\r\n            <App />\r\n        </Router>\r\n    )\r\n}\r\n\r\n\r\nReactDOM.render(\r\n    <Provider store={store}>\r\n        <Root/>\r\n    </Provider>,\r\n    document.getElementById('root')\r\n);"],"sourceRoot":""}