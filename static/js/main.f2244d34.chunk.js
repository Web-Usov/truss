(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{207:function(e,t,n){e.exports=n.p+"static/media/ogImage.0619e300.png"},208:function(e,t,n){e.exports=n.p+"static/media/icon.68e274b2.png"},209:function(e,t,n){e.exports=n.p+"static/media/bridge.e53bced3.png"},210:function(e,t,n){e.exports=n.p+"static/media/airBridge.7d581a65.png"},211:function(e,t,n){e.exports=n.p+"static/media/fixation.dd261ca6.svg"},237:function(e,t,n){e.exports=n(419)},24:function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"str",function(){return h}),n.d(t,"UI",function(){return y}),n.d(t,"canvas",function(){return b}),n.d(t,"img",function(){return v});var o=n(142),r=n.n(o),a=n(207),i=n.n(a),c=n(208),s=n.n(c),l=n(209),d=n.n(l),u=n(210),p=n.n(u),m=n(211),f=n.n(m),h={url:"https://web-usov.github.io/truss",title:"Truss - \u0444\u0435\u0440\u043c\u0430 \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e",description:"\u0424\u0435\u0440\u043c\u0430 (farm \u0438\u043b\u0438 truss) \u2014 \u0441\u0442\u0435\u0440\u0436\u043d\u0435\u0432\u0430\u044f \u0441\u0438\u0441\u0442\u0435\u043c\u0430 \u0432 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0439 \u043c\u0435\u0445\u0430\u043d\u0438\u043a\u0435, \u043e\u0441\u0442\u0430\u044e\u0449\u0430\u044f\u0441\u044f \u0433\u0435\u043e\u043c\u0435\u0442\u0440\u0438\u0447\u0435\u0441\u043a\u0438 \u043d\u0435\u0438\u0437\u043c\u0435\u043d\u044f\u0435\u043c\u043e\u0439 \u043f\u043e\u0441\u043b\u0435 \u0437\u0430\u043c\u0435\u043d\u044b \u0435\u0451 \u0436\u0451\u0441\u0442\u043a\u0438\u0445 \u0443\u0437\u043b\u043e\u0432 \u0448\u0430\u0440\u043d\u0438\u0440\u043d\u044b\u043c\u0438.",favicon:r.a.resolve(e,"favicon.ico")},y={cellSize:45,MMinCell:200,koefOfNewPos:100,nodeSize:0,beamSize:0,koefOnGrid:0,sidebarWidth:240};y.nodeSize=y.cellSize/3,y.beamSize=y.cellSize/7,y.koefOnGrid=y.MMinCell/y.cellSize;var b={width:2500,height:1500},v={ogImage:i.a,bridgeIcon_1:s.a,bridgeIcon_2:d.a,airBridge:p.a,FixationIcon:f.a}}.call(this,"/")},263:function(e,t){},264:function(e,t){},265:function(e,t){},269:function(e,t){},271:function(e,t){},306:function(e,t){},307:function(e,t){},418:function(e,t,n){},419:function(e,t,n){"use strict";n.r(t);var o={};n.r(o),n.d(o,"UIModes",function(){return c}),n.d(o,"theme",function(){return v}),n.d(o,"getNodeColor",function(){return g}),n.d(o,"getNodeStorkeColor",function(){return O}),n.d(o,"getNodeStorkeWidth",function(){return E}),n.d(o,"getBeamColor",function(){return x}),n.d(o,"nodeMouseEnter",function(){return k}),n.d(o,"nodeMouseLeave",function(){return C}),n.d(o,"beamMouseEnter",function(){return j}),n.d(o,"beamMouseLeave",function(){return N});var r={};n.r(r),n.d(r,"mainBackGround",function(){return w}),n.d(r,"node",function(){return S}),n.d(r,"staticNode",function(){return _}),n.d(r,"fixedNode",function(){return I}),n.d(r,"beam",function(){return B});var a={};n.r(a),n.d(a,"headerTrussButtons",function(){return Yt}),n.d(a,"headerCanvasButtons",function(){return Rt}),n.d(a,"headerCalcButtons",function(){return Ht}),n.d(a,"headerMenu",function(){return Kt}),n.d(a,"default",function(){return Jt});var i={};n.r(i),n.d(i,"toolsButtons",function(){return cn}),n.d(i,"modsButtons",function(){return sn});var c,s=n(0),l=n.n(s),d=n(22),u=n.n(d),p=n(49),m=(Object(p.a)(),n(21)),f=n(13),h=n(24),y=n(225);!function(e){e[e.none=0]="none",e[e.move=1]="move",e[e.addNode=2]="addNode",e[e.addBeam=3]="addBeam",e[e.addBeamStart=4]="addBeamStart",e[e.delete=5]="delete"}(c||(c={}));var b,v=Object(y.a)({palette:{primary:{dark:"#0A4467",main:"#1e779e",light:"#51A8D6"},secondary:{dark:"#a83e19",main:"#f15a24",light:"#F39B7C"},background:{default:"linear-gradient(35deg, #6863bf 0%, #067d93 50%, #e68a68 100%)"}},overrides:{MuiTooltip:{tooltip:{fontSize:14}}}}),g=function(e){return e.isStatic?e.fixation?r.fixedNode:r.staticNode:r.node},O=function(e,t){switch(t){case c.move:return e.isStatic?v.palette.secondary.dark:v.palette.primary.light;case c.addBeam:case c.addBeamStart:return v.palette.primary.light;default:return v.palette.secondary.main}},E=function(e,t){switch(t){case c.move:return e.isStatic?0:2;case c.addBeam:case c.addBeamStart:return 2;default:return 0}},x=function(e){return r.beam},k=function(e,t,n){var o=e.target.getStage();switch(n){case c.delete:if(t.isStatic){o.container().style.cursor="default";break}o.container().style.cursor="pointer";break;case c.none:o.container().style.cursor="pointer";break;case c.addBeam:case c.addBeamStart:o.container().style.cursor="crosshair";break;case c.move:if(t.isStatic){o.container().style.cursor="default";break}o.container().style.cursor="move"}},C=function(e){var t=e.target.getStage();t&&(t.container().style.cursor="default")},j=function(e,t,n){var o=e.target.getStage();switch(n){case c.delete:case c.none:o.container().style.cursor="pointer"}},N=function(e){var t=e.target.getStage();t&&(t.container().style.cursor="default")},w="#09B4D3",S=v.palette.secondary.main,_=v.palette.secondary.dark,I=v.palette.secondary.dark,B=v.palette.secondary.light,D=n(489),M=function(){function e(){Object(m.a)(this,e)}return Object(f.a)(e,null,[{key:"angleBePoints",value:function(e,t,n,o){return Math.atan2(-t+o,-e+n)/Math.PI}},{key:"lengthBePoints",value:function(e,t,n,o){return Math.sqrt(Math.pow(e-n,2)+Math.pow(t-o,2))}},{key:"cellX",value:function(e){return Math.round(e/h.UI.cellSize)*h.UI.cellSize}},{key:"cellY",value:function(e){return Math.round(e/h.UI.cellSize)*h.UI.cellSize}},{key:"signum",value:function(e){return e>0?1:e<0?-1:0}},{key:"multMatrxi",value:function(e,t){var n=e.length,o=t.length,r=e[0].length,a=t[0].length,i=[];if(r!==o)throw new Error("\u0420\u0430\u0437\u043c\u0435\u0440\u043d\u043e\u0441\u0442\u044c \u043c\u0430\u0442\u0440\u0438\u0446 \u043d\u0435 \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u043f\u0435\u0440\u0435\u0443\u043c\u043d\u043e\u0436\u0438\u0442\u044c \u0438\u0445");for(var c=0;c<n;c++){for(var s=[],l=0;l<a;l++)s.push(0);i.push(s)}for(var d=0;d<a;d++)for(var u=0;u<n;u++){for(var p=0,m=0;m<o;m++)p+=e[u][m]+t[m][d];i[u][d]=p}return i}},{key:"multMatrxiV2",value:function(e,t){var n=[];try{n=D.b(e,t)}catch(o){console.error("multMatrxiV2:",o)}return n}},{key:"getDetMatrix",value:function(e){return D.a(e)}}]),e}(),T=n(70),U=n(67),P=n(32),z=n(30),A=n(31),F=n(213),L=n.n(F),G=n(487),W=n(488),V=n(444),X=n(6),Y=n(60),R=n(445),H="/",K="/app",J=n(427),q=Object(J.a)(function(e){return Object(V.a)({root:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start"},logo:{width:"20%",height:"20%"},title:{padding:40},descripton:{padding:40},btn:{}})})(function(e){var t=e.classes;return s.createElement("header",{className:t.root},s.createElement("img",{src:h.img.bridgeIcon_2,alt:"logo",className:t.logo}),s.createElement(Y.a,{variant:"h3",className:t.title},h.str.title),s.createElement(Y.a,{variant:"subtitle1",align:"center",className:t.descripton},h.str.description),s.createElement(R.a,{component:T.b,to:K,variant:"contained",size:"large",color:"secondary"},"\u041f\u043e\u0435\u0445\u0430\u043b\u0438"))}),$=function(e){function t(){return Object(m.a)(this,t),Object(P.a)(this,Object(z.a)(t).apply(this,arguments))}return Object(A.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props.classes;return s.createElement("div",{className:e.root},s.createElement(q,null))}}]),t}(s.Component),Q=Object(X.a)(function(e){return Object(V.a)({root:{width:"100%",minHeight:"100%",display:"block",background:e.palette.background.default,padding:e.spacing(4)}})})($),Z=n(26),ee=n.n(Z),te=n(51),ne=n(55),oe=n(46);!function(e){e.none="none",e.x="x",e.y="y",e.xy="xy",e.yx="xy"}(b||(b={}));var re,ae,ie,ce,se,le,de,ue,pe,me,fe=n(71),he=n(41),ye=n(7),be=(n(98),n(4)),ve=n(18),ge=n(218),Oe=n.n(ge),Ee=(re=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.coord,o=t.id,r=t.name,a=t.dCoord;Object(m.a)(this,e),this._id=void 0,Object(he.a)(this,"_coord",ae,this),Object(he.a)(this,"_name",ie,this),Object(he.a)(this,"_dCoord",ce,this),this._id=o||Oe()(),this._name=r||this._id,this._coord=n||{x:0,y:0},this._dCoord=a||{x:0,y:0}}return Object(f.a)(e,[{key:"id",get:function(){return this._id}},{key:"coord",get:function(){return this._coord}},{key:"name",get:function(){return this._name},set:function(e){this._name=e}},{key:"dCoord",get:function(){return this._dCoord},set:function(e){this._dCoord=e}}]),Object(f.a)(e,[{key:"moveTo",value:function(e,t){this._coord.x=e,this._coord.y=t}}]),e}(),ae=Object(ye.a)(re.prototype,"_coord",[be.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(ye.a)(re.prototype,"coord",[be.e],Object.getOwnPropertyDescriptor(re.prototype,"coord"),re.prototype),ie=Object(ye.a)(re.prototype,"_name",[be.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(ye.a)(re.prototype,"name",[be.e],Object.getOwnPropertyDescriptor(re.prototype,"name"),re.prototype),ce=Object(ye.a)(re.prototype,"_dCoord",[be.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(ye.a)(re.prototype,"dCoord",[be.e],Object.getOwnPropertyDescriptor(re.prototype,"dCoord"),re.prototype),Object(ye.a)(re.prototype,"moveTo",[be.d],Object.getOwnPropertyDescriptor(re.prototype,"moveTo"),re.prototype),re),xe=(se=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(m.a)(this,t),(e=Object(P.a)(this,Object(z.a)(t).call(this,n)))._entity=void 0,Object(he.a)(e,"_startConnectedNode",le,Object(ve.a)(e)),Object(he.a)(e,"_endConnectedNode",de,Object(ve.a)(e)),Object(he.a)(e,"_endCoord",ue,Object(ve.a)(e)),Object(he.a)(e,"_startForce",pe,Object(ve.a)(e)),Object(he.a)(e,"_endForce",me,Object(ve.a)(e));var o=n.dCoord,r=n.startConnectedNode,a=n.endConnectedNode,i=n.coord,c=n.endCoord,s=n.startForce,l=n.endForce;return e._entity=Object(ne.a)({},Object(ve.a)(e),{coord:i||{x:0,y:0},dCoord:o||{x:0,y:0}}),e._startConnectedNode=r||null,e._endConnectedNode=a||null,e._endCoord=c||e.coord,e._startForce=s||0,e._endForce=l||0,e}return Object(A.a)(t,e),Object(f.a)(t,[{key:"startConnectedNode",get:function(){return this._startConnectedNode}},{key:"endConnectedNode",get:function(){return this._endConnectedNode}},{key:"coord",get:function(){return this._startConnectedNode?this._startConnectedNode.coord:this._entity.coord}},{key:"endCoord",get:function(){return this._endConnectedNode?this._endConnectedNode.coord:this._endCoord}},{key:"dCoord",get:function(){return this._startConnectedNode?this._startConnectedNode.dCoord:this._entity.dCoord}},{key:"dEndCoord",get:function(){return this._endConnectedNode?this._endConnectedNode.dCoord:this._entity.dCoord}},{key:"startForce",get:function(){return this._startForce},set:function(e){this._startForce=e}},{key:"endForce",get:function(){return this._endForce},set:function(e){this._endForce=e}},{key:"name",get:function(){if(this._startConnectedNode&&this._endConnectedNode){var e=this._startConnectedNode.name,t=this._endConnectedNode.name;return e<t?"".concat(e," - ").concat(t):"".concat(t," - ").concat(e)}return"..."}}]),Object(f.a)(t,[{key:"connectStartNode",value:function(e){this._startConnectedNode=e}},{key:"connectEndNode",value:function(e){this._endConnectedNode=e}},{key:"removeStartNode",value:function(){this._startConnectedNode=null}},{key:"removeEndNode",value:function(){this._endConnectedNode=null}},{key:"moveTo",value:function(e,t){this._startConnectedNode||(this.coord.x=e,this.coord.y=t)}},{key:"moveEndTo",value:function(e,t){this._endConnectedNode||(this._endCoord.x=e,this._endCoord.y=t)}},{key:"length",get:function(){var e=M.lengthBePoints(this.coord.x,this.coord.y,this.endCoord.x,this.endCoord.y);return Math.round(e)}}]),t}(Ee),le=Object(ye.a)(se.prototype,"_startConnectedNode",[be.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(ye.a)(se.prototype,"startConnectedNode",[be.e],Object.getOwnPropertyDescriptor(se.prototype,"startConnectedNode"),se.prototype),de=Object(ye.a)(se.prototype,"_endConnectedNode",[be.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(ye.a)(se.prototype,"endConnectedNode",[be.e],Object.getOwnPropertyDescriptor(se.prototype,"endConnectedNode"),se.prototype),Object(ye.a)(se.prototype,"coord",[be.e],Object.getOwnPropertyDescriptor(se.prototype,"coord"),se.prototype),ue=Object(ye.a)(se.prototype,"_endCoord",[be.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(ye.a)(se.prototype,"endCoord",[be.e],Object.getOwnPropertyDescriptor(se.prototype,"endCoord"),se.prototype),Object(ye.a)(se.prototype,"dCoord",[be.e],Object.getOwnPropertyDescriptor(se.prototype,"dCoord"),se.prototype),Object(ye.a)(se.prototype,"dEndCoord",[be.e],Object.getOwnPropertyDescriptor(se.prototype,"dEndCoord"),se.prototype),pe=Object(ye.a)(se.prototype,"_startForce",[be.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(ye.a)(se.prototype,"startForce",[be.e],Object.getOwnPropertyDescriptor(se.prototype,"startForce"),se.prototype),me=Object(ye.a)(se.prototype,"_endForce",[be.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(ye.a)(se.prototype,"endForce",[be.e],Object.getOwnPropertyDescriptor(se.prototype,"endForce"),se.prototype),Object(ye.a)(se.prototype,"name",[be.e],Object.getOwnPropertyDescriptor(se.prototype,"name"),se.prototype),Object(ye.a)(se.prototype,"connectStartNode",[be.d],Object.getOwnPropertyDescriptor(se.prototype,"connectStartNode"),se.prototype),Object(ye.a)(se.prototype,"connectEndNode",[be.d],Object.getOwnPropertyDescriptor(se.prototype,"connectEndNode"),se.prototype),Object(ye.a)(se.prototype,"removeStartNode",[be.d],Object.getOwnPropertyDescriptor(se.prototype,"removeStartNode"),se.prototype),Object(ye.a)(se.prototype,"removeEndNode",[be.d],Object.getOwnPropertyDescriptor(se.prototype,"removeEndNode"),se.prototype),Object(ye.a)(se.prototype,"moveTo",[be.d],Object.getOwnPropertyDescriptor(se.prototype,"moveTo"),se.prototype),Object(ye.a)(se.prototype,"moveEndTo",[be.d],Object.getOwnPropertyDescriptor(se.prototype,"moveEndTo"),se.prototype),Object(ye.a)(se.prototype,"length",[be.e],Object.getOwnPropertyDescriptor(se.prototype,"length"),se.prototype),se),ke=function(){function e(){Object(m.a)(this,e)}return Object(f.a)(e,null,[{key:"init",value:function(){var e=Object(te.a)(ee.a.mark(function e(t,n,o,r,a){var i,c,s,l,d,u,p,m,f,h,y,b,v,g,O,E,x,k,C,j=this,N=arguments;return ee.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=N.length>5&&void 0!==N[5]?N[5]:{},c=i.area||225,s=i.modUpr||72e3,l=[],d=[],u=[],p=[],m=[],h=[],y=[],b=[],v=[],g=[],O=[],r.forEach(function(e,o){l.push(j.Kmest_i(c,s,a[o]));var i=j.Lambda_i(t[r[o].x],t[r[o].y],a[o]);d.push(i),u.push([[i.x,i.y,0,0],[0,0,i.x,i.y]]),p.push(j.Kobs_i(c,s,a[o],d[o])),m.push(j.IndexV_i(n[r[o].x],n[r[o].y]))}),E=r.length,x=n.length,k=Math.max.apply(Math,Object(fe.a)(n.map(function(e){var t=e.x,n=e.y;return Math.max(t,n)}))),h=this.K(k,m,p),!(M.getDetMatrix(h)<1e3)){e.next=21;break}throw Error("\u0414\u0430\u043d\u043d\u0430\u044f \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044f (\u0441\u0442\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u043d\u0435\u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u043c\u0430\u044f) \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043c\u0435\u0445\u0430\u043d\u0438\u0437\u043c\u043e\u043c");case 21:for(y=this.SquareRoot(h,o),b=this.Vi(n,y),v=this.Vij(r,b),C=0;C<E;C++)g.push(this.V_i(u[C],v[C])),O.push(this.P_i(l[C],g[C]));return f=this.G(a,O),this.farmCalcDebug&&(console.log("NodeCoord, LinkNodes, NodeV",t,r,n),console.log("Kobs, Kmest",p,l),console.log("Lambda0, Lambda,",d,u),console.log("IndexV",m),console.log("N_Link, N_Nodes, N_DOF",E,x,k),console.log("K, Force",h,o),console.log("Va",y),console.log("Vi",b),console.log("Vij",v),console.log("V",g),console.log("P",O),console.log("G",f)),e.abrupt("return",{P:O,LinkNodes:r,Vi:b,G:f});case 28:case"end":return e.stop()}},e,this)}));return function(t,n,o,r,a){return e.apply(this,arguments)}}()},{key:"Kmest_i",value:function(e,t,n){var o=e*t/n,r=[];return r.push([o,-o]),r.push([-o,o]),r}},{key:"Lambda_i",value:function(e,t,n){return{x:(t.x-e.x)/n,y:(t.y-e.y)/-n}}},{key:"Kobs_i",value:function(e,t,n,o){for(var r=e*t/n,a=[{x:o.x*o.x,y:o.x*o.y},{x:o.x*o.y,y:o.y*o.y}],i=[{x:-o.x*o.x,y:-o.x*o.y},{x:-o.x*o.y,y:-o.y*o.y}],c=[],s=[],l=0;l<2;l++)c.push({x1:a[l].x,y1:a[l].y,x2:i[l].x,y2:i[l].y}),s.push({x1:i[l].x,y1:i[l].y,x2:a[l].x,y2:a[l].y});return Array.prototype.concat(c,s).map(function(e){var t=e.x1,n=e.y1,o=e.x2,a=e.y2;return[t*r,n*r,o*r,a*r]})}},{key:"IndexV_i",value:function(e,t){return[e.x,e.y,t.x,t.y]}},{key:"K",value:function(e,t,n){for(var o=[],r=0;r<e;r++){for(var a=[],i=0;i<e;i++)a.push(0);o.push(a)}for(var c=0;c<t.length;c++)for(var s=0;s<4;s++){var l=t[c][s];if(0!==l)for(var d=0;d<4;d++){var u=t[c][d];0!==u&&(o[u-1][l-1]=o[u-1][l-1]+n[c][s][d])}}return o}},{key:"SquareRoot",value:function(e,t){if(e.length!==t.length)throw Error("SquareRoot - \u041c\u0430\u0441\u0441\u0438\u0432\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u043e\u0434\u0438\u043d\u0430\u043a\u043e\u0432\u043e\u0439 \u0434\u043b\u0438\u043d\u044b");for(var n=t.length,o=[],r=[],a=[],i=[],c=[],s=[],l=0;l<n+1;l++){for(var d=[],u=0;u<n;u++)d.push(0);c.push(d),o.push(d),r.push(0),a.push(0),i.push(0),s.push(0)}for(var p=1;p<=n;p++){for(var m=0;m<=n;m++)o[p][m]=e[p-1][m-1];r[p]=t[p-1]}i[1]=M.signum(o[1][1]),c[1][1]=Math.sqrt(Math.abs(o[1][1]));for(var f=2;f<=n;f++)c[1][f]=o[1][f]/(c[1][1]*i[1]);for(var h=2;h<=n;h++){for(var y=0,b=1;b<=h-1;b++)y+=c[b][h]*c[b][h]*i[b];i[h]=M.signum(o[h][h]-y),c[h][h]=Math.sqrt(Math.abs(o[h][h]-y));for(var v=1/(c[h][h]*i[h]),g=h+1;g<=n;g++){for(var O=0,E=1;E<=h-1;E++)O+=c[E][h]*i[E]*c[E][g];c[h][g]=v*(o[h][g]-O)}}s[1]=r[1]/(c[1][1]*i[1]);for(var x=2;x<=n;x++){for(var k=0,C=1;C<=x-1;C++)k+=c[C][x]*i[C]*s[C];s[x]=(r[x]-k)/(c[x][x]*i[x])}a[n]=s[n]/c[n][n];for(var j=n-1;j>=1;j--){for(var N=0,w=j+1;w<=n;w++)N+=c[j][w]*a[w];a[j]=(s[j]-N)/c[j][j]}var S=[];return a.forEach(function(e,t){0!==t&&S.push(e)}),S}},{key:"Vi",value:function(e,t){for(var n=[],o=0;o<e.length;o++){var r=Object(ne.a)({},e[o]);r.x=0===r.x?0:t[r.x-1],r.y=0===r.y?0:t[r.y-1],n.push(r)}return n}},{key:"Vij",value:function(e,t){for(var n=[],o=0;o<e.length;o++){var r=e[o].x,a=e[o].y;n.push([[t[r].x],[t[r].y],[t[a].x],[t[a].y]])}return n}},{key:"V_i",value:function(e,t){return M.multMatrxiV2(e,t)}},{key:"P_i",value:function(e,t){return M.multMatrxiV2(e,t)}},{key:"G",value:function(e,t){var n=0;return e.forEach(function(e,o){n+=e*Math.abs(t[o][0][0])}),n}}]),e}();ke.farmCalcDebug=!0;var Ce,je,Ne,we,Se,_e,Ie=(Ce=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(m.a)(this,t),e=Object(P.a)(this,Object(z.a)(t).call(this,n)),Object(he.a)(e,"_beamsID",je,Object(ve.a)(e)),e._forceX=void 0,e._forceY=void 0,e._isStatic=void 0,e._fixation=void 0;var o=n.beamsID,r=n.forceX,a=n.forceY,i=n.isStatic,c=n.fixation;return e._beamsID=o||[],e._forceX=r||0,e._forceY=a||0,e._isStatic=i||!1,e._fixation=c||b.none,e}return Object(A.a)(t,e),Object(f.a)(t,[{key:"beams",get:function(){return this._beamsID}},{key:"forceX",get:function(){return this._forceX},set:function(e){this._forceX=e}},{key:"forceY",get:function(){return this._forceY},set:function(e){this._forceY=e}},{key:"isStatic",get:function(){return this._isStatic}},{key:"fixation",get:function(){return this._fixation}}]),Object(f.a)(t,[{key:"conncetBeam",value:function(e){return!this._beamsID.find(function(t){return t===e})&&(this._beamsID.push(e),!0)}},{key:"removeBeam",value:function(e){var t=!1;return this._beamsID=this._beamsID.filter(function(n){var o=n!==e;return o||(t=!0),o}),t}}]),t}(Ee),je=Object(ye.a)(Ce.prototype,"_beamsID",[be.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(ye.a)(Ce.prototype,"beams",[be.e],Object.getOwnPropertyDescriptor(Ce.prototype,"beams"),Ce.prototype),Object(ye.a)(Ce.prototype,"conncetBeam",[be.d],Object.getOwnPropertyDescriptor(Ce.prototype,"conncetBeam"),Ce.prototype),Object(ye.a)(Ce.prototype,"removeBeam",[be.d],Object.getOwnPropertyDescriptor(Ce.prototype,"removeBeam"),Ce.prototype),Ce),Be=new(Ne=function(){function e(){Object(m.a)(this,e),Object(he.a)(this,"_nodes",we,this),Object(he.a)(this,"_beams",Se,this),Object(he.a)(this,"_calcData",_e,this),this.sortByName=function(e,t){if(e instanceof xe){var n=e.name.split(" - "),o=Number(n[0]+n[1]),r=t.name.split(" - ");return o>Number(r[0]+r[1])?1:-1}return e.name>t.name?1:-1},this._nodes=new Map,this._beams=new Map,this.connectBeamToStartNode=this.connectBeamToStartNode.bind(this)}return Object(f.a)(e,[{key:"nodes",get:function(){return this._nodes}},{key:"nodesArray",get:function(){return Array.from(this._nodes.values())}},{key:"beams",get:function(){return this._beams}},{key:"beamsArray",get:function(){return Array.from(this._beams.values())}},{key:"calcData",get:function(){return this._calcData}}]),Object(f.a)(e,[{key:"addNode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._nodes.size>12)throw new Error("\u041f\u0440\u0435\u0432\u044b\u0448\u0435\u043d\u043e \u0447\u0438\u0441\u043b\u043e \u0443\u0437\u043b\u043e\u0432");var t=!0,n=!1,o=void 0;try{for(var r,a=this._nodes.values()[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){if(r.value.coord===e.coord)return}}catch(s){n=!0,o=s}finally{try{t||null==a.return||a.return()}finally{if(n)throw o}}var i=this._nodes.size+1+"",c=new Ie(Object(ne.a)({},e,{name:i}));return this._nodes.set(c.id,c),c}},{key:"moveNode",value:function(e,t,n){var o=this._nodes.get(e);if(!o)throw new Error("\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d \u0443\u0437\u0435\u043b");if(!o.isStatic&&o.fixation===b.none){var r=!0,a=!1,i=void 0;try{for(var c,s=this._nodes.values()[Symbol.iterator]();!(r=(c=s.next()).done);r=!0){var l=c.value;if(l.coord.x===t&&l.coord.y===n)return}}catch(d){a=!0,i=d}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}o.moveTo(t,n)}}},{key:"setNodes",value:function(e){this._nodes=new Map(e)}},{key:"sortNodesByCoord",value:function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.nodesArray).sort(function(e,t){return e.coord.y<t.coord.y?-1:e.coord.y===t.coord.y&&e.coord.x<t.coord.x?-1:1}).forEach(function(e,t){e.name=(t+1).toString()})}},{key:"addBeam",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._beams.size>36)throw new Error("\u041f\u0440\u0435\u0432\u044b\u0448\u0435\u043d\u043e \u0447\u0438\u0441\u043b\u043e \u0441\u0442\u0435\u0440\u0436\u043d\u0435\u0439");var t=new xe(e);return this._beams.set(t.id,t),t}},{key:"moveEndBeamWhileDraving",value:function(e,t,n){var o=this._beams.get(e);if(!o)throw new Error("\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d \u0441\u0442\u0435\u0440\u0436\u0435\u043d\u044c");if(o.endConnectedNode)throw new Error("\u0421\u0442\u0435\u0440\u0436\u0435\u043d\u044c \u043d\u0435\u043b\u044c\u0437\u044f \u043f\u0435\u0440\u0435\u043c\u0435\u0441\u0442\u0438\u0442\u044c - \u043e\u043d \u043f\u0440\u0438\u0432\u044f\u0437\u0430\u043d \u043a \u0443\u0437\u043b\u0443");o.moveEndTo(t,n)}},{key:"connectBeamToStartNode",value:function(e,t){var n=this._beams.get(t),o=this._nodes.get(e);if(!n||!o)throw new Error("\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u044b \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u044b");return n.connectStartNode(o),o.conncetBeam(n.id),n}},{key:"connectBeamToEndNode",value:function(e,t){var n=this._beams.get(t),o=this._nodes.get(e);if(!n||!o)throw new Error("\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u044b \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u044b");var r=!0,a=!1,i=void 0;try{for(var c,s=this._beams.values()[Symbol.iterator]();!(r=(c=s.next()).done);r=!0){var l=c.value;if(this._findOldBeamByNode(o,n,l))return}}catch(d){a=!0,i=d}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n.connectEndNode(o),o.conncetBeam(n.id),n}},{key:"setBeams",value:function(e){this._beams=new Map(e)}},{key:"_findOldBeamByNode",value:function(e,t,n){return n.startConnectedNode===t.startConnectedNode&&n.endConnectedNode===e||n.startConnectedNode===e&&n.endConnectedNode===t.startConnectedNode||n===t&&n.startConnectedNode===e}},{key:"calculate",value:function(){var e=Object(te.a)(ee.a.mark(function e(t){var n,o,r,a,i,c,s,l,d,u;return ee.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=[],o=[],r=[],a=[],i=[],0!==this._nodes.size){e.next=7;break}throw new Error("\u0424\u0435\u0440\u043c\u0430 \u043f\u0443\u0441\u0442\u0430");case 7:return e.next=9,this.updateBeforeCalc(Object(fe.a)(this.nodesArray),Object(fe.a)(this.beamsArray));case 9:if(c=e.sent,s=c.nodes,l=c.beams,!s.find(function(e){return 0===e.beams.length&&e.isStatic})){e.next=14;break}throw new Error("\u041d\u0435 \u0432\u0441\u0435 \u0443\u0437\u043b\u044b \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u044b");case 14:return d=0,s.forEach(function(e,t){switch(n.push(Object(ne.a)({},e.coord)),e.fixation){case b.x:d++,o.push({x:0,y:d}),a.push(-e.forceY);break;case b.y:d++,o.push({x:d,y:0}),a.push(-e.forceX);break;case b.yx:case b.xy:o.push({x:0,y:0});break;case b.none:d++,o.push({x:d,y:d+1}),d++,a.push(-e.forceX),a.push(-e.forceY)}}),l.forEach(function(e,t){var n=e.name.split(" - ");r.push({x:Number(n[0])-1,y:Number(n[1])-1}),i.push(e.length)}),e.next=19,ke.init(n,o,a,r,i,t);case 19:return u=e.sent,e.next=22,this.updateAfterCalc(s,l,u);case 22:return e.abrupt("return",!0);case 23:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"updateBeforeCalc",value:function(){var e=Object(te.a)(ee.a.mark(function e(){var t,n,o=arguments;return ee.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:this.nodesArray,n=o.length>1&&void 0!==o[1]?o[1]:this.beamsArray,this.sortNodesByCoord(t),n=n.sort(this.sortByName),e.abrupt("return",{nodes:t,beams:n});case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"updateAfterCalc",value:function(){var e=Object(te.a)(ee.a.mark(function e(t,n,o){var r,a,i,c,s,l,d,u,p,m,f,h,y,b,v,g;return ee.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._calcData=o,r=o.P,(a=o.Vi)&&r){e.next=4;break}throw new Error("\u041d\u0435\u0442 \u0440\u0430\u0441\u0447\u0435\u0442\u043d\u044b\u0445 \u0434\u0430\u043d\u043d\u044b\u0445");case 4:for(i=!0,c=!1,s=void 0,e.prev=7,l=this.nodes.values()[Symbol.iterator]();!(i=(d=l.next()).done);i=!0)u=d.value,p=Object(ne.a)({},a[Number(u.name)-1]),u.dCoord={x:+p.x.toFixed(4),y:+p.y.toFixed(4)};e.next=15;break;case 11:e.prev=11,e.t0=e.catch(7),c=!0,s=e.t0;case 15:e.prev=15,e.prev=16,i||null==l.return||l.return();case 18:if(e.prev=18,!c){e.next=21;break}throw s;case 21:return e.finish(18);case 22:return e.finish(15);case 23:for(m=0,f=!0,h=!1,y=void 0,e.prev=27,b=this.beams.values()[Symbol.iterator]();!(f=(v=b.next()).done);f=!0)(g=v.value).startForce=Math.round(r[m][0][0]),g.endForce=Math.round(r[m][1][0]),m++;e.next=35;break;case 31:e.prev=31,e.t1=e.catch(27),h=!0,y=e.t1;case 35:e.prev=35,e.prev=36,f||null==b.return||b.return();case 38:if(e.prev=38,!h){e.next=41;break}throw y;case 41:return e.finish(38);case 42:return e.finish(35);case 43:return e.abrupt("return",{nodes:t,beams:n});case 44:case"end":return e.stop()}},e,this,[[7,11,15,23],[16,,18,22],[27,31,35,43],[36,,38,42]])}));return function(t,n,o){return e.apply(this,arguments)}}()},{key:"delete",value:function(e){var t=this,n=void 0;if(this._beams.has(e)?n=this._beams.get(e):this._nodes.has(e)&&(n=this._nodes.get(e)),n instanceof Ie){if(n.isStatic)return;return this.beamsArray.filter(function(e){return n instanceof Ie&&n.beams.includes(e.id)}).forEach(function(e){if(n instanceof Ie){var o;if(!e.startConnectedNode||!e.endConnectedNode)throw new Error;(o=e.startConnectedNode.id===n.id?t._nodes.get(e.endConnectedNode.id):t._nodes.get(e.startConnectedNode.id))&&o.removeBeam(e.id),t._beams.delete(e.id)}}),this._nodes.delete(n.id),!0}n instanceof xe&&([n.startConnectedNode,n.endConnectedNode].forEach(function(e){e&&n&&e.removeBeam(n.id)}),this._beams.delete(n.id))}},{key:"clear",value:function(){this._beams.clear(),this._nodes.clear(),this._calcData=void 0}}]),e}(),we=Object(ye.a)(Ne.prototype,"_nodes",[be.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Se=Object(ye.a)(Ne.prototype,"_beams",[be.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_e=Object(ye.a)(Ne.prototype,"_calcData",[be.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(ye.a)(Ne.prototype,"nodes",[be.e],Object.getOwnPropertyDescriptor(Ne.prototype,"nodes"),Ne.prototype),Object(ye.a)(Ne.prototype,"nodesArray",[be.e],Object.getOwnPropertyDescriptor(Ne.prototype,"nodesArray"),Ne.prototype),Object(ye.a)(Ne.prototype,"beams",[be.e],Object.getOwnPropertyDescriptor(Ne.prototype,"beams"),Ne.prototype),Object(ye.a)(Ne.prototype,"beamsArray",[be.e],Object.getOwnPropertyDescriptor(Ne.prototype,"beamsArray"),Ne.prototype),Object(ye.a)(Ne.prototype,"calcData",[be.e],Object.getOwnPropertyDescriptor(Ne.prototype,"calcData"),Ne.prototype),Object(ye.a)(Ne.prototype,"addNode",[be.d],Object.getOwnPropertyDescriptor(Ne.prototype,"addNode"),Ne.prototype),Object(ye.a)(Ne.prototype,"moveNode",[be.d],Object.getOwnPropertyDescriptor(Ne.prototype,"moveNode"),Ne.prototype),Object(ye.a)(Ne.prototype,"setNodes",[be.d],Object.getOwnPropertyDescriptor(Ne.prototype,"setNodes"),Ne.prototype),Object(ye.a)(Ne.prototype,"sortNodesByCoord",[be.d],Object.getOwnPropertyDescriptor(Ne.prototype,"sortNodesByCoord"),Ne.prototype),Object(ye.a)(Ne.prototype,"addBeam",[be.d],Object.getOwnPropertyDescriptor(Ne.prototype,"addBeam"),Ne.prototype),Object(ye.a)(Ne.prototype,"moveEndBeamWhileDraving",[be.d],Object.getOwnPropertyDescriptor(Ne.prototype,"moveEndBeamWhileDraving"),Ne.prototype),Object(ye.a)(Ne.prototype,"connectBeamToStartNode",[be.d],Object.getOwnPropertyDescriptor(Ne.prototype,"connectBeamToStartNode"),Ne.prototype),Object(ye.a)(Ne.prototype,"connectBeamToEndNode",[be.d],Object.getOwnPropertyDescriptor(Ne.prototype,"connectBeamToEndNode"),Ne.prototype),Object(ye.a)(Ne.prototype,"setBeams",[be.d],Object.getOwnPropertyDescriptor(Ne.prototype,"setBeams"),Ne.prototype),Object(ye.a)(Ne.prototype,"calculate",[be.d],Object.getOwnPropertyDescriptor(Ne.prototype,"calculate"),Ne.prototype),Object(ye.a)(Ne.prototype,"updateBeforeCalc",[be.d],Object.getOwnPropertyDescriptor(Ne.prototype,"updateBeforeCalc"),Ne.prototype),Object(ye.a)(Ne.prototype,"updateAfterCalc",[be.d],Object.getOwnPropertyDescriptor(Ne.prototype,"updateAfterCalc"),Ne.prototype),Object(ye.a)(Ne.prototype,"delete",[be.d],Object.getOwnPropertyDescriptor(Ne.prototype,"delete"),Ne.prototype),Object(ye.a)(Ne.prototype,"clear",[be.d],Object.getOwnPropertyDescriptor(Ne.prototype,"clear"),Ne.prototype),Ne),De=function(){function e(){Object(m.a)(this,e)}return Object(f.a)(e,null,[{key:"firstPlacement",value:function(e,t){e.forEach(function(e){var t=e.coord.x+Math.round(h.canvas.width/3/h.UI.cellSize)*h.UI.MMinCell,n=e.coord.y+Math.round(h.canvas.height/3/h.UI.cellSize)*h.UI.MMinCell;e.moveTo(t,n)})}},{key:"parse",value:function(){var e=Object(te.a)(ee.a.mark(function e(t,n){var o,r,a,i;return ee.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,JSON.parse(t);case 2:return o=e.sent,e.next=5,JSON.parse(n);case 5:return r=e.sent,a=new Map,i=new Map,e.next=10,o.forEach(function(e){e.dCoord={x:0,y:0};var t=new Ie(e);a.set(t.id,t)});case 10:return e.next=12,r.forEach(function(e){e.startForce=0,e.endForce=0;var t=new xe(e);e.startConnectedNode&&e.endConnectedNode&&(t.connectStartNode(a.get(e.startConnectedNode.id)),t.connectEndNode(a.get(e.endConnectedNode.id))),i.set(t.id,t)});case 12:return e.abrupt("return",{nodes:a,beams:i});case 13:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"toString",value:function(e){var t=Array.from(e.nodes.values()),n=Array.from(e.beams.values());return{nodesJSON:JSON.stringify(t).replace(/_/g,""),beamsJSON:JSON.stringify(n).replace(/_/g,"")}}},{key:"createNodes",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=new Map;return e.forEach(function(e){var t=b[e.fixation],n=new Ie({coord:{x:e.x,y:e.y},isStatic:!0,fixation:t});o.set(n.id,n)}),t.forEach(function(e){var t=new Ie({coord:{x:e.x,y:e.y},isStatic:!0,forceX:e.forceX||0,forceY:e.forceY||0});o.set(t.id,t)}),n.forEach(function(e){var t=new Ie({coord:{x:e.x,y:e.y}});o.set(t.id,t)}),o}}]),e}(),Me=n(421),Te=n(92),Ue=n(446),Pe=n(447),ze=n(490),Ae=n(448),Fe=n(449),Le=n(450),Ge=Object(Me.a)(function(e){return Object(V.a)({root:{overflowX:"auto",paddingTop:e.spacing(2)},table:{minWidth:450},tableBox:{marginBottom:e.spacing(2)},title:{padding:e.spacing(2)}})}),We=Object(oe.a)(function(e){var t=Ge(e),n=e.Vi,o=e.P,r=e.LinkNodes,a=e.G,i=function(e,n,o){return s.createElement(Te.a,{className:t.tableBox},s.createElement(Y.a,{variant:"h6",className:t.title},e),s.createElement(Ue.a,{className:t.table},Ve(n),s.createElement(Pe.a,null,o.map(function(e){return Xe(e)}))))};return s.createElement(ze.a,{className:t.root},s.createElement(Te.a,{className:t.tableBox},s.createElement(Y.a,{variant:"h6",className:t.title},"G: ",Math.round(a)," (\u041d\xb7\u043c\u043c)")),function(e,t){var n=[];return e.forEach(function(e,o){n.push(["".concat(t[o].x+1," - ").concat(t[o].y+1),e[0][0].toFixed(0)])}),i("\u0423\u0441\u0438\u043b\u0438\u044f \u0432 \u0441\u0442\u0435\u0440\u0436\u043d\u044f\u0445",["\u0421\u0442\u0435\u0440\u0436\u0435\u043d\u044c","\u0423\u0441\u0438\u043b\u0438\u0435 (H)"],n)}(o,r),function(e){var t=[];return e.forEach(function(e,n){t.push([(n+1).toString(),e.x.toFixed(4),e.y.toFixed(4)])}),i("\u041f\u0435\u0440\u0435\u043c\u0435\u0449\u0435\u043d\u0438\u044f \u0443\u0437\u043b\u043e\u0432",["\u0423\u0437\u0435\u043b","\u041f\u043e \u043e\u0441\u0438 X (\u043c\u043c)","\u041f\u043e \u043e\u0441\u0438 Y (\u043c\u043c)"],t)}(n))}),Ve=function(e){return s.createElement(Ae.a,null,s.createElement(Fe.a,null,e.map(function(e){return s.createElement(Le.a,{key:e},e)})))},Xe=function(e){return s.createElement(Fe.a,null,e.map(function(e){return s.createElement(Le.a,{key:e},e)}))},Ye=We,Re=n(466),He=n(462),Ke=n(468),Je=n(469),qe=n(3),$e=n(451),Qe=n(452),Ze=Object(X.a)(function(e){return Object(V.a)({appBar:{zIndex:e.zIndex.drawer+1},logo:{marginRight:e.spacing(4),marginLeft:e.spacing(2),"& img":{width:50,height:"auto"}}})})(function(e){var t=e.classes,n=e.children,o=e.className,r=e.color,a=e.position,i=e.withLogo,c=void 0===i||i;return s.createElement($e.a,{position:a||"fixed",className:Object(qe.a)(t.appBar,o),color:r||"primary"},s.createElement(Qe.a,null,function(){if(c)return s.createElement(T.b,{to:"/",className:t.logo},s.createElement("img",{alt:"Logo Icon",src:h.img.bridgeIcon_2}))}(),n))}),et=n(491),tt=n(454),nt=function(e){var t=e.title,n=void 0===t?"":t,o=e.icon,r=e.disabled,a=void 0!==r&&r,i=e.onClickToAction,c=e.todo,l=e.className,d=e.fab,u=void 0!==d&&d,p=e.size,m=e.onlyIcon,f=void 0!==m&&m;return u?s.createElement(et.a,{title:n},s.createElement(tt.a,{size:p,color:"secondary",onClick:function(e){return i(e,c)},disabled:a,className:l,style:{marginLeft:5,marginRight:5}},void 0!==e.icon&&s.createElement(e.icon,null))):s.createElement(et.a,{title:n},s.createElement(R.a,{size:p,color:"secondary",variant:"contained",onClick:function(e){return i(e,c)},disabled:a,className:l,style:{marginLeft:5,marginRight:5}},o,!f&&n))},ot=n(226),rt=n(455),at=n(456),it=n(457),ct=n(458);function st(e){var t=s.useState(null),n=Object(ot.a)(t,2),o=n[0],r=n[1];var a=e.items,i=e.title,c=Boolean(o),l=c?i:void 0;return s.createElement("div",null,s.createElement(R.a,{"aria-describedby":l,size:e.size,"aria-haspopup":"menu",onClick:function(e){r(o?null:e.currentTarget)},color:"secondary",variant:e.variant||"contained",style:{marginLeft:5,marginRight:5}},e.icon,"  ",e.title),s.createElement(rt.a,{id:l,open:c,anchorEl:o,onClose:function(e){r(null)},anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},keepMounted:!0},s.createElement(Te.a,null,s.createElement(at.a,null,a.map(function(t){return s.createElement(it.a,{onClick:function(n){return function(t,n){e.onClickToAction(t,n),r(null)}(n,t.todo)},disabled:t.disabled,key:t.title},void 0!==t.icon&&s.createElement(ct.a,null,s.createElement(t.icon,null)),t.title)})))))}var lt=n(80),dt=n(220),ut=n(20),pt=n(459),mt=function(e){return Object(V.a)({btn:{marginLeft:e.spacing(2),marginRight:e.spacing(2),borderRadius:"50% !important",border:"1px solid ".concat(Object(ut.b)(e.palette.action.active,.2)," !important"),transition:e.transitions.create(["background-color","box-shadow","border"],{duration:e.transitions.duration.short}),color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.light,"&$selected":{backgroundColor:e.palette.secondary.main,"&:hover":{backgroundColor:e.palette.secondary.dark}},"&:hover":{backgroundColor:e.palette.secondary.dark,"@media (hover: none)":{backgroundColor:e.palette.secondary.main},"&$disabled":{backgroundColor:e.palette.secondary.main}}},selected:{}})},ft=function(e){var t=e.selected,n=e.classes,o=e.value,r=e.name,a=(e.icon,Object(dt.a)(e,["selected","classes","value","name","icon"]));return s.createElement(pt.a,Object.assign({key:r,value:o,className:Object(qe.a)(n.btn,Object(lt.a)({},n.selected,t))},a),s.createElement(et.a,{title:r},s.createElement(e.icon,null)))},ht=Object(X.a)(mt)(ft),yt=(Object(X.a)(mt)(ft),n(460)),bt=n(461),vt=n(463),gt=n(120),Ot=n.n(gt),Et=n(426),xt=n(420),kt=n(221),Ct=n.n(kt),jt=Object(Et.a)(function(e){return Object(xt.a)({root:{},box:{overflowX:"hidden",width:500,position:"absolute",zIndex:e.zIndex.modal,boxShadow:e.shadows[10],left:h.UI.sidebarWidth+10,top:e.spacing(9)},content:{backgroundColor:e.palette.grey[300],overflowY:"auto",maxHeight:window.innerHeight-200}})});function Nt(e){var t=e.open,n=e.children,o=e.handleClose,r=e.title,a=jt(e);return s.createElement(Ct.a,{bounds:"parent",handle:"#strong"},s.createElement(yt.a,{className:a.box,hidden:!t},s.createElement(bt.a,{id:"strong",action:s.createElement(He.a,{"aria-label":"close",onClick:o},s.createElement(Ot.a,null)),title:r,style:{cursor:"move"}}),s.createElement(vt.a,{className:a.content},n)))}var wt=n(425),St=n(464);Object(Me.a)(function(e){return Object(V.a)({box:{backgroundColor:e.palette.grey[300],width:"100%",height:"100%",padding:e.spacing(4),overflowX:"auto"},appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1}})}),s.forwardRef(function(e,t){return s.createElement(wt.a,Object.assign({direction:"up",ref:t},e))});var _t,It=n(465),Bt=n(467),Dt=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(P.a)(this,Object(z.a)(t).call(this,e))).state={open:!0,viewTooltip:!1},n.switchDrawer=n.switchDrawer.bind(Object(ve.a)(n)),n}return Object(A.a)(t,e),Object(f.a)(t,[{key:"componentWillMount",value:function(){if(this.props.title){var e=localStorage.getItem("Sidebar_state:"+this.props.title);e&&this.setState({open:"true"===e})}}},{key:"switchDrawer",value:function(){localStorage.setItem("Sidebar_state:"+this.props.title,this.state.open?"false":"true"),this.setState({open:!this.state.open,viewTooltip:!1})}},{key:"changeViewtooltip",value:function(e){this.setState({viewTooltip:e})}},{key:"render",value:function(){var e=this,t=this.props,n=t.classes,o=t.children,r=t.title,a=t.btnIcon,i=t.anchor,c=this.state,l=c.open,d=c.viewTooltip;return s.createElement(s.Fragment,null,s.createElement(It.a,{className:n.drawer,variant:"persistent",open:l,anchor:i,classes:{paper:n.drawerPaper}},s.createElement("div",{className:n.toolbar}),s.createElement(Y.a,{variant:"body2",align:"center",className:n.title},r),s.createElement(Re.a,null),o),s.createElement(et.a,{title:r,open:void 0!==r&&d&&!l,onOpen:function(){return e.changeViewtooltip(!0)},onClose:function(){return e.changeViewtooltip(!1)}},s.createElement(tt.a,{style:{left:"left"===i?l?h.UI.sidebarWidth+15:15:"auto",right:"right"===i?l?h.UI.sidebarWidth+15:15:"auto"},color:"secondary",size:"medium",className:n.toogleIcon,onClick:this.switchDrawer},l?s.createElement(Bt.a,null):a)))}}]),t}(s.PureComponent),Mt=Object(X.a)(function(e){return Object(V.a)({drawer:{position:"relative"},drawerPaper:{width:h.UI.sidebarWidth},toogleIcon:{position:"absolute",top:e.spacing(10),zIndex:e.zIndex.drawer+1},title:{padding:e.spacing(1)},toolbar:e.mixins.toolbar})})(Dt),Tt=function(e){var t=e.text;e.className;return s.createElement(s.Fragment,null,s.createElement(Y.a,{variant:"subtitle2"},t),s.createElement(Re.a,null))},Ut=function(e){var t=e.text;e.className;return 0===t.length?s.createElement(s.Fragment,null):s.createElement(s.Fragment,null,t.map(function(e,t){return s.createElement(Y.a,{variant:"subtitle2",key:t},e)}),s.createElement(Re.a,null))},Pt=Object(oe.a)(_t=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(P.a)(this,Object(z.a)(t).call(this,e))).state={},n}return Object(A.a)(t,e),Object(f.a)(t,[{key:"viewFixationInfo",value:function(e){switch(e.fixation){case b.x:return s.createElement(Tt,{text:"\u0424\u0438\u043a\u0441\u0430\u0446\u0438\u044f \u043f\u043e \u043e\u0441\u0438 X"});case b.y:return s.createElement(Tt,{text:"\u0424\u0438\u043a\u0441\u0430\u0446\u0438\u044f \u043f\u043e \u043e\u0441\u0438 Y"});case b.xy:return s.createElement(Tt,{text:"\u0424\u0438\u043a\u0441\u0430\u0446\u0438\u044f \u043f\u043e \u043e\u0441\u044f\u043c \u0425 \u0438 Y"});default:return}}},{key:"NodeInfo",value:function(e){var t=this.props,n=t.classes,o=t.onDelete,r=void 0===o?function(){}:o;return s.createElement(ze.a,{className:n.root},s.createElement(Y.a,{variant:"h6",className:n.title},"\u0423\u0437\u0435\u043b ",e.name),s.createElement(Ut,{text:["X: ".concat(e.coord.x," \u043c\u043c"),"Y: ".concat(e.coord.y," \u043c\u043c")]}),s.createElement(Ut,{text:["\u0394X: ".concat(e.dCoord.x," \u043c\u043c"),"\u0394Y': ".concat(e.dCoord.y," \u043c\u043c")]}),0!==e.forceX&&s.createElement(Tt,{text:"\u0421\u0438\u043b\u0430 \u043f\u043e \u043e\u0441\u0438 \u0425: ".concat(e.forceX," H")}),0!==e.forceY&&s.createElement(Tt,{text:"\u0421\u0438\u043b\u0430 \u043f\u043e \u043e\u0441\u0438 Y: ".concat(e.forceY," H")}),this.viewFixationInfo(e),s.createElement("div",{className:n.btnGroup},s.createElement(He.a,{"aria-label":"Delete",onClick:function(){return r(e)}},s.createElement(Ke.a,null))))}},{key:"BeamInfo",value:function(e){var t=this.props,n=t.classes,o=t.onDelete,r=void 0===o?function(){}:o;return s.createElement(ze.a,{className:n.root},s.createElement(Y.a,{variant:"h6",className:n.title},"\u0421\u0442\u0435\u0440\u0436\u0435\u043d\u044c ",e.name),s.createElement(Tt,{text:"\u0414\u043b\u0438\u043d\u0430: ".concat(e.length," \u043c\u043c")}),s.createElement(Tt,{text:"\u0423\u0441\u0438\u043b\u0438\u0435 \u0432 \u0441\u0442\u0435\u0440\u0436\u043d\u0435: ".concat(e.startForce," H")}),s.createElement("div",{className:n.btnGroup},s.createElement(He.a,{"aria-label":"Delete",onClick:function(){return r(e)}},s.createElement(Ke.a,null))))}},{key:"viewInfo",value:function(e){return e instanceof Ie?this.NodeInfo(e):e instanceof xe?this.BeamInfo(e):void 0}},{key:"render",value:function(){var e=this.props.entity;return s.createElement(Mt,{anchor:"right",title:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u043e\u043c \u043e\u0431\u044a\u0435\u043a\u0442\u0435",btnIcon:s.createElement(Je.a,null)},this.viewInfo(e),s.createElement(Re.a,null))}}]),t}(s.PureComponent))||_t,zt=Object(X.a)(function(e){return Object(V.a)({root:{padding:e.spacing(2)},title:{marginBottom:e.spacing(2)},btnGroup:{marginTop:e.spacing(2)}})})(Pt),At=n(470),Ft=n(471),Lt=n(472),Gt=n(473),Wt=n(474),Vt={CANVAS:{CLEAR:"header-canvas-clear",SAVE:"header-canvas-save"},CALC:{DO:"header-calc-do",RESULT:"header-calc-result"},TRUSS:{SELECT:"header-truss-select"}},Xt={TRUSS:{CALC:"tools-truss-calc"}},Yt=[{title:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0432\u0430\u0440\u0438\u0430\u043d\u0442",todo:Vt.TRUSS.SELECT,icon:At.a}],Rt=[{title:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0432 \u043a\u044d\u0448",todo:Vt.CANVAS.SAVE,icon:Ft.a},{title:"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c",todo:Vt.CANVAS.CLEAR,icon:Lt.a}],Ht=[{title:"\u0420\u0430\u0441\u0441\u0447\u0438\u0442\u0430\u0442\u044c",todo:Vt.CALC.DO,icon:Gt.a},{title:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442",todo:Vt.CALC.RESULT,icon:Wt.a}],Kt=[{title:"\u0424\u0435\u0440\u043c\u0430",items:Yt},{title:"\u0425\u043e\u043b\u0441\u0442",items:Rt},{title:"\u0420\u0430\u0441\u0447\u0435\u0442",items:Ht}],Jt=Kt,qt=Object(X.a)(function(e){return Object(V.a)({root:{},btnIcon:{fontSize:18,marginTop:3,marginBottom:3},grow:{flexGrow:1}})})(function(e){var t=e.classes,n=e.onClick,o=void 0===n?function(){}:n,r=e.disabled,a=void 0===r?{}:r;return s.createElement(Ze,{className:t.root},Kt.map(function(e){return e.items.forEach(function(e){e.disabled=!0===a[e.todo]}),s.createElement(st,Object.assign({},e,{key:e.title,onClickToAction:o,size:"medium"}))}),s.createElement("div",{className:t.grow}))}),$t=n(423),Qt=n(424),Zt=n(475);function en(e){var t=e.trusses,n=e.onSelect;return s.createElement(ze.a,null,s.createElement($t.a,null,t.map(function(e){return s.createElement(Qt.a,{button:!0,onClick:function(){return n(e.id)},key:e.id},s.createElement(Zt.a,{primary:e.name}))})))}var tn,nn=n(492),on=n(476),rn=n(477),an=n(478),cn=[{title:"\u0420\u0430\u0441\u0447\u0435\u0442 \u0444\u0435\u0440\u043c\u044b",todo:Xt.TRUSS.CALC,icon:Gt.a,fab:!0}],sn=[{title:"\u041f\u0435\u0440\u0435\u043c\u0435\u0449\u0435\u043d\u0438\u0435",mod:c.move,icon:on.a},{title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0443\u0437\u0435\u043b",mod:c.addNode,icon:rn.a},{title:"\u0421\u043e\u0435\u0434\u0438\u043d\u0438\u0442\u044c \u0443\u0437\u043b\u044b",mod:c.addBeam,icon:an.a},{title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",mod:c.delete,icon:Ke.a}],ln=Object(X.a)(function(e){return Object(V.a)({root:{position:"absolute",padding:e.spacing(1),bottom:e.spacing(2),left:"50%",transform:"translateX(-50%)",backgroundColor:Object(ut.b)(e.palette.primary.light,.4),transition:e.transitions.create(["background-color","box-shadow","border"],{duration:e.transitions.duration.short}),"&:hover":{backgroundColor:e.palette.primary.light}},modsBtnGroup:{borderRadius:0,backgroundColor:"transparent",verticalAlign:"middle"},vHr:{display:"inline-block",width:2,height:"100%",minHeight:48,verticalAlign:"middle",backgroundColor:e.palette.secondary.light,opacity:.5,marginRight:10}})})(function(e){var t=e.onSelect,n=e.selected,o=e.classes,r=e.onClick,a=void 0===r?function(){}:r;return s.createElement(Te.a,{className:o.root},s.createElement(nn.a,{value:n,exclusive:!0,onChange:function(e,n){return t(n)},size:"medium",className:o.modsBtnGroup},sn.map(function(e){return s.createElement(ht,{key:e.mod,value:e.mod,selected:e.mod===n,icon:e.icon,name:e.title})})),s.createElement("div",{className:o.vHr}),cn.map(function(e){return s.createElement(nt,Object.assign({},e,{onClickToAction:a,fab:e.fab,key:e.title,size:"medium"}))}))}),dn=n(479),un=n(482),pn=n(480),mn=n(481),fn=n(483),hn=n(484),yn=n(485),bn=Object(oe.a)(tn=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(P.a)(this,Object(z.a)(t).call(this,e))).state={open:!1,tabs:new Map},n.openTab=n.openTab.bind(Object(ve.a)(n)),n.viewListItem=n.viewListItem.bind(Object(ve.a)(n)),n}return Object(A.a)(t,e),Object(f.a)(t,[{key:"componentWillMount",value:function(){var e=this.state.tabs;e.set("\u0423\u0437\u043b\u044b",!0),e.set("\u0421\u0442\u0435\u0440\u0436\u043d\u0438",!0),this.setState({tabs:new Map(e)})}},{key:"openTab",value:function(e){var t=this.state.tabs;t.set(e,!t.get(e)),this.setState({tabs:new Map(t)})}},{key:"viewListItem",value:function(e,t,n){var r=this,a=this.props,i=a.selectedEntityID,c=void 0===i?"":i,l=a.classes,d=a.onSelect,u=void 0===d?function(){}:d,p=this.state.tabs;return s.createElement(ze.a,null,s.createElement(Qt.a,{button:!0,onClick:function(){return r.openTab(t)}},n&&s.createElement(ct.a,null,s.createElement(dn.a,{badgeContent:e.length,color:"secondary"},n)),s.createElement(Zt.a,{primary:t}),p.get(t)?s.createElement(pn.a,null):s.createElement(mn.a,null)),s.createElement(un.a,{in:p.get(t),timeout:"auto",unmountOnExit:!0},s.createElement($t.a,{component:"div",disablePadding:!0},e.map(function(e){return s.createElement(Qt.a,{button:!0,className:l.nested,key:e.id,selected:c===e.id,onClick:function(t){return u(e.id)}},e instanceof Ie&&s.createElement(ct.a,null,s.createElement(fn.a,{style:{color:o.getNodeColor(e)}})),s.createElement(Zt.a,{primary:e.name}))}))),s.createElement(Re.a,null))}},{key:"render",value:function(){var e=this.props,t=e.nodes,n=void 0===t?[]:t,o=e.beams,r=void 0===o?[]:o;return r.sort(function(e,t){return e.name>t.name?1:-1}),n.sort(function(e,t){return e.name>t.name?1:-1}),s.createElement(Mt,{anchor:"left",title:"\u0421\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0430 \u043f\u0440\u043e\u0435\u043a\u0442\u0430",btnIcon:s.createElement(At.a,null)},this.viewListItem(n,"\u0423\u0437\u043b\u044b",s.createElement(hn.a,null)),this.viewListItem(r,"\u0421\u0442\u0435\u0440\u0436\u043d\u0438",s.createElement(yn.a,null)))}}]),t}(s.PureComponent))||tn,vn=Object(X.a)(function(e){return Object(V.a)({nested:{paddingLeft:e.spacing(6)}})})(bn),gn=n(222),On=n(223),En=n(486);function xn(e){var t=e.handleClose,n=e.open,o=e.title,r=e.children;return s.createElement(St.a,{onClose:t,"aria-labelledby":o,open:n},s.createElement(En.a,{id:o},o),s.createElement(ze.a,null,r))}var kn,Cn,jn=Vt,Nn=Xt,wn=Object(oe.a)(kn=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(P.a)(this,Object(z.a)(t).call(this,e))).stage=void 0,n.state={stageHeight:h.canvas.height,stageWidth:h.canvas.width,uiMode:c.none,selectedEntityID:"",paintEntity:null,openModal:null},n.UIonClick=n.UIonClick.bind(Object(ve.a)(n)),n.UIonDrag=n.UIonDrag.bind(Object(ve.a)(n)),n.UIonMouseMove=n.UIonMouseMove.bind(Object(ve.a)(n)),n.onKeyHandle=n.onKeyHandle.bind(Object(ve.a)(n)),n.selectEntity=n.selectEntity.bind(Object(ve.a)(n)),n.deleteEntity=n.deleteEntity.bind(Object(ve.a)(n)),n.clearFarm=n.clearFarm.bind(Object(ve.a)(n)),n.saveFarm=n.saveFarm.bind(Object(ve.a)(n)),n.calculate=n.calculate.bind(Object(ve.a)(n)),n.handleBtnClick=n.handleBtnClick.bind(Object(ve.a)(n)),n.modalStateChange=n.modalStateChange.bind(Object(ve.a)(n)),n.selectTruss=n.selectTruss.bind(Object(ve.a)(n)),n.stage=s.createRef(),n}return Object(A.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this.stage.current;if(e){var t=e.attrs.container.parentElement.parentElement;t&&(t.scrollTop=(t.scrollHeight-t.offsetHeight)/2,t.scrollLeft=(t.scrollWidth-t.offsetWidth)/2)}}},{key:"UIonClick",value:function(e,t){var n=this.state,o=n.uiMode,r=n.paintEntity,a=this.props.calculation,i=e.target.getStage()===e.target;if(e.evt.preventDefault(),0===e.evt.button&&!a){switch(o){case c.none:!i&&t?this.selectEntity(t.id):this.selectEntity("");break;case c.addNode:if(i){var s=e.evt,l=s.layerX,d=s.layerY,u=M.cellX(l),p=M.cellX(d);this.props.addNode(u,p)}break;case c.addBeam:if(!i&&t instanceof Ie){var m=this.props.addBeam({coord:Object(ne.a)({},t.coord)});if(m instanceof xe){var f=this.props.connectBeamToNode(t,m,"start");f instanceof xe?this.setState({paintEntity:f,uiMode:c.addBeamStart}):this.props.deleteEntity(m.id)}}break;case c.addBeamStart:!i&&t instanceof Ie&&r&&this.props.connectBeamToNode(t,r,"end")&&this.setState({uiMode:c.addBeam,paintEntity:null});break;case c.delete:!i&&t&&this.deleteEntity(t)}i&&this.setState({selectedEntityID:""})}}},{key:"UIonMouseMove",value:function(e){if(!this.props.calculation){var t=this.state,n=t.uiMode,o=t.paintEntity,r=e.evt,a=r.layerX,i=r.layerY;switch(n){case c.addBeamStart:e.target.getStage()&&(o?this.props.moveEndBeam(o,a,i):this.setState({uiMode:c.addBeam}));break;case c.delete:var s=e.target.getStage();s===e.target&&(s.container().style.cursor="default")}}}},{key:"UIonDrag",value:function(e,t){if(!this.props.calculation)switch(this.state.uiMode){case c.move:if(t instanceof Ie&&e.evt.defaultPrevented){var n=e.evt,o=n.layerX,r=n.layerY;this.props.moveNode(t,M.cellX(o),M.cellY(r))}}}},{key:"onKeyHandle",value:function(e){switch(e.key){case"Escape":this.deletePaintEntity(),this.setState({uiMode:0})}}},{key:"deletePaintEntity",value:function(){this.state.paintEntity&&this.props.deleteEntity(this.state.paintEntity.id),this.setState({paintEntity:null})}},{key:"deleteEntity",value:function(e){this.props.calculation||(this.state.selectedEntityID&&this.state.selectedEntityID===e.id&&this.setState({selectedEntityID:""}),this.props.deleteEntity(e.id))}},{key:"selectEntity",value:function(e){this.props.calculation||e&&this.setState({selectedEntityID:e})}},{key:"clearFarm",value:function(){window.confirm("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u0445\u043e\u043b\u0441\u0442?")&&this.props.clearTruss()}},{key:"saveFarm",value:function(e){this.props.cacheTruss()}},{key:"calculate",value:function(e){this.props.calculate()}},{key:"selectTruss",value:function(e){this.modalStateChange(null),this.props.selectTruss(e)}},{key:"setSelectedMode",value:function(e){this.props.calculation||(this.state.paintEntity&&this.props.deleteEntity(this.state.paintEntity.id),this.setState({uiMode:e||0,paintEntity:null}))}},{key:"handleBtnClick",value:function(e,t){switch(t){case jn.CANVAS.CLEAR:this.clearFarm();break;case jn.CANVAS.SAVE:this.saveFarm(e);break;case Nn.TRUSS.CALC:case jn.CALC.DO:this.calculate(e);break;case jn.CALC.RESULT:this.props.farm.calcData&&this.modalStateChange(t);break;case jn.TRUSS.SELECT:this.modalStateChange(t)}}},{key:"modalStateChange",value:function(e){this.setState({openModal:e})}},{key:"viewDialogs",value:function(){var e=this;return s.createElement(s.Fragment,null,void 0!==this.props.farm.calcData&&s.createElement(Nt,{title:"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u0440\u0430\u0441\u0441\u0447\u0435\u0442\u043e\u0432",open:this.state.openModal===jn.CALC.RESULT,handleClose:function(){return e.modalStateChange(null)}},s.createElement(Ye,this.props.farm.calcData)),s.createElement(xn,{title:"\u0412\u044b\u0431\u043e\u0440 \u0444\u0435\u0440\u043c\u044b",open:this.state.openModal===jn.TRUSS.SELECT,handleClose:function(){return e.modalStateChange(null)}},s.createElement(en,{trusses:this.props.trusses,onSelect:this.selectTruss})))}},{key:"render",value:function(){var e=this.state,t=e.stageHeight,n=e.stageWidth,o=e.uiMode,r=e.selectedEntityID,a=this.props,i=a.classes,c=a.farm,l=a.calculated,d=r&&(c.beams.get(r)||c.nodes.get(r))||null;return s.createElement(ze.a,{className:i.root},s.createElement(On.a,{isActive:!0}),s.createElement(gn.a,{keyEventName:"keyup",keyValue:"Escape",onKeyHandle:this.onKeyHandle}),s.createElement(qt,{disabled:Object(lt.a)({},jn.CALC.RESULT,!Boolean(this.props.farm.calcData)),onClick:this.handleBtnClick}),s.createElement("div",{className:i.toolbar}),s.createElement(ze.a,{className:i.stageBox},s.createElement("div",{className:i.toolbar}),s.createElement(vn,{nodes:c.nodesArray,beams:c.beamsArray,selectedEntityID:r,onSelect:this.selectEntity}),s.createElement(Fn,{onClick:this.UIonClick,onDrag:this.UIonDrag,onMouseMove:this.UIonMouseMove,selectedEntity:d,stageHeight:t,stageWidth:n,nodes:c.nodesArray,beams:c.beamsArray,stage:this.stage,uiMode:o,viewNewPos:l}),s.createElement(zt,{entity:c.nodes.get(r)||c.beams.get(r),onDelete:this.deleteEntity})),s.createElement(ln,{selected:o,onSelect:this.setSelectedMode.bind(this),onClick:this.handleBtnClick}),this.viewDialogs())}}]),t}(s.Component))||kn,Sn=Object(X.a)(function(e){return Object(V.a)({root:{width:"100%",height:"100%",overflow:"hidden",background:e.palette.background.default,display:"flex",flexDirection:"column"},stageBox:{display:"flex",flexGrow:1,overflow:"hidden"},toolbar:e.mixins.toolbar})})(wn),_n=n(38),In=h.UI.beamSize,Bn=Object(oe.a)(function(e){var t=e.onClick,n=void 0===t?function(){}:t,r=e.mode,a=void 0===r?o.UIModes.none:r,i=e.selected,c=void 0!==i&&i,l=e.beam,d=e.viewNewPos,u=void 0!==d&&d,p=[l.coord.x/h.UI.koefOnGrid,l.coord.y/h.UI.koefOnGrid,l.endCoord.x/h.UI.koefOnGrid,l.endCoord.y/h.UI.koefOnGrid];return u&&(p=[(l.coord.x+l.dCoord.x*h.UI.koefOfNewPos)/h.UI.koefOnGrid,(l.coord.y-l.dCoord.y*h.UI.koefOfNewPos)/h.UI.koefOnGrid,(l.endCoord.x+l.dEndCoord.x*h.UI.koefOfNewPos)/h.UI.koefOnGrid,(l.endCoord.y-l.dEndCoord.y*h.UI.koefOfNewPos)/h.UI.koefOnGrid]),s.createElement(_n.Line,{opacity:u?.3:1,points:p,stroke:o.getBeamColor(l),strokeWidth:In,shadowBlur:c&&!u?8:2,hitStrokeWidth:u?0:4*In,onClick:u?function(){}:function(e){return n(e,l)},onMouseEnter:u?function(){}:function(e){return o.beamMouseEnter(e,l,a)},onMouseLeave:u?function(){}:function(e){return o.beamMouseLeave(e)}})}),Dn=s.memo(function(e){var t=e.heightBox,n=e.heightCell,o=e.widthBox,r=e.widthCell,a=o/r,i=t/n;return console.log("UIGrid"),s.createElement(s.Fragment,null,function(e,t,n){for(var o=[],r=0;r<n;r++)o.push(s.createElement(_n.Line,{points:[r*e,0,r*e,t],stroke:"#ddd",strokeWidth:1,key:r}));return o}(r,t,a),function(e,t,n){for(var o=[],r=0;r<n;r++)o.push(s.createElement(_n.Line,{points:[0,r*e,t,r*e],stroke:"#ddd",strokeWidth:1,key:r}));return o}(n,o,i))}),Mn=h.UI.nodeSize,Tn=Object(oe.a)(function(e){var t=e.node,n=e.onClick,r=void 0===n?function(){}:n,a=e.selected,i=void 0!==a&&a,l=e.mode,d=void 0===l?c.none:l,u=e.drag,p=void 0===u?function(){}:u,m=e.viewNewPos,f=void 0!==m&&m,y=function(e,t){if(!f)return s.createElement(s.Fragment,null,s.createElement(_n.Arrow,{points:[0,0,h.UI.cellSize,0],stroke:o.theme.palette.grey[300],strokeWidth:Mn/3,shadowBlur:2,pointerLength:h.UI.cellSize/10,pointerWidth:h.UI.cellSize/10,hitStrokeWidth:2*Mn,rotation:e>0?t:180+t}),s.createElement(_n.Text,{x:0===t?e>0?h.UI.cellSize/3:-h.UI.cellSize:h.UI.cellSize/3,y:90===t?e>0?h.UI.cellSize/3:-h.UI.cellSize/2:-h.UI.cellSize/1.5,text:e+" H"}))},v=function(e){return s.createElement(_n.Group,{x:0,y:0,rotation:e},s.createElement(_n.Line,{points:[0,0,0,h.UI.cellSize,-h.UI.cellSize/2,h.UI.cellSize,h.UI.cellSize/2,h.UI.cellSize],stroke:o.theme.palette.grey[300],strokeWidth:Mn/4,shadowBlur:2}),s.createElement(_n.Circle,{radius:Mn/2,fill:o.theme.palette.grey[500],x:0,y:h.UI.cellSize-Mn/1.7}))};if(f&&0===t.dCoord.x&&0===t.dCoord.y)return s.createElement(s.Fragment,null);var g=t.coord.x/h.UI.koefOnGrid,O=t.coord.y/h.UI.koefOnGrid;if(f){if(Math.abs(t.dCoord.x)<.2&&Math.abs(t.dCoord.y)<.2)return s.createElement(s.Fragment,null);g=(t.coord.x+t.dCoord.x*h.UI.koefOfNewPos)/h.UI.koefOnGrid,O=(t.coord.y-t.dCoord.y*h.UI.koefOfNewPos)/h.UI.koefOnGrid}return s.createElement(_n.Group,{opacity:f?.3:1,x:g,y:O,_useStrictMode:!0,onClick:f?function(){}:function(e){return r(e,t)}},0!==t.forceX&&y(t.forceX,0),0!==t.forceY&&y(t.forceY,90),t.fixation===b.x&&v(90),t.fixation===b.y&&v(0),t.fixation===b.xy&&v(90),t.fixation===b.yx&&v(0),s.createElement(_n.Circle,{radius:Mn,x:0,y:0,fill:o.getNodeColor(t),shadowBlur:i&&!f?8:2,stroke:o.getNodeStorkeColor(t,d),strokeWidth:o.getNodeStorkeWidth(t,d),hitStrokeWidth:f?0:2*Mn}),s.createElement(_n.Text,{x:-Mn,y:-Mn/2-1,align:"center",fontSize:18,fill:"#fff",shadowBlur:8,fontFamily:"Trebuchet MS",width:2*Mn,verticalAlign:"middle",text:t.name}),s.createElement(_n.Circle,{radius:Mn,x:0,y:0,onDragEnd:function(e){e.target.to({x:0,y:0})},hitStrokeWidth:f?0:2*Mn,draggable:d===c.move&&!t.isStatic&&!f,onMouseEnter:f?function(){}:function(e){return o.nodeMouseEnter(e,t,d)},onMouseLeave:f?function(){}:function(e){return o.nodeMouseLeave(e)},onDragMove:function(e){return p(e,t)}}))}),Un=n(43),Pn=n(224),zn=n.n(Pn),An=Object(Un.c)(function(e){var t=e.classes,n=e.stage,o=e.stageHeight,r=e.stageWidth,a=e.onClick,i=e.onMouseMove,c=e.onDrag,l=e.beams,d=e.nodes,u=e.uiMode,p=e.selectedEntity,m=e.viewNewPos;return s.createElement(zn.a,{autoHide:!0},s.createElement(ze.a,{style:{width:r+2*h.UI.sidebarWidth+20,height:o+h.UI.sidebarWidth},className:t.root},s.createElement(_n.Stage,{height:o,width:r,style:{height:o,width:r},className:t.stage,onClick:a,onMouseMove:i,ref:n},s.createElement(_n.Layer,{className:"layer"},s.createElement(Dn,{heightCell:h.UI.cellSize,widthCell:h.UI.cellSize,heightBox:o,widthBox:r}),l.map(function(e){return s.createElement(Bn,{key:e.id,beam:e,mode:u,onClick:a,selected:p===e})}),m&&l.map(function(e){return s.createElement(Bn,{key:e.id,beam:e,mode:u,onClick:a,selected:p===e,viewNewPos:!0})}),d.map(function(e){return s.createElement(Tn,{key:e.id,node:e,mode:u,drag:c,onClick:a,selected:p===e})}),m&&d.map(function(e){return s.createElement(Tn,{key:e.id,node:e,mode:u,drag:c,onClick:a,selected:p===e,viewNewPos:!0})})))))}),Fn=Object(X.a)(function(e){return Object(V.a)({root:{backgroundColor:"#ddd",display:"flex",alignItems:"center",justifyContent:"center"},stage:{backgroundColor:"#fff",boxShadow:e.shadows[2],borderRadius:8}})})(An),Ln=[{name:"Base farm",id:"1",fixedNodes:[{x:0,y:0,fixation:"xy"},{x:3e3,y:0,fixation:"y"}],staticNodes:[{x:1e3,y:0,forceY:9e3}],simpleNodes:[]},{name:"Base farm #2",id:"2",fixedNodes:[{x:2e3,y:0,fixation:"xy"},{x:3e3,y:0,fixation:"xy"}],staticNodes:[{x:0,y:0,forceY:2e3},{x:1e3,y:0,forceY:1e3}],simpleNodes:[]},{name:"Base farm #3",id:"3",fixedNodes:[{x:0,y:1e3,fixation:"xy"},{x:1500,y:1e3,fixation:"xy"}],staticNodes:[{x:0,y:0,forceX:1e3},{x:0,y:2e3,forceX:-1e3}],simpleNodes:[]},{name:"Base farm #4",id:"4",fixedNodes:[{x:500,y:1e3,fixation:"xy"},{x:1500,y:1e3,fixation:"xy"}],staticNodes:[{x:0,y:0,forceX:1e3},{x:0,y:2e3,forceX:-1500}],simpleNodes:[]},{name:"Base farm #5",id:"5",fixedNodes:[{x:0,y:0,fixation:"xy"},{x:3e3,y:0,fixation:"xy"}],staticNodes:[{x:1e3,y:0,forceY:-1e3},{x:2e3,y:0,forceY:1e3}],simpleNodes:[]},{name:"Base farm #6",id:"6",fixedNodes:[{x:0,y:0,fixation:"xy"},{x:0,y:1e3,fixation:"xy"}],staticNodes:[{x:2e3,y:500,forceY:1e3}],simpleNodes:[]}],Gn=Object(oe.a)(Cn=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(P.a)(this,Object(z.a)(t).call(this,e))).nodesCacheName="nodes:array",n.beamsCacheName="beams:array",n.addNode=function(e,t,o){n.state.calculated&&n.setState({calculated:!1});try{return Be.addNode(Object(ne.a)({},o,{coord:{x:e*h.UI.koefOnGrid,y:t*h.UI.koefOnGrid}}))}catch(r){console.error("addNode",r),r.message?alert(r.message):alert(r)}},n.moveNode=function(e,t,o){n.state.calculated&&n.setState({calculated:!1});try{var r=t*h.UI.koefOnGrid,a=o*h.UI.koefOnGrid;Be.moveNode(e.id,r,a)}catch(i){console.error("moveNode",i),i.message?alert(i.message):alert(i)}},n.addBeam=function(e){n.state.calculated&&n.setState({calculated:!1});try{return Be.addBeam(e)}catch(t){console.error("addBeam",t),t.message?alert(t.message):alert(t)}},n.moveEndBeam=function(e,t,o){n.state.calculated&&n.setState({calculated:!1});try{var r=t*h.UI.koefOnGrid,a=o*h.UI.koefOnGrid;return Be.moveEndBeamWhileDraving(e.id,r,a)}catch(i){console.error("moveEndBeam",i),i.message?alert(i.message):alert(i)}},n.connectBeamToNode=function(e,t,o){n.state.calculated&&n.setState({calculated:!1});try{switch(o){case"start":return Be.connectBeamToStartNode(e.id,t.id);case"end":return Be.connectBeamToEndNode(e.id,t.id)}}catch(r){console.error("connectBeamToNode",r),r.message?alert(r.message):alert(r)}},n.deleteEntity=function(e){n.state.calculated&&n.setState({calculated:!1});try{Be.delete(e)}catch(t){console.error("deleteEntity",t),t.message?alert(t.message):alert(t)}},n.calculate=function(){var e=Object(te.a)(ee.a.mark(function e(t){return ee.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.state.calculated&&n.setState({calculated:!1}),e.prev=1,n.setState({calculation:!0}),console.log("Calculate"),e.next=6,Be.calculate();case 6:n.setState({calculated:!0,calculation:!1}),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),console.error("calculate",e.t0),e.t0.message?alert(e.t0.message):alert(e.t0),n.setState({calculated:!1,calculation:!1});case 14:case"end":return e.stop()}},e,null,[[1,9]])}));return function(t){return e.apply(this,arguments)}}(),n.setDefaultTruss=function(){n.state.calculated&&n.setState({calculated:!1});try{console.log("setDefaultTruss"),n.state.loadFromCache&&n.loadTrussFromCache()}catch(e){console.error("setDefaultTruss",e),e.message?alert(e.message):alert(e)}},n.cacheTruss=function(){var e=De.toString(Be),t=e.beamsJSON,o=e.nodesJSON;localStorage.setItem(n.nodesCacheName,o),localStorage.setItem(n.beamsCacheName,t)},n.loadTrussFromCache=Object(te.a)(ee.a.mark(function e(){var t,o,r,a,i;return ee.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=localStorage.getItem(n.nodesCacheName),o=localStorage.getItem(n.beamsCacheName),!t||!o){e.next=11;break}return e.next=5,De.parse(t,o);case 5:r=e.sent,a=r.nodes,i=r.beams,Be.setNodes(a),Be.setBeams(i),Be.sortNodesByCoord();case 11:case"end":return e.stop()}},e)})),n.clearTruss=Object(te.a)(ee.a.mark(function e(){return ee.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.setState({loadFromCache:!1});case 2:return localStorage.removeItem(n.nodesCacheName),localStorage.removeItem(n.beamsCacheName),e.next=6,Be.clear();case 6:case"end":return e.stop()}},e)})),n.selectTruss=function(){var e=Object(te.a)(ee.a.mark(function e(t){var o,r;return ee.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(o=Ln.find(function(e){return e.id===t}))){e.next=10;break}return e.next=4,De.createNodes(o.fixedNodes,o.staticNodes,o.simpleNodes);case 4:return r=e.sent,e.next=7,n.clearTruss();case 7:Be.setNodes(r),Be.sortNodesByCoord(),De.firstPlacement(Be.nodesArray,Be.beamsArray);case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.state={calculation:!1,calculated:!1,loadFromCache:!1},n}return Object(A.a)(t,e),Object(f.a)(t,[{key:"componentWillMount",value:function(){localStorage.getItem(this.nodesCacheName)&&localStorage.getItem(this.beamsCacheName)&&this.setState({loadFromCache:!0})}},{key:"componentDidMount",value:function(){this.setDefaultTruss()}},{key:"render",value:function(){return s.createElement(Sn,Object.assign({},this.state,this,{farm:Be,trusses:Ln}))}}]),t}(s.Component))||Cn,Wn=function(e){function t(){return Object(m.a)(this,t),Object(P.a)(this,Object(z.a)(t).apply(this,arguments))}return Object(A.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return s.createElement(s.Fragment,null,s.createElement(L.a,{htmlAttributes:{leng:"en"},titleTemplate:"Truss - %s",defaultTitle:h.str.title,link:[{rel:"shortcut icon",href:h.img.bridgeIcon_2},{rel:"image_src",href:h.img.airBridge},{rel:"stylesheet",href:"https://fonts.googleapis.com/css?family=Roboto:300,400,500"},{rel:"stylesheet",href:"https://fonts.googleapis.com/icon?family=Material+Icons"}],meta:[{charSet:"utf-8"},{name:"viewport",content:"minimum-scale=1, initial-scale=1, width=device-width, shrink-to-fit=no"},{name:"theme-color",content:"#000000"},{name:"description",content:h.str.description},{property:"og:type",content:"website"},{property:"og:title",content:h.str.title},{property:"og:image",content:h.img.airBridge},{property:"vk:image",content:h.img.airBridge},{property:"twitter:image",content:h.img.airBridge},{property:"og:url",content:h.str.url}]}),s.createElement(G.a,null),s.createElement(W.a,{theme:v},s.createElement(U.c,null,s.createElement(U.a,{path:H,component:Q,exact:!0}),s.createElement(U.a,{path:K,component:Gn}))))}}]),t}(s.Component);n(418);u.a.render(l.a.createElement(function(){return l.a.createElement(T.a,null,l.a.createElement(Wn,null))},null),document.getElementById("root"))}},[[237,1,2]]]);
//# sourceMappingURL=main.f2244d34.chunk.js.map