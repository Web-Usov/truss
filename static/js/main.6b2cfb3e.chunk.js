(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{129:function(e,t,n){e.exports=n(213)},212:function(e,t,n){},213:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"UIModes",function(){return s}),n.d(a,"theme",function(){return E}),n.d(a,"getNodeColor",function(){return O}),n.d(a,"getNodeStorkeColor",function(){return k}),n.d(a,"getNodeStorkeWidth",function(){return j}),n.d(a,"getBeamColor",function(){return S}),n.d(a,"nodeMouseEnter",function(){return I}),n.d(a,"nodeMouseLeave",function(){return w}),n.d(a,"beamMouseEnter",function(){return N}),n.d(a,"beamMouseLeave",function(){return x});var r={};n.r(r),n.d(r,"mainBackGround",function(){return C}),n.d(r,"node",function(){return D}),n.d(r,"staticNode",function(){return B}),n.d(r,"fixedNode",function(){return M}),n.d(r,"beam",function(){return U});var o={};n.r(o),n.d(o,"defaultState",function(){return X}),n.d(o,"reducer",function(){return Y});var i={};n.r(i),n.d(i,"setTitle",function(){return K});var c={};n.r(c),n.d(c,"defaultHomeState",function(){return V}),n.d(c,"reducer",function(){return $});var s,l=n(0),d=n.n(l),u=n(18),m=n.n(u),f=n(77),b=n(33),h=(Object(b.a)(),n(19)),p=n(13),v=n(91),g=n(122);!function(e){e[e.none=0]="none",e[e.move=1]="move",e[e.addNode=2]="addNode",e[e.addBeam=3]="addBeam",e[e.addBeamStart=4]="addBeamStart",e[e.delete=5]="delete"}(s||(s={}));var y,E=Object(g.a)({palette:{primary:{dark:"#0A4467",main:"#1e779e",light:"#51A8D6"},secondary:{dark:"#a83e19",main:"#f15a24",light:"#F39B7C"},background:{default:"linear-gradient(35deg, #6863bf 0%, #067d93 50%, #e68a68 100%)"}}}),O=function(e){return e.isStatic?e.fixation?r.fixedNode:r.staticNode:r.node},k=function(e,t){switch(t){case s.move:return e.isStatic?E.palette.secondary.dark:E.palette.primary.light;case s.addBeam:case s.addBeamStart:return E.palette.primary.light;default:return E.palette.secondary.main}},j=function(e,t){switch(t){case s.move:return e.isStatic?0:2;case s.addBeam:case s.addBeamStart:return 2;default:return 0}},S=function(e){return r.beam},I=function(e,t,n){var a=e.target.getStage();switch(n){case s.delete:if(t.isStatic){a.container().style.cursor="default";break}a.container().style.cursor="pointer";break;case s.none:a.container().style.cursor="pointer";break;case s.addBeam:case s.addBeamStart:a.container().style.cursor="crosshair";break;case s.move:if(t.isStatic){a.container().style.cursor="default";break}a.container().style.cursor="move"}},w=function(e){var t=e.target.getStage();t&&(t.container().style.cursor="default")},N=function(e,t,n){var a=e.target.getStage();switch(n){case s.delete:case s.none:a.container().style.cursor="pointer"}},x=function(e){var t=e.target.getStage();t&&(t.container().style.cursor="default")},C="#09B4D3",D=E.palette.secondary.main,B=E.palette.secondary.light,M=E.palette.secondary.dark,U=E.palette.secondary.light,_=function(){function e(){Object(h.a)(this,e)}return Object(p.a)(e,null,[{key:"angleBePoints",value:function(e,t,n,a){return Math.atan2(-t+a,-e+n)/Math.PI}},{key:"lengthBePoints",value:function(e,t,n,a){return Math.sqrt(Math.pow(e-n,2)+Math.pow(t-a,2))}},{key:"cellX",value:function(e){return Math.round(e/v.UI_cellSize)*v.UI_cellSize}},{key:"cellY",value:function(e){return Math.round(e/v.UI_cellSize)*v.UI_cellSize}}]),e}(),F=n(46),T=n(42),z=n(7),X={nodes:[],beams:[],forces:[]},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_NODE":var n=t.node;return Object(z.a)({},e,{nodes:[].concat(Object(T.a)(e.nodes),[n])});case"ADD_BEAM":var a=t.beam;return Object(z.a)({},e,{beams:[].concat(Object(T.a)(e.beams),[a])});case"ADD_FORCE":var r=t.force;return Object(z.a)({},e,{forces:[].concat(Object(T.a)(e.forces),[r])});case"EDIT_NODE":return Object(z.a)({},e,{nodes:e.nodes.map(function(e){return e.id===t.node.id?Object(z.a)({},e,t.node):e})});case"EDIT_BEAM":return Object(z.a)({},e,{beams:e.beams.map(function(e){return e.id===t.beam.id?Object(z.a)({},e,t.beam):e})});case"DELETE_ENTITY":return{beams:e.beams.filter(function(e){return e.id!==t.id}),nodes:e.nodes.filter(function(e){return e.id!==t.id}),forces:e.forces.filter(function(e){return e.id!==t.id})};default:return e}},L=n(47),W=n.n(L),H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.x,n=e.y,a=e.name,r=e.angle,o=e.id,i=e.newX,c=e.newY,s=e.type,l={id:o||W()(),x:t||0,y:n||0,angle:r||0,name:a||"",newX:i||t||0,newY:c||n||0,type:s||"entity"};return l.name=a||l.id,l},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.angle,n=e.nodeID,a=e.value,r=H(e);return Object(z.a)({},r,{type:"force",angle:t||0,nodeID:n||"",value:a||0})},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.length,n=e.startConnectedNodeID,a=e.endConnectedNodeID,r=e.endX,o=e.endY,i=H(e);return Object(z.a)({},i,{type:"beam",length:t||0,startConnectedNodeID:n,endConnectedNodeID:a,endX:r||i.x||0,endY:o||i.y||0})},G=function(e){return e&&"beam"===e.type};!function(e){e[e.None=0]="None",e[e.X=1]="X",e[e.Y=2]="Y",e[e.XY=3]="XY",e[e.YX=3]="YX"}(y||(y={}));var R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.beamsID,n=e.forceX,a=e.forceY,r=e.isStatic,o=e.fixation,i=H(e);return Object(z.a)({},i,{type:"node",beamsID:t||[],forceX:n,forceY:a,isStatic:r||!1,fixation:o||y.None})},J=function(e){return e&&"node"===e.type},K=function(e){return{type:"SET_TITLE",title:e}},V={title:"Hello, world!"},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TITLE":return Object(z.a)({},e,{title:t.title});default:return e}},q=n(114),Q=Object(F.c)({farm:o.reducer,home:c.reducer}),Z=Object(F.d)(Q,Object(F.a)(q.a)),ee=n(52),te=n(49),ne=n(25),ae=n(24),re=n(26),oe=n(115),ie=n.n(oe),ce=n(268),se=n(261),le=n(17),de=n(116),ue=n(267),me=n(262),fe=n(5),be=n(28),he=v.UI_nodeSize,pe=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(ne.a)(this,Object(ae.a)(t).call(this,e))).viewForce=n.viewForce.bind(Object(le.a)(n)),n}return Object(re.a)(t,e),Object(p.a)(t,[{key:"shouldComponentUpdate",value:function(e){return e.node!==this.props.node||e.mode!==this.props.mode||e.selected!==this.props.selected}},{key:"viewForce",value:function(e){return l.createElement(l.Fragment,null,l.createElement(be.Arrow,{points:[0,0,v.UI_cellSize,0],stroke:a.theme.palette.grey[300],strokeWidth:he/3,shadowBlur:2,pointerLength:v.UI_cellSize/10,pointerWidth:v.UI_cellSize/10,hitStrokeWidth:2*he,rotation:e.value>0?e.angle:180+e.angle}),l.createElement(be.Text,{x:0===e.angle?e.value>0?v.UI_cellSize/3:-v.UI_cellSize:v.UI_cellSize/3,y:90===e.angle?e.value>0?v.UI_cellSize/3:-v.UI_cellSize/2:-v.UI_cellSize/1.5,text:e.value+"H"}))}},{key:"viewFixation",value:function(e){return l.createElement(be.Group,{x:0,y:0,rotation:e},l.createElement(be.Line,{points:[0,0,0,v.UI_cellSize,-v.UI_cellSize/2,v.UI_cellSize,v.UI_cellSize/2,v.UI_cellSize],stroke:a.theme.palette.grey[300],strokeWidth:he/4,shadowBlur:2}),l.createElement(be.Circle,{radius:he/2,fill:a.theme.palette.grey[500],x:0,y:v.UI_cellSize-he/1.7}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.onClick,r=t.mode,o=t.selected,i=t.node;return l.createElement(be.Group,{x:i.x,y:i.y,_useStrictMode:!0,onClick:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return n(e,i)})},i.forceX&&this.viewForce(i.forceX),i.forceY&&this.viewForce(i.forceY),i.fixation===y.X&&this.viewFixation(90),i.fixation===y.Y&&this.viewFixation(0),i.fixation===y.XY&&this.viewFixation(90),i.fixation===y.YX&&this.viewFixation(0),l.createElement(be.Circle,{radius:he,x:0,y:0,fill:a.getNodeColor(i),shadowBlur:o?8:2,stroke:a.getNodeStorkeColor(i,r),strokeWidth:a.getNodeStorkeWidth(i,r),hitStrokeWidth:2*he}),l.createElement(be.Text,{x:-he,y:-he/2-1,align:"center",fontSize:18,fill:"#fff",shadowBlur:8,fontFamily:"Trebuchet MS",width:2*he,verticalAlign:"middle",text:i.name}),l.createElement(be.Circle,{radius:he,x:i.x-i.x,y:i.y-i.y,onDragEnd:function(e){e.target.to({x:0,y:0})},hitStrokeWidth:2*he,draggable:r===s.move&&!i.isStatic,onMouseEnter:function(e){return a.nodeMouseEnter(e,i,r)},onMouseLeave:function(e){return a.nodeMouseLeave(e)},onDragMove:function(t){return e.props.drag(t,i)}}))}}]),t}(l.Component),ve=n(83),ge=function(e){function t(){return Object(h.a)(this,t),Object(ne.a)(this,Object(ae.a)(t).apply(this,arguments))}return Object(re.a)(t,e),Object(p.a)(t,[{key:"shouldComponentUpdate",value:function(e){var t=this.props,n=t.beam,a=t.mode,r=t.selected;return e.beam!==n||e.mode!==a||e.selected!==r}},{key:"render",value:function(){var e=this.props,t=e.onClick,n=e.mode,r=e.selected,o=e.beam,i=v.UI_beamSize;return l.createElement(ve.Line,{points:[o.x,o.y,o.endX,o.endY],stroke:a.getBeamColor(o),strokeWidth:i,shadowBlur:r?8:2,hitStrokeWidth:4*i,onClick:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return t(e,o)}),onMouseEnter:function(e){return a.beamMouseEnter(e,o,n)},onMouseLeave:function(e){return a.beamMouseLeave(e)}})}}]),t}(l.Component),ye=function(e){var t=e.widthCell,n=e.heightCell,a=e.heightBox,r=e.widthBox,o=r/t,i=a/n;return l.createElement(l.Fragment,null,function(){for(var e=[],n=0;n<o;n++)e.push(l.createElement(be.Line,{points:[n*t,0,n*t,a],stroke:"#ddd",strokeWidth:1,key:n}));return e}(),function(){for(var e=[],t=0;t<i;t++)e.push(l.createElement(be.Line,{points:[0,t*n,r,t*n],stroke:"#ddd",strokeWidth:1,key:t}));return e}())},Ee=n(117),Oe=n.n(Ee),ke=Object(fe.a)(function(e){return Object(ue.a)({root:{flexGrow:1,backgroundColor:"#fff"},stage:{backgroundColor:"#fff"}})})(function(e){var t=e.classes,n=e.stage,a=e.stageHeight,r=e.stageWidth,o=e.onClick,i=e.onMouseMove,c=e.onDrag,s=e.beams,d=e.nodes,u=e.uiMode,m=e.selectedEntity;return l.createElement(Oe.a,{className:t.root,autoHide:!0},l.createElement(be.Stage,{height:a,width:r,style:{height:a,width:r},className:t.stage,onClick:o,onMouseMove:i,ref:n},l.createElement(be.Layer,{className:"layer"},l.createElement(ye,{heightCell:v.UI_cellSize,widthCell:v.UI_cellSize,heightBox:a,widthBox:r}),s.map(function(e){return l.createElement(ge,{key:e.id,beam:e,mode:u,onClick:o,selected:m===e})}),d.map(function(e){return l.createElement(pe,{key:e.id,node:e,mode:u,drag:c,onClick:o,selected:m===e})}))))}),je=n(242),Se=n(264),Ie=n(78),we=n(236),Ne=n(265),xe=n(237),Ce=n(238),De=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(ne.a)(this,Object(ae.a)(t).call(this,e))).state={open:!1,viewTooltip:!1},n.switchDrawer=n.switchDrawer.bind(Object(le.a)(n)),n}return Object(re.a)(t,e),Object(p.a)(t,[{key:"switchDrawer",value:function(){this.setState({open:!this.state.open,viewTooltip:!1})}},{key:"changeViewtooltip",value:function(e){this.setState({viewTooltip:e})}},{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=t.children,r=t.title,o=t.btnIcon,i=t.anchor,c=this.state,s=c.open,d=c.viewTooltip;return l.createElement(l.Fragment,null,l.createElement(Se.a,{className:n.drawer,variant:"persistent",open:s,anchor:i,classes:{paper:n.drawerPaper}},l.createElement("div",{className:n.toolbar}),l.createElement(Ie.a,{variant:"body2",align:"center",className:n.title},r),l.createElement(we.a,null),a),l.createElement(Ne.a,{title:r,open:void 0!==r&&d&&!s,onOpen:function(){return e.changeViewtooltip(!0)},onClose:function(){return e.changeViewtooltip(!1)}},l.createElement(xe.a,{style:{left:"left"===i?s?255:15:"auto",right:"right"===i?s?255:15:"auto"},color:"secondary",size:"medium",className:n.toogleIcon,onClick:this.switchDrawer},s?l.createElement(Ce.a,null):o)))}}]),t}(l.PureComponent),Be=Object(fe.a)(function(e){return Object(ue.a)({drawer:{position:"relative"},drawerPaper:{width:240},toogleIcon:{position:"absolute",top:e.spacing(10),zIndex:e.zIndex.drawer+1},title:{padding:e.spacing(1)},toolbar:e.mixins.toolbar})})(De),Me=n(4),Ue=n(239),_e=n(240),Fe=Object(fe.a)(function(e){return Object(ue.a)({appBar:{zIndex:e.zIndex.drawer+1},logo:{marginRight:e.spacing(4),marginLeft:e.spacing(2),"& img":{width:50,height:"auto"}}})})(function(e){var t=e.classes,n=e.children,a=e.className,r=e.color,o=e.position,i=e.withLogo,c=void 0===i||i;return l.createElement(Ue.a,{position:o||"fixed",className:Object(Me.a)(t.appBar,a),color:r||"primary"},l.createElement(_e.a,null,function(){if(c)return l.createElement(ee.b,{to:"/",className:t.logo},l.createElement("img",{alt:"Logo Icon",src:v.bridgeIcon_2}))}(),n))}),Te=n(70),ze=n(120),Xe=n(241),Ye=n(15),Le=Object(fe.a)(function(e){return Object(ue.a)({btn:{marginLeft:e.spacing(2),marginRight:e.spacing(2),borderRadius:"50% !important",border:"1px solid ".concat(Object(Ye.b)(e.palette.action.active,.2)," !important"),transition:e.transitions.create(["background-color","box-shadow","border"],{duration:e.transitions.duration.short}),color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.light,"&$selected":{backgroundColor:e.palette.secondary.main,"&:hover":{backgroundColor:e.palette.secondary.dark}},"&:hover":{backgroundColor:e.palette.secondary.dark,"@media (hover: none)":{backgroundColor:e.palette.secondary.main},"&$disabled":{backgroundColor:e.palette.secondary.main}}},selected:{}})})(function(e){var t=e.selected,n=e.classes,a=e.value,r=e.name,o=e.icon,i=Object(ze.a)(e,["selected","classes","value","name","icon"]);return l.createElement(Xe.a,Object.assign({key:r,value:a,className:Object(Me.a)(n.btn,Object(Te.a)({},n.selected,t))},i),l.createElement(Ne.a,{title:r},o))}),We=Object(fe.a)(function(e){return Object(ue.a)({root:{},btn:{marginLeft:e.spacing(2),marginRight:e.spacing(2)},grow:{flexGrow:1}})})(function(e){var t=e.classes,n=e.hundleSave,a=void 0===n?function(e){alert("\u0411\u0443\u0435\u0434\u0435\u0442 \u0440\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u043e \u0432 \u0431\u0443\u0434\u0443\u0449\u0435\u043c")}:n,r=e.hundleClear,o=void 0===r?function(e){alert("\u0411\u0443\u0435\u0434\u0435\u0442 \u0440\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u043e \u0432 \u0431\u0443\u0434\u0443\u0449\u0435\u043c")}:r,i=e.hundleCalculate,c=void 0===i?function(e){alert("\u0411\u0443\u0435\u0434\u0435\u0442 \u0440\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u043e \u0432 \u0431\u0443\u0434\u0443\u0449\u0435\u043c")}:i;return l.createElement(Fe,{className:t.root},l.createElement("div",{className:t.grow}),l.createElement(je.a,{color:"secondary",variant:"contained",className:t.btn,onClick:c},"\u0420\u0430\u0441\u0447\u0435\u0442"),l.createElement(je.a,{color:"secondary",variant:"contained",className:t.btn,onClick:a},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),l.createElement(je.a,{color:"secondary",variant:"contained",className:t.btn,onClick:o},"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"))}),He=n(243),Pe=n(244),Ae=n(245),Ge=n(246),Re=n(249),Je=n(250),Ke=n(247),Ve=n(248),$e=n(251),qe=n(252),Qe=n(253),Ze=n(254),et=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(ne.a)(this,Object(ae.a)(t).call(this,e))).state={open:!1,tabs:new Map},n.openTab=n.openTab.bind(Object(le.a)(n)),n.viewListItem=n.viewListItem.bind(Object(le.a)(n)),n}return Object(re.a)(t,e),Object(p.a)(t,[{key:"componentWillMount",value:function(){var e=this.state.tabs;e.set("\u0423\u0437\u043b\u044b",!1),e.set("\u0421\u0442\u0435\u0440\u0436\u043d\u0438",!1),this.setState({tabs:new Map(e)})}},{key:"openTab",value:function(e){var t=this.state.tabs;t.set(e,!t.get(e)),this.setState({tabs:new Map(t)})}},{key:"viewListItem",value:function(e,t,n){var r=this,o=this.props,i=o.selectedEntity,c=o.classes,s=o.onSelect,d=this.state.tabs;return l.createElement(l.Fragment,null,l.createElement(He.a,{button:!0,onClick:function(){return r.openTab(t)}},n&&l.createElement(Pe.a,null,l.createElement(Ae.a,{badgeContent:e.length,color:"secondary"},n)),l.createElement(Ge.a,{primary:t}),d.get(t)?l.createElement(Ke.a,null):l.createElement(Ve.a,null)),l.createElement(Re.a,{in:d.get(t),timeout:"auto",unmountOnExit:!0},l.createElement(Je.a,{component:"div",disablePadding:!0},e.map(function(e){return l.createElement(He.a,{button:!0,className:c.nested,key:e.id,selected:i===e,onClick:function(t){return s(e)}},J(e)&&l.createElement(Pe.a,null,l.createElement($e.a,{style:{color:a.getNodeColor(e)}})),l.createElement(Ge.a,{primary:e.name}))}))),l.createElement(we.a,null))}},{key:"render",value:function(){var e=this.props,t=e.nodes,n=e.beams;return l.createElement(Be,{anchor:"left",title:"\u0421\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0430 \u043f\u0440\u043e\u0435\u043a\u0442\u0430",btnIcon:l.createElement(qe.a,null)},this.viewListItem(t,"\u0423\u0437\u043b\u044b",l.createElement(Qe.a,null)),this.viewListItem(n,"\u0421\u0442\u0435\u0440\u0436\u043d\u0438",l.createElement(Ze.a,null)))}}]),t}(l.PureComponent),tt=Object(fe.a)(function(e){return Object(ue.a)({nested:{paddingLeft:e.spacing(6)}})})(et),nt=n(255),at=n(256),rt=n(257),ot=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(ne.a)(this,Object(ae.a)(t).call(this,e))).state={},n}return Object(re.a)(t,e),Object(p.a)(t,[{key:"getTypeStr",value:function(e){return J(e)?"\u0423\u0437\u0435\u043b":G(e)?"\u0421\u0442\u0435\u0440\u0436\u0435\u043d\u044c":"\u042d\u043b\u0435\u043c\u0435\u043d\u0442"}},{key:"viewInfo",value:function(e){var t=this.props,n=t.classes,a=t.onDelete;if(e)return l.createElement(me.a,{className:n.root},l.createElement(Ie.a,{className:n.subTitle,color:"textSecondary",gutterBottom:!0},this.getTypeStr(e)),l.createElement(Ie.a,{variant:"h5",className:n.title},e.name),l.createElement(nt.a,{"aria-label":"Delete",onClick:function(){return a(e)}},l.createElement(at.a,null)))}},{key:"render",value:function(){var e=this.props.entity;return l.createElement(Be,{anchor:"right",title:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u043e\u043c \u043e\u0431\u044a\u0435\u043a\u0442\u0435",btnIcon:l.createElement(rt.a,null)},this.viewInfo(e),l.createElement(we.a,null))}}]),t}(l.PureComponent),it=Object(fe.a)(function(e){return Object(ue.a)({root:{padding:e.spacing(2)},subTitle:{fontSize:14},title:{marginBottom:e.spacing(2)}})})(ot),ct=n(214),st=n(266),lt=n(258),dt=n(259),ut=n(260),mt=Object(fe.a)(function(e){return Object(ue.a)({root:{position:"absolute",padding:e.spacing(1),bottom:e.spacing(2),left:"50%",transform:"translateX(-50%)",backgroundColor:Object(Ye.b)(e.palette.primary.light,.4),transition:e.transitions.create(["background-color","box-shadow","border"],{duration:e.transitions.duration.short}),"&:hover":{backgroundColor:e.palette.primary.light}},modsBtnGroup:{borderRadius:0,backgroundColor:"transparent"}})})(function(e){var t=e.onSelect,n=e.selected,a=e.classes,r=[{name:"\u041f\u0435\u0440\u0435\u043c\u0435\u0449\u0435\u043d\u0438\u0435",mod:s.move,icon:l.createElement(lt.a,null)},{name:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0443\u0437\u0435\u043b",mod:s.addNode,icon:l.createElement(dt.a,null)},{name:"\u0421\u043e\u0435\u0434\u0438\u043d\u0438\u0442\u044c \u0443\u0437\u043b\u044b",mod:s.addBeam,icon:l.createElement(ut.a,null)},{name:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",mod:s.delete,icon:l.createElement(at.a,null)}];return l.createElement(ct.a,{className:a.root},l.createElement(st.a,{value:n,exclusive:!0,onChange:function(e,n){return t(n)},size:"medium",className:a.modsBtnGroup},r.map(function(e){return l.createElement(Le,{key:e.mod,value:e.mod,selected:e.mod===n,icon:e.icon,name:e.name})})))}),ft=n(121),bt=n.n(ft),ht=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(ne.a)(this,Object(ae.a)(t).call(this,e))).stage=void 0,n.state={stageHeight:2e3,stageWidth:2e3,uiMode:s.none,selectedEntity:void 0,paintEntity:void 0},n.UIonClick=n.UIonClick.bind(Object(le.a)(n)),n.UIonDrag=n.UIonDrag.bind(Object(le.a)(n)),n.UIonMouseMove=n.UIonMouseMove.bind(Object(le.a)(n)),n.onKeyHandle=n.onKeyHandle.bind(Object(le.a)(n)),n.selectEntity=n.selectEntity.bind(Object(le.a)(n)),n.clearFarm=n.clearFarm.bind(Object(le.a)(n)),n.deleteEntity=n.deleteEntity.bind(Object(le.a)(n)),n.saveFarm=n.saveFarm.bind(Object(le.a)(n)),n.stage=l.createRef(),n}return Object(re.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this.stage.current;if(e){var t=e.attrs.container.parentElement;t&&(t.scrollTop=(t.scrollHeight-t.offsetHeight)/2,t.scrollLeft=(t.scrollWidth-t.offsetWidth)/2)}}},{key:"UIonClick",value:function(e,t){var n=this.state,a=n.uiMode,r=n.paintEntity,o=e.target.getStage()===e.target;if(e.evt.preventDefault(),0===e.evt.button)switch(a){case s.none:o?this.setState({selectedEntity:void 0}):this.selectEntity(t);break;case s.addNode:if(o){var i=e.evt,c=i.layerX,l=i.layerY,d=_.cellX(c),u=_.cellX(l);this.props.addNode(d,u)}break;case s.addBeam:if(!o&&J(t)){var m=this.props.addBeam({x:t.x,y:t.y});if(G(m)){var f=this.props.connectBeamToNode(t,m,"start");console.log("PAM",f),G(f)?this.setState({paintEntity:f,uiMode:s.addBeamStart}):this.props.deleteEntity(m.id)}}break;case s.addBeamStart:!o&&J(t)&&G(r)&&this.props.connectBeamToNode(t,r,"end")&&this.setState({uiMode:s.addBeam,paintEntity:void 0});break;case s.delete:!o&&t&&this.deleteEntity(t)}o&&this.setState({selectedEntity:void 0})}},{key:"UIonMouseMove",value:function(e){var t=this.state,n=t.uiMode,a=t.paintEntity,r=e.evt,o=r.layerX,i=r.layerY;switch(n){case s.addBeamStart:e.target.getStage()&&(a&&G(a)?this.props.moveBeam(a,o,i):this.setState({uiMode:s.addBeam}));break;case s.delete:var c=e.target.getStage();c===e.target&&(c.container().style.cursor="default")}}},{key:"UIonDrag",value:function(e,t){switch(this.state.uiMode){case s.move:if(J(t)&&e.evt.defaultPrevented){var n=e.evt,a=n.layerX,r=n.layerY;this.props.moveNode(t,_.cellX(a),_.cellY(r))}}}},{key:"onKeyHandle",value:function(e){switch(e.key){case"Escape":this.deletePaintEntity()}}},{key:"deletePaintEntity",value:function(){this.state.paintEntity&&this.props.deleteEntity(this.state.paintEntity.id),this.setState({paintEntity:void 0})}},{key:"deleteEntity",value:function(e){this.state.selectedEntity&&this.state.selectedEntity.id===e.id&&this.setState({selectedEntity:void 0}),this.props.deleteEntity(e.id)}},{key:"selectEntity",value:function(e){e&&this.setState({selectedEntity:e})}},{key:"clearFarm",value:function(){window.confirm("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u0445\u043e\u043b\u0441\u0442?")&&this.props.defautlFarm()}},{key:"setSelectedMode",value:function(e){this.state.paintEntity&&this.props.deleteEntity(this.state.paintEntity.id),this.setState({uiMode:e||0,paintEntity:void 0})}},{key:"saveFarm",value:function(e){window.confirm("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0445\u043e\u043b\u0441\u0442 \u0432 \u043a\u044d\u0448?")&&this.props.saveFarm()}},{key:"render",value:function(){var e=this.state,t=e.stageHeight,n=e.stageWidth,a=e.uiMode,r=e.selectedEntity,o=this.props,i=o.classes,c=o.nodes,s=o.beams;return l.createElement(me.a,{className:i.root},l.createElement(bt.a.FPSStats,{isActive:!0}),l.createElement(de.a,{keyEventName:"keyup",keyValue:"Escape",onKeyHandle:this.onKeyHandle}),l.createElement(We,{hundleClear:this.clearFarm,hundleSave:this.saveFarm}),l.createElement("div",{className:i.toolbar}),l.createElement(me.a,{className:i.stageBox},l.createElement("div",{className:i.toolbar}),l.createElement(tt,{nodes:c,beams:s,selectedEntity:r,onSelect:this.selectEntity}),l.createElement(ke,{onClick:this.UIonClick,onDrag:this.UIonDrag,onMouseMove:this.UIonMouseMove,stageHeight:t,stageWidth:n,nodes:c,beams:s,stage:this.stage,selectedEntity:r,uiMode:a}),l.createElement(it,{entity:r,onDelete:this.deleteEntity})),l.createElement(mt,{selected:a,onSelect:this.setSelectedMode.bind(this)}))}}]),t}(l.Component),pt=Object(fe.a)(function(e){return Object(ue.a)({root:{width:"100%",height:"100%",overflow:"hidden",background:e.palette.background.default,display:"flex",flexDirection:"column"},stageBox:{display:"flex",flexGrow:1,overflow:"hidden"},toolbar:e.mixins.toolbar})})(ht),vt=function(){function e(){Object(h.a)(this,e)}return Object(p.a)(e,null,[{key:"moveEntity",value:function(e,t,n){e.x=t,e.y=n}},{key:"moveBeamEnd",value:function(e,t,n){e.endX=t,e.endY=n}},{key:"createNodes",value:function(e,t,n){var a=0;return[].concat(e.map(function(e){return a++,R(Object(z.a)({},e,{isStatic:!0,name:a+""}))}),t.map(function(e){a++;var t=R(Object(z.a)({},e,{isStatic:!0,name:a+""}));return 0===e.angle?t.forceX=P({nodeID:t.id,value:e.value,angle:e.angle}):t.forceY=P({nodeID:t.id,value:e.value,angle:e.angle}),t}),n.map(function(e){return a++,R(Object(z.a)({},e,{name:a+""}))}))}},{key:"findOldBeam",value:function(e,t,n){return n.startConnectedNodeID===t.startConnectedNodeID&&n.endConnectedNodeID===e.id||n.startConnectedNodeID===e.id&&n.endConnectedNodeID===t.startConnectedNodeID||n.id===t.id&&n.startConnectedNodeID===e.id}}]),e}(),gt=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(ne.a)(this,Object(ae.a)(t).call(this,e))).addNode=function(e,t,a){if(n.state.nodes.length>12)return!1;if(n.state.nodes.find(function(n){return n.x===e&&n.y===t}))return!1;var r=W()();if(!r)return!1;var o=n.state.nodes.length+1+"",i=R(Object(z.a)({},a,{name:a&&a.name||o,id:r,x:e,y:t}));return n.setState({nodes:[].concat(Object(T.a)(n.state.nodes),[i])}),i},n.addBeam=function(e){if(n.state.beams.length>36)return!1;var t=W()();if(!t)return!1;var a=A(Object(z.a)({},e,{id:t}));return n.setState({beams:[].concat(Object(T.a)(n.state.beams),[a])}),a},n.connectBeamToNode=function(e,t,a){var r=Object(z.a)({},e),o=Object(z.a)({},t);switch(a){case"start":return o.startConnectedNodeID=r.id,r.beamsID.push(o.id),vt.moveEntity(o,r.x,r.y),n.setState(function(e){return{nodes:e.nodes.map(function(e){return e.id===r.id?r:e}),beams:e.beams.map(function(e){return e.id===o.id?o:e})}}),o;case"end":return!n.state.beams.filter(function(e){return r&&r.beamsID.includes(e.id)}).find(function(e){return vt.findOldBeam(r,o,e)})&&(r.beamsID.push(o.id),o.endConnectedNodeID=r.id,vt.moveBeamEnd(o,r.x,r.y),n.setState(function(e){return{nodes:e.nodes.map(function(e){return e.id===r.id?r:e}),beams:e.beams.map(function(e){return e.id===o.id?o:e})}}),!0);default:return!1}},n.addForceToNode=function(e,t){var a=P(Object(z.a)({},t,{nodeID:e.id}));return 0===a.angle?e.forceX=a:e.forceY=a,n.setState(function(t){return{nodes:t.nodes.map(function(t){return e&&t.id===e.id?e:t})}}),a},n.moveNode=function(e,t,a){if(e.isStatic)return!1;if(!n.state.nodes.find(function(e){return e.x===t&&e.y===a})){var r=Object(z.a)({},e,{x:t,y:a});return n.state.beams.filter(function(e){return r&&r.beamsID.includes(e.id)}).forEach(function(e){if(r){var o=Object(z.a)({},e);o.startConnectedNodeID===r.id?vt.moveEntity(o,t,a):e.endConnectedNodeID===r.id&&vt.moveBeamEnd(o,t,a),n.setState(function(e){return{beams:e.beams.map(function(e){return e.id===o.id?o:e})}})}}),n.setState(function(e){return{nodes:e.nodes.map(function(e){return e.id===r.id?r:e})}}),!0}return!1},n.moveBeam=function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"end";return e=Object(z.a)({},e),"start"===r?vt.moveEntity(e,t,a):vt.moveBeamEnd(e,t,a),n.setState(function(t){return{beams:t.beams.map(function(t){return e&&t.id===e.id?e:t})}}),!0},n.deleteEntity=function(e){var t=n.state.beams.find(function(t){return t.id===e})||n.state.nodes.find(function(t){return t.id===e});return J(t)?!t.isStatic&&(n.state.beams.filter(function(e){return J(t)&&t.beamsID.includes(e.id)}).forEach(function(e){var a;J(t)&&((a=e.startConnectedNodeID===t.id?n.state.nodes.find(function(t){return t.id===e.endConnectedNodeID}):n.state.nodes.find(function(t){return t.id===e.startConnectedNodeID}))&&((a=Object(z.a)({},a)).beamsID=a.beamsID.filter(function(t){return t!==e.id}),n.setState(function(e){return{nodes:e.nodes.map(function(e){return a&&e.id===a.id?a:e})}})),n.setState(function(t){return{beams:t.beams.filter(function(t){return t.id!==e.id})}}))}),n.setState(function(e){return{nodes:e.nodes.filter(function(e){return J(t)&&e.id!==t.id}).map(function(e,t){return Object(z.a)({},e,{name:t+1+""})})}}),!0):!!G(t)&&([t.startConnectedNodeID,t.endConnectedNodeID].forEach(function(e){if(e&&e.length>0){var a=n.state.nodes.find(function(t){return t.id===e});a&&G(t)&&((a=Object(z.a)({},a)).beamsID=a.beamsID.filter(function(e){return!!t&&e!==t.id}),n.setState(function(e){return{nodes:e.nodes.map(function(e){return a&&e.id===a.id?a:e})}}))}}),n.setState(function(e){return{beams:e.beams.filter(function(e){return G(t)&&e.id!==t.id})}}),!0)},n.state={nodes:[],beams:[]},n.defautlFarm=n.defautlFarm.bind(Object(le.a)(n)),n.saveFarm=n.saveFarm.bind(Object(le.a)(n)),n}return Object(re.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("nodes"),t=localStorage.getItem("beams");if(e&&t){var n=JSON.parse(e),a=JSON.parse(t);this.setState({nodes:n,beams:a})}else this.defautlFarm()}},{key:"defautlFarm",value:function(){var e={nodes:vt.createNodes([{x:400,y:1e3,fixation:y.XY},{x:1300,y:1e3,fixation:y.Y}],[{x:700,y:1e3,angle:90,value:9e3}],[]),beams:[]},t=e.nodes,n=e.beams;localStorage.removeItem("nodes"),localStorage.removeItem("beams"),this.setState({nodes:t,beams:n})}},{key:"saveFarm",value:function(){var e=this.state,t=e.nodes,n=e.beams;localStorage.setItem("nodes",JSON.stringify(t)),localStorage.setItem("beams",JSON.stringify(n))}},{key:"render",value:function(){return l.createElement(pt,Object.assign({},this.state,this))}}]),t}(l.Component),yt="/",Et="/farm",Ot=n(215),kt=Object(Ot.a)(function(e){return Object(ue.a)({root:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start"},logo:{width:"20%",height:"20%"},title:{padding:40},descripton:{padding:40},btn:{}})})(function(e){var t=e.classes;return l.createElement("header",{className:t.root},l.createElement("img",{src:v.bridgeIcon_2,alt:"logo",className:t.logo}),l.createElement(Ie.a,{variant:"h3",className:t.title},v.title),l.createElement(Ie.a,{variant:"subtitle1",align:"center",className:t.descripton},v.description),l.createElement(je.a,{component:ee.b,to:Et,variant:"contained",size:"large",color:"secondary"},"\u041f\u043e\u0435\u0445\u0430\u043b\u0438"))}),jt=function(e){function t(){return Object(h.a)(this,t),Object(ne.a)(this,Object(ae.a)(t).apply(this,arguments))}return Object(re.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.classes;return l.createElement("div",{className:e.root},l.createElement(kt,null))}}]),t}(l.Component),St=Object(fe.a)(function(e){return Object(ue.a)({root:{width:"100%",minHeight:"100%",display:"block",background:e.palette.background.default,padding:e.spacing(4)}})})(jt),It=Object(f.b)(function(e){return{title:e.home.title}},function(e){return Object(F.b)(Object(z.a)({},i),e)})(St),wt=function(e){function t(){return Object(h.a)(this,t),Object(ne.a)(this,Object(ae.a)(t).apply(this,arguments))}return Object(re.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return l.createElement(l.Fragment,null,l.createElement(ie.a,{htmlAttributes:{leng:"en"},titleTemplate:"Truss - %s",defaultTitle:v.title,link:[{rel:"shortcut icon",href:v.bridgeIcon_2},{rel:"image_src",href:v.airBridge},{rel:"stylesheet",href:"https://fonts.googleapis.com/css?family=Roboto:300,400,500"},{rel:"stylesheet",href:"https://fonts.googleapis.com/icon?family=Material+Icons"}],meta:[{charSet:"utf-8"},{name:"viewport",content:"minimum-scale=1, initial-scale=1, width=device-width, shrink-to-fit=no"},{name:"theme-color",content:"#000000"},{name:"description",content:v.description},{property:"og:type",content:"website"},{property:"og:title",content:v.title},{property:"og:image",content:v.airBridge},{property:"vk:image",content:v.airBridge},{property:"twitter:image",content:v.airBridge},{property:"og:url",content:v.url}]}),l.createElement(ce.a,null),l.createElement(se.a,{theme:E},l.createElement(te.c,null,l.createElement(te.a,{path:yt,component:It,exact:!0}),l.createElement(te.a,{path:Et,component:gt}))))}}]),t}(l.Component);n(212);m.a.render(d.a.createElement(f.a,{store:Z},d.a.createElement(function(){return d.a.createElement(ee.a,null,d.a.createElement(wt,null))},null)),document.getElementById("root"))},91:function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"url",function(){return h}),n.d(t,"title",function(){return p}),n.d(t,"description",function(){return v}),n.d(t,"favicon",function(){return g}),n.d(t,"UI_cellSize",function(){return y}),n.d(t,"UI_nodeSize",function(){return E}),n.d(t,"UI_beamSize",function(){return O});var a=n(113),r=n.n(a),o=n(93),i=n.n(o);n.d(t,"ogImage",function(){return i.a});var c=n(94),s=n.n(c);n.d(t,"bridgeIcon_1",function(){return s.a});var l=n(95),d=n.n(l);n.d(t,"bridgeIcon_2",function(){return d.a});var u=n(96),m=n.n(u);n.d(t,"airBridge",function(){return m.a});var f=n(97),b=n.n(f);n.d(t,"FixationIcon",function(){return b.a});var h=".",p="Truss - \u0444\u0435\u0440\u043c\u0430 \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e",v="\u0424\u0435\u0440\u043c\u0430 (farm \u0438\u043b\u0438 truss) \u2014 \u0441\u0442\u0435\u0440\u0436\u043d\u0435\u0432\u0430\u044f \u0441\u0438\u0441\u0442\u0435\u043c\u0430 \u0432 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0439 \u043c\u0435\u0445\u0430\u043d\u0438\u043a\u0435, \u043e\u0441\u0442\u0430\u044e\u0449\u0430\u044f\u0441\u044f \u0433\u0435\u043e\u043c\u0435\u0442\u0440\u0438\u0447\u0435\u0441\u043a\u0438 \u043d\u0435\u0438\u0437\u043c\u0435\u043d\u044f\u0435\u043c\u043e\u0439 \u043f\u043e\u0441\u043b\u0435 \u0437\u0430\u043c\u0435\u043d\u044b \u0435\u0451 \u0436\u0451\u0441\u0442\u043a\u0438\u0445 \u0443\u0437\u043b\u043e\u0432 \u0448\u0430\u0440\u043d\u0438\u0440\u043d\u044b\u043c\u0438.",g=r.a.resolve(e,"favicon.ico"),y=50,E=15,O=6}.call(this,"/")},93:function(e,t,n){e.exports=n.p+"static/media/ogImage.0619e300.png"},94:function(e,t,n){e.exports=n.p+"static/media/icon.68e274b2.png"},95:function(e,t,n){e.exports=n.p+"static/media/bridge.e53bced3.png"},96:function(e,t,n){e.exports=n.p+"static/media/airBridge.7d581a65.png"},97:function(e,t,n){e.exports=n.p+"static/media/fixation.9b63597e.svg"}},[[129,1,2]]]);
//# sourceMappingURL=main.6b2cfb3e.chunk.js.map