{"version":3,"sources":["static/const.ts","static/images/ogImage.png","static/images/icon.png","static/images/bridge.png","static/images/airBridge.png","static/images/fixation.svg","utils/UI.ts","utils/history.ts","models/Farm/ModelNode.ts","static/colors.ts","utils/math.ts","store/farm/farmReducer.ts","store/farm/farmTypes.ts","models/Farm/ModelEntity.ts","models/Farm/ModelForce.ts","models/Farm/ModelBeam.ts","store/home/homeActions.ts","store/home/homeTypes.ts","store/home/homeReducer.ts","store/index.ts","pages/Farm/components/UIFarmEntities/UINode.tsx","pages/Farm/components/UIFarmEntities/UIBeam.tsx","pages/Farm/components/UIFarmEntities/UIGrid.tsx","pages/Farm/components/UIFarmEntities/UIStage.tsx","components/sidebar.tsx","components/appBar.tsx","components/myToggleButton.tsx","pages/Farm/components/UIHeader.tsx","pages/Farm/components/UITreePanel.tsx","models/Farm/FarmMath.ts","models/Farm/ModelFarm.ts","pages/Farm/components/UIEntityInfo.tsx","pages/Farm/components/UIToolPanel.tsx","pages/Farm/components/UIFarm.tsx","pages/Farm/index.ts","pages/Farm/FarmContainer.tsx","pages/Farm/_testFarm.ts","navigation/index.ts","pages/Home/components/homeHeader.tsx","pages/Home/home.tsx","pages/Home/index.ts","App.tsx","index.tsx"],"names":["__webpack_require__","r","__webpack_exports__","__dirname","d","url","title","description","favicon","UI_cellSize","UI_nodeSize","UI_beamSize","path__WEBPACK_IMPORTED_MODULE_0__","path__WEBPACK_IMPORTED_MODULE_0___default","n","_images_ogImage_png__WEBPACK_IMPORTED_MODULE_1__","_images_ogImage_png__WEBPACK_IMPORTED_MODULE_1___default","a","_images_icon_png__WEBPACK_IMPORTED_MODULE_2__","_images_icon_png__WEBPACK_IMPORTED_MODULE_2___default","_images_bridge_png__WEBPACK_IMPORTED_MODULE_3__","_images_bridge_png__WEBPACK_IMPORTED_MODULE_3___default","_images_airBridge_png__WEBPACK_IMPORTED_MODULE_4__","_images_airBridge_png__WEBPACK_IMPORTED_MODULE_4___default","_images_fixation_svg__WEBPACK_IMPORTED_MODULE_5__","_images_fixation_svg__WEBPACK_IMPORTED_MODULE_5___default","process","path","resolve","module","exports","p","UIModes","createBrowserHistory","NodeFixation","theme","createMuiTheme","palette","primary","dark","main","light","secondary","background","default","getNodeColor","node","isStatic","fixation","colors","fixedNode","staticNode","getNodeStorkeColor","mode","move","addBeam","addBeamStart","getNodeStorkeWidth","getBeamColor","beam","nodeMouseEnter","e","stage","target","getStage","delete","container","style","cursor","none","nodeMouseLeave","beamMouseEnter","beamMouseLeave","mainBackGround","MyMath","x1","y1","x2","y2","Math","atan2","PI","sqrt","pow","x","round","consts","y","b","rowsA","length","rowsB","colsA","colsB","result","Error","i","row","j","push","k","sum","MathJs","error","console","defaultState","nodes","beams","forces","reducer","state","arguments","undefined","action","type","Object","objectSpread","concat","toConsumableArray","force","map","item","id","filter","createEntity","props","name","angle","newX","newY","entity","uuid","createForce","nodeID","value","createBeam","startConnectedNodeID","endConnectedNodeID","endX","endY","instanceOfBeam","object","createNode","beamsID","forceX","forceY","isFixed","None","instanceOfNode","setTitle","defaultHomeState","mainReducer","combineReducers","farm","FarmReducer","home","HomeReducer","createStore","applyMiddleware","thunk","size","UINode","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","viewForce","bind","assertThisInitialized","nextProps","selected","react","ReactKonva","points","stroke","UI","grey","strokeWidth","shadowBlur","pointerLength","pointerWidth","hitStrokeWidth","rotation","text","radius","fill","_this2","_this$props","onClick","_useStrictMode","_onClick","_x","apply","toString","X","viewFixation","Y","XY","YX","align","fontSize","fontFamily","width","verticalAlign","onDragEnd","to","draggable","onMouseEnter","onMouseLeave","onDragMove","drag","React","UIBeam","_this$props2","ReactKonvaCore","UIGrid","_ref","widthCell","heightCell","heightBox","widthBox","countOfX","countOfY","columns","index","key","viewColumns","rows","viewRows","withStyles","createStyles","root","flexGrow","backgroundColor","classes","stageHeight","stageWidth","onMouseMove","onDrag","uiMode","selectedEntity","lib_default","className","autoHide","height","ref","UIFarmEntities_UIGrid","UIFarmEntities_UIBeam","UIFarmEntities_UINode","Sidebar","open","viewTooltip","switchDrawer","setState","flag","children","btnIcon","anchor","_this$state","Drawer","drawer","variant","paper","drawerPaper","toolbar","Typography","Divider","Tooltip","onOpen","changeViewtooltip","onClose","Fab","left","drawerWidth","right","color","toogleIcon","Close","position","top","spacing","zIndex","padding","mixins","appBar","logo","marginRight","marginLeft","& img","_ref$withLogo","withLogo","AppBar","clsx","Toolbar","react_router_dom","alt","src","bridgeIcon_2","viewLogo","btn","borderRadius","border","fade","active","transition","transitions","create","duration","short","contrastText","&$selected","&:hover","@media (hover: none)","&$disabled","icon","other","objectWithoutProperties","ToggleButton","assign","defineProperty","grow","_ref$hundleSave","hundleSave","alert","_ref$hundleClear","hundleClear","_ref$hundleCalculate","hundleCalculate","_ref$disabled","disabled","Button","UITreePanel","tabs","Map","openTab","viewListItem","set","tab","get","entityArray","onSelect","ListItem","button","ListItemIcon","Badge","badgeContent","ListItemText","ExpandLess","ExpandMore","Collapse","in","timeout","unmountOnExit","List","component","disablePadding","nested","Brightness1","sort","sidebar","esm_List","GpsNotFixed","Timeline","paddingLeft","FarmMath","createClass","area","modUpr","length_i","mnoz","nodeCoordOfX","nodeCoordOfY","l_i","LTxL","_LTxL","augmnet1","augment2","Array","prototype","nodeV1","nodeV2","n_dof","indexV","k_obs","K","t","A","B","_a","_b","s","signum","abs","l","SDSsum","forEach","nodeV","Va","vi","q","linkNodes","vij","n_start","n_ends","multMatrxiV2","v","Farm","find","getBeamLength","_fixedNodes","_staticNodes","_nodes","_node","checkingBeam","lengthBePoints","_beams","nodesMap","startNode","endNode","numsA","split","numA","Number","numsB","_calculateFarm","asyncToGenerator","regenerator_default","mark","_callee","farmNodes","farmBeams","farmNodesMap","farmBeamsMap","ModUpr","NodeCoord","NodeV","Forces","LinkNodes","LinkLength","Kmest","Lambda0","Lambda","Kobs","IndexV","Vi","Vij","V","P","nodeVindex","N_Link","N_DOF","wrap","_context","prev","next","nums","beamLength","Kmest_i","Lambda_i","Kobs_i","IndexV_i","max","SquareRoot","V_i","P_i","abrupt","t0","stop","_x2","_x3","UIEntityInfo","onDelete","Box","viewForceInfo","viewFixationInfo","btnGroup","IconButton","aria-label","Delete","Info","viewInfo","marginBottom","marginTop","bottom","transform","modsBtnGroup","mods","mod","ZoomOutMap","addNode","MyLocation","Power","Paper","ToggleButtonGroup","exclusive","onChange","myToggleButton","UIFarm","paintEntity","UIonClick","UIonDrag","UIonMouseMove","onKeyHandle","selectEntity","clearFarm","deleteEntity","saveFarm","calculateFarm","current","attrs","parentElement","scrollTop","scrollHeight","offsetHeight","scrollLeft","scrollWidth","offsetWidth","calculation","isEmptyPlace","evt","preventDefault","_e$evt","layerX","layerY","cellX","cellY","connectedBeam","connectBeamToNode","_this$state2","_e$evt2","moveBeam","defaultPrevented","_e$evt3","moveNode","deletePaintEntity","window","confirm","defautlFarm","_this$state3","react_stats","isActive","esm","keyEventName","keyValue","components_UIHeader","stageBox","components_UITreePanel","UIFarmEntities_UIStage","components_UIEntityInfo","components_UIToolPanel","setSelectedMode","overflow","display","flexDirection","FarmPage","_React$Component","FarmContainer","options","_beam","place","moveEntity","includes","findOldBeam","moveBeamEnd","addForceToNode","setNodesName","setBeamsName","inherits","nodesJSON","localStorage","getItem","beamsJSON","JSON","parse","_ref$LinkNodes","sortNodes","sent","link","log","_testFarm","createNodes","removeItem","setItem","stringify","components_UIFarm","navPath","alignItems","justifyContent","descripton","Link","Home","homeHeader","minHeight","connect","dispatch","bindActionCreators","homeActions","App","Helmet_default","htmlAttributes","leng","titleTemplate","defaultTitle","rel","href","airBridge","meta","charSet","content","property","CssBaseline","ThemeProvider","react_router","exact","isGitHubPages","REACT_APP_GHP","ReactDOM","render","react_default","createElement","es","store","src_App","history","document","getElementById"],"mappings":"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","file":"static/js/main.be064e9d.chunk.js","sourcesContent":["// import favicon from './images/favicon.ico'\r\nimport path from 'path'\r\nimport ogImage from './images/ogImage.png'\r\nimport bridgeIcon_1 from './images/icon.png'\r\nimport bridgeIcon_2 from './images/bridge.png'\r\nimport airBridge from './images/airBridge.png'\r\nimport FixationIcon from './images/fixation.svg'\r\n\r\n// Strings\r\nexport const url = process.env.PUBLIC_URL\r\nexport const title = \"Truss - ферма для каждого\"\r\nexport const description = \"Ферма (farm или truss) — стержневая система в строительной механике, остающаяся геометрически неизменяемой после замены её жёстких узлов шарнирными.\"\r\nexport const favicon = path.resolve(__dirname,\"favicon.ico\")\r\n\r\n// UI\r\nexport const UI_cellSize = 50\r\nexport const UI_nodeSize = 15\r\nexport const UI_beamSize = 6\r\n\r\n\r\n// Images\r\nexport {\r\n    ogImage,\r\n    bridgeIcon_1,\r\n    bridgeIcon_2,\r\n    airBridge,\r\n    FixationIcon\r\n}","module.exports = __webpack_public_path__ + \"static/media/ogImage.0619e300.png\";","module.exports = __webpack_public_path__ + \"static/media/icon.68e274b2.png\";","module.exports = __webpack_public_path__ + \"static/media/bridge.e53bced3.png\";","module.exports = __webpack_public_path__ + \"static/media/airBridge.7d581a65.png\";","module.exports = __webpack_public_path__ + \"static/media/fixation.dd261ca6.svg\";","import { FarmNode } from \"src/models/Farm/ModelNode\";\r\nimport { colors } from \"src/static\";\r\nimport { Beam } from \"src/models/Farm/ModelBeam\";\r\nimport Konva from \"konva\";\r\nimport { Stage } from \"konva/types/Stage\";\r\nimport { createMuiTheme } from \"@material-ui/core\";\r\n\r\nexport enum UIModes {\r\n    none,\r\n    move,\r\n    addNode,\r\n    addBeam,\r\n    addBeamStart,\r\n    delete\r\n}\r\nexport const theme = createMuiTheme({\r\n    palette: {\r\n        primary: {\r\n            dark:\"#0A4467\",\r\n            main: \"#1e779e\",\r\n            light:'#51A8D6'\r\n        },\r\n        secondary: {\r\n            dark: \"#a83e19\",\r\n            main: \"#f15a24\",\r\n            light: \"#F39B7C\"\r\n        },\r\n        background:{\r\n            default:'linear-gradient(35deg, #6863bf 0%, #067d93 50%, #e68a68 100%)'\r\n        }  \r\n        \r\n    },\r\n});\r\nexport const getNodeColor = (node: FarmNode):string => {\r\n    \r\n    if (node.isStatic) {\r\n        if (node.fixation) return colors.fixedNode\r\n        return colors.staticNode\r\n    }\r\n    return colors.node\r\n}\r\nexport const getNodeStorkeColor = (node: FarmNode, mode : UIModes):string => {\r\n    switch (mode) {\r\n        case UIModes.move: {\r\n            if (node.isStatic) return theme.palette.secondary.dark\r\n            return theme.palette.primary.light\r\n        }\r\n        case UIModes.addBeam:\r\n        case UIModes.addBeamStart: {\r\n            return theme.palette.primary.light\r\n        }\r\n        default:\r\n            return theme.palette.secondary.main\r\n    }\r\n}\r\nexport const getNodeStorkeWidth = (node: FarmNode, mode : UIModes): number =>  {\r\n    switch (mode) {\r\n        case UIModes.move: {\r\n            if (node.isStatic) return 0\r\n            return 2\r\n        }\r\n        case UIModes.addBeam:\r\n        case UIModes.addBeamStart: {\r\n            return 2\r\n        }\r\n        default:\r\n            return 0\r\n    }\r\n}\r\n\r\nexport const getBeamColor = (beam : Beam) : string => {\r\n    return colors.beam\r\n}\r\n\r\n\r\nexport const nodeMouseEnter = (e: Konva.KonvaEventObject<MouseEvent>, node:FarmNode, mode: UIModes):void => {\r\n    const stage: typeof Stage & Konva.Stage = e.target.getStage()\r\n    switch (mode) {\r\n        case UIModes.delete:\r\n            if (node.isStatic) {\r\n                stage.container().style.cursor = 'default'\r\n                break\r\n            }\r\n            stage.container().style.cursor = 'pointer'\r\n            break\r\n        case UIModes.none: {\r\n            stage.container().style.cursor = 'pointer'\r\n            break;\r\n        }\r\n\r\n        case UIModes.addBeam:\r\n        case UIModes.addBeamStart: {\r\n            stage.container().style.cursor = 'crosshair'\r\n            break\r\n        }\r\n        case UIModes.move: {\r\n            if (node.isStatic) {\r\n                stage.container().style.cursor = 'default'\r\n                break\r\n            }\r\n            stage.container().style.cursor = 'move'\r\n            break\r\n        }\r\n\r\n        default: {\r\n            break;\r\n        }\r\n    }\r\n\r\n}\r\nexport const nodeMouseLeave = (e: Konva.KonvaEventObject<MouseEvent>):void => {\r\n    const stage: typeof Stage & Konva.Stage = e.target.getStage()\r\n    if (stage) stage.container().style.cursor = 'default'\r\n}\r\n\r\nexport const beamMouseEnter = (e: Konva.KonvaEventObject<MouseEvent>, beam:Beam, mode: UIModes) :void =>  {\r\n    const stage: typeof Stage & Konva.Stage = e.target.getStage()\r\n\r\n    switch (mode) {\r\n        case UIModes.delete:\r\n        case UIModes.none: {\r\n            stage.container().style.cursor = 'pointer'\r\n            break\r\n        }\r\n\r\n        default: {\r\n            break\r\n        }\r\n    }\r\n\r\n}\r\nexport const beamMouseLeave = (e: Konva.KonvaEventObject<MouseEvent>) :void => {\r\n    const stage: typeof Stage & Konva.Stage = e.target.getStage()\r\n    if (stage) stage.container().style.cursor = 'default'\r\n}","import {createBrowserHistory} from 'history';\r\n\r\nexport default createBrowserHistory();","import { IEntity, Entity, createEntity } from './ModelEntity';\r\nimport { Force } from './ModelForce';\r\n\r\nexport enum NodeFixation {\r\n    None = 0,\r\n    X = 1,\r\n    Y = 2,\r\n    XY = 3,\r\n    YX = XY\r\n\r\n}\r\nexport interface INode extends IEntity {\r\n    beamsID?: string[]\r\n    forceX?: Force,\r\n    forceY?: Force,\r\n    isStatic?: boolean\r\n    fixation?: NodeFixation\r\n}\r\n\r\nexport interface FarmNode extends Entity {\r\n    beamsID: string[];\r\n    forceX: Force | undefined\r\n    forceY: Force | undefined\r\n    isStatic: boolean\r\n    fixation: NodeFixation\r\n}\r\n\r\nexport const createNode = (props: INode = {}): FarmNode => {\r\n    const { beamsID, forceX, forceY, isStatic, fixation: isFixed } = props\r\n    const entity = createEntity(props)\r\n    const node: FarmNode = {\r\n        ...entity,\r\n        type: \"node\",\r\n        beamsID: beamsID || [],\r\n        forceX: forceX,\r\n        forceY: forceY,\r\n        isStatic: isStatic || false,\r\n        fixation: isFixed || NodeFixation.None\r\n    }\r\n    return node\r\n}\r\nexport const instanceOfNode = (object: any): object is FarmNode => object && object.type === 'node'","import { theme } from \"src/utils/UI\";\r\n\r\nexport const mainBackGround = \"#09B4D3\"\r\n\r\nexport const node = theme.palette.secondary.main\r\nexport const staticNode = theme.palette.secondary.light\r\nexport const fixedNode = theme.palette.secondary.dark\r\n\r\nexport const beam = theme.palette.secondary.light","import { consts } from \"src/static\";\r\nimport * as MathJs from 'mathjs'\r\n\r\nclass MyMath {\r\n    static angleBePoints(x1: number, y1: number, x2: number, y2: number): number {\r\n        return Math.atan2(-y1 + y2, -x1 + x2) / (Math.PI)\r\n    }\r\n\r\n    static lengthBePoints(x1: number, y1: number, x2: number, y2: number): number {\r\n        return Math.sqrt(Math.pow(x1 - x2, 2) + Math.pow(y1 - y2, 2))\r\n    }\r\n\r\n    static cellX(x: number): number {\r\n        return Math.round(x / consts.UI_cellSize) * consts.UI_cellSize\r\n    }\r\n    static cellY(y: number): number {\r\n        return Math.round(y / consts.UI_cellSize) * consts.UI_cellSize\r\n    }\r\n    static signum(x: number) {\r\n        if (x > 0) return 1\r\n        else if (x < 0) return -1\r\n        else return 0\r\n    }\r\n    static multMatrxi(a: number[][], b: number[][]) {\r\n        const rowsA = a.length\r\n        const rowsB = b.length\r\n        const colsA = a[0].length\r\n        const colsB = b[0].length\r\n        const result: number[][] = []\r\n        if (colsA !== rowsB) throw new Error(\"Размерность матриц не позволяет переумножить их\")\r\n\r\n        for (let i = 0; i < rowsA; i++) {\r\n            const row: number[] = []\r\n            for (let j = 0; j < colsB; j++) {\r\n                row.push(0)\r\n            }\r\n            result.push(row)\r\n        }\r\n        for (let k = 0; k < colsB; k++) {\r\n            for (let i = 0; i < rowsA; i++) {\r\n                let sum = 0\r\n                for (let j = 0; j < rowsB; j++)\r\n                    sum += a[i][j] + b[j][k]\r\n                result[i][k] = sum\r\n            }\r\n        }\r\n        // console.log(result);\r\n        return result\r\n\r\n    }\r\n    static multMatrxiV2(a: number[][], b: number[][]) : number[][]{\r\n        let result: number[][] = []\r\n        try {\r\n            result = (MathJs.multiply(a,b) as number[][])\r\n            \r\n        } catch (error) {\r\n            console.error(\"multMatrxiV2:\", error);\r\n        }        \r\n        return result\r\n    }\r\n}\r\n\r\n\r\nexport default MyMath","\r\nimport * as FarmTypes from './farmTypes'\r\nimport { Beam } from 'src/models/Farm/ModelBeam';\r\nimport { Force } from 'src/models/Farm/ModelForce';\r\nimport { FarmNode } from 'src/models/Farm/ModelNode';\r\n\r\nexport interface IFarmStore {\r\n    nodes:FarmNode[],\r\n    beams:Beam[],\r\n    forces:Force[]\r\n}\r\n\r\nexport const defaultState: IFarmStore = {\r\n    nodes:[],\r\n    beams:[],\r\n    forces:[]\r\n}\r\n\r\nexport const reducer = (state: IFarmStore = defaultState, action: FarmTypes.FarmActions): IFarmStore => {\r\n    switch (action.type) {\r\n        // Add\r\n        case FarmTypes.ADD_NODE : {\r\n            const {node} = action\r\n            return {\r\n                ...state,\r\n                nodes : [\r\n                    ...state.nodes,\r\n                    node\r\n                ]\r\n            }\r\n            \r\n        }\r\n        case FarmTypes.ADD_BEAM : {\r\n            const {beam} = action\r\n            return {\r\n                ...state,\r\n                beams : [\r\n                    ...state.beams,\r\n                    beam\r\n                ]\r\n            }            \r\n        }\r\n        case FarmTypes.ADD_FORCE : {\r\n            const {force} = action\r\n            return {\r\n                ...state,\r\n                forces : [\r\n                    ...state.forces,\r\n                    force\r\n                ]\r\n            }            \r\n        }\r\n        // Edit\r\n        case FarmTypes.EDIT_NODE : {\r\n            return {\r\n                ...state,\r\n                nodes : state.nodes.map(item => {\r\n                    if(item.id === action.node.id){      \r\n                        // const node : Node = {\r\n                        //     ...item,\r\n                        //     ...action.node\r\n                        // }\r\n                        return {\r\n                                ...item,\r\n                                ...action.node\r\n                            }\r\n                    }\r\n                    return item\r\n                })\r\n            }            \r\n        }\r\n        case FarmTypes.EDIT_BEAM : {\r\n            return {\r\n                ...state,\r\n                beams : state.beams.map(item => {\r\n                    if(item.id === action.beam.id){ \r\n                        return {\r\n                            ...item,\r\n                            ...action.beam\r\n                        }   \r\n                    }\r\n                    return item\r\n                })\r\n            }            \r\n        }\r\n        // Delete\r\n        case FarmTypes.DELETE_ENTITY : {\r\n            return {\r\n                beams : state.beams.filter(item => item.id !== action.id),\r\n                nodes : state.nodes.filter(item => item.id !== action.id),\r\n                forces : state.forces.filter(item => item.id !== action.id),\r\n            }            \r\n        }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\n","import { Action } from \"redux\";\r\nimport {  Beam } from \"src/models/Farm/ModelBeam\";\r\nimport {  FarmNode } from \"src/models/Farm/ModelNode\";\r\nimport { Force } from \"src/models/Farm/ModelForce\";\r\n\r\nexport const DELETE_EN = \"DELETE_EN\"\r\nexport const ADD_NODE = \"ADD_NODE\"\r\nexport const ADD_BEAM = \"ADD_BEAM\"\r\nexport const ADD_FORCE = \"ADD_FORCE\"\r\nexport const DELETE_ENTITY = \"DELETE_ENTITY\"\r\nexport const EDIT_NODE = \"EDIT_NODE\"\r\nexport const EDIT_BEAM = \"EDIT_BEAM\"\r\n\r\n// Add\r\nexport interface ActionAddNode extends Action {    \r\n    type: typeof ADD_NODE,\r\n    node:FarmNode\r\n}\r\nexport interface ActionAddBeam extends Action {    \r\n    type: typeof ADD_BEAM,\r\n    beam:Beam\r\n}\r\nexport interface ActionAddForce extends Action {    \r\n    type: typeof ADD_FORCE,\r\n    force:Force\r\n}\r\n// Delete\r\nexport interface ActionDeleteEntity extends Action {    \r\n    type: typeof DELETE_ENTITY,\r\n    id:string\r\n}\r\n// Edit\r\nexport interface ActionEditNode extends Action {    \r\n    type: typeof EDIT_NODE,\r\n    node:FarmNode\r\n}\r\nexport interface ActionEditBeam extends Action {    \r\n    type: typeof EDIT_BEAM,\r\n    beam:Beam\r\n}\r\n\r\nexport type FarmActions = (\r\n    ActionAddNode | \r\n    ActionAddBeam |\r\n    ActionAddForce |\r\n    ActionDeleteEntity |\r\n    ActionEditNode | \r\n    ActionEditBeam\r\n);","import uuid from 'uuid'\r\n\r\nexport interface IEntity {\r\n    id?: string\r\n    x?: number\r\n    y?: number\r\n    angle?: number\r\n    name?: string\r\n    newX?: number\r\n    newY?: number\r\n    type?:'entity' | 'node' | 'beam' | 'force'\r\n}\r\nexport interface Entity {    \r\n    id: string\r\n    x: number;\r\n    y: number;\r\n    angle: number;\r\n    name: string;\r\n    newX: number;\r\n    newY: number;\r\n    type:'entity' | 'node' | 'beam' | 'force'\r\n}\r\n\r\nexport const createEntity = (props:IEntity = {}) :Entity => {\r\n    const { x, y, name, angle, id, newX, newY, type } = props\r\n    const entity : Entity =  {\r\n        id: id || uuid(),\r\n        x: x || 0,\r\n        y: y || 0,\r\n        angle: angle || 0,\r\n        name: name || \"\",\r\n        newX: newX || x || 0,\r\n        newY: newY || y || 0,\r\n        type:type || 'entity'\r\n    }\r\n    entity.name = name || entity.id\r\n    return entity\r\n\r\n}\r\nexport const instanceOfEntity = (object: any): object is Entity => object && object.type === 'entity';","import { IEntity, Entity, createEntity } from \"./ModelEntity\";\r\n\r\nexport interface IForce extends IEntity {\r\n    value?: number,\r\n    angle?: 0 | 90,\r\n    nodeID?: string\r\n}\r\n\r\nexport interface Force extends Entity {\r\n    value: number\r\n    angle: 0 | 90\r\n    nodeID: string\r\n}\r\nexport const createForce = (props: IForce = {}): Force => {\r\n    const {  angle, nodeID, value } = props\r\n    const entity = createEntity(props)\r\n    const force : Force =  {\r\n        ...entity,\r\n        type:\"force\",\r\n        angle: angle || 0,\r\n        nodeID: nodeID || \"\",\r\n        value: value || 0\r\n    }\r\n    return force\r\n}\r\nexport const instanceOfForce = (object: any): object is Force => object && object.type === 'force';","import { IEntity, Entity, createEntity } from \"./ModelEntity\";\r\n\r\nexport interface IBeam extends IEntity {\r\n    length?: number\r\n    startConnectedNodeID?: string\r\n    endConnectedNodeID?: string\r\n    endX?: number,\r\n    endY?: number\r\n}\r\n\r\nexport interface Beam extends Entity {\r\n    length: number\r\n    startConnectedNodeID: string | undefined\r\n    endConnectedNodeID: string | undefined\r\n    endX: number\r\n    endY: number\r\n}\r\nexport const createBeam = (props: IBeam = {}): Beam => {\r\n    const { length, startConnectedNodeID, endConnectedNodeID, endX, endY } = props\r\n    const entity = createEntity(props)\r\n    const bram: Beam = {\r\n        ...entity,\r\n        type: \"beam\",\r\n        length: length || 0,\r\n        startConnectedNodeID: startConnectedNodeID,\r\n        endConnectedNodeID: endConnectedNodeID,\r\n        endX: endX || entity.x || 0,\r\n        endY: endY || entity.y || 0,\r\n    }\r\n    return bram\r\n}\r\n\r\n\r\nexport const instanceOfBeam = (object: any): object is Beam => object && object.type === 'beam';\r\n","import { HomeActions, SET_TITLE } from \"./homeTypes\";\r\n\r\nexport const setTitle = (title :string) : HomeActions => ({\r\n    type:SET_TITLE,\r\n    title\r\n})","import { Action } from \"redux\";\r\n\r\nexport const SET_TITLE = 'SET_TITLE'\r\n\r\nexport interface IActionHomeSetTitle extends Action {\r\n    type: typeof SET_TITLE,\r\n    title : string,\r\n}\r\n\r\nexport type HomeActions = IActionHomeSetTitle ;","import { SET_TITLE, HomeActions } from \"./homeTypes\";\r\n\r\nexport interface IHomeStore {\r\n    title: string,\r\n}\r\n\r\nexport const defaultHomeState : IHomeStore = {\r\n    title: 'Hello, world!',\r\n}\r\n\r\nexport const reducer = (state: IHomeStore = defaultHomeState, action: HomeActions): IHomeStore => {\r\n    switch (action.type) {\r\n        case SET_TITLE:\r\n            return {\r\n                ...state,\r\n                title: action.title\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}","import { combineReducers, createStore, applyMiddleware } from 'redux';\r\nimport { FarmReducer, FarmTypes } from './farm';\r\nimport { HomeReducer, HomeTypes } from './home';\r\nimport thunk, { ThunkMiddleware } from 'redux-thunk'\r\n\r\n\r\n\r\nexport const mainReducer = combineReducers({\r\n    farm : FarmReducer.reducer,\r\n    home : HomeReducer.reducer\r\n})\r\n\r\nexport type AppState = ReturnType<typeof mainReducer> \r\nexport type AppActions = FarmTypes.FarmActions | HomeTypes.HomeActions\r\n\r\nexport default createStore(mainReducer, applyMiddleware(thunk as ThunkMiddleware<AppState,AppActions>));\r\n","import * as React from 'react'\r\nimport { Circle,  Text, Group, Arrow, Line } from 'react-konva'\r\nimport Konva from 'konva'\r\nimport { FarmNode, NodeFixation } from 'src/models/Farm/ModelNode';\r\nimport { consts } from 'src/static';\r\nimport { Force } from 'src/models/Farm/ModelForce';\r\nimport { KonvaEventObject } from 'konva/types/Node';\r\nimport { UI } from 'src/utils';\r\nimport { UIModes } from 'src/utils/UI';\r\n\r\nconst size = consts.UI_nodeSize\r\ninterface UINodeProps {\r\n    node: FarmNode,\r\n    drag(e: Konva.KonvaEventObject<DragEvent>, node: FarmNode): void\r\n    onClick(e: Konva.KonvaEventObject<MouseEvent>, node: FarmNode): void\r\n    mode: UIModes,\r\n    selected: boolean\r\n}\r\nclass UINode extends React.Component<UINodeProps>{\r\n    constructor(props: UINodeProps) {\r\n        super(props)\r\n        this.viewForce = this.viewForce.bind(this)\r\n    }\r\n    shouldComponentUpdate(nextProps: UINodeProps) {\r\n        return (\r\n            nextProps.node !== this.props.node ||\r\n            nextProps.mode !== this.props.mode ||\r\n            nextProps.selected !== this.props.selected\r\n        )\r\n    }\r\n\r\n    viewForce(force: Force) {\r\n        return (\r\n            <React.Fragment>\r\n\r\n                <Arrow\r\n                    points={[\r\n                        0,\r\n                        0,\r\n                        consts.UI_cellSize,\r\n                        0,\r\n                    ]}\r\n                    stroke={UI.theme.palette.grey[300]}\r\n                    strokeWidth={size / 3}\r\n                    shadowBlur={2}\r\n                    pointerLength={consts.UI_cellSize / 10}\r\n                    pointerWidth={consts.UI_cellSize / 10}\r\n                    hitStrokeWidth={size * 2}\r\n                    rotation={force.value > 0 ? force.angle : 180 + force.angle}\r\n                />\r\n                <Text\r\n                    x={force.angle === 0 ? (force.value > 0 ? consts.UI_cellSize / 3 : -consts.UI_cellSize) : consts.UI_cellSize / 3}\r\n                    y={force.angle === 90 ? (force.value > 0 ? consts.UI_cellSize / 3 : -consts.UI_cellSize / 2) : -consts.UI_cellSize / 1.5}\r\n                    text={force.value + \"H\"}\r\n                />\r\n            </React.Fragment>\r\n\r\n        )\r\n    }\r\n    viewFixation(angle: 0 | 90) {\r\n\r\n        return (<Group\r\n            x={0}\r\n            y={0}\r\n            rotation={angle}\r\n        >\r\n            <Line\r\n                points={[\r\n                    0, 0,\r\n                    0, consts.UI_cellSize,\r\n                    -consts.UI_cellSize / 2, consts.UI_cellSize,\r\n                    consts.UI_cellSize / 2, consts.UI_cellSize,\r\n                ]}\r\n                stroke={UI.theme.palette.grey[300]}\r\n                strokeWidth={size / 4}\r\n                shadowBlur={2}\r\n            />\r\n            <Circle\r\n                radius={size / 2}\r\n                fill={UI.theme.palette.grey[500]}\r\n                x={0}\r\n                y={consts.UI_cellSize - (size / 1.7)}\r\n            />\r\n        </Group>)\r\n    }\r\n    render() {\r\n        const { onClick, mode, selected, node } = this.props\r\n\r\n        return (\r\n            <Group\r\n                x={node.x}\r\n                y={node.y}\r\n                _useStrictMode\r\n                onClick={(e: any) => onClick(e, node)}\r\n            >\r\n                {node.forceX && this.viewForce(node.forceX)}\r\n                {node.forceY && this.viewForce(node.forceY)}\r\n                {node.fixation === NodeFixation.X && this.viewFixation(90)}\r\n                {node.fixation === NodeFixation.Y && this.viewFixation(0)}\r\n                {node.fixation === NodeFixation.XY && this.viewFixation(90)}\r\n                {node.fixation === NodeFixation.YX && this.viewFixation(0)}\r\n                <Circle\r\n                    radius={size}\r\n                    x={0}\r\n                    y={0}\r\n                    fill={UI.getNodeColor(node)}\r\n                    shadowBlur={selected ? 8 : 2}\r\n                    stroke={UI.getNodeStorkeColor(node,mode)}\r\n                    strokeWidth={UI.getNodeStorkeWidth(node, mode)}\r\n\r\n                    hitStrokeWidth={size * 2}\r\n                />\r\n                <Text\r\n                    x={-size}\r\n                    y={-size / 2 - 1}\r\n                    align=\"center\"\r\n                    fontSize={18}\r\n                    fill=\"#fff\"\r\n                    shadowBlur={8}\r\n                    // stroke=\"#555\"\r\n                    // strokeWidth={0.1}\r\n                    fontFamily='Trebuchet MS'\r\n                    width={size * 2}\r\n                    verticalAlign=\"middle\"\r\n                    text={node.name}\r\n                />\r\n                <Circle\r\n                    radius={size}\r\n                    x={node.x - node.x}\r\n                    y={node.y - node.y}\r\n                    onDragEnd={(e: KonvaEventObject<DragEvent>) => {\r\n                        e.target.to({\r\n                            x: 0,\r\n                            y: 0,\r\n                        })\r\n                    }}\r\n                    hitStrokeWidth={size * 2}\r\n                    draggable={mode === UIModes.move && !node.isStatic}\r\n                    onMouseEnter={(e: any) => UI.nodeMouseEnter(e, node, mode)}\r\n                    onMouseLeave={(e: any) => UI.nodeMouseLeave(e)}\r\n                    onDragMove={(e: KonvaEventObject<DragEvent>) => this.props.drag(e, node)}\r\n                />\r\n            </Group>\r\n        )\r\n    }\r\n}\r\nexport default UINode","import * as React from 'react'\r\nimport { Line } from 'react-konva/lib/ReactKonvaCore'\r\nimport Konva from 'konva'\r\nimport { Beam } from 'src/models/Farm/ModelBeam';\r\nimport { consts } from 'src/static';\r\nimport { UI } from 'src/utils';\r\nimport { UIModes } from 'src/utils/UI';\r\n\r\ninterface UIBeamProps {\r\n    onClick(e: Konva.KonvaEventObject<MouseEvent>, beam: Beam): void\r\n    mode: UIModes,\r\n    selected: boolean,\r\n    beam: Beam\r\n}\r\n\r\nclass UIBeam extends React.Component<UIBeamProps>{\r\n\r\n    shouldComponentUpdate(nextProps: UIBeamProps) {\r\n        const { beam, mode, selected } = this.props\r\n        return (\r\n            nextProps.beam !== beam ||\r\n            nextProps.mode !== mode ||\r\n            nextProps.selected !== selected\r\n        )\r\n    }\r\n    render() {\r\n        const { onClick, mode, selected, beam } = this.props\r\n        const size = consts.UI_beamSize\r\n        return (\r\n            <Line\r\n                points={[\r\n                    beam.x,\r\n                    beam.y,\r\n                    beam.endX,\r\n                    beam.endY\r\n                ]}\r\n                stroke={UI.getBeamColor(beam)}\r\n                strokeWidth={size}\r\n                shadowBlur={selected ? 8 : 2}\r\n\r\n                hitStrokeWidth={size * 4}\r\n                onClick={(e: any) => onClick(e, beam)}\r\n                onMouseEnter={(e: any) => UI.beamMouseEnter(e,beam, mode)}\r\n                onMouseLeave={(e: any) => UI.beamMouseLeave(e)}\r\n            />\r\n        )\r\n\r\n    }\r\n}\r\nexport default UIBeam","import * as React from 'react'\r\nimport { Line } from 'react-konva'\r\n\r\nexport interface UIGridProps {\r\n    widthCell: number,\r\n    heightCell: number,\r\n    heightBox: number,\r\n    widthBox: number\r\n\r\n}\r\n\r\nconst UIGrid: React.FC<UIGridProps> = ({ widthCell, heightCell, heightBox, widthBox }) => {\r\n    const countOfX: number = widthBox / widthCell\r\n    const countOfY: number = heightBox / heightCell\r\n    const viewRows = () => {\r\n        const rows = []\r\n        for (let index = 0; index < countOfY; index++) {\r\n            rows.push(<Line\r\n                points={[\r\n                    0,\r\n                    index * heightCell,\r\n                    widthBox,\r\n                    index * heightCell,\r\n\r\n                ]}\r\n                stroke=\"#ddd\"\r\n                strokeWidth={1}\r\n                key={index}\r\n            />)\r\n        }\r\n        return rows\r\n    }\r\n\r\n    const viewColumns = () => {\r\n        const columns = []\r\n        for (let index = 0; index < countOfX; index++) {\r\n\r\n            columns.push(<Line\r\n                points={[\r\n                    index*widthCell,\r\n                    0,\r\n                    index*widthCell,\r\n                    heightBox,\r\n\r\n                ]}\r\n                stroke=\"#ddd\"\r\n                strokeWidth={1}\r\n                key={index}\r\n            />)\r\n\r\n        }\r\n        return columns\r\n    }\r\n    return (\r\n        <React.Fragment>\r\n            {viewColumns()}\r\n            {viewRows()}\r\n\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default UIGrid","import * as React from 'react'\r\nimport { Theme, createStyles, withStyles } from '@material-ui/core';\r\nimport { WithStyles } from '@material-ui/styles';\r\nimport { Stage, Layer, } from 'react-konva';\r\nimport {  Entity } from 'src/models/Farm/ModelEntity';\r\nimport Konva from 'konva';\r\nimport UIGrid from './UIGrid';\r\nimport { consts } from 'src/static';\r\nimport ScrollBar from 'react-custom-scrollbars';\r\nimport { UIBeam, UINode } from '..';\r\nimport { UIModes } from 'src/utils/UI';\r\nimport { IFarm } from 'src/models/Farm/ModelFarm';\r\n\r\nconst styles = (theme: Theme) => createStyles({\r\n    root:{\r\n        flexGrow: 1,\r\n        backgroundColor: \"#fff\",\r\n    },\r\n    stage: {\r\n        backgroundColor: \"#fff\",\r\n    }\r\n})\r\n\r\n\r\nexport interface UIStageProps extends IFarm ,WithStyles<typeof styles> {\r\n    uiMode: UIModes,\r\n    selectedEntity: Entity | undefined,\r\n    stageHeight: number,\r\n    stageWidth: number,\r\n    onClick(e: Konva.KonvaEventObject<MouseEvent>, entity?: Entity): void,\r\n    onMouseMove(e: Konva.KonvaEventObject<MouseEvent | TouchEvent>): void,\r\n    onDrag(e: Konva.KonvaEventObject<DragEvent>, entity: Entity): void,\r\n    stage: React.RefObject<Stage & Konva.Stage>\r\n}\r\n\r\nconst UIStage: React.FC<UIStageProps> = ({ classes, stage, stageHeight, stageWidth, onClick, onMouseMove, onDrag,beams,nodes, uiMode, selectedEntity }) => {\r\n    return (\r\n        <ScrollBar \r\n            className={classes.root}\r\n            autoHide>\r\n            <Stage\r\n                height={stageHeight}\r\n                width={stageWidth}\r\n                style={{height:stageHeight, width:stageWidth}}\r\n                className={classes.stage}\r\n                onClick={onClick}\r\n                onMouseMove={onMouseMove}\r\n                ref={stage}\r\n            >\r\n\r\n                <Layer className=\"layer\" >\r\n                    <UIGrid\r\n                        heightCell={consts.UI_cellSize}\r\n                        widthCell={consts.UI_cellSize}\r\n                        heightBox={stageHeight}\r\n                        widthBox={stageWidth}\r\n                    />\r\n                    {beams.map(beam => (\r\n                        <UIBeam\r\n                            key={beam.id}\r\n                            beam={beam}\r\n                            mode={uiMode}\r\n                            onClick={onClick}\r\n                            selected={selectedEntity === beam}\r\n                        />\r\n                    ))}\r\n\r\n                    {nodes.map(node => (\r\n                        <UINode\r\n                            key={node.id}\r\n                            node={node}\r\n                            mode={uiMode}\r\n                            drag={onDrag}\r\n                            onClick={onClick}\r\n                            selected={selectedEntity === node}\r\n                        />\r\n                    ))}\r\n                </Layer>\r\n            </Stage>\r\n        </ScrollBar>\r\n\r\n\r\n\r\n    )\r\n}\r\n\r\nexport default withStyles(styles)(UIStage)","import * as React from 'react'\r\nimport { Theme, createStyles, withStyles, Fab, Drawer, Tooltip, Typography, Divider } from '@material-ui/core';\r\nimport { WithStyles } from '@material-ui/styles';\r\nimport { Close as CloseIcon } from '@material-ui/icons';\r\n\r\nconst drawerWidth = 240;\r\n\r\nconst styles = (theme: Theme) => createStyles({\r\n    drawer: {\r\n        position: 'relative'\r\n    },\r\n    drawerPaper: {\r\n        width: drawerWidth,\r\n    },\r\n    toogleIcon: {\r\n        position: 'absolute',\r\n        top: theme.spacing(10),\r\n        zIndex: theme.zIndex.drawer + 1\r\n    },\r\n    title:{\r\n        padding:theme.spacing(1)\r\n    },\r\n    toolbar: theme.mixins.toolbar,\r\n})\r\n\r\n\r\n\r\n\r\ninterface SidebarProps extends WithStyles<typeof styles> {\r\n    anchor: 'left' | 'right',\r\n    title? : string,\r\n    btnIcon : JSX.Element\r\n}\r\n\r\ninterface SidebarState {\r\n    open: boolean,\r\n    viewTooltip: boolean\r\n\r\n}\r\n\r\nclass Sidebar extends React.PureComponent<SidebarProps, SidebarState>{\r\n    constructor(props: SidebarProps) {\r\n        super(props)\r\n        this.state = {\r\n            open: false,\r\n            viewTooltip: false\r\n        }\r\n        this.switchDrawer = this.switchDrawer.bind(this)\r\n    }\r\n    switchDrawer() {\r\n        this.setState(\r\n            {\r\n                open: !this.state.open,\r\n                viewTooltip: false\r\n            }\r\n        )\r\n    }\r\n    \r\n    changeViewtooltip(flag: boolean) {\r\n        this.setState({ viewTooltip: flag })\r\n    }\r\n    render() {\r\n        const { classes,children, title, btnIcon, anchor } = this.props\r\n        const { open, viewTooltip } = this.state\r\n        return (\r\n            <React.Fragment>\r\n                <Drawer\r\n                    className={classes.drawer}\r\n                    variant=\"persistent\"\r\n                    open={open}\r\n                    anchor={anchor}\r\n                    classes={{\r\n                        paper: classes.drawerPaper,\r\n                    }}\r\n                >\r\n                    <div className={classes.toolbar} />\r\n                    \r\n                    <Typography \r\n                        variant='body2'\r\n                        align=\"center\"\r\n                        className={classes.title}>\r\n                        {title}\r\n                    </Typography>\r\n                    <Divider/>\r\n                    {children}\r\n                </Drawer>\r\n                <Tooltip\r\n                    title={title}\r\n                    open={title !== undefined && viewTooltip && !open}\r\n                    onOpen={() => this.changeViewtooltip(true)}\r\n                    onClose={() => this.changeViewtooltip(false)}>\r\n                    <Fab\r\n                        style={{\r\n                            left: anchor === 'left' ? !open ? 15 : drawerWidth + 15 : \"auto\",\r\n                            \r\n                            right: anchor === 'right' ? !open ? 15 : drawerWidth + 15 : \"auto\"\r\n                        }}\r\n                        color=\"secondary\"\r\n                        size=\"medium\"\r\n                        className={classes.toogleIcon}\r\n                        onClick={this.switchDrawer}\r\n                    >\r\n                        {open ? <CloseIcon /> : btnIcon}\r\n                    </Fab>\r\n                </Tooltip>\r\n            </React.Fragment>\r\n        )\r\n    }\r\n\r\n}\r\n\r\nexport default withStyles(styles)(Sidebar)","import * as React from 'react'\r\nimport clsx from 'clsx'\r\nimport { Theme, createStyles, withStyles, AppBar, Toolbar } from '@material-ui/core';\r\nimport { WithStyles } from '@material-ui/styles';\r\nimport { consts } from 'src/static';\r\nimport { Link } from 'react-router-dom';\r\nimport { AppBarProps } from '@material-ui/core/AppBar';\r\n\r\nconst styles = (theme: Theme) => createStyles({\r\n    appBar: {\r\n        zIndex: theme.zIndex.drawer + 1,\r\n    },\r\n    logo: {\r\n        marginRight: theme.spacing(4),\r\n        marginLeft: theme.spacing(2),\r\n        '& img': {\r\n            width: 50,\r\n            height: 'auto'\r\n        }\r\n    }\r\n})\r\n\r\nexport interface UIToolBarProps extends WithStyles<typeof styles>, React.HTMLAttributes<HTMLDivElement> {\r\n    color?: AppBarProps['color'],\r\n    position?: AppBarProps['position'],\r\n    withLogo?: boolean\r\n}\r\n\r\nconst UIAppBar: React.FC<UIToolBarProps> = ({ classes, children, className, color, position, withLogo = true }) => {\r\n    const viewLogo = () => {\r\n        if (withLogo) return ((\r\n            <Link\r\n                to={'/'}\r\n                className={classes.logo}\r\n            >\r\n                <img\r\n                    alt=\"Logo Icon\"\r\n                    src={consts.bridgeIcon_2}\r\n                />\r\n            </Link>\r\n        ))\r\n    }\r\n    return (\r\n        <AppBar\r\n            position={position || 'fixed'}\r\n            className={clsx(classes.appBar, className)}\r\n            color={color || 'primary'}>\r\n            <Toolbar >\r\n                {viewLogo()}\r\n                {children}\r\n            </Toolbar>\r\n        </AppBar>\r\n    )\r\n}\r\n\r\nexport default withStyles(styles)(UIAppBar)","import * as React from 'react'\r\nimport { Theme, createStyles, withStyles, Tooltip } from '@material-ui/core';\r\nimport {  ToggleButton } from '@material-ui/lab'\r\nimport { WithStyles } from '@material-ui/styles';\r\nimport clsx from 'clsx';\r\nimport { fade } from '@material-ui/core/styles';\r\nimport { ToggleButtonProps } from '@material-ui/lab/ToggleButton';\r\n\r\n\r\nconst styles = (theme: Theme) => createStyles({\r\n    btn: {\r\n        marginLeft: theme.spacing(2),\r\n        marginRight: theme.spacing(2),\r\n        borderRadius: '50% !important',\r\n        border: `1px solid ${fade(theme.palette.action.active, 0.2)} !important`,\r\n        transition: theme.transitions.create(['background-color', 'box-shadow', 'border'], {\r\n            duration: theme.transitions.duration.short,\r\n        }),\r\n\r\n        color: theme.palette.secondary.contrastText,\r\n        backgroundColor: theme.palette.secondary.light,\r\n\r\n        '&$selected': {\r\n            backgroundColor: theme.palette.secondary.main,\r\n            '&:hover': {\r\n                backgroundColor: theme.palette.secondary.dark,\r\n            }\r\n        },\r\n        '&:hover': {\r\n            backgroundColor: theme.palette.secondary.dark,\r\n            '@media (hover: none)': {\r\n                backgroundColor: theme.palette.secondary.main,\r\n            },\r\n            '&$disabled': {\r\n                backgroundColor: theme.palette.secondary.main,\r\n            },\r\n        },\r\n    },\r\n    selected: {},\r\n})\r\n\r\n\r\n\r\nexport interface MyToggleButtonProps extends WithStyles<typeof styles> {\r\n    selected: boolean,\r\n    value?:any,\r\n    name?:string,\r\n    icon:JSX.Element\r\n}\r\n\r\nconst MyToggleButton: React.FC<MyToggleButtonProps & ToggleButtonProps> = ({  selected, classes , value, name, icon, ...other}) => {\r\n    return (\r\n        <ToggleButton\r\n            key={name}\r\n            value={value}\r\n            className={clsx(\r\n                classes.btn,\r\n                {\r\n                    [classes.selected]: selected,\r\n                }\r\n            )}\r\n            {...other}\r\n            \r\n        >\r\n            <Tooltip title={name}>\r\n                {icon}\r\n            </Tooltip>\r\n        </ToggleButton>\r\n    )\r\n}\r\n\r\nexport default withStyles(styles)(MyToggleButton)","import * as React from 'react'\r\nimport { Theme, createStyles, withStyles, Button } from '@material-ui/core';\r\nimport { WithStyles } from '@material-ui/styles';\r\nimport { AppBar } from 'src/components';\r\n\r\nconst styles = (theme: Theme) => createStyles({\r\n    root:{\r\n\r\n    },\r\n    btn:{\r\n        marginLeft:theme.spacing(2),\r\n        marginRight:theme.spacing(2)\r\n    },\r\n    grow:{\r\n        flexGrow:1\r\n    }\r\n})\r\n\r\nexport interface UIHeaderProps extends WithStyles<typeof styles> {\r\n    hundleSave?:(e: React.FormEvent<HTMLButtonElement>) => void,\r\n    hundleClear?:(e: React.FormEvent<HTMLButtonElement>) => void,\r\n    hundleCalculate?:(e: React.FormEvent<HTMLButtonElement>) => void,\r\n    disabled?:boolean\r\n}\r\n\r\nconst UIHeader: React.FC<UIHeaderProps> = (\r\n    { \r\n        classes, \r\n        hundleSave = (e) => {alert(\"Буедет реализовано в будущем\")},\r\n        hundleClear = (e) => {alert(\"Буедет реализовано в будущем\")},\r\n        hundleCalculate = (e) => {alert(\"Буедет реализовано в будущем\")},\r\n        disabled = false\r\n    }) => {\r\n\r\n    return (\r\n        <AppBar \r\n            className={classes.root}\r\n        >\r\n            <div className={classes.grow}/>\r\n            <Button\r\n                color=\"secondary\"\r\n                variant=\"contained\"\r\n                className={classes.btn}\r\n                onClick={hundleCalculate}\r\n                disabled={disabled}\r\n            >\r\n                Расчет\r\n            </Button>\r\n            <Button\r\n                color=\"secondary\"\r\n                variant=\"contained\"\r\n                className={classes.btn}\r\n                onClick={hundleSave}\r\n                disabled={disabled}\r\n            >\r\n                Сохранить\r\n            </Button>\r\n            <Button\r\n                color=\"secondary\"\r\n                variant=\"contained\"\r\n                className={classes.btn}\r\n                onClick={hundleClear}\r\n                disabled={disabled}\r\n            >\r\n                Очистить\r\n            </Button>\r\n        </AppBar>\r\n    )\r\n}\r\n\r\nexport default withStyles(styles)(UIHeader)","import * as React from 'react'\r\nimport { Theme, createStyles, withStyles, List, ListItem, ListItemText, Collapse, ListItemIcon, Divider, Badge } from '@material-ui/core';\r\nimport { WithStyles } from '@material-ui/styles';\r\nimport { GpsNotFixed as NodeIcon, Timeline as BeamIcon, List as TreePanelIcon, ExpandLess, ExpandMore, Brightness1 as CircleIcon } from '@material-ui/icons';\r\nimport { Sidebar } from 'src/components';\r\nimport { Entity } from 'src/models/Farm/ModelEntity';\r\nimport { Beam } from 'src/models/Farm/ModelBeam';\r\nimport { FarmNode, instanceOfNode } from 'src/models/Farm/ModelNode';\r\nimport { UI } from 'src/utils';\r\n\r\nconst styles = (theme: Theme) => createStyles({\r\n    nested: {\r\n        paddingLeft: theme.spacing(6)\r\n    },\r\n})\r\n\r\ninterface TreePanelProps extends WithStyles<typeof styles> {\r\n    nodes: FarmNode[],\r\n    beams: Beam[]\r\n    selectedEntity: Entity | undefined\r\n    onSelect(entity: Entity): void\r\n}\r\n\r\ninterface TreeState {\r\n    tabs: Map<string, boolean>,\r\n    open: boolean,\r\n\r\n}\r\n\r\nclass UITreePanel extends React.PureComponent<TreePanelProps, TreeState>{\r\n    constructor(props: TreePanelProps) {\r\n        super(props)\r\n        this.state = {\r\n            open: false,\r\n            tabs: new Map()\r\n        }\r\n        this.openTab = this.openTab.bind(this)\r\n        this.viewListItem = this.viewListItem.bind(this)\r\n    }\r\n    componentWillMount() {\r\n        const { tabs } = this.state\r\n        tabs.set('Узлы', false)\r\n        tabs.set('Стержни', false)\r\n        this.setState({ tabs: new Map(tabs) })\r\n    }\r\n    openTab(tab: string): void {\r\n        const { tabs } = this.state\r\n        tabs.set(tab, !tabs.get(tab))\r\n        this.setState({ tabs: new Map(tabs) })\r\n    }\r\n    viewListItem(entityArray: Entity[], title: string, icon?: JSX.Element) {\r\n        const { selectedEntity, classes, onSelect } = this.props\r\n        const { tabs } = this.state\r\n        return (\r\n            <React.Fragment>\r\n                <ListItem button onClick={() => this.openTab(title)}>\r\n                    {icon && (\r\n                        <ListItemIcon>\r\n                            <Badge badgeContent={entityArray.length} color=\"secondary\">\r\n                                {icon}\r\n                            </Badge>\r\n                        </ListItemIcon>\r\n                    )}\r\n                    <ListItemText primary={title} />\r\n                    {tabs.get(title) ? <ExpandLess /> : <ExpandMore />}\r\n                </ListItem>\r\n                <Collapse in={tabs.get(title)} timeout=\"auto\" unmountOnExit>\r\n                    <List component=\"div\" disablePadding>\r\n                        {entityArray.map(item => (\r\n                            <ListItem\r\n                                button\r\n                                className={classes.nested}\r\n                                key={item.id}\r\n                                selected={selectedEntity === item}\r\n                                onClick={(e) => onSelect(item)}\r\n                            >\r\n                                {instanceOfNode(item) && (\r\n                                    <ListItemIcon>\r\n                                        <CircleIcon style={{color:UI.getNodeColor(item)}}/>\r\n                                    </ListItemIcon>\r\n                                )}\r\n                                <ListItemText primary={item.name} />\r\n                            </ListItem>\r\n                        ))}\r\n                    </List>\r\n                </Collapse>\r\n                <Divider />\r\n            </React.Fragment>\r\n        )\r\n    }\r\n    render() {\r\n        const { nodes, beams } = this.props\r\n        beams.sort((a:Beam, b: Beam) => {\r\n            return a.name > b.name ? 1 : -1 \r\n        })\r\n        return (\r\n            <Sidebar\r\n                anchor=\"left\"\r\n                title=\"Структура проекта\"\r\n                btnIcon={(<TreePanelIcon />)}\r\n            >\r\n\r\n                {this.viewListItem(nodes, 'Узлы', (<NodeIcon />))}\r\n                {this.viewListItem(beams, 'Стержни', (<BeamIcon />))}\r\n\r\n            </Sidebar>\r\n        )\r\n    }\r\n\r\n}\r\n\r\nexport default withStyles(styles)(UITreePanel)","import { ICoord } from \"./ModelFarm\";\r\nimport { MyMath } from \"src/utils\";\r\n\r\nexport class FarmMath {\r\n    static init() {\r\n\r\n    }\r\n\r\n    static Kmest_i(area: number, modUpr: number, length_i: number) {\r\n        const mnoz = (area * modUpr) / length_i\r\n        const result = []\r\n        result.push([mnoz, -mnoz])\r\n        result.push([-mnoz, mnoz])\r\n        return result\r\n    }\r\n    static Lambda_i(nodeCoordOfX: ICoord, nodeCoordOfY: ICoord, length_i: number): ICoord {\r\n        const l_x = (nodeCoordOfY.x - nodeCoordOfX.x) / length_i\r\n        const l_y = (nodeCoordOfY.y - nodeCoordOfX.y) / -length_i\r\n        return { x: l_x, y: l_y }\r\n    }\r\n    static Kobs_i(area: number, modUpr: number, length_i: number, l_i: ICoord) {\r\n        const mnoz = (area * modUpr) / length_i\r\n        const LTxL: ICoord[] = [{ x: l_i.x * l_i.x, y: l_i.x * l_i.y }, { x: l_i.x * l_i.y, y: l_i.y * l_i.y }]\r\n        const _LTxL: ICoord[] = [{ x: -l_i.x * l_i.x, y: -l_i.x * l_i.y }, { x: -l_i.x * l_i.y, y: -l_i.y * l_i.y }]\r\n        const augmnet1 = []\r\n        const augment2 = []\r\n        for (let i = 0; i < 2; i++) {\r\n            augmnet1.push({ x1: LTxL[i].x, y1: LTxL[i].y, x2: _LTxL[i].x, y2: _LTxL[i].y })\r\n            augment2.push({ x1: _LTxL[i].x, y1: _LTxL[i].y, x2: LTxL[i].x, y2: LTxL[i].y })\r\n        }\r\n        const stack: { x1: number, y1: number, x2: number, y2: number }[] = Array.prototype.concat(augmnet1, augment2)\r\n        const result = stack.map(({ x1, y1, x2, y2 }) => ([\r\n            x1 * mnoz,\r\n            y1 * mnoz,\r\n            x2 * mnoz,\r\n            y2 * mnoz\r\n        ]))\r\n        return result\r\n\r\n    }\r\n    static IndexV_i(nodeV1: ICoord, nodeV2: ICoord): number[] {\r\n        return [\r\n            nodeV1.x,\r\n            nodeV1.y,\r\n            nodeV2.x,\r\n            nodeV2.y\r\n        ]\r\n    }\r\n    static K(n_dof: number, indexV: number[][], k_obs: number[][][]) {\r\n        const K: number[][] = []\r\n\r\n        for (let t = 0; t < n_dof; t++) {\r\n            const row: number[] = []\r\n            for (let r = 0; r < n_dof; r++) {\r\n                row.push(0)\r\n            }\r\n            K.push(row)\r\n        }\r\n\r\n        for (let e = 0; e < indexV.length; e++) {\r\n            for (let i = 0; i < 4; i++) {\r\n                const A = indexV[e][i]\r\n                if (A !== 0)\r\n                    for (let j = 0; j < 4; j++) {\r\n                        const B = indexV[e][j]\r\n                        if (B !== 0)\r\n                            K[B - 1][A - 1] = K[B - 1][A - 1] + k_obs[e][i][j]\r\n                    }\r\n\r\n            }\r\n        }\r\n        return K\r\n    }\r\n    static SquareRoot(_a: number[][], _b: number[]) {\r\n        if (_a.length !== _b.length) {\r\n            throw Error(\"SquareRoot - Массивы должны быть одинаковой длины\")\r\n        }\r\n\r\n        const n = _b.length\r\n        const a : number[][] = []\r\n        const b : number[] = []\r\n        const x: number[] = []\r\n        const d: number[] = []\r\n        const s: number[][] = []\r\n        const y: number[] = []\r\n\r\n        for (let i = 0; i < n + 1; i++) {\r\n            const row: number[] = []\r\n            for (let r = 0; r < n; r++) {\r\n                row.push(0)\r\n            }\r\n            s.push(row)\r\n            a.push(row)\r\n            b.push(0)\r\n            x.push(0)\r\n            d.push(0)\r\n            y.push(0)            \r\n        }\r\n\r\n        for (let j = 1; j <= n; j++) {\r\n            for (let r = 0; r <= n; r++) {\r\n                a[j][r] = _a[j-1][r-1]               \r\n            }\r\n            b[j] = _b[j-1]                  \r\n        }\r\n\r\n        d[1] = MyMath.signum(a[1][1]);\r\n        s[1][1] = Math.sqrt(Math.abs(a[1][1]));\r\n        for (let j = 2; j <= n; j++) {\r\n            s[1][j] = a[1][j] / (s[1][1] * d[1]);\r\n        }\r\n\r\n        for (let i = 2; i <= n; i++) {\r\n            let sum = 0;\r\n            for (let k = 1; k <= i - 1; k++) {\r\n                sum += s[k][i] * s[k][i] * d[k];\r\n            }\r\n            d[i] = MyMath.signum(a[i][i] - sum);\r\n            s[i][i] = Math.sqrt(Math.abs(a[i][i] - sum));\r\n\r\n            const l = 1 / (s[i][i] * d[i]);\r\n            for (let j = i + 1; j <= n; j++) {\r\n                let SDSsum = 0;\r\n                for (let k = 1; k <= i - 1; k++) {\r\n                    SDSsum += s[k][i] * d[k] * s[k][j];\r\n                }\r\n                s[i][j] = l * (a[i][j] - SDSsum);\r\n            }\r\n        }\r\n\r\n        y[1] = b[1] / (s[1][1] * d[1]);\r\n\r\n        for (let i = 2; i <= n; i++) {\r\n            let sum = 0;\r\n\r\n            for (let j = 1; j <= i - 1; j++) {\r\n                sum += s[j][i] * d[j] * y[j];\r\n            }\r\n\r\n            y[i] = (b[i] - sum) / (s[i][i] * d[i]);\r\n        }\r\n\r\n        x[n] = y[n] / s[n][n];\r\n\r\n        for (let i = n - 1; i >= 1; i--) {\r\n            let sum = 0;\r\n\r\n            for (let k = i + 1; k <= n; k++) {\r\n                sum += s[i][k] * x[k];\r\n            }\r\n\r\n            x[i] = (y[i] - sum) / s[i][i];\r\n        }\r\n\r\n        const result : number[] = []\r\n        x.forEach((item,i) => {\r\n            if(i !== 0) result.push(item)\r\n        })\r\n\r\n        return result\r\n    }\r\n\r\n    static Vi(nodeV : ICoord[], Va:number[]){        \r\n        const vi:ICoord[] = []\r\n        for (let e = 0; e < nodeV.length; e++) {            \r\n            const q : ICoord = {...nodeV[e]}\r\n            q.x = q.x === 0 ? 0 : Va[q.x-1]\r\n            q.y = q.y === 0 ? 0 : Va[q.y-1]\r\n            vi.push(q)\r\n        }\r\n        return vi\r\n    }\r\n    static Vij(linkNodes : ICoord[], vi:ICoord[]){\r\n        const vij:number[][][] = []\r\n        for (let e = 0; e < linkNodes.length; e++) {            \r\n            const n_start = linkNodes[e].x\r\n            const n_ends = linkNodes[e].y\r\n            \r\n            vij.push([\r\n                [vi[n_start].x],\r\n                [vi[n_start].y],\r\n                [vi[n_ends].x],\r\n                [vi[n_ends].y],\r\n            ])\r\n        }\r\n        return vij\r\n    }\r\n    static V_i(l:number[][], vij:number[][]){\r\n        const v: number[][] = MyMath.multMatrxiV2(l ,vij)\r\n        return v\r\n    }\r\n    static P_i(k:number[][], v:number[][]){\r\n        const p: number[][] = MyMath.multMatrxiV2(k ,v)\r\n        return p\r\n    }\r\n}","import { FarmNode, NodeFixation, createNode, INode } from \"./ModelNode\";\r\nimport { Beam, IBeam, createBeam, instanceOfBeam } from \"./ModelBeam\";\r\nimport { createForce, Force } from \"./ModelForce\";\r\nimport { Entity } from \"./ModelEntity\";\r\nimport uuid from 'uuid'\r\nimport { MyMath } from \"src/utils\";\r\nimport { beam } from \"src/static/colors\";\r\nimport { FarmMath } from \"./FarmMath\";\r\n\r\nconst farmCalcDebug = process.env.REACT_APP_FARM_CALC_DEBUG === \"true\" || false\r\n\r\n \r\nexport interface IFarm {\r\n    nodes: FarmNode[],\r\n    beams: Beam[]\r\n}\r\nexport interface ICoord {\r\n    x: number,\r\n    y: number\r\n}\r\ninterface IFixedNodeCreate extends ICoord {\r\n    fixation: NodeFixation\r\n}\r\ninterface IStaticNodeCreate extends ICoord {\r\n    angle: 0 | 90\r\n    value: number\r\n}\r\ninterface ISimpleNodeCreate extends ICoord {\r\n\r\n}\r\n\r\nexport interface CalcData {\r\n    P:number[][][],\r\n    LinkNodes?:ICoord[]\r\n}\r\nexport class Farm {\r\n    static addNode(nodes: FarmNode[], props: INode): FarmNode | null {\r\n        if (nodes.length > 12) return null\r\n        const oldNode = nodes.find(item => item.x === props.x && item.y === props.y)\r\n        if (oldNode) return null\r\n        const id = uuid()\r\n        if (!id) return null\r\n        const name = (nodes.length + 1) + \"\"\r\n        const node = createNode({\r\n            ...props,\r\n            name: props.name || name,\r\n            id,\r\n        })\r\n        return node\r\n    }\r\n    static addBeam(beams: Beam[], props: IBeam): Beam | null {\r\n        if (beams.length > 36) return null\r\n        const id = uuid()\r\n        if (!id) return null\r\n        const beam = createBeam({\r\n            ...props,\r\n            id,\r\n        })\r\n        return beam\r\n    }\r\n    static moveEntity(entity: Entity, x: number, y: number) {\r\n        entity.x = x\r\n        entity.y = y\r\n        if (instanceOfBeam(entity)) {\r\n            entity.length = this.getBeamLength(entity)\r\n        }\r\n    }\r\n    static moveBeamEnd(beam: Beam, x: number, y: number) {\r\n        beam.endX = x\r\n        beam.endY = y\r\n    }\r\n    static createNodes(_fixedNodes: IFixedNodeCreate[], _staticNodes: IStaticNodeCreate[], _nodes: ISimpleNodeCreate[]): FarmNode[] {\r\n        const nodes: FarmNode[] = []\r\n        let index: number = 0;\r\n        return nodes.concat(\r\n            _fixedNodes.map(item => {\r\n                index++\r\n                return createNode({ ...item, isStatic: true, name: index + \"\" })\r\n            }),\r\n            _staticNodes.map(item => {\r\n                index++\r\n                const _node = createNode({ ...item, isStatic: true, name: index + \"\" })\r\n                if (item.angle === 0) _node.forceX = createForce({ nodeID: _node.id, value: item.value, angle: item.angle })\r\n                else _node.forceY = createForce({ nodeID: _node.id, value: item.value, angle: item.angle })\r\n                return _node\r\n            }),\r\n            _nodes.map(item => {\r\n                index++\r\n                return createNode({ ...item, name: index + \"\" })\r\n            })\r\n        )\r\n    }\r\n    static findOldBeam(node: FarmNode, beam: Beam, checkingBeam: Beam) {\r\n        return (\r\n            (checkingBeam.startConnectedNodeID === beam.startConnectedNodeID && checkingBeam.endConnectedNodeID === node.id) ||\r\n            (checkingBeam.startConnectedNodeID === node.id && checkingBeam.endConnectedNodeID === beam.startConnectedNodeID) ||\r\n            (checkingBeam.id === beam.id && checkingBeam.startConnectedNodeID === node.id)\r\n        )\r\n    }\r\n    static getBeamLength(beam: Beam): number {\r\n        return Math.round(MyMath.lengthBePoints(beam.x, beam.y, beam.endX, beam.endY) - 0.5)\r\n    }\r\n    static setNodesName(nodes: FarmNode[]) {\r\n        return nodes.map((node, index) => ({ ...node, name: (index + 1) + \"\" }))\r\n    }\r\n    static setBeamsName(_beams: Beam[], nodes: FarmNode[]): Beam[] {\r\n\r\n        const nodesMap: Map<string, FarmNode> = new Map()\r\n        nodes.forEach(node => {\r\n            nodesMap.set(node.id, node)\r\n        })\r\n        let name: string = \"\"\r\n\r\n        let beams = _beams.map(beam => {\r\n            if (!beam.startConnectedNodeID || !beam.endConnectedNodeID) return beam\r\n            const startNode = nodesMap.get(beam.startConnectedNodeID)\r\n            const endNode = nodesMap.get(beam.endConnectedNodeID)\r\n            if (startNode && endNode) {\r\n                if (startNode.name < endNode.name) name = `${startNode.name} - ${endNode.name}`\r\n                else name = `${endNode.name} - ${startNode.name}`\r\n\r\n                return {\r\n                    ...beam,\r\n                    name: name\r\n                }\r\n            }\r\n            return beam\r\n        })\r\n            .sort((a: Beam, b: Beam) => {\r\n                const numsA = a.name.split(' - ')\r\n                const numA = Number(numsA[0] + numsA[1])\r\n                const numsB = b.name.split(' - ')\r\n                const numB = Number(numsB[0] + numsB[1])\r\n\r\n                return numA > numB ? 1 : -1\r\n            })\r\n        return beams\r\n    }\r\n    static sortNodes(nodes: FarmNode[]) {\r\n        return nodes.sort((a: FarmNode, b: FarmNode) => {\r\n            if (a.y < b.y) return -1\r\n            else if (a.y === b.y) if (a.x < b.x) return -1; else return 1\r\n            else return 1\r\n        }).map((node, index) => {\r\n            return { ...node, name: index + 1 + \"\" }\r\n        })\r\n    }\r\n\r\n    static  async calculateFarm(_nodes: FarmNode[], _beams: Beam[], props?: object) : Promise<CalcData> {\r\n        let farmNodes: FarmNode[] = [..._nodes]\r\n        let farmBeams: Beam[] = [..._beams]\r\n        const farmNodesMap: Map<string, FarmNode> = new Map()\r\n        const farmBeamsMap: Map<string, Beam> = new Map()\r\n\r\n        const area: number = 225 //Площадь стержней\r\n        const ModUpr: number = 72000 // Модуль упругости \r\n\r\n        const NodeCoord: ICoord[] = []\r\n        const NodeV: ICoord[] = []\r\n        const Forces: number[] = []\r\n        const LinkNodes: ICoord[] = []\r\n        const LinkLength: number[] = []\r\n        const Kmest: number[][][] = [] // Матрица жесткости\r\n        const Lambda0: ICoord[] = []\r\n        const Lambda: number[][][] = []\r\n        const Kobs: number[][][] = []\r\n        const IndexV: number[][] = []\r\n        let K: number[][] = []\r\n        let Va: number[] = []\r\n        let Vi: ICoord[] = []\r\n        let Vij: number[][][] = []\r\n        let V: number[][][] = []\r\n        let P: number[][][] = []\r\n\r\n        if (farmNodes.find(node => node.beamsID.length === 0 && node.isStatic)) throw new Error(\"Не все узлый соединены\")\r\n        try {\r\n            let nodeVindex = 0;\r\n            farmNodes.forEach(node => {\r\n                farmNodesMap.set(node.id, node)\r\n                NodeCoord.push({ x: node.x, y: node.y }) // * 10\r\n                switch (node.fixation) {\r\n                    case NodeFixation.X: {\r\n                        nodeVindex++\r\n                        NodeV.push({ x: 0, y: nodeVindex })\r\n                        if (node.forceY) Forces.push(-node.forceY.value)\r\n\r\n                        break;\r\n                    }\r\n                    case NodeFixation.Y: {\r\n                        nodeVindex++\r\n                        NodeV.push({ x: nodeVindex, y: 0 })\r\n                        if (node.forceX) Forces.push(-node.forceX.value)\r\n                        else Forces.push(0)\r\n                        break;\r\n                    }\r\n                    case NodeFixation.YX:\r\n                    case NodeFixation.XY: {\r\n                        NodeV.push({ x: 0, y: 0 })\r\n                        break;\r\n                    }\r\n                    case NodeFixation.None: {\r\n                        nodeVindex++\r\n                        NodeV.push({ x: nodeVindex, y: nodeVindex + 1 })\r\n                        nodeVindex++\r\n                        if (node.forceX) Forces.push(-node.forceX.value)\r\n                        else Forces.push(0)\r\n                        if (node.forceY) Forces.push(-node.forceY.value)\r\n                        else Forces.push(0)\r\n                        break;\r\n                    }\r\n                    default: break;\r\n                }\r\n            })\r\n            farmBeams.forEach((beam, i) => {\r\n                farmBeamsMap.set(beam.id, beam)\r\n                const nums = beam.name.split(' - ')\r\n                LinkNodes.push({\r\n                    x: Number(nums[0]) - 1,\r\n                    y: Number(nums[1]) - 1\r\n                })\r\n                const beamLength = Farm.getBeamLength(beam)// * 10\r\n                LinkLength.push(beamLength)\r\n                Kmest.push(FarmMath.Kmest_i(area, ModUpr, beamLength))\r\n\r\n                const l_i = FarmMath.Lambda_i(NodeCoord[LinkNodes[i].x], NodeCoord[LinkNodes[i].y], LinkLength[i])\r\n                Lambda0.push(l_i)\r\n                Lambda.push([\r\n                    [l_i.x, l_i.y, 0, 0],\r\n                    [0, 0, l_i.x, l_i.y]\r\n                ])\r\n                Kobs.push(FarmMath.Kobs_i(area, ModUpr, LinkLength[i], Lambda0[i]))\r\n                IndexV.push(FarmMath.IndexV_i(NodeV[LinkNodes[i].x], NodeV[LinkNodes[i].y]))\r\n            })\r\n\r\n            const N_Link = LinkNodes.length\r\n            const N_Nodes = NodeV.length\r\n            const N_DOF = Math.max(...NodeV.map(({ x, y }) => Math.max(x, y)))\r\n\r\n            K = FarmMath.K(N_DOF, IndexV, Kobs)\r\n\r\n            Va = FarmMath.SquareRoot(K, Forces)\r\n            Vi = FarmMath.Vi(NodeV, Va)\r\n            Vij = FarmMath.Vij(LinkNodes, Vi)\r\n\r\n            for (let i = 0; i < N_Link; i++) {\r\n                V.push(FarmMath.V_i(Lambda[i], Vij[i]))\r\n                P.push(FarmMath.P_i(Kmest[i], V[i]))\r\n            }\r\n\r\n            if(farmCalcDebug){\r\n                console.log(\"NodeCoord, LinkNodes, NodeV\", NodeCoord, LinkNodes, NodeV);\r\n                console.log(\"Kobs, Kmest\", Kobs, Kmest);\r\n                console.log(\"Lambda0, Lambda,\", Lambda0, Lambda);\r\n                console.log(\"IndexV\", IndexV);\r\n                console.log(\"N_Link, N_Nodes, N_DOF\", N_Link, N_Nodes, N_DOF);\r\n                console.log(\"K, Force\", K, Forces);\r\n                console.log(\"Va\", Va);\r\n                console.log(\"Vi\", Vi);\r\n                console.log(\"Vij\", Vij);\r\n                console.log(\"V\", V);\r\n                console.log(\"P\", P);\r\n            }\r\n\r\n            return {P,LinkNodes}\r\n\r\n        } catch (e) {\r\n            throw new Error(e)\r\n        }\r\n\r\n\r\n    }\r\n}","import * as React from 'react'\r\nimport { Theme, createStyles, withStyles, Typography, IconButton, Box, Divider } from '@material-ui/core';\r\nimport { WithStyles } from '@material-ui/styles';\r\nimport { Delete as DeleteIcon, Info as InfoEntityIcon } from '@material-ui/icons';\r\nimport { Sidebar } from 'src/components';\r\nimport { Entity } from 'src/models/Farm/ModelEntity';\r\nimport { instanceOfNode, FarmNode, NodeFixation } from 'src/models/Farm/ModelNode';\r\nimport { instanceOfBeam } from 'src/models/Farm/ModelBeam';\r\nimport { Farm } from 'src/models/Farm/ModelFarm';\r\nimport { Force } from 'src/models/Farm/ModelForce';\r\n\r\nconst styles = (theme: Theme) => createStyles({\r\n    root: {\r\n        padding: theme.spacing(2)\r\n    },\r\n    title: {\r\n        marginBottom: theme.spacing(2)\r\n    },\r\n    btnGroup:{\r\n        marginTop:theme.spacing(2)\r\n    }\r\n})\r\n\r\n\r\n\r\n\r\ninterface EntityInfoProps extends WithStyles<typeof styles> {\r\n    entity?: Entity | undefined,\r\n    onDelete(entity: Entity): void\r\n}\r\n\r\ninterface EntityInfoState {\r\n\r\n}\r\n\r\nclass UIEntityInfo extends React.PureComponent<EntityInfoProps, EntityInfoState>{\r\n    constructor(props: EntityInfoProps) {\r\n        super(props)\r\n        this.state = {\r\n\r\n        }\r\n    }\r\n    viewForceInfo(force: Force) {\r\n        return (\r\n            <React.Fragment>\r\n                <Typography variant=\"subtitle2\">\r\n                    Сила: {force.value} H\r\n                </Typography>\r\n                <Typography variant=\"subtitle2\">\r\n                    Угол: {force.angle}\r\n                </Typography>\r\n                <Divider />\r\n\r\n            </React.Fragment>\r\n        )\r\n    }\r\n    viewFixationInfo(node : FarmNode){\r\n        switch (node.fixation) {\r\n            case NodeFixation.X : return (\r\n                <React.Fragment>\r\n                    <Typography variant=\"subtitle2\">\r\n                        Фиксация по оси X\r\n                    </Typography>\r\n                    <Divider />    \r\n                </React.Fragment>\r\n            )\r\n            case NodeFixation.Y : return (\r\n                <React.Fragment>\r\n                    <Typography variant=\"subtitle2\">\r\n                        Фиксация по оси Y\r\n                    </Typography>\r\n                    <Divider />    \r\n                </React.Fragment>\r\n            )\r\n            case NodeFixation.XY : return (\r\n                <React.Fragment>\r\n                    <Typography variant=\"subtitle2\">\r\n                        Фиксация по оси X и Y\r\n                    </Typography>\r\n                    <Divider />    \r\n                </React.Fragment>\r\n            )\r\n            default : return undefined\r\n        }\r\n    }\r\n    viewInfo(entity: Entity | undefined) {\r\n        const { classes, onDelete } = this.props\r\n        if (instanceOfNode(entity)) return (\r\n            <Box className={classes.root}>\r\n                <Typography variant=\"h6\" className={classes.title}>\r\n                    Узел {entity.name}\r\n                </Typography>\r\n                {entity.forceX && this.viewForceInfo(entity.forceX)}\r\n                {entity.forceY && this.viewForceInfo(entity.forceY)}\r\n                {this.viewFixationInfo(entity)} \r\n                <div className={classes.btnGroup}>\r\n                    <IconButton\r\n                        aria-label=\"Delete\"\r\n                        onClick={() => onDelete(entity)}\r\n                    >\r\n                        <DeleteIcon />\r\n                    </IconButton>\r\n\r\n                </div>\r\n            </Box>\r\n        )\r\n        else if (instanceOfBeam(entity)) return (\r\n            <Box className={classes.root}>\r\n                <Typography variant=\"h6\" className={classes.title}>\r\n                    Стержень {entity.name}\r\n                </Typography>\r\n                <Typography variant=\"subtitle2\">\r\n                    Длина: {entity.length || Farm.getBeamLength(entity)}\r\n                </Typography>\r\n                <Divider />    \r\n                <div className={classes.btnGroup}>\r\n                    <IconButton\r\n                        aria-label=\"Delete\"\r\n                        onClick={() => onDelete(entity)}\r\n                    >\r\n                        <DeleteIcon />\r\n                    </IconButton>\r\n\r\n                </div>\r\n            </Box>\r\n        )\r\n    }\r\n    render() {\r\n        const { entity } = this.props\r\n        return (\r\n            <Sidebar\r\n                anchor=\"right\"\r\n                title=\"Информация о выбранном объекте\"\r\n                btnIcon={(<InfoEntityIcon />)}\r\n            >\r\n                {this.viewInfo(entity)}\r\n                <Divider />\r\n            </Sidebar>\r\n        )\r\n    }\r\n\r\n}\r\n\r\nexport default withStyles(styles)(UIEntityInfo)","import * as React from 'react'\r\nimport { Theme, createStyles, withStyles,  Paper } from '@material-ui/core';\r\nimport { ToggleButtonGroup } from '@material-ui/lab'\r\nimport { WithStyles } from '@material-ui/styles';\r\nimport { ZoomOutMap as MoveIcon, MyLocation as AddNodeIcon, Delete as DeleteIcon, Power as ConnectIcon } from '@material-ui/icons';\r\n\r\nimport { fade } from '@material-ui/core/styles';\r\nimport { MyToggleButton } from 'src/components';\r\nimport { UIModes } from 'src/utils/UI';\r\n\r\nconst styles = (theme: Theme) => createStyles({\r\n    root: {\r\n        position: 'absolute',\r\n        padding: theme.spacing(1),\r\n        bottom: theme.spacing(2),\r\n        left: \"50%\",\r\n        transform: 'translateX(-50%)',\r\n        backgroundColor: fade(theme.palette.primary.light, 0.4),\r\n        transition: theme.transitions.create(['background-color', 'box-shadow', 'border'], {\r\n            duration: theme.transitions.duration.short,\r\n        }),\r\n        '&:hover':{\r\n            backgroundColor: theme.palette.primary.light,\r\n        }\r\n    },\r\n    modsBtnGroup: {\r\n        borderRadius: 0,\r\n        backgroundColor: 'transparent'\r\n    }\r\n})\r\n\r\n\r\nexport interface IMode {\r\n    name: string,\r\n    mod: UIModes\r\n    icon: JSX.Element\r\n}\r\n\r\n\r\n\r\nexport interface UIToolPanelProps extends WithStyles<typeof styles> {\r\n    selected: UIModes\r\n    onSelect(mod: UIModes): void\r\n}\r\n\r\nconst UIToolPanel: React.FC<UIToolPanelProps> = ({ onSelect, selected, classes }) => {\r\n    const mods: IMode[] = [\r\n        {\r\n            name: \"Перемещение\",\r\n            mod: UIModes.move,\r\n            icon: (<MoveIcon />)\r\n        },\r\n        {\r\n            name: \"Добавить узел\",\r\n            mod: UIModes.addNode,\r\n            icon: (<AddNodeIcon />)\r\n        },\r\n        {\r\n            name: \"Соединить узлы\",\r\n            mod: UIModes.addBeam,\r\n            icon: (<ConnectIcon />)\r\n        },\r\n        {\r\n            name: \"Удалить\",\r\n            mod: UIModes.delete,\r\n            icon: (<DeleteIcon />)\r\n        }\r\n    ]\r\n    return (\r\n        <Paper className={classes.root}>\r\n            <ToggleButtonGroup\r\n                value={selected}\r\n                exclusive\r\n                onChange={(e, value) => onSelect(value)}\r\n                size=\"medium\"\r\n                className={classes.modsBtnGroup}\r\n            >\r\n                {mods.map(item => (\r\n                    <MyToggleButton\r\n                        key={item.mod}\r\n                        value={item.mod}\r\n                        selected={item.mod === selected}\r\n                        icon={item.icon}\r\n                        name={item.name}\r\n                        \r\n                    />\r\n                ))}\r\n            </ToggleButtonGroup>\r\n        </Paper>\r\n    )\r\n}\r\n\r\nexport default withStyles(styles)(UIToolPanel)","import * as React from 'react'\r\nimport KeyHandler from 'react-key-handler'\r\nimport Konva from \"konva\"\r\nimport { Stage } from \"react-konva\"\r\nimport { createStyles, Theme, WithStyles, withStyles, Box } from '@material-ui/core';\r\nimport { UITreePanel, UIEntityInfo, UIStage, UIHeader, UIToolPanel } from '.';\r\nimport { MyMath } from 'src/utils';\r\nimport Stats from 'react-stats'\r\nimport { instanceOfBeam } from 'src/models/Farm/ModelBeam';\r\nimport { Entity } from 'src/models/Farm/ModelEntity';\r\nimport { instanceOfNode } from 'src/models/Farm/ModelNode';\r\nimport { FarmContainer } from '../FarmContainer'\r\nimport { UIModes } from 'src/utils/UI';\r\nimport { IFarm } from 'src/models/Farm/ModelFarm';\r\n\r\n\r\n\r\nconst styles = (theme: Theme) => createStyles({\r\n    root: {\r\n        width: \"100%\",\r\n        height: \"100%\",\r\n        overflow: \"hidden\",\r\n        background: theme.palette.background.default,\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n    },\r\n    stageBox: {\r\n        display: 'flex',\r\n        flexGrow: 1,\r\n        overflow: 'hidden',\r\n\r\n    },\r\n    toolbar: theme.mixins.toolbar,\r\n})\r\nexport interface UIFarmProps extends IFarm, WithStyles<typeof styles> {\r\n    addNode: typeof FarmContainer.prototype.addNode,\r\n    addBeam: typeof FarmContainer.prototype.addBeam,\r\n    moveNode: typeof FarmContainer.prototype.moveNode,\r\n    moveBeam: typeof FarmContainer.prototype.moveBeam,\r\n    connectBeamToNode: typeof FarmContainer.prototype.connectBeamToNode,\r\n    deleteEntity: typeof FarmContainer.prototype.deleteEntity\r\n    defautlFarm: typeof FarmContainer.prototype.defautlFarm\r\n    saveFarm: typeof FarmContainer.prototype.saveFarm,\r\n    calculateFarm:typeof FarmContainer.prototype.calculateFarm\r\n    calculation: boolean,\r\n}\r\n\r\nexport interface UIFarmState {\r\n    stageWidth: number,\r\n    stageHeight: number,\r\n    uiMode: UIModes,\r\n    selectedEntity: Entity | undefined,\r\n    paintEntity: Entity | undefined\r\n}\r\n\r\nclass UIFarm extends React.Component<UIFarmProps, UIFarmState>{\r\n    private stage: React.RefObject<Stage & Konva.Stage>\r\n    constructor(props: UIFarmProps) {\r\n        super(props)\r\n        this.state = {\r\n            stageHeight: 1500,\r\n            stageWidth: 2500,\r\n            uiMode: UIModes.none,\r\n            selectedEntity: undefined,\r\n            paintEntity: undefined,\r\n        }\r\n        this.UIonClick = this.UIonClick.bind(this)\r\n        this.UIonDrag = this.UIonDrag.bind(this)\r\n        this.UIonMouseMove = this.UIonMouseMove.bind(this)\r\n        this.onKeyHandle = this.onKeyHandle.bind(this)\r\n        this.selectEntity = this.selectEntity.bind(this)\r\n        this.clearFarm = this.clearFarm.bind(this)\r\n        this.deleteEntity = this.deleteEntity.bind(this)\r\n        this.saveFarm = this.saveFarm.bind(this)\r\n        this.calculateFarm = this.calculateFarm.bind(this)\r\n        this.stage = React.createRef();\r\n    }\r\n    componentDidMount() {\r\n        const { current: stage } = this.stage\r\n        if (stage) {\r\n            const container: HTMLDivElement = stage.attrs.container.parentElement\r\n            if (container) {\r\n                container.scrollTop = (container.scrollHeight - container.offsetHeight) / 2\r\n                container.scrollLeft = (container.scrollWidth - container.offsetWidth) / 2\r\n            }\r\n        }\r\n    }\r\n\r\n    UIonClick(e: Konva.KonvaEventObject<MouseEvent>, entity?: Entity) {\r\n        const { uiMode, paintEntity } = this.state\r\n        const { calculation } = this.props\r\n        const isEmptyPlace = e.target.getStage() === e.target\r\n        e.evt.preventDefault()\r\n        if (e.evt.button === 0 && !calculation) {\r\n            switch (uiMode) {\r\n                case UIModes.none: {\r\n                    if (!isEmptyPlace) {\r\n                        this.selectEntity(entity);\r\n                    } else this.setState({ selectedEntity: undefined })\r\n\r\n                    break;\r\n                }\r\n                case UIModes.addNode: {\r\n                    if (isEmptyPlace) {\r\n                        const { layerX, layerY } = e.evt\r\n                        const cellX = MyMath.cellX(layerX)\r\n                        const cellY = MyMath.cellX(layerY)\r\n                        this.props.addNode(cellX, cellY)\r\n                    }\r\n                    break;\r\n                }\r\n                case UIModes.addBeam: {\r\n                    if (!isEmptyPlace && instanceOfNode(entity)) {\r\n                        const beam = this.props.addBeam({\r\n                            x: entity.x,\r\n                            y: entity.y\r\n                        })\r\n                        if (instanceOfBeam(beam)) {\r\n                            const connectedBeam = this.props.connectBeamToNode(entity, beam, 'start')\r\n                            if (instanceOfBeam(connectedBeam))\r\n                                this.setState({\r\n                                    paintEntity: connectedBeam,\r\n                                    uiMode: UIModes.addBeamStart\r\n                                })\r\n                            else this.props.deleteEntity(beam.id)\r\n                        }\r\n                    }\r\n                    break;\r\n                }\r\n                case UIModes.addBeamStart: {\r\n                    if (!isEmptyPlace && instanceOfNode(entity) && instanceOfBeam(paintEntity)) {\r\n                        if (this.props.connectBeamToNode(entity, paintEntity, 'end'))\r\n                            this.setState({\r\n                                uiMode: UIModes.addBeam,\r\n                                paintEntity: undefined\r\n                            })\r\n                    }\r\n                    break;\r\n                }\r\n                case UIModes.delete: {\r\n                    if (!isEmptyPlace && entity) {\r\n                        this.deleteEntity(entity)\r\n                    }\r\n                    break;\r\n                }\r\n                default:\r\n                    break;\r\n            }\r\n        }\r\n\r\n\r\n        if (isEmptyPlace) this.setState({ selectedEntity: undefined })\r\n\r\n    }\r\n    UIonMouseMove(e: Konva.KonvaEventObject<MouseEvent>) {\r\n        const { calculation } = this.props\r\n        if (calculation) return\r\n        const { uiMode, paintEntity } = this.state\r\n        const { layerX, layerY } = e.evt\r\n        switch (uiMode) {\r\n            case UIModes.addBeamStart: {\r\n                if (e.target.getStage()) {\r\n                    if (paintEntity && instanceOfBeam(paintEntity)) {\r\n                        this.props.moveBeam(paintEntity, layerX, layerY)\r\n                    } else this.setState({ uiMode: UIModes.addBeam })\r\n                }\r\n                break;\r\n            }\r\n            case UIModes.delete: {\r\n                const stage: Stage & Konva.Stage = e.target.getStage()\r\n                if (stage === e.target) {\r\n                    stage.container().style.cursor = 'default'\r\n                }\r\n                break;\r\n            }\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n    UIonDrag(e: Konva.KonvaEventObject<DragEvent>, entity: Entity) {\r\n        const { calculation } = this.props\r\n        if (calculation) return\r\n        const { uiMode } = this.state\r\n        switch (uiMode) {\r\n            case UIModes.move: {\r\n                if (instanceOfNode(entity)) {\r\n                    if (e.evt.defaultPrevented) {\r\n                        const { layerX, layerY } = e.evt\r\n                        this.props.moveNode(entity, MyMath.cellX(layerX), MyMath.cellY(layerY))\r\n                    }\r\n                }\r\n                break\r\n            }\r\n            default:\r\n                break;\r\n        }\r\n\r\n    }\r\n    onKeyHandle(e: KeyboardEvent) {\r\n        switch (e.key) {\r\n            case \"Escape\": {\r\n                this.deletePaintEntity()\r\n\r\n                break;\r\n            }\r\n            default:\r\n                break;\r\n        }\r\n\r\n    }\r\n    deletePaintEntity() {\r\n        if (this.state.paintEntity)\r\n            this.props.deleteEntity(this.state.paintEntity.id)\r\n        this.setState({\r\n            paintEntity: undefined\r\n        })\r\n    }\r\n    deleteEntity(entity: Entity) {\r\n        const { calculation } = this.props\r\n        if (calculation) return\r\n        if (this.state.selectedEntity && this.state.selectedEntity.id === entity.id)\r\n            this.setState({\r\n                selectedEntity: undefined\r\n            })\r\n        this.props.deleteEntity(entity.id)\r\n    }\r\n    selectEntity(entity: Entity | undefined) {\r\n        const { calculation } = this.props\r\n        if (calculation) return\r\n        if (entity) this.setState({ selectedEntity: entity })\r\n    }\r\n    clearFarm(): void {\r\n        if (window.confirm('Вы уверены, что хотите очистить холст?'))\r\n            this.props.defautlFarm()\r\n    }\r\n    saveFarm(e: React.FormEvent<HTMLButtonElement>) {\r\n        if (window.confirm('Вы уверены, что хотите сохранить холст в кэш?'))\r\n            this.props.saveFarm()\r\n    }\r\n    calculateFarm(e: React.FormEvent<HTMLButtonElement>){\r\n        this.props.calculateFarm()\r\n    }\r\n    setSelectedMode(mode: UIModes) {\r\n        const { calculation } = this.props\r\n        if (calculation) return\r\n        if (this.state.paintEntity)\r\n            this.props.deleteEntity(this.state.paintEntity.id)\r\n        this.setState({\r\n            uiMode: mode || 0,\r\n            paintEntity: undefined\r\n        })\r\n    }\r\n    render() {\r\n        const { stageHeight, stageWidth, uiMode, selectedEntity } = this.state\r\n        const { classes, nodes, beams, calculation } = this.props\r\n        return (\r\n            <Box className={classes.root}>\r\n                <Stats isActive={true} />\r\n                <KeyHandler\r\n                    keyEventName={\"keyup\"}\r\n                    keyValue={\"Escape\"}\r\n                    onKeyHandle={this.onKeyHandle}\r\n                />\r\n                <UIHeader\r\n                    hundleClear={this.clearFarm}\r\n                    hundleSave={this.saveFarm}\r\n                    hundleCalculate={this.calculateFarm}\r\n                    disabled={calculation} />\r\n\r\n                <div className={classes.toolbar} />\r\n                <Box className={classes.stageBox}>\r\n                    <div className={classes.toolbar} />\r\n                    <UITreePanel\r\n                        nodes={nodes}\r\n                        beams={beams}\r\n                        selectedEntity={selectedEntity}\r\n                        onSelect={this.selectEntity}\r\n                    />\r\n\r\n                    <UIStage\r\n                        onClick={this.UIonClick}\r\n                        onDrag={this.UIonDrag}\r\n                        onMouseMove={this.UIonMouseMove}\r\n                        stageHeight={stageHeight}\r\n                        stageWidth={stageWidth}\r\n                        nodes={nodes}\r\n                        beams={beams}\r\n                        stage={this.stage}\r\n                        selectedEntity={selectedEntity}\r\n                        uiMode={uiMode}\r\n                    />\r\n                    <UIEntityInfo\r\n                        entity={selectedEntity}\r\n                        onDelete={this.deleteEntity} />\r\n                </Box>\r\n\r\n                <UIToolPanel\r\n                    selected={uiMode}\r\n                    onSelect={this.setSelectedMode.bind(this)} />\r\n            </Box>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withStyles(styles)(UIFarm)","import FarmPage from './FarmContainer'\r\n\r\nexport default FarmPage","import * as React from 'react'\r\nimport { UIFarm } from './components'\r\nimport { FarmNode, INode, instanceOfNode } from 'src/models/Farm/ModelNode';\r\nimport { Beam, IBeam, instanceOfBeam } from 'src/models/Farm/ModelBeam';\r\nimport { Force, createForce, IForce } from 'src/models/Farm/ModelForce';\r\nimport { IFarm, Farm, CalcData } from 'src/models/Farm/ModelFarm';\r\nimport testFarm from './_testFarm'\r\n\r\ninterface State extends IFarm {\r\n    calculation: boolean\r\n}\r\ninterface Props {\r\n\r\n}\r\nexport class FarmContainer extends React.Component<Props, State> {\r\n    constructor(props: Props) {\r\n        super(props)\r\n        this.state = {\r\n            nodes: [],\r\n            beams: [],\r\n            calculation: false\r\n        }\r\n        this.defautlFarm = this.defautlFarm.bind(this)\r\n        this.saveFarm = this.saveFarm.bind(this)\r\n        this.calculateFarm = this.calculateFarm.bind(this)\r\n    }\r\n    componentDidMount() {\r\n        const nodesJSON = localStorage.getItem(\"nodes\")\r\n        const beamsJSON = localStorage.getItem(\"beams\")\r\n        if (nodesJSON && beamsJSON) {\r\n            const nodes: FarmNode[] = JSON.parse(nodesJSON)\r\n            const beams: Beam[] = JSON.parse(beamsJSON)\r\n            this.setState({ nodes, beams })\r\n        } else this.defautlFarm()\r\n    }\r\n    addNode = (x: number, y: number, options?: INode) => {\r\n        const node = Farm.addNode(this.state.nodes, { ...options, x, y })\r\n        if (node) {\r\n            this.setState({\r\n                nodes: [...this.state.nodes, node]\r\n            })\r\n            return node\r\n        }\r\n        return null\r\n    }\r\n    addBeam = (options?: IBeam) => {\r\n        const beam = Farm.addBeam(this.state.beams, { ...options })\r\n        if (beam) {\r\n            this.setState({\r\n                beams: [...this.state.beams, beam]\r\n            })\r\n            return beam\r\n        }\r\n        return null\r\n    }\r\n    connectBeamToNode = (_node: FarmNode, _beam: Beam, place: 'start' | 'end') => {\r\n\r\n        const node: FarmNode = { ..._node }\r\n        const beam: Beam = { ..._beam }\r\n\r\n        switch (place) {\r\n            case 'start': {\r\n                beam.startConnectedNodeID = node.id\r\n                beam.name = node.name + \" - \"\r\n                node.beamsID.push(beam.id)\r\n                Farm.moveEntity(beam, node.x, node.y)\r\n                this.setState(state => ({\r\n                    nodes: state.nodes.map(item => {\r\n                        if (item.id === node.id) return node\r\n                        return item\r\n                    }),\r\n                    beams: state.beams.map(item => {\r\n                        if (item.id === beam.id) return beam\r\n                        return item\r\n                    })\r\n                }))\r\n                return beam;\r\n            }\r\n            case 'end': {\r\n                const beamsOfNode = this.state.beams.filter(item => (node && node.beamsID.includes(item.id)))\r\n                const oldBeam = beamsOfNode.find(item => Farm.findOldBeam(node, beam, item))\r\n                if (!oldBeam) {\r\n                    node.beamsID.push(beam.id)\r\n                    beam.endConnectedNodeID = node.id\r\n                    beam.name = beam.name + node.name\r\n                    Farm.moveBeamEnd(beam, node.x, node.y)\r\n                    this.setState(state => ({\r\n                        nodes: state.nodes.map(item => {\r\n                            if (item.id === node.id) return node\r\n                            return item\r\n                        }),\r\n                        beams: state.beams.map(item => {\r\n                            if (item.id === beam.id) return beam\r\n                            return item\r\n                        })\r\n                    }))\r\n                    return true\r\n                }\r\n                return false\r\n            }\r\n            default: return false\r\n        }\r\n    }\r\n    addForceToNode = (node: FarmNode, options?: IForce) => {\r\n        let force: Force = createForce({\r\n            ...options,\r\n            nodeID: node.id,\r\n        })\r\n\r\n        if (force.angle === 0) node.forceX = force\r\n        else node.forceY = force\r\n        this.setState(state => ({\r\n            nodes: state.nodes.map(item => {\r\n                if (node && item.id === node.id) return node\r\n                return item\r\n            }),\r\n        }))\r\n        return force\r\n\r\n    }\r\n    moveNode = (_node: FarmNode, x: number, y: number, ) => {\r\n\r\n        if (_node.isStatic) return false\r\n        const oldNode = this.state.nodes.find(item => item.x === x && item.y === y)\r\n        if (!oldNode) {\r\n            const node: FarmNode = { ..._node, x, y }\r\n            const beamsOfNode = this.state.beams.filter(item => (node && node.beamsID.includes(item.id)))\r\n            beamsOfNode.forEach(item => {\r\n                if (node) {\r\n                    const beam: Beam = { ...item }\r\n                    if (beam.startConnectedNodeID === node.id) Farm.moveEntity(beam, x, y)\r\n                    else if (item.endConnectedNodeID === node.id) Farm.moveBeamEnd(beam, x, y)\r\n                    this.setState(state => ({\r\n                        beams: state.beams.map(item => {\r\n                            if (item.id === beam.id) return beam\r\n                            return item\r\n                        })\r\n                    }))\r\n                }\r\n            })\r\n            this.setState(state => ({\r\n                nodes: state.nodes.map(item => {\r\n                    if (item.id === node.id) return node\r\n                    return item\r\n                }),\r\n            }))\r\n\r\n            return true\r\n        }\r\n        return false\r\n    }\r\n    moveBeam = (beam: Beam, x: number, y: number, place: 'start' | 'end' = 'end') => {\r\n\r\n        beam = { ...beam }\r\n        if (place === 'start') Farm.moveEntity(beam, x, y)\r\n        else Farm.moveBeamEnd(beam, x, y)\r\n        this.setState(state => ({\r\n            beams: state.beams.map(item => {\r\n                if (beam && item.id === beam.id) return beam\r\n                return item\r\n            })\r\n        }))\r\n        return true\r\n    }\r\n    deleteEntity = (id: string) => {\r\n        let nodes: FarmNode[] = [...this.state.nodes]\r\n        let beams: Beam[] = [...this.state.beams]\r\n        let entity: Beam | FarmNode | undefined =\r\n            this.state.beams.find(item => item.id === id) ||\r\n            this.state.nodes.find(item => item.id === id)\r\n        if (instanceOfNode(entity)) {\r\n            if (entity.isStatic) return false\r\n            const beamsOfNode = beams.filter(item => (instanceOfNode(entity) && entity.beamsID.includes(item.id)))\r\n            beamsOfNode.forEach(beam => {\r\n                if (instanceOfNode(entity)) {\r\n                    let _node: FarmNode | undefined\r\n                    if (beam.startConnectedNodeID === entity.id) _node = nodes.find(item => item.id === beam.endConnectedNodeID)\r\n                    else _node = nodes.find(item => item.id === beam.startConnectedNodeID)\r\n                    if (_node) {\r\n                        _node = { ..._node }\r\n                        _node.beamsID = _node.beamsID.filter(id => id !== beam.id)\r\n                        nodes = nodes.map(item => {\r\n                            if (_node && item.id === _node.id) return _node\r\n                            return item\r\n                        })\r\n                    }\r\n                    beams = beams.filter(i => i.id !== beam.id)\r\n                }\r\n            })\r\n            nodes = nodes.filter(i => (instanceOfNode(entity) && i.id !== entity.id))\r\n            nodes = Farm.setNodesName(nodes)\r\n            beams = Farm.setBeamsName(beams, nodes)\r\n            this.setState({\r\n                nodes,\r\n                beams\r\n            })\r\n            return true\r\n\r\n        } else if (instanceOfBeam(entity)) {\r\n            [entity.startConnectedNodeID, entity.endConnectedNodeID].forEach(nodeID => {\r\n                if (nodeID && nodeID.length > 0) {\r\n                    let _node = nodes.find(item => item.id === nodeID)\r\n                    if (_node && instanceOfBeam(entity)) {\r\n                        _node = { ..._node }\r\n                        _node.beamsID = _node.beamsID.filter(id => {\r\n                            if (entity) return id !== entity.id\r\n                            return false\r\n                        })\r\n                        nodes = nodes.map(item => {\r\n                            if (_node && item.id === _node.id) return _node\r\n                            return item\r\n                        })\r\n                    }\r\n                }\r\n            })\r\n            beams = beams.filter(i => (instanceOfBeam(entity) && i.id !== entity.id))\r\n            this.setState({\r\n                nodes, beams\r\n            })\r\n            return true\r\n        }\r\n\r\n        return false\r\n    }\r\n    async calculateFarm() {\r\n        let nodes = this.state.nodes.filter(node => (node.beamsID.length !== 0 || node.isStatic))\r\n        nodes = Farm.sortNodes(nodes)\r\n        const beams = Farm.setBeamsName(this.state.beams, nodes)\r\n        this.setState({\r\n            nodes,\r\n            beams\r\n        })\r\n        try {\r\n            const {P, LinkNodes = []} = await Farm.calculateFarm(nodes, beams)\r\n            P.forEach((row, i) => {\r\n                const link = (LinkNodes[i].x + 1) + \" - \" + (LinkNodes[i].y + 1)\r\n                console.log(`${i+1} - [${link}] P1: ${row[0]}; P2: ${row[1]}; `);                \r\n            })\r\n\r\n        } catch (e) {\r\n            console.error(e);\r\n        }\r\n    }\r\n    defautlFarm() {\r\n        const { nodes, beams } = testFarm()\r\n        localStorage.removeItem('nodes')\r\n        localStorage.removeItem('beams')\r\n        this.setState({\r\n            nodes,\r\n            beams,\r\n        })\r\n    }\r\n    saveFarm() {\r\n        const { nodes, beams } = this.state\r\n        localStorage.setItem('nodes', JSON.stringify(nodes))\r\n        localStorage.setItem('beams', JSON.stringify(beams))\r\n    }\r\n    render() {\r\n        return (\r\n            <UIFarm\r\n                {...this.state}\r\n                {...this}\r\n            />\r\n        )\r\n    }\r\n}\r\nexport default FarmContainer","import { FarmNode, NodeFixation } from \"src/models/Farm/ModelNode\";\r\nimport { Beam } from \"src/models/Farm/ModelBeam\";\r\nimport { Farm } from \"src/models/Farm/ModelFarm\";\r\n\r\nexport default () => {\r\n    let nodes: FarmNode[] = []\r\n    let beams: Beam[] = []\r\n\r\n    nodes = Farm.createNodes(\r\n        [\r\n            {\r\n                x: 1000,\r\n                y: 1000,\r\n                fixation: NodeFixation.XY,\r\n            },\r\n            {\r\n                x: 1450,\r\n                y: 1000,\r\n                fixation: NodeFixation.Y,\r\n            }\r\n        ],\r\n        [\r\n            {\r\n                x: 1150,\r\n                y: 1000,\r\n                angle: 90,\r\n                value: 9000\r\n            }\r\n        ],\r\n        [\r\n            // {\r\n            //     x: 1000,\r\n            //     y: 1000\r\n            // }, {\r\n            //     x: 700,\r\n            //     y: 700\r\n            // }, {\r\n            //     x: 1000,\r\n            //     y: 700\r\n            // }\r\n        ]\r\n    )\r\n\r\n    return { nodes, beams }\r\n}","export const navPath = {\r\n    HOME_PAGE: '/',\r\n    FARM_PAGE: '/farm'\r\n}\r\n\r\n","import * as React from 'react'\r\nimport { consts } from 'src/static';\r\nimport { Typography, Button, Theme, createStyles } from '@material-ui/core';\r\nimport { Link } from 'react-router-dom';\r\nimport { navPath } from 'src/navigation';\r\nimport { WithStyles, withStyles } from '@material-ui/styles';\r\n\r\n\r\nconst styles = (theme: Theme) => createStyles({\r\n\troot:{\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"column\",\r\n\t\talignItems: \"center\",\r\n\t\tjustifyContent: \"flex-start\",\r\n\r\n\t},\r\n\tlogo: {\r\n\t\twidth: \"20%\",\r\n\t\theight:'20%'\r\n\t},\r\n\ttitle: {\r\n\t\tpadding: 40\r\n\t},\r\n\tdescripton: {\r\n\t\tpadding: 40\r\n\t},\r\n\tbtn: {\r\n\r\n\t}\r\n})\r\n\r\n\r\nconst HomeHeader = ({classes} : WithStyles<typeof styles>) => {\r\n\treturn (\r\n\t\t<header className={classes.root}>\r\n\t\t\t<img \r\n\t\t\t\tsrc={consts.bridgeIcon_2} \r\n\t\t\t\talt=\"logo\" \r\n\t\t\t\tclassName={classes.logo} \r\n\t\t\t/>\r\n\t\t\t<Typography variant=\"h3\" className={classes.title}>\r\n\t\t\t\t{consts.title}\r\n\t\t\t</Typography>\r\n\t\t\t<Typography variant=\"subtitle1\" align=\"center\" className={classes.descripton}>\r\n\t\t\t\t{consts.description}\r\n\t\t\t</Typography>\r\n\t\t\t<Button\r\n\t\t\t\tcomponent={Link}\r\n\t\t\t\tto={navPath.FARM_PAGE}\r\n\t\t\t\tvariant=\"contained\"\r\n\t\t\t\tsize=\"large\"\r\n\t\t\t\tcolor=\"secondary\"\r\n\t\t\t>\r\n\t\t\t\tПоехали\r\n\t\t\t</Button>\r\n\t\t</header>\r\n\r\n\t)\r\n}\r\n\r\nexport default withStyles(styles)(HomeHeader)","import * as React from 'react'\r\nimport { IHomeStore } from 'src/store/home/homeReducer';\r\nimport { Theme, WithStyles, createStyles, withStyles } from '@material-ui/core'\r\nimport { HomeHeader } from './components';\r\n\r\nconst styles = (theme: Theme) => createStyles({\r\n\troot: {\r\n\t\twidth:'100%',\r\n\t\tminHeight:'100%',\r\n\t\tdisplay:'block',\r\n\t\tbackground: theme.palette.background.default,\r\n\t\tpadding: theme.spacing(4)\r\n\t}\r\n})\r\n\r\nexport interface IHomeProps extends IHomeStore, WithStyles<typeof styles> {\r\n\tsetTitle: (title: string) => void,\r\n}\r\n\r\nclass Home extends React.Component<IHomeProps> {\r\n\trender() {\r\n\t\tconst { classes } = this.props\r\n\t\treturn (\r\n\t\t\t<div className={classes.root}>\r\n\t\t\t\t<HomeHeader/>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default withStyles(styles)(Home)","import {connect} from 'react-redux'\r\nimport Home from './home'\r\nimport { AppState } from 'src/store';\r\nimport { Dispatch, bindActionCreators } from 'redux';\r\nimport * as homeActions from 'src/store/home/homeActions';\r\n\r\nconst mapStateToProps =  ({home}: AppState) => ({\r\n    title:home.title,\r\n})\r\nconst mapDispatchToProps = (dispatch: Dispatch) => bindActionCreators({...homeActions}, dispatch)\r\n\r\nexport default connect(mapStateToProps,mapDispatchToProps)(Home);","import * as React from 'react';\r\nimport { Switch, Route } from 'react-router-dom';\r\nimport Helment from 'react-helmet'\r\nimport {CssBaseline} from '@material-ui/core';\r\nimport { ThemeProvider } from '@material-ui/styles';\r\nimport { FarmPage, Home } from './pages'\r\nimport { navPath } from './navigation'\r\nimport {consts} from './static/';\r\nimport { theme } from './utils/UI';\r\n\r\ninterface IAppProps {}\r\n\r\nclass App extends React.Component<IAppProps> {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<Helment\r\n\t\t\t\t\thtmlAttributes={{\"leng\":\"en\"}}\r\n\t\t\t\t\ttitleTemplate=\"Truss - %s\"\r\n\t\t\t\t\tdefaultTitle={consts.title}\r\n\t\t\t\t\tlink={[\r\n\t\t\t\t\t\t{\"rel\":\"shortcut icon\", \"href\":consts.bridgeIcon_2},\r\n\t\t\t\t\t\t{\"rel\":\"image_src\", \"href\":consts.airBridge},\r\n\t\t\t\t\t\t{\"rel\":\"stylesheet\", \"href\":'https://fonts.googleapis.com/css?family=Roboto:300,400,500'},\r\n\t\t\t\t\t\t{\"rel\":\"stylesheet\", \"href\":'https://fonts.googleapis.com/icon?family=Material+Icons'}\r\n\t\t\t\t\t]}\r\n\t\t\t\t\tmeta={[\r\n\t\t\t\t\t\t{\"charSet\":\"utf-8\"},\r\n\t\t\t\t\t\t{\"name\": \"viewport\", \"content\": \"minimum-scale=1, initial-scale=1, width=device-width, shrink-to-fit=no\" },\r\n\t\t\t\t\t\t{\"name\": \"theme-color\", \"content\": \"#000000\" },\r\n\t\t\t\t\t\t{\"name\": \"description\", \"content\": consts.description },\r\n\t\t\t\t\t\t{\"property\": \"og:type\", \"content\": \"website\"},\r\n\t\t\t\t\t\t{\"property\": \"og:title\", \"content\": consts.title},\r\n\t\t\t\t\t\t{\"property\": \"og:image\", \"content\": consts.airBridge},\r\n\t\t\t\t\t\t{\"property\": \"vk:image\", \"content\": consts.airBridge},\r\n\t\t\t\t\t\t{\"property\": \"twitter:image\", \"content\": consts.airBridge},\r\n\t\t\t\t\t\t{\"property\": \"og:url\", \"content\": consts.url},\r\n\t\t\t\t\t]}\r\n\r\n\t\t\t\t/>\r\n\t\t\t\t<CssBaseline/>\r\n\t\t\t\t<ThemeProvider theme={theme}>\r\n\t\t\t\t\t<Switch>\r\n\t\t\t\t\t\t<Route path={navPath.HOME_PAGE} component={Home} exact />\r\n\t\t\t\t\t\t<Route path={navPath.FARM_PAGE} component={FarmPage} />\r\n\t\t\t\t\t</Switch>\r\n\r\n\t\t\t\t</ThemeProvider>\r\n\r\n\t\t\t</React.Fragment>\r\n\t\t)\r\n\t}\r\n}\r\n\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux'\r\nimport { history } from './utils';\r\nimport store from './store';\r\nimport { HashRouter, Router } from 'react-router-dom';\r\nimport App from './App';\r\nimport './index.css';\r\n\r\nconst isGitHubPages = process.env.REACT_APP_GHP || 'false';\r\n\r\nconst Root = () => {    \r\n    if (isGitHubPages === 'true') return (\r\n        <HashRouter>\r\n            <App />\r\n        </HashRouter>\r\n    )\r\n    else return (\r\n        <Router history={history}>\r\n            <App />\r\n        </Router>\r\n    )\r\n}\r\n\r\n\r\nReactDOM.render(\r\n    <Provider store={store}>\r\n        <Root/>\r\n    </Provider>,\r\n    document.getElementById('root')\r\n);"],"sourceRoot":""}