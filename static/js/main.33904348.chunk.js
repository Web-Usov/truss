(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{138:function(e,t,n){e.exports=n.p+"static/media/ogImage.0619e300.png"},139:function(e,t,n){e.exports=n.p+"static/media/icon.68e274b2.png"},140:function(e,t,n){e.exports=n.p+"static/media/bridge.e53bced3.png"},141:function(e,t,n){e.exports=n.p+"static/media/airBridge.7d581a65.png"},142:function(e,t,n){e.exports=n.p+"static/media/fixation.dd261ca6.svg"},20:function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"url",function(){return p}),n.d(t,"title",function(){return v}),n.d(t,"description",function(){return b}),n.d(t,"favicon",function(){return g}),n.d(t,"UI_cellSize",function(){return y}),n.d(t,"UI_nodeSize",function(){return E}),n.d(t,"UI_beamSize",function(){return k}),n.d(t,"MMinCell",function(){return x}),n.d(t,"SizeKoef",function(){return O}),n.d(t,"sidebarWidth",function(){return j}),n.d(t,"canvasWidth",function(){return S}),n.d(t,"canvasHeight",function(){return w});var a=n(130),r=n.n(a),o=n(138),i=n.n(o);n.d(t,"ogImage",function(){return i.a});var c=n(139),s=n.n(c);n.d(t,"bridgeIcon_1",function(){return s.a});var l=n(140),u=n.n(l);n.d(t,"bridgeIcon_2",function(){return u.a});var d=n(141),m=n.n(d);n.d(t,"airBridge",function(){return m.a});var f=n(142),h=n.n(f);n.d(t,"FixationIcon",function(){return h.a});var p="https://web-usov.github.io/truss",v="Truss - \u0444\u0435\u0440\u043c\u0430 \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e",b="\u0424\u0435\u0440\u043c\u0430 (farm \u0438\u043b\u0438 truss) \u2014 \u0441\u0442\u0435\u0440\u0436\u043d\u0435\u0432\u0430\u044f \u0441\u0438\u0441\u0442\u0435\u043c\u0430 \u0432 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0439 \u043c\u0435\u0445\u0430\u043d\u0438\u043a\u0435, \u043e\u0441\u0442\u0430\u044e\u0449\u0430\u044f\u0441\u044f \u0433\u0435\u043e\u043c\u0435\u0442\u0440\u0438\u0447\u0435\u0441\u043a\u0438 \u043d\u0435\u0438\u0437\u043c\u0435\u043d\u044f\u0435\u043c\u043e\u0439 \u043f\u043e\u0441\u043b\u0435 \u0437\u0430\u043c\u0435\u043d\u044b \u0435\u0451 \u0436\u0451\u0441\u0442\u043a\u0438\u0445 \u0443\u0437\u043b\u043e\u0432 \u0448\u0430\u0440\u043d\u0438\u0440\u043d\u044b\u043c\u0438.",g=r.a.resolve(e,"favicon.ico"),y=45,E=y/3,k=y/7,x=200,O=x/y,j=240,S=2500,w=1500}.call(this,"/")},216:function(e,t,n){e.exports=n(397)},301:function(e,t){},302:function(e,t){},303:function(e,t){},307:function(e,t){},309:function(e,t){},344:function(e,t){},345:function(e,t){},396:function(e,t,n){},397:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"UIModes",function(){return s}),n.d(a,"theme",function(){return E}),n.d(a,"getNodeColor",function(){return k}),n.d(a,"getNodeStorkeColor",function(){return x}),n.d(a,"getNodeStorkeWidth",function(){return O}),n.d(a,"getBeamColor",function(){return j}),n.d(a,"nodeMouseEnter",function(){return S}),n.d(a,"nodeMouseLeave",function(){return w}),n.d(a,"beamMouseEnter",function(){return I}),n.d(a,"beamMouseLeave",function(){return N});var r={};n.r(r),n.d(r,"mainBackGround",function(){return C}),n.d(r,"node",function(){return M}),n.d(r,"staticNode",function(){return D}),n.d(r,"fixedNode",function(){return B}),n.d(r,"beam",function(){return _});var o={};n.r(o),n.d(o,"defaultState",function(){return L}),n.d(o,"reducer",function(){return T});var i={};n.r(i),n.d(i,"setTitle",function(){return q});var c={};n.r(c),n.d(c,"defaultHomeState",function(){return J}),n.d(c,"reducer",function(){return $});var s,l=n(0),u=n.n(l),d=n(23),m=n.n(d),f=n(108),h=n(42),p=(Object(h.a)(),n(18)),v=n(16),b=n(20),g=n(209);!function(e){e[e.none=0]="none",e[e.move=1]="move",e[e.addNode=2]="addNode",e[e.addBeam=3]="addBeam",e[e.addBeamStart=4]="addBeamStart",e[e.delete=5]="delete"}(s||(s={}));var y,E=Object(g.a)({palette:{primary:{dark:"#0A4467",main:"#1e779e",light:"#51A8D6"},secondary:{dark:"#a83e19",main:"#f15a24",light:"#F39B7C"},background:{default:"linear-gradient(35deg, #6863bf 0%, #067d93 50%, #e68a68 100%)"}}}),k=function(e){return e.isStatic?e.fixation?r.fixedNode:r.staticNode:r.node},x=function(e,t){switch(t){case s.move:return e.isStatic?E.palette.secondary.dark:E.palette.primary.light;case s.addBeam:case s.addBeamStart:return E.palette.primary.light;default:return E.palette.secondary.main}},O=function(e,t){switch(t){case s.move:return e.isStatic?0:2;case s.addBeam:case s.addBeamStart:return 2;default:return 0}},j=function(e){return r.beam},S=function(e,t,n){var a=e.target.getStage();switch(n){case s.delete:if(t.isStatic){a.container().style.cursor="default";break}a.container().style.cursor="pointer";break;case s.none:a.container().style.cursor="pointer";break;case s.addBeam:case s.addBeamStart:a.container().style.cursor="crosshair";break;case s.move:if(t.isStatic){a.container().style.cursor="default";break}a.container().style.cursor="move"}},w=function(e){var t=e.target.getStage();t&&(t.container().style.cursor="default")},I=function(e,t,n){var a=e.target.getStage();switch(n){case s.delete:case s.none:a.container().style.cursor="pointer"}},N=function(e){var t=e.target.getStage();t&&(t.container().style.cursor="default")},C="#09B4D3",M=E.palette.secondary.main,D=E.palette.secondary.light,B=E.palette.secondary.dark,_=E.palette.secondary.light,z=n(448),F=function(){function e(){Object(p.a)(this,e)}return Object(v.a)(e,null,[{key:"angleBePoints",value:function(e,t,n,a){return Math.atan2(-t+a,-e+n)/Math.PI}},{key:"lengthBePoints",value:function(e,t,n,a){return Math.sqrt(Math.pow(e-n,2)+Math.pow(t-a,2))}},{key:"cellX",value:function(e){return Math.round(e/b.UI_cellSize)*b.UI_cellSize}},{key:"cellY",value:function(e){return Math.round(e/b.UI_cellSize)*b.UI_cellSize}},{key:"signum",value:function(e){return e>0?1:e<0?-1:0}},{key:"multMatrxi",value:function(e,t){var n=e.length,a=t.length,r=e[0].length,o=t[0].length,i=[];if(r!==a)throw new Error("\u0420\u0430\u0437\u043c\u0435\u0440\u043d\u043e\u0441\u0442\u044c \u043c\u0430\u0442\u0440\u0438\u0446 \u043d\u0435 \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u043f\u0435\u0440\u0435\u0443\u043c\u043d\u043e\u0436\u0438\u0442\u044c \u0438\u0445");for(var c=0;c<n;c++){for(var s=[],l=0;l<o;l++)s.push(0);i.push(s)}for(var u=0;u<o;u++)for(var d=0;d<n;d++){for(var m=0,f=0;f<a;f++)m+=e[d][f]+t[f][u];i[d][u]=m}return i}},{key:"multMatrxiV2",value:function(e,t){var n=[];try{n=z.a(e,t)}catch(a){console.error("multMatrxiV2:",a)}return n}}]),e}(),X=n(58),Y=n(31),U=n(6),L={nodes:[],beams:[],forces:[]},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_NODE":var n=t.node;return Object(U.a)({},e,{nodes:[].concat(Object(Y.a)(e.nodes),[n])});case"ADD_BEAM":var a=t.beam;return Object(U.a)({},e,{beams:[].concat(Object(Y.a)(e.beams),[a])});case"ADD_FORCE":var r=t.force;return Object(U.a)({},e,{forces:[].concat(Object(Y.a)(e.forces),[r])});case"EDIT_NODE":return Object(U.a)({},e,{nodes:e.nodes.map(function(e){return e.id===t.node.id?Object(U.a)({},e,t.node):e})});case"EDIT_BEAM":return Object(U.a)({},e,{beams:e.beams.map(function(e){return e.id===t.beam.id?Object(U.a)({},e,t.beam):e})});case"DELETE_ENTITY":return{beams:e.beams.filter(function(e){return e.id!==t.id}),nodes:e.nodes.filter(function(e){return e.id!==t.id}),forces:e.forces.filter(function(e){return e.id!==t.id})};default:return e}},K=n(59),W=n.n(K),P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.x,n=e.y,a=e.name,r=e.angle,o=e.id,i=e.newX,c=e.newY,s=e.type,l=e.withNewPosition,u={id:o||W()(),x:t||0,y:n||0,angle:r||0,name:a||"",newX:i||t||0,newY:c||n||0,type:s||"entity",withNewPosition:l||!1};return u.name=a||u.id,u},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.angle,n=e.nodeID,a=e.value,r=P(e);return Object(U.a)({},r,{type:"force",angle:t||0,nodeID:n||"",value:a||0})},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.length,n=e.startConnectedNodeID,a=e.endConnectedNodeID,r=e.endX,o=e.endY,i=P(e);return Object(U.a)({},i,{type:"beam",length:t||0,startConnectedNodeID:n,endConnectedNodeID:a,endX:r||i.x||0,endY:o||i.y||0})},A=function(e){return e&&"beam"===e.type};!function(e){e[e.None=0]="None",e[e.X=1]="X",e[e.Y=2]="Y",e[e.XY=3]="XY",e[e.YX=3]="YX"}(y||(y={}));var R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.beamsID,n=e.forceX,a=e.forceY,r=e.isStatic,o=e.fixation,i=P(e);return Object(U.a)({},i,{type:"node",beamsID:t||[],forceX:n,forceY:a,isStatic:r||!1,fixation:o||y.None})},G=function(e){return e&&"node"===e.type},q=function(e){return{type:"SET_TITLE",title:e}},J={title:"Hello, world!"},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TITLE":return Object(U.a)({},e,{title:t.title});default:return e}},Q=n(198),Z=Object(X.c)({farm:o.reducer,home:c.reducer}),ee=Object(X.d)(Z,Object(X.a)(Q.a)),te=n(65),ne=n(61),ae=n(30),re=n(28),oe=n(29),ie=n(199),ce=n.n(ie),se=n(455),le=n(447),ue=n(74),de=n.n(ue),me=n(100),fe=n(17),he=n(36),pe=b.UI_nodeSize,ve=function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(ae.a)(this,Object(re.a)(t).call(this,e))).viewForce=n.viewForce.bind(Object(fe.a)(n)),n}return Object(oe.a)(t,e),Object(v.a)(t,[{key:"shouldComponentUpdate",value:function(e){return e.node!==this.props.node||e.mode!==this.props.mode||e.selected!==this.props.selected}},{key:"viewForce",value:function(e){return l.createElement(l.Fragment,null,l.createElement(he.Arrow,{points:[0,0,b.UI_cellSize,0],stroke:a.theme.palette.grey[300],strokeWidth:pe/3,shadowBlur:2,pointerLength:b.UI_cellSize/10,pointerWidth:b.UI_cellSize/10,hitStrokeWidth:2*pe,rotation:e.value>0?e.angle:180+e.angle}),l.createElement(he.Text,{x:0===e.angle?e.value>0?b.UI_cellSize/3:-b.UI_cellSize:b.UI_cellSize/3,y:90===e.angle?e.value>0?b.UI_cellSize/3:-b.UI_cellSize/2:-b.UI_cellSize/1.5,text:e.value+"H"}))}},{key:"viewFixation",value:function(e){return l.createElement(he.Group,{x:0,y:0,rotation:e},l.createElement(he.Line,{points:[0,0,0,b.UI_cellSize,-b.UI_cellSize/2,b.UI_cellSize,b.UI_cellSize/2,b.UI_cellSize],stroke:a.theme.palette.grey[300],strokeWidth:pe/4,shadowBlur:2}),l.createElement(he.Circle,{radius:pe/2,fill:a.theme.palette.grey[500],x:0,y:b.UI_cellSize-pe/1.7}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.onClick,r=t.mode,o=t.selected,i=t.node;return l.createElement(he.Group,{x:i.x/b.SizeKoef,y:i.y/b.SizeKoef,_useStrictMode:!0,onClick:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return n(e,i)})},i.forceX&&this.viewForce(i.forceX),i.forceY&&this.viewForce(i.forceY),i.fixation===y.X&&this.viewFixation(90),i.fixation===y.Y&&this.viewFixation(0),i.fixation===y.XY&&this.viewFixation(90),i.fixation===y.YX&&this.viewFixation(0),l.createElement(he.Circle,{radius:pe,x:0,y:0,fill:a.getNodeColor(i),shadowBlur:o?8:2,stroke:a.getNodeStorkeColor(i,r),strokeWidth:a.getNodeStorkeWidth(i,r),hitStrokeWidth:2*pe}),l.createElement(he.Text,{x:-pe,y:-pe/2-1,align:"center",fontSize:18,fill:"#fff",shadowBlur:8,fontFamily:"Trebuchet MS",width:2*pe,verticalAlign:"middle",text:i.name}),l.createElement(he.Circle,{radius:pe,x:0,y:0,onDragEnd:function(e){e.target.to({x:0,y:0})},hitStrokeWidth:2*pe,draggable:r===s.move&&!i.isStatic,onMouseEnter:function(e){return a.nodeMouseEnter(e,i,r)},onMouseLeave:function(e){return a.nodeMouseLeave(e)},onDragMove:function(t){return e.props.drag(t,i)}}))}}]),t}(l.Component),be=n(131),ge=function(e){function t(){return Object(p.a)(this,t),Object(ae.a)(this,Object(re.a)(t).apply(this,arguments))}return Object(oe.a)(t,e),Object(v.a)(t,[{key:"shouldComponentUpdate",value:function(e){var t=this.props,n=t.beam,a=t.mode,r=t.selected;return e.beam!==n||e.mode!==a||e.selected!==r}},{key:"render",value:function(){var e=this.props,t=e.onClick,n=e.mode,r=e.selected,o=e.beam,i=b.UI_beamSize;return l.createElement(be.Line,{points:[o.x/b.SizeKoef,o.y/b.SizeKoef,o.endX/b.SizeKoef,o.endY/b.SizeKoef],stroke:a.getBeamColor(o),strokeWidth:i,shadowBlur:r?8:2,hitStrokeWidth:4*i,onClick:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return t(e,o)}),onMouseEnter:function(e){return a.beamMouseEnter(e,o,n)},onMouseLeave:function(e){return a.beamMouseLeave(e)}})}}]),t}(l.Component),ye=n(454),Ee=n(449),ke=n(7),xe=function(e){var t=e.widthCell,n=e.heightCell,a=e.heightBox,r=e.widthBox,o=r/t,i=a/n;return l.createElement(l.Fragment,null,function(){for(var e=[],n=0;n<o;n++)e.push(l.createElement(he.Line,{points:[n*t,0,n*t,a],stroke:"#ddd",strokeWidth:1,key:n}));return e}(),function(){for(var e=[],t=0;t<i;t++)e.push(l.createElement(he.Line,{points:[0,t*n,r,t*n],stroke:"#ddd",strokeWidth:1,key:t}));return e}())},Oe=n(200),je=n.n(Oe),Se=Object(ke.a)(function(e){return Object(ye.a)({root:{backgroundColor:"#ddd",display:"flex",alignItems:"center",justifyContent:"center"},stage:{backgroundColor:"#fff",boxShadow:e.shadows[2],borderRadius:8}})})(function(e){var t=e.classes,n=e.stage,a=e.stageHeight,r=e.stageWidth,o=e.onClick,i=e.onMouseMove,c=e.onDrag,s=e.beams,u=e.nodes,d=e.uiMode,m=e.selectedEntity;return l.createElement(je.a,{autoHide:!0},l.createElement(Ee.a,{style:{width:r+2*b.sidebarWidth,height:a+b.sidebarWidth},className:t.root},l.createElement(he.Stage,{height:a,width:r,style:{height:a,width:r},className:t.stage,onClick:o,onMouseMove:i,ref:n},l.createElement(he.Layer,{className:"layer"},l.createElement(xe,{heightCell:b.UI_cellSize,widthCell:b.UI_cellSize,heightBox:a,widthBox:r}),s.map(function(e){return l.createElement(ge,{key:e.id,beam:e,mode:d,onClick:o,selected:m===e})}),u.map(function(e){return l.createElement(ve,{key:e.id,node:e,mode:d,drag:c,onClick:o,selected:m===e})})))))}),we=n(428),Ie=n(451),Ne=n(109),Ce=n(422),Me=n(452),De=n(423),Be=n(424),_e=function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(ae.a)(this,Object(re.a)(t).call(this,e))).state={open:!0,viewTooltip:!1},n.switchDrawer=n.switchDrawer.bind(Object(fe.a)(n)),n}return Object(oe.a)(t,e),Object(v.a)(t,[{key:"componentWillMount",value:function(){if(this.props.title){var e=localStorage.getItem("Sidebar_state:"+this.props.title);e&&this.setState({open:"true"===e})}}},{key:"switchDrawer",value:function(){localStorage.setItem("Sidebar_state:"+this.props.title,this.state.open?"false":"true"),this.setState({open:!this.state.open,viewTooltip:!1})}},{key:"changeViewtooltip",value:function(e){this.setState({viewTooltip:e})}},{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=t.children,r=t.title,o=t.btnIcon,i=t.anchor,c=this.state,s=c.open,u=c.viewTooltip;return l.createElement(l.Fragment,null,l.createElement(Ie.a,{className:n.drawer,variant:"persistent",open:s,anchor:i,classes:{paper:n.drawerPaper}},l.createElement("div",{className:n.toolbar}),l.createElement(Ne.a,{variant:"body2",align:"center",className:n.title},r),l.createElement(Ce.a,null),a),l.createElement(Me.a,{title:r,open:void 0!==r&&u&&!s,onOpen:function(){return e.changeViewtooltip(!0)},onClose:function(){return e.changeViewtooltip(!1)}},l.createElement(De.a,{style:{left:"left"===i?s?b.sidebarWidth+15:15:"auto",right:"right"===i?s?b.sidebarWidth+15:15:"auto"},color:"secondary",size:"medium",className:n.toogleIcon,onClick:this.switchDrawer},s?l.createElement(Be.a,null):o)))}}]),t}(l.PureComponent),ze=Object(ke.a)(function(e){return Object(ye.a)({drawer:{position:"relative"},drawerPaper:{width:b.sidebarWidth},toogleIcon:{position:"absolute",top:e.spacing(10),zIndex:e.zIndex.drawer+1},title:{padding:e.spacing(1)},toolbar:e.mixins.toolbar})})(_e),Fe=n(4),Xe=n(425),Ye=n(426),Ue=Object(ke.a)(function(e){return Object(ye.a)({appBar:{zIndex:e.zIndex.drawer+1},logo:{marginRight:e.spacing(4),marginLeft:e.spacing(2),"& img":{width:50,height:"auto"}}})})(function(e){var t=e.classes,n=e.children,a=e.className,r=e.color,o=e.position,i=e.withLogo,c=void 0===i||i;return l.createElement(Xe.a,{position:o||"fixed",className:Object(Fe.a)(t.appBar,a),color:r||"primary"},l.createElement(Ye.a,null,function(){if(c)return l.createElement(te.b,{to:"/",className:t.logo},l.createElement("img",{alt:"Logo Icon",src:b.bridgeIcon_2}))}(),n))}),Le=n(98),Te=n(206),Ke=n(427),We=n(21),Pe=Object(ke.a)(function(e){return Object(ye.a)({btn:{marginLeft:e.spacing(2),marginRight:e.spacing(2),borderRadius:"50% !important",border:"1px solid ".concat(Object(We.b)(e.palette.action.active,.2)," !important"),transition:e.transitions.create(["background-color","box-shadow","border"],{duration:e.transitions.duration.short}),color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.light,"&$selected":{backgroundColor:e.palette.secondary.main,"&:hover":{backgroundColor:e.palette.secondary.dark}},"&:hover":{backgroundColor:e.palette.secondary.dark,"@media (hover: none)":{backgroundColor:e.palette.secondary.main},"&$disabled":{backgroundColor:e.palette.secondary.main}}},selected:{}})})(function(e){var t=e.selected,n=e.classes,a=e.value,r=e.name,o=e.icon,i=Object(Te.a)(e,["selected","classes","value","name","icon"]);return l.createElement(Ke.a,Object.assign({key:r,value:a,className:Object(Fe.a)(n.btn,Object(Le.a)({},n.selected,t))},i),l.createElement(Me.a,{title:r},o))}),Ve=Object(ke.a)(function(e){return Object(ye.a)({root:{},btn:{marginLeft:e.spacing(2),marginRight:e.spacing(2)},grow:{flexGrow:1}})})(function(e){var t=e.classes,n=e.hundleSave,a=void 0===n?function(e){alert("\u0411\u0443\u0435\u0434\u0435\u0442 \u0440\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u043e \u0432 \u0431\u0443\u0434\u0443\u0449\u0435\u043c")}:n,r=e.hundleClear,o=void 0===r?function(e){alert("\u0411\u0443\u0435\u0434\u0435\u0442 \u0440\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u043e \u0432 \u0431\u0443\u0434\u0443\u0449\u0435\u043c")}:r,i=e.hundleCalculate,c=void 0===i?function(e){alert("\u0411\u0443\u0435\u0434\u0435\u0442 \u0440\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u043e \u0432 \u0431\u0443\u0434\u0443\u0449\u0435\u043c")}:i,s=e.disabled,u=void 0!==s&&s;return l.createElement(Ue,{className:t.root},l.createElement("div",{className:t.grow}),l.createElement(we.a,{color:"secondary",variant:"contained",className:t.btn,onClick:c,disabled:u},"\u0420\u0430\u0441\u0447\u0435\u0442"),l.createElement(we.a,{color:"secondary",variant:"contained",className:t.btn,onClick:a,disabled:u},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),l.createElement(we.a,{color:"secondary",variant:"contained",className:t.btn,onClick:o,disabled:u},"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"))}),He=n(429),Ae=n(430),Re=n(431),Ge=n(432),qe=n(435),Je=n(436),$e=n(433),Qe=n(434),Ze=n(437),et=n(438),tt=n(439),nt=n(440),at=function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(ae.a)(this,Object(re.a)(t).call(this,e))).state={open:!1,tabs:new Map},n.openTab=n.openTab.bind(Object(fe.a)(n)),n.viewListItem=n.viewListItem.bind(Object(fe.a)(n)),n}return Object(oe.a)(t,e),Object(v.a)(t,[{key:"componentWillMount",value:function(){var e=this.state.tabs;e.set("\u0423\u0437\u043b\u044b",!0),e.set("\u0421\u0442\u0435\u0440\u0436\u043d\u0438",!0),this.setState({tabs:new Map(e)})}},{key:"openTab",value:function(e){var t=this.state.tabs;t.set(e,!t.get(e)),this.setState({tabs:new Map(t)})}},{key:"viewListItem",value:function(e,t,n){var r=this,o=this.props,i=o.selectedEntity,c=o.classes,s=o.onSelect,u=this.state.tabs;return l.createElement(Ee.a,null,l.createElement(He.a,{button:!0,onClick:function(){return r.openTab(t)}},n&&l.createElement(Ae.a,null,l.createElement(Re.a,{badgeContent:e.length,color:"secondary"},n)),l.createElement(Ge.a,{primary:t}),u.get(t)?l.createElement($e.a,null):l.createElement(Qe.a,null)),l.createElement(qe.a,{in:u.get(t),timeout:"auto",unmountOnExit:!0},l.createElement(Je.a,{component:"div",disablePadding:!0},e.map(function(e){return l.createElement(He.a,{button:!0,className:c.nested,key:e.id,selected:i===e,onClick:function(t){return s(e)}},G(e)&&l.createElement(Ae.a,null,l.createElement(Ze.a,{style:{color:a.getNodeColor(e)}})),l.createElement(Ge.a,{primary:e.name}))}))),l.createElement(Ce.a,null))}},{key:"render",value:function(){var e=this.props,t=e.nodes,n=e.beams;return n.sort(function(e,t){return e.name>t.name?1:-1}),l.createElement(ze,{anchor:"left",title:"\u0421\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0430 \u043f\u0440\u043e\u0435\u043a\u0442\u0430",btnIcon:l.createElement(et.a,null)},this.viewListItem(t,"\u0423\u0437\u043b\u044b",l.createElement(tt.a,null)),this.viewListItem(n,"\u0421\u0442\u0435\u0440\u0436\u043d\u0438",l.createElement(nt.a,null)))}}]),t}(l.PureComponent),rt=Object(ke.a)(function(e){return Object(ye.a)({nested:{paddingLeft:e.spacing(6)}})})(at),ot=n(441),it=n(442),ct=n(443),st=function(){function e(){Object(p.a)(this,e)}return Object(v.a)(e,null,[{key:"addNode",value:function(e,t){if(e.length>12)return null;var n=t.x,a=t.y;if(t.x&&t.y&&(n=t.x*b.SizeKoef,a=t.y*b.SizeKoef),e.find(function(e){return e.x===n&&e.y===a}))return null;var r=W()();if(!r)return null;var o=e.length+1+"";return R(Object(U.a)({},t,{x:n,y:a,name:t.name||o,id:r}))}},{key:"addBeam",value:function(e,t){if(e.length>36)return null;var n=t.x,a=t.y;t.x&&t.y&&(n=t.x*b.SizeKoef,a=t.y*b.SizeKoef);var r=W()();return r?H(Object(U.a)({},t,{x:n,y:a,id:r})):null}},{key:"moveEntity",value:function(e,t,n){e.x=t*b.SizeKoef,e.y=n*b.SizeKoef,A(e)&&(e.length=this.getBeamLength(e))}},{key:"moveBeamEnd",value:function(e,t,n){e.endX=t*b.SizeKoef,e.endY=n*b.SizeKoef,e.length=this.getBeamLength(e)}},{key:"findOldBeam",value:function(e,t,n){return n.startConnectedNodeID===t.startConnectedNodeID&&n.endConnectedNodeID===e.id||n.startConnectedNodeID===e.id&&n.endConnectedNodeID===t.startConnectedNodeID||n.id===t.id&&n.startConnectedNodeID===e.id}},{key:"getBeamLength",value:function(e){return Math.round(F.lengthBePoints(e.x,e.y,e.endX,e.endY)-.5)}},{key:"setNodesName",value:function(e){return e.map(function(e,t){return Object(U.a)({},e,{name:t+1+""})})}},{key:"setBeamsName",value:function(e,t){var n=new Map;t.forEach(function(e){n.set(e.id,e)});var a="";return e.map(function(e){if(!e.startConnectedNodeID||!e.endConnectedNodeID)return e;var t=n.get(e.startConnectedNodeID),r=n.get(e.endConnectedNodeID);return t&&r?(a=t.name<r.name?"".concat(t.name," - ").concat(r.name):"".concat(r.name," - ").concat(t.name),Object(U.a)({},e,{name:a})):e}).sort(function(e,t){var n=e.name.split(" - "),a=Number(n[0]+n[1]),r=t.name.split(" - ");return a>Number(r[0]+r[1])?1:-1})}},{key:"sortNodes",value:function(e){var t=Object(Y.a)(e);return t=t.sort(function(e,t){return e.y<t.y?-1:e.y===t.y&&e.x<t.x?-1:1}),t=this.setNodesName(t)}},{key:"update",value:function(t,n){var a=Object(Y.a)(t),r=Object(Y.a)(n);return{nodes:a=e.setNodesName(a),beams:r=e.setBeamsName(r,a)}}},{key:"normalize",value:function(t,n){var a=Object(Y.a)(t);Object(Y.a)(n);return a=t.filter(function(e){return 0!==e.beamsID.length||e.isStatic}),{nodes:a=e.sortNodes(a),beams:e.setBeamsName(n,a)}}}]),e}(),lt=function(){function e(){Object(p.a)(this,e)}return Object(v.a)(e,null,[{key:"init",value:function(){var e=Object(me.a)(de.a.mark(function e(t,n){var a,r,o,i,c,s,l,u,d,m,f,h,p,v,b,g,E,k,x,O,j,S,w,I,N,C,M,D,B,_=this,z=arguments;return de.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=z.length>2&&void 0!==z[2]?z[2]:{},r=Object(Y.a)(t),o=Object(Y.a)(n),i=new Map,c=new Map,s=a.area||225,l=a.modUpr||72e3,u=a.zKoef||1,d=[],m=[],f=[],h=[],p=[],v=[],b=[],g=[],E=[],k=[],x=[],O=[],j=[],S=[],w=[],I=[],!r.find(function(e){return 0===e.beamsID.length&&e.isStatic})){e.next=26;break}throw new Error("\u041d\u0435 \u0432\u0441\u0435 \u0443\u0437\u043b\u044b\u0439 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u044b");case 26:for(e.prev=26,N=0,r.forEach(function(e){switch(i.set(e.id,e),d.push({x:e.x*u,y:e.y*u}),e.fixation){case y.X:N++,m.push({x:0,y:N}),e.forceY&&f.push(-e.forceY.value);break;case y.Y:N++,m.push({x:N,y:0}),e.forceX?f.push(-e.forceX.value):f.push(0);break;case y.YX:case y.XY:m.push({x:0,y:0});break;case y.None:N++,m.push({x:N,y:N+1}),N++,e.forceX?f.push(-e.forceX.value):f.push(0),e.forceY?f.push(-e.forceY.value):f.push(0)}}),o.forEach(function(e,t){c.set(e.id,e);var n=e.name.split(" - ");h.push({x:Number(n[0])-1,y:Number(n[1])-1});var a=st.getBeamLength(e)*u;p.push(a),v.push(_.Kmest_i(s,l,a));var r=_.Lambda_i(d[h[t].x],d[h[t].y],p[t]);b.push(r),g.push([[r.x,r.y,0,0],[0,0,r.x,r.y]]),E.push(_.Kobs_i(s,l,p[t],b[t])),k.push(_.IndexV_i(m[h[t].x],m[h[t].y]))}),C=h.length,M=m.length,D=Math.max.apply(Math,Object(Y.a)(m.map(function(e){var t=e.x,n=e.y;return Math.max(t,n)}))),x=this.K(D,k,E),O=this.SquareRoot(x,f),j=this.Vi(m,O),S=this.Vij(h,j),B=0;B<C;B++)w.push(this.V_i(g[B],S[B])),I.push(this.P_i(v[B],w[B]));return this.farmCalcDebug&&(console.log("NodeCoord, LinkNodes, NodeV",d,h,m),console.log("Kobs, Kmest",E,v),console.log("Lambda0, Lambda,",b,g),console.log("IndexV",k),console.log("N_Link, N_Nodes, N_DOF",C,M,D),console.log("K, Force",x,f),console.log("Va",O),console.log("Vi",j),console.log("Vij",S),console.log("V",w),console.log("P",I)),e.abrupt("return",{P:I,LinkNodes:h,Vi:j});case 42:throw e.prev=42,e.t0=e.catch(26),new Error(e.t0);case 45:case"end":return e.stop()}},e,this,[[26,42]])}));return function(t,n){return e.apply(this,arguments)}}()},{key:"Kmest_i",value:function(e,t,n){var a=e*t/n,r=[];return r.push([a,-a]),r.push([-a,a]),r}},{key:"Lambda_i",value:function(e,t,n){return{x:(t.x-e.x)/n,y:(t.y-e.y)/-n}}},{key:"Kobs_i",value:function(e,t,n,a){for(var r=e*t/n,o=[{x:a.x*a.x,y:a.x*a.y},{x:a.x*a.y,y:a.y*a.y}],i=[{x:-a.x*a.x,y:-a.x*a.y},{x:-a.x*a.y,y:-a.y*a.y}],c=[],s=[],l=0;l<2;l++)c.push({x1:o[l].x,y1:o[l].y,x2:i[l].x,y2:i[l].y}),s.push({x1:i[l].x,y1:i[l].y,x2:o[l].x,y2:o[l].y});return Array.prototype.concat(c,s).map(function(e){var t=e.x1,n=e.y1,a=e.x2,o=e.y2;return[t*r,n*r,a*r,o*r]})}},{key:"IndexV_i",value:function(e,t){return[e.x,e.y,t.x,t.y]}},{key:"K",value:function(e,t,n){for(var a=[],r=0;r<e;r++){for(var o=[],i=0;i<e;i++)o.push(0);a.push(o)}for(var c=0;c<t.length;c++)for(var s=0;s<4;s++){var l=t[c][s];if(0!==l)for(var u=0;u<4;u++){var d=t[c][u];0!==d&&(a[d-1][l-1]=a[d-1][l-1]+n[c][s][u])}}return a}},{key:"SquareRoot",value:function(e,t){if(e.length!==t.length)throw Error("SquareRoot - \u041c\u0430\u0441\u0441\u0438\u0432\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u043e\u0434\u0438\u043d\u0430\u043a\u043e\u0432\u043e\u0439 \u0434\u043b\u0438\u043d\u044b");for(var n=t.length,a=[],r=[],o=[],i=[],c=[],s=[],l=0;l<n+1;l++){for(var u=[],d=0;d<n;d++)u.push(0);c.push(u),a.push(u),r.push(0),o.push(0),i.push(0),s.push(0)}for(var m=1;m<=n;m++){for(var f=0;f<=n;f++)a[m][f]=e[m-1][f-1];r[m]=t[m-1]}i[1]=F.signum(a[1][1]),c[1][1]=Math.sqrt(Math.abs(a[1][1]));for(var h=2;h<=n;h++)c[1][h]=a[1][h]/(c[1][1]*i[1]);for(var p=2;p<=n;p++){for(var v=0,b=1;b<=p-1;b++)v+=c[b][p]*c[b][p]*i[b];i[p]=F.signum(a[p][p]-v),c[p][p]=Math.sqrt(Math.abs(a[p][p]-v));for(var g=1/(c[p][p]*i[p]),y=p+1;y<=n;y++){for(var E=0,k=1;k<=p-1;k++)E+=c[k][p]*i[k]*c[k][y];c[p][y]=g*(a[p][y]-E)}}s[1]=r[1]/(c[1][1]*i[1]);for(var x=2;x<=n;x++){for(var O=0,j=1;j<=x-1;j++)O+=c[j][x]*i[j]*s[j];s[x]=(r[x]-O)/(c[x][x]*i[x])}o[n]=s[n]/c[n][n];for(var S=n-1;S>=1;S--){for(var w=0,I=S+1;I<=n;I++)w+=c[S][I]*o[I];o[S]=(s[S]-w)/c[S][S]}var N=[];return o.forEach(function(e,t){0!==t&&N.push(e)}),N}},{key:"Vi",value:function(e,t){for(var n=[],a=0;a<e.length;a++){var r=Object(U.a)({},e[a]);r.x=0===r.x?0:t[r.x-1],r.y=0===r.y?0:t[r.y-1],n.push(r)}return n}},{key:"Vij",value:function(e,t){for(var n=[],a=0;a<e.length;a++){var r=e[a].x,o=e[a].y;n.push([[t[r].x],[t[r].y],[t[o].x],[t[o].y]])}return n}},{key:"V_i",value:function(e,t){return F.multMatrxiV2(e,t)}},{key:"P_i",value:function(e,t){return F.multMatrxiV2(e,t)}}]),e}();lt.farmCalcDebug=!0;var ut=function(){function e(){Object(p.a)(this,e)}return Object(v.a)(e,null,[{key:"firstPlacement",value:function(e,t){return{nodes:e.map(function(e){var t=e.x+Math.round(b.canvasWidth/3/b.UI_cellSize)*b.MMinCell,n=e.y+Math.round(b.canvasHeight/3/b.UI_cellSize)*b.MMinCell;return Object(U.a)({},e,{x:t,y:n})}),beams:t}}},{key:"createNodes",value:function(e,t,n){var a=0;return[].concat(e.map(function(e){return a++,R(Object(U.a)({},e,{isStatic:!0,name:a+""}))}),t.map(function(e){a++;var t=R(Object(U.a)({},e,{isStatic:!0,name:a+""}));return 0===e.angle?t.forceX=V({nodeID:t.id,value:e.value,angle:e.angle}):t.forceY=V({nodeID:t.id,value:e.value,angle:e.angle}),t}),n.map(function(e){return a++,R(Object(U.a)({},e,{name:a+""}))}))}}]),e}(),dt=function(e){var t=e.text;e.className;return l.createElement(l.Fragment,null,l.createElement(Ne.a,{variant:"subtitle2"},t),l.createElement(Ce.a,null))},mt=function(e){var t=e.text;e.className;return 0===t.length?l.createElement(l.Fragment,null):l.createElement(l.Fragment,null,t.map(function(e,t){return l.createElement(Ne.a,{variant:"subtitle2",key:t},e)}),l.createElement(Ce.a,null))},ft=function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(ae.a)(this,Object(re.a)(t).call(this,e))).state={},n}return Object(oe.a)(t,e),Object(v.a)(t,[{key:"viewForceInfo",value:function(e){return l.createElement(mt,{text:["\u0421\u0438\u043b\u0430: ".concat(e.value," H"),"\u0423\u0433\u043e\u043b: ".concat(e.angle,"\xb0")]})}},{key:"viewFixationInfo",value:function(e){switch(e.fixation){case y.X:return l.createElement(dt,{text:"\u0424\u0438\u043a\u0441\u0430\u0446\u0438\u044f \u043f\u043e \u043e\u0441\u0438 X"});case y.Y:return l.createElement(dt,{text:"\u0424\u0438\u043a\u0441\u0430\u0446\u0438\u044f \u043f\u043e \u043e\u0441\u0438 Y"});case y.XY:return l.createElement(dt,{text:"\u0424\u0438\u043a\u0441\u0430\u0446\u0438\u044f \u043f\u043e \u043e\u0441\u044f\u043c \u0425 \u0438 Y"});default:return}}},{key:"NodeInfo",value:function(e){var t=this.props,n=t.classes,a=t.onDelete;return console.log(e),l.createElement(Ee.a,{className:n.root},l.createElement(Ne.a,{variant:"h6",className:n.title},"\u0423\u0437\u0435\u043b ",e.name),l.createElement(mt,{text:["X: ".concat(e.x),"Y: ".concat(e.y)]}),e.withNewPosition&&l.createElement(mt,{text:["\u0394X: ".concat(e.newX),"\u0394Y: ".concat(e.newY)]}),e.forceX&&this.viewForceInfo(e.forceX),e.forceY&&this.viewForceInfo(e.forceY),this.viewFixationInfo(e),l.createElement("div",{className:n.btnGroup},l.createElement(ot.a,{"aria-label":"Delete",onClick:function(){return a(e)}},l.createElement(it.a,null))))}},{key:"BeamInfo",value:function(e){var t=this.props,n=t.classes,a=t.onDelete;return l.createElement(Ee.a,{className:n.root},l.createElement(Ne.a,{variant:"h6",className:n.title},"\u0421\u0442\u0435\u0440\u0436\u0435\u043d\u044c ",e.name),l.createElement(dt,{text:"\u0414\u043b\u0438\u043d\u0430: ".concat(e.length||st.getBeamLength(e))}),l.createElement("div",{className:n.btnGroup},l.createElement(ot.a,{"aria-label":"Delete",onClick:function(){return a(e)}},l.createElement(it.a,null))))}},{key:"viewInfo",value:function(e){return G(e)?this.NodeInfo(e):A(e)?this.BeamInfo(e):void 0}},{key:"render",value:function(){var e=this.props.entity;return l.createElement(ze,{anchor:"right",title:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u043e\u043c \u043e\u0431\u044a\u0435\u043a\u0442\u0435",btnIcon:l.createElement(ct.a,null)},this.viewInfo(e),l.createElement(Ce.a,null))}}]),t}(l.PureComponent),ht=Object(ke.a)(function(e){return Object(ye.a)({root:{padding:e.spacing(2)},title:{marginBottom:e.spacing(2)},btnGroup:{marginTop:e.spacing(2)}})})(ft),pt=n(398),vt=n(453),bt=n(444),gt=n(445),yt=n(446),Et=Object(ke.a)(function(e){return Object(ye.a)({root:{position:"absolute",padding:e.spacing(1),bottom:e.spacing(2),left:"50%",transform:"translateX(-50%)",backgroundColor:Object(We.b)(e.palette.primary.light,.4),transition:e.transitions.create(["background-color","box-shadow","border"],{duration:e.transitions.duration.short}),"&:hover":{backgroundColor:e.palette.primary.light}},modsBtnGroup:{borderRadius:0,backgroundColor:"transparent"}})})(function(e){var t=e.onSelect,n=e.selected,a=e.classes,r=[{name:"\u041f\u0435\u0440\u0435\u043c\u0435\u0449\u0435\u043d\u0438\u0435",mod:s.move,icon:l.createElement(bt.a,null)},{name:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0443\u0437\u0435\u043b",mod:s.addNode,icon:l.createElement(gt.a,null)},{name:"\u0421\u043e\u0435\u0434\u0438\u043d\u0438\u0442\u044c \u0443\u0437\u043b\u044b",mod:s.addBeam,icon:l.createElement(yt.a,null)},{name:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",mod:s.delete,icon:l.createElement(it.a,null)}];return l.createElement(pt.a,{className:a.root},l.createElement(vt.a,{value:n,exclusive:!0,onChange:function(e,n){return t(n)},size:"medium",className:a.modsBtnGroup},r.map(function(e){return l.createElement(Pe,{key:e.mod,value:e.mod,selected:e.mod===n,icon:e.icon,name:e.name})})))}),kt=n(207),xt=n(208),Ot=function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(ae.a)(this,Object(re.a)(t).call(this,e))).stage=void 0,n.state={stageHeight:b.canvasHeight,stageWidth:b.canvasWidth,uiMode:s.none,selectedEntity:void 0,paintEntity:void 0},n.UIonClick=n.UIonClick.bind(Object(fe.a)(n)),n.UIonDrag=n.UIonDrag.bind(Object(fe.a)(n)),n.UIonMouseMove=n.UIonMouseMove.bind(Object(fe.a)(n)),n.onKeyHandle=n.onKeyHandle.bind(Object(fe.a)(n)),n.selectEntity=n.selectEntity.bind(Object(fe.a)(n)),n.clearFarm=n.clearFarm.bind(Object(fe.a)(n)),n.deleteEntity=n.deleteEntity.bind(Object(fe.a)(n)),n.saveFarm=n.saveFarm.bind(Object(fe.a)(n)),n.calculateFarm=n.calculateFarm.bind(Object(fe.a)(n)),n.stage=l.createRef(),n}return Object(oe.a)(t,e),Object(v.a)(t,[{key:"componentDidMount",value:function(){var e=this.stage.current;if(e){var t=e.attrs.container.parentElement.parentElement;console.log(t),t&&(t.scrollTop=(t.scrollHeight-t.offsetHeight)/2,t.scrollLeft=(t.scrollWidth-t.offsetWidth)/2)}}},{key:"UIonClick",value:function(e,t){var n=this.state,a=n.uiMode,r=n.paintEntity,o=this.props.calculation,i=e.target.getStage()===e.target;if(e.evt.preventDefault(),0===e.evt.button&&!o)switch(a){case s.none:i?this.setState({selectedEntity:void 0}):this.selectEntity(t);break;case s.addNode:if(i){var c=e.evt,l=c.layerX,u=c.layerY,d=F.cellX(l),m=F.cellX(u);this.props.addNode(d,m)}break;case s.addBeam:if(!i&&G(t)){var f=this.props.addBeam({x:t.x,y:t.y});if(A(f)){var h=this.props.connectBeamToNode(t,f,"start");A(h)?this.setState({paintEntity:h,uiMode:s.addBeamStart}):this.props.deleteEntity(f.id)}}break;case s.addBeamStart:!i&&G(t)&&A(r)&&this.props.connectBeamToNode(t,r,"end")&&this.setState({uiMode:s.addBeam,paintEntity:void 0});break;case s.delete:!i&&t&&this.deleteEntity(t)}i&&this.setState({selectedEntity:void 0})}},{key:"UIonMouseMove",value:function(e){if(!this.props.calculation){var t=this.state,n=t.uiMode,a=t.paintEntity,r=e.evt,o=r.layerX,i=r.layerY;switch(n){case s.addBeamStart:e.target.getStage()&&(a&&A(a)?this.props.moveBeam(a,o,i):this.setState({uiMode:s.addBeam}));break;case s.delete:var c=e.target.getStage();c===e.target&&(c.container().style.cursor="default")}}}},{key:"UIonDrag",value:function(e,t){if(!this.props.calculation)switch(this.state.uiMode){case s.move:if(G(t)&&e.evt.defaultPrevented){var n=e.evt,a=n.layerX,r=n.layerY;this.props.moveNode(t,F.cellX(a),F.cellY(r))}}}},{key:"onKeyHandle",value:function(e){switch(e.key){case"Escape":this.deletePaintEntity()}}},{key:"deletePaintEntity",value:function(){this.state.paintEntity&&this.props.deleteEntity(this.state.paintEntity.id),this.setState({paintEntity:void 0})}},{key:"deleteEntity",value:function(e){this.props.calculation||(this.state.selectedEntity&&this.state.selectedEntity.id===e.id&&this.setState({selectedEntity:void 0}),this.props.deleteEntity(e.id))}},{key:"selectEntity",value:function(e){this.props.calculation||e&&this.setState({selectedEntity:e})}},{key:"clearFarm",value:function(){window.confirm("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u0445\u043e\u043b\u0441\u0442?")&&this.props.defautlFarm()}},{key:"saveFarm",value:function(e){window.confirm("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0445\u043e\u043b\u0441\u0442 \u0432 \u043a\u044d\u0448?")&&this.props.saveFarm()}},{key:"calculateFarm",value:function(e){this.props.calculateFarm()}},{key:"setSelectedMode",value:function(e){this.props.calculation||(this.state.paintEntity&&this.props.deleteEntity(this.state.paintEntity.id),this.setState({uiMode:e||0,paintEntity:void 0}))}},{key:"render",value:function(){var e=this.state,t=e.stageHeight,n=e.stageWidth,a=e.uiMode,r=e.selectedEntity,o=this.props,i=o.classes,c=o.nodes,s=o.beams,u=o.calculation;return l.createElement(Ee.a,{className:i.root},l.createElement(xt.a,{isActive:!0}),l.createElement(kt.a,{keyEventName:"keyup",keyValue:"Escape",onKeyHandle:this.onKeyHandle}),l.createElement(Ve,{hundleClear:this.clearFarm,hundleSave:this.saveFarm,hundleCalculate:this.calculateFarm,disabled:u}),l.createElement("div",{className:i.toolbar}),l.createElement(Ee.a,{className:i.stageBox},l.createElement("div",{className:i.toolbar}),l.createElement(rt,{nodes:c,beams:s,selectedEntity:r,onSelect:this.selectEntity}),l.createElement(Se,{onClick:this.UIonClick,onDrag:this.UIonDrag,onMouseMove:this.UIonMouseMove,stageHeight:t,stageWidth:n,nodes:c,beams:s,stage:this.stage,selectedEntity:r,uiMode:a}),l.createElement(ht,{entity:r,onDelete:this.deleteEntity})),l.createElement(Et,{selected:a,onSelect:this.setSelectedMode.bind(this)}))}}]),t}(l.Component),jt=Object(ke.a)(function(e){return Object(ye.a)({root:{width:"100%",height:"100%",overflow:"hidden",background:e.palette.background.default,display:"flex",flexDirection:"column"},stageBox:{display:"flex",flexGrow:1,overflow:"hidden"},toolbar:e.mixins.toolbar})})(Ot),St=function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(ae.a)(this,Object(re.a)(t).call(this,e))).addNode=function(e,t,a){var r=st.addNode(n.state.nodes,Object(U.a)({},a,{x:e,y:t}));return r?(n.setState({nodes:[].concat(Object(Y.a)(n.state.nodes),[r])}),r):null},n.addBeam=function(e){var t=st.addBeam(n.state.beams,Object(U.a)({},e));return t?(n.setState({beams:[].concat(Object(Y.a)(n.state.beams),[t])}),t):null},n.connectBeamToNode=function(e,t,a){var r=Object(U.a)({},e),o=Object(U.a)({},t);switch(a){case"start":return o.startConnectedNodeID=r.id,o.name=r.name+" - ",r.beamsID.push(o.id),st.moveEntity(o,r.x,r.y),n.setState(function(e){return{nodes:e.nodes.map(function(e){return e.id===r.id?r:e}),beams:e.beams.map(function(e){return e.id===o.id?o:e})}}),o;case"end":return!n.state.beams.filter(function(e){return r&&r.beamsID.includes(e.id)}).find(function(e){return st.findOldBeam(r,o,e)})&&(r.beamsID.push(o.id),o.endConnectedNodeID=r.id,o.name=o.name+r.name,st.moveBeamEnd(o,r.x,r.y),n.setState(function(e){return{nodes:e.nodes.map(function(e){return e.id===r.id?r:e}),beams:e.beams.map(function(e){return e.id===o.id?o:e})}}),!0);default:return!1}},n.addForceToNode=function(e,t){var a=V(Object(U.a)({},t,{nodeID:e.id}));return 0===a.angle?e.forceX=a:e.forceY=a,n.setState(function(t){return{nodes:t.nodes.map(function(t){return e&&t.id===e.id?e:t})}}),a},n.moveNode=function(e,t,a){if(e.isStatic)return!1;if(!n.state.nodes.find(function(e){return e.x===t&&e.y===a})){var r=Object(U.a)({},e,{x:t,y:a});return n.state.beams.filter(function(e){return r&&r.beamsID.includes(e.id)}).forEach(function(e){if(r){var o=Object(U.a)({},e);o.startConnectedNodeID===r.id?st.moveEntity(o,t,a):e.endConnectedNodeID===r.id&&st.moveBeamEnd(o,t,a),n.setState(function(e){return{beams:e.beams.map(function(e){return e.id===o.id?o:e})}})}}),n.setState(function(e){return{nodes:e.nodes.map(function(e){return e.id===r.id?r:e})}}),!0}return!1},n.moveBeam=function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"end";return e=Object(U.a)({},e),"start"===r?st.moveEntity(e,t,a):st.moveBeamEnd(e,t,a),n.setState(function(t){return{beams:t.beams.map(function(t){return e&&t.id===e.id?e:t})}}),!0},n.deleteEntity=function(e){var t=Object(Y.a)(n.state.nodes),a=Object(Y.a)(n.state.beams),r=n.state.beams.find(function(t){return t.id===e})||n.state.nodes.find(function(t){return t.id===e});if(G(r)){if(r.isStatic)return!1;a.filter(function(e){return G(r)&&r.beamsID.includes(e.id)}).forEach(function(e){var n;G(r)&&((n=e.startConnectedNodeID===r.id?t.find(function(t){return t.id===e.endConnectedNodeID}):t.find(function(t){return t.id===e.startConnectedNodeID}))&&((n=Object(U.a)({},n)).beamsID=n.beamsID.filter(function(t){return t!==e.id}),t=t.map(function(e){return n&&e.id===n.id?n:e})),a=a.filter(function(t){return t.id!==e.id}))}),t=t.filter(function(e){return G(r)&&e.id!==r.id});var o=st.update(t,a),i=o.nodes,c=o.beams;return n.setState({nodes:i,beams:c}),!0}return!!A(r)&&([r.startConnectedNodeID,r.endConnectedNodeID].forEach(function(e){if(e&&e.length>0){var n=t.find(function(t){return t.id===e});n&&A(r)&&((n=Object(U.a)({},n)).beamsID=n.beamsID.filter(function(e){return!!r&&e!==r.id}),t=t.map(function(e){return n&&e.id===n.id?n:e}))}}),a=a.filter(function(e){return A(r)&&e.id!==r.id}),n.setState({nodes:t,beams:a}),!0)},n.state={nodes:[],beams:[],calculation:!1},n.defautlFarm=n.defautlFarm.bind(Object(fe.a)(n)),n.saveFarm=n.saveFarm.bind(Object(fe.a)(n)),n.calculateFarm=n.calculateFarm.bind(Object(fe.a)(n)),n}return Object(oe.a)(t,e),Object(v.a)(t,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("nodes"),t=localStorage.getItem("beams");if(e&&t){var n=JSON.parse(e),a=JSON.parse(t);this.setState({nodes:n,beams:a})}else this.defautlFarm()}},{key:"calculateFarm",value:function(){var e=Object(me.a)(de.a.mark(function e(){var t,n,a,r,o,i,c;return de.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=st.normalize(this.state.nodes,this.state.beams),n=t.nodes,a=t.beams,this.setState({nodes:n,beams:a}),e.prev=2,e.next=5,lt.init(n,a);case 5:r=e.sent,o=r.P,i=r.LinkNodes,c=r.Vi,n=n.map(function(e,t){return Object(U.a)({},e,{newX:c[t].x,newY:c[t].y,withNewPosition:!0})}),o.forEach(function(e,t){var n=i[t].x+1+" - "+(i[t].y+1);console.log("".concat(t+1," - [").concat(n,"] P1: ").concat(e[0],"; P2: ").concat(e[1],"; "))}),this.setState({nodes:n}),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(2),e.t0.message?alert(e.t0.message):alert(e.t0),console.error(e.t0);case 18:case"end":return e.stop()}},e,this,[[2,14]])}));return function(){return e.apply(this,arguments)}}()},{key:"defautlFarm",value:function(){var e={nodes:ut.createNodes([{x:0,y:1e3,fixation:y.XY},{x:3e3,y:1e3,fixation:y.Y}],[{x:1e3,y:1e3,angle:90,value:9e3}],[]),beams:[]};localStorage.removeItem("nodes"),localStorage.removeItem("beams");var t=ut.firstPlacement(e.nodes,e.beams),n=t.nodes,a=t.beams;this.setState({nodes:n,beams:a})}},{key:"saveFarm",value:function(){var e=this.state,t=e.nodes,n=e.beams;localStorage.setItem("nodes",JSON.stringify(t)),localStorage.setItem("beams",JSON.stringify(n))}},{key:"render",value:function(){return l.createElement(jt,Object.assign({},this.state,this))}}]),t}(l.Component),wt="/",It="/farm",Nt=n(400),Ct=Object(Nt.a)(function(e){return Object(ye.a)({root:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start"},logo:{width:"20%",height:"20%"},title:{padding:40},descripton:{padding:40},btn:{}})})(function(e){var t=e.classes;return l.createElement("header",{className:t.root},l.createElement("img",{src:b.bridgeIcon_2,alt:"logo",className:t.logo}),l.createElement(Ne.a,{variant:"h3",className:t.title},b.title),l.createElement(Ne.a,{variant:"subtitle1",align:"center",className:t.descripton},b.description),l.createElement(we.a,{component:te.b,to:It,variant:"contained",size:"large",color:"secondary"},"\u041f\u043e\u0435\u0445\u0430\u043b\u0438"))}),Mt=function(e){function t(){return Object(p.a)(this,t),Object(ae.a)(this,Object(re.a)(t).apply(this,arguments))}return Object(oe.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){var e=this.props.classes;return l.createElement("div",{className:e.root},l.createElement(Ct,null))}}]),t}(l.Component),Dt=Object(ke.a)(function(e){return Object(ye.a)({root:{width:"100%",minHeight:"100%",display:"block",background:e.palette.background.default,padding:e.spacing(4)}})})(Mt),Bt=Object(f.b)(function(e){return{title:e.home.title}},function(e){return Object(X.b)(Object(U.a)({},i),e)})(Dt),_t=function(e){function t(){return Object(p.a)(this,t),Object(ae.a)(this,Object(re.a)(t).apply(this,arguments))}return Object(oe.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){return l.createElement(l.Fragment,null,l.createElement(ce.a,{htmlAttributes:{leng:"en"},titleTemplate:"Truss - %s",defaultTitle:b.title,link:[{rel:"shortcut icon",href:b.bridgeIcon_2},{rel:"image_src",href:b.airBridge},{rel:"stylesheet",href:"https://fonts.googleapis.com/css?family=Roboto:300,400,500"},{rel:"stylesheet",href:"https://fonts.googleapis.com/icon?family=Material+Icons"}],meta:[{charSet:"utf-8"},{name:"viewport",content:"minimum-scale=1, initial-scale=1, width=device-width, shrink-to-fit=no"},{name:"theme-color",content:"#000000"},{name:"description",content:b.description},{property:"og:type",content:"website"},{property:"og:title",content:b.title},{property:"og:image",content:b.airBridge},{property:"vk:image",content:b.airBridge},{property:"twitter:image",content:b.airBridge},{property:"og:url",content:b.url}]}),l.createElement(se.a,null),l.createElement(le.a,{theme:E},l.createElement(ne.c,null,l.createElement(ne.a,{path:wt,component:Bt,exact:!0}),l.createElement(ne.a,{path:It,component:St}))))}}]),t}(l.Component);n(396);m.a.render(u.a.createElement(f.a,{store:ee},u.a.createElement(function(){return u.a.createElement(te.a,null,u.a.createElement(_t,null))},null)),document.getElementById("root"))}},[[216,1,2]]]);
//# sourceMappingURL=main.33904348.chunk.js.map