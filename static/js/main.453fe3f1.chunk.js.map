{"version":3,"sources":["pages/Farm/components/UIToolBar.tsx","utils/history.ts","utils/math.ts","models/Farm/ModelEntity.ts","models/Farm/ModelNode.ts","models/Farm/ModelBeam.ts","models/Farm/ModelFarm.ts","pages/Farm/farmReducer.ts","pages/Home/homeReducer.ts","store/index.ts","pages/Farm/farmTypes.ts","pages/Home/homeTypes.ts","pages/Farm/components/UINode.tsx","pages/Farm/components/UIBeam.tsx","pages/Farm/components/UITreePanel.tsx","pages/Farm/components/UIStage.tsx","pages/Farm/farm.tsx","pages/Farm/farmActions.ts","pages/Farm/index.ts","navigation/index.ts","pages/Home/components/homeHeader.tsx","pages/Home/home.tsx","pages/Home/homeActions.ts","pages/Home/index.ts","theme.ts","App.tsx","index.tsx","static/const.ts","static/ogImage.png","static/icon.png","static/bridge.png","static/airBridge.png"],"names":["UIModes","createBrowserHistory","MyMath","x1","y1","x2","y2","Math","atan2","PI","sqrt","pow","Entity","props","Object","classCallCheck","this","id","x","y","angle","name","newX","newY","Date","now","Node","_Entity","_this","possibleConstructorReturn","getPrototypeOf","call","beamsID","forcesID","inherits","createClass","key","value","beamID","find","push","filter","forceID","Beam","length","startConnectedNodeID","endConnectedNodeID","newAngle","nodeID","place","cos","sin","endX","getEndX","endY","getEndY","angleBePoints","lengthBePoints","Farm","_farm","fixedNodes","forces","nodes","beams","time","Map","arguments","undefined","node","set","beam","delete","get","Error","concat","force","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","values","Symbol","iterator","next","done","err","return","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","getNode","map","getForce","_this2","getBeam","_beam","_node","connectNode","connectBeam","getBeamsOnNode","item","moveEndPoint","entity","_this3","forEach","removeBeam","deleteBeam","deleteNode","_entity","deleteEntity","_this4","moveStartPoint","defaultFarmState","workSpace","defaultHomeState","title","mainReducer","combineReducers","farm","state","action","type","home","objectSpread","createStore","withStyles","theme","createStyles","root","backgroundColor","palette","primary","dark","padding","spacing","display","borderBottomColor","grey","borderBottom","_ref","onSelect","selected","classes","mods","mod","move","icon","react","ZoomOutMap","addNode","MyLocation","addBeam","Power","Delete","className","Paper","ToggleButtonGroup","exclusive","onChange","e","size","ToggleButton","Tooltip","UINode","drag","mode","onClick","ReactKonva","text","_useStrictMode","radius","fill","stroke","strokeWidth","draggable","shadowBlur","onDragMove","_onClick","_x","apply","toString","UIBeam","points","UITreePanel","openedNodes","openedBeams","clickTab","bind","assertThisInitialized","tab","setState","_this$props","_this$state","openTab","List","list","ListItem","button","ListItemText","ExpandLess","ExpandMore","Collapse","in","timeout","unmountOnExit","component","disablePadding","nested","React","main","flexDirection","width","borderRightColor","borderRight","overflow","paddingLeft","stage","flexGrow","stageHeight","stageWidth","onMouseMove","onDrag","uiMode","selectedEntity","height","ref","getBeams","components_UIBeam","getNodes","components_UINode","UIFarm","none","paintEntity","setFarm","updateFarm","onKeyHandle","setStageSize","nextProps","update","isEmptyPlace","target","getStage","evt","preventDefault","_e$evt","layerX","layerY","connectBeamToNode","addBeamStart","_this$state2","_e$evt2","_this$state3","moveNodeTo","deletePaintEntity","_this$state4","current","container","attrs","clientWidth","clientHeight","_this$state5","Box","esm","keyEventName","keyValue","components_UIToolBar","setSelectMode","stageBox","components_UITreePanel","components_UIStage","window","innerWidth","innerHeight","maxHeight","background","default","connect","dispatch","bindActionCreators","farmActions","navPath","alignItems","justifyContent","logo","descripton","btn","src","consts","bridgeIcon_2","alt","Typography","variant","align","description","Button","Link","to","color","Home","homeHeader","minWidth","minHeight","setTitle","homeActions","createMuiTheme","light","secondary","App","Helmet_default","a","htmlAttributes","leng","titleTemplate","defaultTitle","link","rel","href","meta","charSet","content","property","CssBaseline","ThemeProvider","style","react_router","path","exact","ReactDOM","render","react_default","createElement","es","store","react_router_dom","src_App","document","getElementById","__webpack_require__","r","__webpack_exports__","__dirname","d","url","favicon","_ogImage_png__WEBPACK_IMPORTED_MODULE_0__","_ogImage_png__WEBPACK_IMPORTED_MODULE_0___default","n","_icon_png__WEBPACK_IMPORTED_MODULE_1__","_icon_png__WEBPACK_IMPORTED_MODULE_1___default","_bridge_png__WEBPACK_IMPORTED_MODULE_2__","_bridge_png__WEBPACK_IMPORTED_MODULE_2___default","_airBridge_png__WEBPACK_IMPORTED_MODULE_3__","_airBridge_png__WEBPACK_IMPORTED_MODULE_3___default","path__WEBPACK_IMPORTED_MODULE_4__","process","resolve","module","exports","p"],"mappings":"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","file":"static/js/main.453fe3f1.chunk.js","sourcesContent":["import * as React from 'react'\r\nimport { Theme, createStyles, withStyles, Tooltip, Paper } from '@material-ui/core';\r\nimport { ToggleButtonGroup, ToggleButton } from '@material-ui/lab'\r\nimport { WithStyles } from '@material-ui/styles';\r\nimport { ZoomOutMap as MoveIcon, MyLocation as AddNodeIcon, Delete as DeleteIcon, Power as ConnectIcon } from '@material-ui/icons';\r\n\r\nconst styles = (theme: Theme) => createStyles({\r\n    root: {\r\n        backgroundColor: theme.palette.primary.dark,\r\n        padding: theme.spacing(1),\r\n        display: \"flex\",\r\n        borderBottomColor: theme.palette.grey[800],\r\n        borderBottom: 'solid 2px'\r\n    }\r\n})\r\n\r\nexport enum UIModes {\r\n    none,\r\n    move,\r\n    addNode,\r\n    addBeam,\r\n    addBeamStart,\r\n    delete\r\n}\r\nexport interface IMode {\r\n    name: string,\r\n    mod: UIModes\r\n    icon: JSX.Element\r\n}\r\n\r\n\r\n\r\nexport interface UIToolBarProps extends WithStyles<typeof styles> {\r\n    selected: UIModes\r\n    onSelect(mod: UIModes): void\r\n}\r\n\r\nconst UIToolBar: React.FC<UIToolBarProps> = ({ onSelect, selected, classes }) => {\r\n    const mods: IMode[] = [\r\n        {\r\n            name: \"Move\",\r\n            mod: UIModes.move,\r\n            icon: (<MoveIcon />)\r\n        },\r\n        {\r\n            name: \"Add Node\",\r\n            mod: UIModes.addNode,\r\n            icon: (<AddNodeIcon />)\r\n        },\r\n        {\r\n            name: \"Add Beam\",\r\n            mod: UIModes.addBeam,\r\n            icon: (<ConnectIcon />)\r\n        },\r\n        {\r\n            name: \"Delete\",\r\n            mod: UIModes.delete,\r\n            icon: (<DeleteIcon />)\r\n        }\r\n    ]\r\n    return (\r\n        <div className={classes.root}>\r\n            <Paper>\r\n                <ToggleButtonGroup\r\n                    value={selected}\r\n                    exclusive\r\n                    onChange={(e, value) => onSelect(value)}\r\n                    size=\"small\"\r\n                >\r\n                    {mods.map(item => (\r\n                        <ToggleButton value={item.mod} key={item.name}>\r\n                            <Tooltip title={item.name}>\r\n                                {item.icon}\r\n                            </Tooltip>\r\n                        </ToggleButton>\r\n                    ))}\r\n                </ToggleButtonGroup>\r\n            </Paper>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default withStyles(styles)(UIToolBar)","import {createBrowserHistory} from 'history';\r\n\r\nexport default createBrowserHistory();","class MyMath {\r\n    static angleBePoints(x1:number, y1:number, x2:number, y2:number) :number {\r\n        return Math.atan2(-y1 + y2, -x1 + x2) / (Math.PI)\r\n    }\r\n    \r\n    static lengthBePoints(x1:number, y1:number, x2:number, y2:number) :number {\r\n        return Math.sqrt(Math.pow(x1- x2, 2) + Math.pow(y1 - y2, 2))\r\n    }\r\n}\r\n\r\n\r\nexport default MyMath","export interface IEntity {\r\n    id?: number\r\n    x?: number\r\n    y?: number\r\n    angle?: number\r\n    name?: string\r\n    newX?: number\r\n    newY?: number\r\n}\r\n\r\nexport class Entity implements IEntity {\r\n    id: number\r\n    x: number;\r\n    y: number;\r\n    angle: number;\r\n    name: string;\r\n    newX: number;\r\n    newY: number;\r\n    constructor(props: IEntity) {\r\n        this.id = Date.now()\r\n        this.x = props.x || 0\r\n        this.y = props.y || 0\r\n        this.angle = props.angle || 0\r\n        this.name = props.name || this.id + \"\"\r\n        this.newX = this.x\r\n        this.newY = this.y\r\n    }\r\n}\r\n","import { IEntity, Entity } from './ModelEntity';\r\n\r\nexport interface INode extends IEntity {\r\n    beamsID?: number[]\r\n    forcesID?: number[],\r\n}\r\n\r\nexport class Node extends Entity {\r\n    beamsID: number[];\r\n    forcesID: number[];\r\n    constructor(props:INode) {\r\n        super(props)\r\n        this.beamsID = props.beamsID || []\r\n        this.forcesID = props.forcesID  || []\r\n    }\r\n    connectBeam(beamID: number):boolean {\r\n        if (!this.beamsID.find(id => id === beamID)){\r\n            this.beamsID.push(beamID)\r\n            return true            \r\n        }\r\n        return false\r\n    }\r\n    removeBeam(beamID: number) {\r\n        \r\n        this.beamsID  = this.beamsID.filter(id => id !== beamID)\r\n    }\r\n    connectForce(forceID: number) {\r\n        if (!this.forcesID.find(id => id === forceID))\r\n            this.forcesID.push(forceID)\r\n    }\r\n    removeForce(forceID: number) {\r\n        this.beamsID   = this.forcesID.filter(id => id !== forceID)\r\n    }\r\n}","import { IEntity, Entity } from \"./ModelEntity\";\r\nimport { MyMath } from \"src/utils\";\r\n\r\nexport interface IBeam extends IEntity {\r\n    length?: number\r\n    startConnectedNodeID?: number\r\n    endConnectedNodeID?: number\r\n    newAngle?:number\r\n}\r\n\r\nexport class Beam extends Entity {\r\n    length: number\r\n    startConnectedNodeID: number\r\n    endConnectedNodeID: number\r\n    newAngle:number\r\n    constructor(props: IBeam) {\r\n        super(props)\r\n        this.length = props.length || 0\r\n        this.startConnectedNodeID = props.startConnectedNodeID || 0\r\n        this.endConnectedNodeID = props.endConnectedNodeID || 0\r\n        this.newAngle = this.angle\r\n    }\r\n\r\n    connectNode(nodeID: number, place: 'start' | 'end'): void {\r\n        switch (place) {\r\n            case 'start':{\r\n                this.startConnectedNodeID = nodeID\r\n                break;\r\n            }\r\n            case 'end':{\r\n                this.endConnectedNodeID = nodeID\r\n                break;\r\n            }\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n    removeNode(place: 'start' | 'end'): void {\r\n        place === 'start' ?\r\n        this.startConnectedNodeID = 0 :\r\n        this.endConnectedNodeID = 0\r\n    }\r\n    getEndX():number{\r\n        return this.x + (this.length * Math.cos(this.angle * Math.PI))\r\n    }\r\n    getEndY():number{\r\n        return this.y + (this.length * Math.sin(this.angle * Math.PI))\r\n    }\r\n    moveStartPoint(x:number,y:number):void{\r\n        const endX = this.getEndX()\r\n        const endY = this.getEndY()\r\n        this.x = x\r\n        this.y = y\r\n        this.angle = MyMath.angleBePoints(x,y, endX,endY)\r\n        this.length = MyMath.lengthBePoints(x,y, endX,endY)\r\n    }\r\n    \r\n    moveEndPoint(x:number,y:number):void{\r\n        this.angle = MyMath.angleBePoints(this.x,this.y,x,y)\r\n        this.length = MyMath.lengthBePoints(this.x,this.y,x,y)\r\n    }\r\n}","import { FixedNode } from \"./ModelFixedNode\";\r\nimport { Force } from \"./ModelForce\";\r\nimport { Node } from \"./ModelNode\";\r\nimport { Beam } from \"./ModelBeam\";\r\nimport { Entity } from \"./ModelEntity\";\r\n\r\n\r\n\r\n\r\nexport interface IFarm {\r\n    fixedNodes?: Map<number, FixedNode>\r\n    forces?: Map<number, Force>\r\n    nodes?: Map<number, Node>\r\n    beams?: Map<number, Beam>\r\n}\r\n\r\n\r\n\r\nexport class Farm implements IFarm {\r\n    fixedNodes: Map<number, FixedNode>\r\n    forces: Map<number, Force>\r\n    nodes: Map<number, Node>\r\n    beams: Map<number, Beam>\r\n    time: number\r\n    constructor(_farm?: Farm) {\r\n        this.nodes = _farm ? _farm.nodes : new Map()\r\n        this.fixedNodes = _farm ? _farm.fixedNodes : new Map()\r\n        this.forces = _farm ? _farm.forces : new Map()\r\n        this.beams = _farm ? _farm.beams : new Map()\r\n        this.time = Date.now()\r\n\r\n    }\r\n    addNode(x: number, y: number, angle: number, name: string = \"\"): void {\r\n        const node = new Node({\r\n            x,\r\n            y,\r\n            angle,\r\n            name\r\n        })\r\n        this.nodes.set(node.id, node)\r\n    }\r\n    addBeam(x: number, y: number): Beam {\r\n        const beam = new Beam({\r\n            x,\r\n            y\r\n        })\r\n        this.beams.set(beam.id, beam)\r\n        return beam\r\n    }\r\n    private deleteNode(nodeID: number): void {\r\n        this.nodes.delete(nodeID)\r\n    }\r\n    private deleteBeam(beamID: number): void {\r\n        this.beams.delete(beamID)\r\n    }\r\n\r\n    getNode(nodeID: number): Node {\r\n        const node = this.nodes.get(nodeID)\r\n        if (!node) throw Error(`Не найден узел с ID ${nodeID}`)\r\n        return node\r\n    }\r\n    getBeam(beamID: number): Beam {\r\n        const beam = this.beams.get(beamID)\r\n        if (!beam) throw Error(`Не найден луч с ID ${beamID}`)\r\n        return beam\r\n    }\r\n    getForce(forceID: number): Force {\r\n        const force = this.forces.get(forceID)\r\n        if (!force) throw Error(`Не найдена сила с ID ${forceID}`)\r\n        return force\r\n    }\r\n\r\n    getNodes(): Node[] {\r\n        const nodes: Node[] = [];\r\n        for (let node of this.nodes.values()) {\r\n            nodes.push(node)\r\n        }\r\n        return nodes\r\n    }\r\n    getBeams(): Beam[] {\r\n        const beams: Beam[] = [];\r\n        for (let beam of this.beams.values()) {\r\n            beams.push(beam)\r\n        }\r\n        return beams\r\n    }\r\n\r\n    getForcesOnNode(nodeID: number): Force[] {\r\n        const forces: Force[] = this.getNode(nodeID).forcesID.map(forceID => this.getForce(forceID))\r\n        return forces\r\n    }\r\n    getBeamsOnNode(nodeID: number): Beam[] {\r\n        const beams: Beam[] = this.getNode(nodeID).beamsID.map(beamID => this.getBeam(beamID))\r\n        return beams\r\n    };\r\n    getNodesOnBeam(beamID: number): Node[] {\r\n        const beam = this.getBeam(beamID)\r\n        const { startConnectedNodeID, endConnectedNodeID } = beam\r\n\r\n        const nodeStart = this.getNode(startConnectedNodeID)\r\n        const nodeEnd = this.getNode(endConnectedNodeID)\r\n\r\n        return [nodeStart, nodeEnd]\r\n    }\r\n\r\n    connectBeamToNode(beam: Beam | number, node: Node | number, place: 'start' | 'end' = 'start'): boolean {\r\n        let _beam: Beam = beam instanceof Beam ? beam : this.getBeam(beam)\r\n        let _node: Node = node instanceof Node ? node : this.getNode(node)\r\n\r\n        switch (place) {\r\n            case 'start': {\r\n\r\n                _beam.connectNode(_node.id, 'start')\r\n                _node.connectBeam(_beam.id)\r\n                break;\r\n            }\r\n            case 'end': {\r\n                const beams = this.getBeamsOnNode(_beam.startConnectedNodeID)\r\n                const oldBeam = beams.find(item =>\r\n                    item.startConnectedNodeID === _beam.startConnectedNodeID && item.endConnectedNodeID === _node.id ||\r\n                    item.startConnectedNodeID === _node.id && item.endConnectedNodeID === _beam.startConnectedNodeID ||\r\n                    item.id === _beam.id && item.endConnectedNodeID === _beam.id\r\n                )\r\n\r\n\r\n\r\n                if (!oldBeam && _node.connectBeam(_beam.id)) {\r\n                    _beam.moveEndPoint(_node.x, _node.y)\r\n                    _beam.connectNode(_node.id, \"end\")\r\n                } else return false\r\n                break;\r\n            }\r\n            default: return false\r\n        }\r\n\r\n        return true\r\n    }\r\n    deleteEntity(entity: Entity | number) {\r\n        if (entity instanceof Node) {\r\n            // const beams = this.getBeamsOnNode(entity.id)\r\n            const beams = entity.beamsID.map(beamID => this.getBeam(beamID))\r\n            beams.forEach(beam => {\r\n                if (beam.startConnectedNodeID === entity.id) this.getNode(beam.endConnectedNodeID).removeBeam(beam.id)\r\n                else this.getNode(beam.startConnectedNodeID).removeBeam(beam.id)\r\n                this.deleteBeam(beam.id)\r\n            })\r\n            this.deleteNode(entity.id)\r\n        } else if (entity instanceof Beam) {\r\n            [entity.startConnectedNodeID,entity.endConnectedNodeID].forEach(nodeID => {\r\n                if(nodeID > 0){\r\n                    this.getNode(nodeID).removeBeam(entity.id)\r\n                }\r\n            })\r\n            this.deleteBeam(entity.id)\r\n        } else if(entity instanceof Entity){\r\n            const _entity = this.nodes.get(entity.id) || this.beams.get(entity.id)\r\n            if(_entity) this.deleteEntity(_entity)\r\n        }else{            \r\n            const _entity = this.nodes.get(entity) || this.beams.get(entity)\r\n            if(_entity) this.deleteEntity(_entity)\r\n        }\r\n    }\r\n    moveNodeTo(nodeID: number, x: number, y: number): void {\r\n        const node = this.getNode(nodeID)\r\n        node.x = x\r\n        node.y = y\r\n        node.beamsID.forEach(beamID => {\r\n            const beam = this.getBeam(beamID)\r\n            if (beam.startConnectedNodeID === nodeID) {\r\n                beam.moveStartPoint(x, y)\r\n            } else if (beam.endConnectedNodeID === nodeID) {\r\n                beam.moveEndPoint(x, y)\r\n            }\r\n        })\r\n    }\r\n}","import { FarmActions, FARM_UPDATE } from \"./farmTypes\";\r\nimport { Farm } from \"src/models/Farm\";\r\n\r\nexport interface IFarmStore {\r\n    workSpace: Farm\r\n\r\n}\r\n\r\nexport const defaultFarmState: IFarmStore = {\r\n    workSpace: new Farm(),\r\n}\r\n\r\nexport const farmReducer = (state: IFarmStore = defaultFarmState, action: FarmActions): IFarmStore => {\r\n    switch (action.type) {\r\n        case FARM_UPDATE:{\r\n            const newState : IFarmStore = {workSpace:new Farm(action.workSpace)}\r\n            \r\n            return newState\r\n\r\n        }\r\n        default:\r\n            return state;\r\n    }\r\n}","import { SET_TITLE, HomeActions } from \"./homeTypes\";\r\n\r\nexport interface IHomeStore {\r\n    title: string,\r\n}\r\n\r\nexport const defaultHomeState : IHomeStore = {\r\n    title: 'Hello, world!',\r\n}\r\n\r\nexport const homeReducer = (state: IHomeStore = defaultHomeState, action: HomeActions): IHomeStore => {\r\n    switch (action.type) {\r\n        case SET_TITLE:\r\n            return {\r\n                ...state,\r\n                title: action.title\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}","import { combineReducers, createStore } from 'redux';\r\nimport { IFarmStore, farmReducer } from 'src/pages/Farm/farmReducer';\r\nimport { IHomeStore, homeReducer } from 'src/pages/Home/homeReducer';\r\n\r\nexport interface AppState {\r\n    farm: IFarmStore,\r\n    home: IHomeStore\r\n}\r\n\r\nexport const mainReducer = combineReducers({\r\n    farm : farmReducer,\r\n    home : homeReducer  \r\n})\r\n\r\nexport default createStore(mainReducer);\r\n","import { Action } from \"redux\";\r\nimport { Farm } from \"src/models/Farm\";\r\n\r\nexport const FARM_UPDATE = 'FARM_UPDATE'\r\n\r\nexport interface IActionFarmUpdate extends Action {\r\n    type: typeof FARM_UPDATE,\r\n    workSpace:Farm\r\n}\r\n\r\nexport type FarmActions = IActionFarmUpdate;","import { Action } from \"redux\";\r\n\r\nexport const SET_TITLE = 'SET_TITLE'\r\n\r\nexport interface IActionHomeSetTitle extends Action {\r\n    type: typeof SET_TITLE,\r\n    title : string,\r\n}\r\n\r\nexport type HomeActions = IActionHomeSetTitle ;","import * as React from 'react'\r\nimport { Circle, Text } from 'react-konva'\r\nimport Konva from 'konva'\r\nimport { Node } from 'src/models/Farm';\r\nimport { UIModes } from './UIToolBar';\r\n\r\nexport interface UINodeProps {\r\n    drag(e: Konva.KonvaEventObject<DragEvent>,node: Node): void\r\n    onClick(e: Konva.KonvaEventObject<MouseEvent>,node:Node):void\r\n    node: Node,\r\n    mode:UIModes,\r\n    selected:boolean\r\n}\r\n\r\nconst UINode: React.FC<UINodeProps> = ({ node, drag, mode, onClick,selected }) => {\r\n    return (\r\n        <React.Fragment>\r\n            <Text\r\n                x={node.x - node.name.length*4}\r\n                y={node.y-30}\r\n                text={node.name}\r\n                _useStrictMode \r\n            />\r\n               \r\n            <Circle\r\n\r\n                key={node.id}\r\n                radius={selected ? 8 : 6}\r\n                x={node.x}\r\n                y={node.y}\r\n                fill=\"#ddd\"\r\n                stroke=\"#888\"\r\n                strokeWidth={selected ? 2 : 0}\r\n                draggable={mode === UIModes.move}\r\n                _useStrictMode \r\n                shadowBlur={5}\r\n                onDragMove={(e) => drag(e,node)} \r\n                onClick={(e) => onClick(e,node)}\r\n            />\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default UINode","import * as React from 'react'\r\nimport { Line } from 'react-konva'\r\nimport Konva from 'konva'\r\nimport { UIModes } from './UIToolBar';\r\nimport { Beam } from 'src/models/Farm/ModelBeam';\r\n\r\nexport interface UIBeamProps {\r\n    drag(e: Konva.KonvaEventObject<DragEvent>, beam: Beam): void\r\n    onClick(e: Konva.KonvaEventObject<MouseEvent>, beam: Beam): void\r\n    beam: Beam,\r\n    mode: UIModes,\r\n    selected: boolean\r\n    withStartNode?: boolean\r\n    withEndNode?: boolean\r\n}\r\n\r\nconst UIBeam: React.FC<UIBeamProps> = ({ beam, drag, mode, onClick, selected }) => {\r\n    return (\r\n        <React.Fragment>\r\n            <Line\r\n                points={[\r\n                    beam.x,\r\n                    beam.y,\r\n                    beam.getEndX(),\r\n                    beam.getEndY()\r\n                ]}\r\n                stroke='#bbb'\r\n                strokeWidth={4}\r\n                onClick={(e) => onClick(e,beam)}\r\n            />\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default UIBeam","import * as React from 'react'\r\nimport { Theme, createStyles, withStyles, Tooltip, List, ListSubheader, ListItem, ListItemIcon, ListItemText, Collapse, Paper } from '@material-ui/core';\r\nimport { WithStyles } from '@material-ui/styles';\r\nimport { Node, Beam, Entity } from 'src/models/Farm';\r\nimport { ExpandLess, ExpandMore } from '@material-ui/icons';\r\n\r\nconst styles = (theme: Theme) => createStyles({\r\n    root: {\r\n        backgroundColor: theme.palette.primary.main,\r\n        padding: theme.spacing(1),\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        width:250,\r\n        borderRightColor:theme.palette.grey[600],\r\n        borderRight:\"solid 2px\",\r\n        overflow: 'auto',\r\n    },\r\n    list: {\r\n\r\n        // width: '100%',\r\n        // maxWidth: 360,\r\n        // backgroundColor: theme.palette.background.paper,\r\n    },\r\n    nested: {\r\n        paddingLeft: theme.spacing(4),\r\n    },\r\n})\r\n\r\n\r\n\r\n\r\ninterface TreePanelProps extends WithStyles<typeof styles> {\r\n    nodes: Node[],\r\n    beams: Beam[]\r\n    // onSelect(entity: Entity | number): void\r\n}\r\n\r\ninterface TreeState {\r\n    openedNodes:boolean,\r\n    openedBeams:boolean,\r\n\r\n}\r\n\r\nclass UITreePanel extends React.PureComponent<TreePanelProps, TreeState>{\r\n    constructor(props: TreePanelProps) {\r\n        super(props)\r\n        this.state = {\r\n            openedNodes:true,\r\n            openedBeams:true\r\n        }\r\n        this.clickTab = this.clickTab.bind(this)\r\n    }\r\n\r\n    clickTab(tab: string): void {\r\n        switch (tab) {\r\n            case 'nodes':\r\n                return this.setState((state) => ({\r\n                    openedNodes:!state.openedNodes\r\n                }))\r\n            case 'beams':\r\n                return this.setState((state) => ({\r\n                    openedBeams:!state.openedBeams\r\n                }))      \r\n            default:\r\n                return;\r\n        }\r\n    }\r\n    render() {\r\n        const { classes, nodes, beams } = this.props\r\n        const { openedBeams, openedNodes } = this.state\r\n        const { clickTab: openTab } = this\r\n        return (\r\n            <div className={classes.root}> \r\n                <Paper>\r\n                    <List\r\n                        // subheader={<ListSubheader component=\"div\" id=\"nested-list-subheader\">\r\n                        //     Структура проекта\r\n                        // </ListSubheader>}\r\n                        className={classes.list}\r\n                    >\r\n                        <ListItem button onClick={() => openTab('nodes')}>\r\n                            <ListItemText primary=\"Узлы\" />\r\n                            {openedNodes? <ExpandLess /> : <ExpandMore />}\r\n                        </ListItem>\r\n                        <Collapse in={openedNodes} timeout=\"auto\" unmountOnExit>\r\n                            <List component=\"div\" disablePadding>\r\n                                {nodes.map(item => (\r\n                                    <ListItem button className={classes.nested}>\r\n                                        <ListItemText primary={item.id} />\r\n                                    </ListItem>\r\n                                ))}\r\n                            </List>\r\n                        </Collapse>\r\n\r\n                        <ListItem button onClick={() => openTab('beams')}>\r\n                            <ListItemText primary=\"Лучи\" />\r\n                            {openedBeams? <ExpandLess /> : <ExpandMore />}\r\n                        </ListItem>\r\n                        <Collapse in={openedBeams} timeout=\"auto\" unmountOnExit>\r\n                            <List component=\"div\" disablePadding>\r\n                                {beams.map(item => (\r\n                                    <ListItem button className={classes.nested}>\r\n                                        <ListItemText primary={item.id} />\r\n                                    </ListItem>\r\n                                ))}\r\n                            </List>\r\n                        </Collapse>\r\n                    </List>\r\n\r\n                </Paper>\r\n            </div>\r\n\r\n\r\n        )\r\n    }\r\n\r\n}\r\n\r\nexport default withStyles(styles)(UITreePanel)","import * as React from 'react'\r\nimport { Theme, createStyles, withStyles } from '@material-ui/core';\r\nimport { WithStyles } from '@material-ui/styles';\r\nimport { Stage, Layer, StageProps } from 'react-konva';\r\nimport { UINode, UIBeam } from '.';\r\nimport { Farm, Entity } from 'src/models/Farm';\r\nimport { UIModes } from './UIToolBar';\r\nimport Konva from 'konva';\r\n\r\nconst styles = (theme: Theme) => createStyles({\r\n    // root: {\r\n    //     backgroundColor: theme.palette.primary.dark,\r\n    //     padding: theme.spacing(1),\r\n    //     display: \"flex\",\r\n    // },\r\n    \r\n    stage: {\r\n        backgroundColor: \"#fff\",\r\n        // width:\"100%\",\r\n        flexGrow: 1\r\n    }\r\n})\r\n\r\n\r\nexport interface UIStageProps extends WithStyles<typeof styles> {\r\n    farm:Farm,\r\n    uiMode:UIModes,\r\n    selectedEntity:Entity | undefined,\r\n    stageHeight:number,\r\n    stageWidth:number,\r\n    onClick(e: Konva.KonvaEventObject<MouseEvent>, entity?: Entity):void,\r\n    onMouseMove(e: Konva.KonvaEventObject<MouseEvent>):void,\r\n    onDrag(e:Konva.KonvaEventObject<DragEvent>, entity:Entity):void,\r\n    stage:React.RefObject<Stage & Konva.Stage>\r\n}\r\n\r\nconst UIStage: React.FC<UIStageProps> = ({classes, stage, stageHeight,stageWidth, onClick, onMouseMove, onDrag, farm, uiMode,selectedEntity }) => {\r\n    return (\r\n        <Stage\r\n            height={stageHeight}\r\n            width={stageWidth}\r\n            className={classes.stage}\r\n            onClick={onClick}\r\n            onMouseMove={onMouseMove}\r\n            ref={stage}\r\n        >\r\n\r\n            <Layer className=\"layer\" >\r\n                {farm.getBeams().map(beam => (\r\n                    <UIBeam\r\n                        key={beam.id}\r\n                        beam={beam}\r\n                        mode={uiMode}\r\n                        drag={onDrag}\r\n                        onClick={onClick}\r\n                        selected={selectedEntity === beam}\r\n                    />\r\n                ))}\r\n\r\n                {farm.getNodes().map(node => (\r\n                    <UINode\r\n                        key={node.id}\r\n                        node={node}\r\n                        mode={uiMode}\r\n                        drag={onDrag}\r\n                        onClick={onClick}\r\n                        selected={selectedEntity === node}\r\n                    />\r\n                ))}\r\n            </Layer>\r\n        </Stage>\r\n\r\n\r\n    )\r\n}\r\n\r\nexport default withStyles(styles)(UIStage)","import * as React from 'react'\r\nimport { IFarmStore } from './farmReducer';\r\nimport { Stage, Layer } from \"react-konva\"\r\nimport Konva from \"konva\"\r\nimport './style.css'\r\nimport { Farm, Node } from 'src/models/Farm';\r\nimport UINode from './components/UINode';\r\nimport UIBeam from './components/UIBeam';\r\nimport UIToolBar, { UIModes } from './components/UIToolBar';\r\nimport { Beam } from 'src/models/Farm/ModelBeam';\r\nimport { Entity } from 'src/models/Farm/ModelEntity';\r\nimport KeyHandler from 'react-key-handler'\r\nimport { createStyles, Theme, WithStyles, withStyles, Box } from '@material-ui/core';\r\nimport UIStage from './components/UIStage';\r\nimport { UITreePanel } from './components';\r\n\r\n\r\nconst styles = (theme: Theme) => createStyles({\r\n    root: {\r\n        width: window.innerWidth,\r\n        height: window.innerHeight,\r\n        maxHeight: window.innerHeight,\r\n        overflow: \"hidden\",\r\n        background: theme.palette.background.default,\r\n        // padding: theme.spacing(4),\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        // borderRadius:18,\r\n    },\r\n    stageBox: {\r\n        display: 'flex',\r\n        flexGrow: 1,\r\n        overflow: 'hidden'\r\n    }\r\n})\r\n\r\nexport interface UIFarmProps extends IFarmStore, WithStyles<typeof styles> {\r\n    update: (workSpace: Farm) => void\r\n}\r\n\r\nexport interface UIFarmState {\r\n    stageWidth: number,\r\n    stageHeight: number,\r\n    farm: Farm,\r\n    uiMode: UIModes,\r\n    selectedEntity: Entity | undefined,\r\n    paintEntity: Entity | undefined\r\n}\r\n\r\n\r\n\r\nclass UIFarm extends React.Component<UIFarmProps, UIFarmState>{\r\n    private stage: React.RefObject<Stage & Konva.Stage>\r\n    constructor(props: UIFarmProps) {\r\n        super(props)\r\n\r\n        this.state = {\r\n            stageHeight: 100,\r\n            stageWidth: 100,\r\n            farm: props.workSpace,\r\n            uiMode: UIModes.none,\r\n            selectedEntity: undefined,\r\n            paintEntity: undefined,\r\n\r\n        }\r\n        this.onClick = this.onClick.bind(this)\r\n        this.onDrag = this.onDrag.bind(this)\r\n        this.onMouseMove = this.onMouseMove.bind(this)\r\n        this.setFarm = this.setFarm.bind(this)\r\n        this.updateFarm = this.updateFarm.bind(this)\r\n        this.onKeyHandle = this.onKeyHandle.bind(this)\r\n\r\n        this.stage = React.createRef();\r\n    }\r\n    componentDidMount() {\r\n        this.setStageSize()\r\n    }\r\n    componentWillReceiveProps(nextProps: UIFarmProps) {\r\n        if (nextProps.workSpace !== this.state.farm)\r\n            this.setState({ farm: nextProps.workSpace })\r\n    }\r\n    setFarm(farm: Farm): void {\r\n        this.props.update(farm)\r\n    }\r\n    updateFarm(farm: Farm): void {\r\n        this.setState({ farm })\r\n    }\r\n\r\n    onClick(e: Konva.KonvaEventObject<MouseEvent>, entity?: Entity) {\r\n        const { uiMode, farm } = this.state\r\n        const isEmptyPlace = e.target.getStage() === e.target\r\n        e.evt.preventDefault()\r\n        if (e.evt.button === 0) {\r\n            switch (uiMode) {\r\n                case UIModes.addNode: {\r\n                    if (isEmptyPlace) {\r\n                        const { layerX, layerY } = e.evt\r\n                        farm.addNode(layerX, layerY, 0)\r\n                    }\r\n                    break;\r\n                }\r\n                case UIModes.addBeam: {\r\n                    if (!isEmptyPlace && entity instanceof Node) {\r\n\r\n                        const beam = farm.addBeam(entity.x, entity.y)\r\n                        farm.connectBeamToNode(beam, entity)\r\n                        this.setState({\r\n                            paintEntity: beam,\r\n                            uiMode: UIModes.addBeamStart\r\n                        })\r\n                    }\r\n                    break;\r\n                }\r\n                case UIModes.addBeamStart: {\r\n                    if (!isEmptyPlace && entity instanceof Node && this.state.paintEntity instanceof Beam) {\r\n                        const beam = this.state.paintEntity\r\n                        if (farm.connectBeamToNode(beam, entity, 'end'))\r\n                            this.setState({\r\n                                uiMode: UIModes.addBeam,\r\n                                paintEntity: undefined\r\n                            })\r\n                    }\r\n                    break;\r\n                }\r\n                case UIModes.delete: {\r\n                    if (!isEmptyPlace && entity) {\r\n                        farm.deleteEntity(entity)\r\n                    }\r\n                    break;\r\n                }\r\n                default:\r\n                    break;\r\n            }\r\n        }\r\n\r\n\r\n        if (isEmptyPlace) this.setState({ selectedEntity: undefined })\r\n\r\n        this.updateFarm(farm)\r\n    }\r\n    onMouseMove(e: Konva.KonvaEventObject<MouseEvent>) {\r\n        const { uiMode, farm, paintEntity } = this.state\r\n        const { layerX, layerY } = e.evt\r\n        switch (uiMode) {\r\n            case UIModes.addBeamStart: {\r\n                if (paintEntity && paintEntity instanceof Beam) {\r\n                    const beam = paintEntity\r\n                    beam.moveEndPoint(layerX, layerY)\r\n                } else this.setState({ uiMode: UIModes.addBeam })\r\n                this.updateFarm(farm)\r\n                break;\r\n            }\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n    onDrag(e: Konva.KonvaEventObject<DragEvent>, entity: Entity) {\r\n        const { farm, uiMode } = this.state\r\n        if (entity instanceof Node) {\r\n            if (uiMode === UIModes.move) {\r\n                farm.moveNodeTo(entity.id, e.evt.layerX, e.evt.layerY)\r\n            }\r\n        }\r\n        this.updateFarm(farm)\r\n    }\r\n    onKeyHandle(e: KeyboardEvent) {\r\n        switch (e.key) {\r\n            case \"Escape\": {\r\n                this.deletePaintEntity()\r\n                break;\r\n            }\r\n            default:\r\n                break;\r\n        }\r\n\r\n    }\r\n    setSelectMode(mode: UIModes) {\r\n        this.deletePaintEntity()\r\n        this.setState({\r\n            uiMode: mode,\r\n        })\r\n    }\r\n    deletePaintEntity() {\r\n\r\n        const { uiMode, paintEntity, farm } = this.state\r\n        if (uiMode === UIModes.addBeamStart && paintEntity) {\r\n            farm.deleteEntity(paintEntity)\r\n            this.setState({\r\n                paintEntity: undefined,\r\n            })\r\n            this.updateFarm(farm)\r\n        }\r\n    }\r\n    setStageSize(e?: UIEvent) {\r\n        const { current: stage } = this.stage\r\n        if (stage) {\r\n            const container: HTMLDivElement = stage.attrs.container\r\n            const { clientWidth, clientHeight } = container\r\n            this.setState({\r\n                stageHeight: clientHeight,\r\n                stageWidth: clientWidth\r\n            })\r\n        }\r\n    }\r\n    render() {\r\n        const { stageHeight, stageWidth, farm, uiMode, selectedEntity } = this.state\r\n        const { classes } = this.props\r\n        return (\r\n            <Box className={classes.root}>\r\n                <KeyHandler\r\n                    keyEventName={\"keyup\"}\r\n                    keyValue={\"Escape\"}\r\n                    onKeyHandle={this.onKeyHandle}\r\n                />\r\n                <UIToolBar\r\n                    selected={uiMode}\r\n                    onSelect={this.setSelectMode.bind(this)} />\r\n\r\n                <Box className={classes.stageBox}>\r\n                    <UITreePanel\r\n                        nodes={farm.getNodes()}\r\n                        beams={farm.getBeams()}\r\n                    />\r\n                    <UIStage\r\n                        onClick={this.onClick}\r\n                        onDrag={this.onDrag}\r\n                        onMouseMove={this.onMouseMove}\r\n                        stageHeight={stageHeight}\r\n                        stageWidth={stageWidth}\r\n                        farm={farm}\r\n                        stage={this.stage}\r\n                        selectedEntity={selectedEntity}\r\n                        uiMode={uiMode}\r\n                    />\r\n                </Box>\r\n\r\n\r\n            </Box>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withStyles(styles)(UIFarm)","import { FarmActions, FARM_UPDATE } from \"./farmTypes\";\r\nimport { Farm } from \"src/models/Farm\";\r\n\r\nexport const update = (workSpace : Farm) : FarmActions => ({\r\n    type:FARM_UPDATE,\r\n    workSpace\r\n})","import {connect} from 'react-redux'\r\nimport UIFarm from './farm'\r\nimport { AppState } from 'src/store';\r\nimport { Dispatch, bindActionCreators } from 'redux';\r\nimport * as farmActions from './farmActions';\r\n\r\nconst mapStateToProps =  (state: AppState) => ({\r\n    workSpace:state.farm.workSpace,\r\n})\r\nconst mapDispatchToProps = (dispatch: Dispatch) => bindActionCreators({...farmActions}, dispatch)\r\n\r\nexport default connect(mapStateToProps,mapDispatchToProps)(UIFarm);","export const navPath = {\r\n    HOME_PAGE: '/',\r\n    FARM_PAGE: '/farm'\r\n}\r\n\r\n","import * as React from 'react'\r\nimport { consts } from 'src/static';\r\nimport { Typography, Button, Theme, createStyles } from '@material-ui/core';\r\nimport { Link } from 'react-router-dom';\r\nimport { navPath } from 'src/navigation';\r\nimport { WithStyles, withStyles } from '@material-ui/styles';\r\n\r\n\r\nconst styles = (theme: Theme) => createStyles({\r\n\troot:{\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"column\",\r\n\t\talignItems: \"center\",\r\n\t\tjustifyContent: \"flex-start\",\r\n\r\n\t},\r\n\tlogo: {\r\n\t\twidth: \"auto\",\r\n\t\theight: 400\r\n\t},\r\n\ttitle: {\r\n\t\tpadding: 40\r\n\t},\r\n\tdescripton: {\r\n\t\tpadding: 40\r\n\t},\r\n\tbtn: {\r\n\r\n\t}\r\n})\r\n\r\n\r\nconst HomeHeader = ({classes} : WithStyles<typeof styles>) => {\r\n\treturn (\r\n\t\t<header className={classes.root}>\r\n\t\t\t<img src={consts.bridgeIcon_2} alt=\"logo\" className={classes.logo} />\r\n\t\t\t<Typography variant=\"h3\" className={classes.title}>\r\n\t\t\t\t{consts.title}\r\n\t\t\t</Typography>\r\n\t\t\t<Typography variant=\"subtitle1\" align=\"center\" className={classes.descripton}>\r\n\t\t\t\t{consts.description}\r\n\t\t\t</Typography>\r\n\t\t\t<Button\r\n\t\t\t\tcomponent={Link}\r\n\t\t\t\tto={navPath.FARM_PAGE}\r\n\t\t\t\tvariant=\"contained\"\r\n\t\t\t\tsize=\"large\"\r\n\t\t\t\tcolor=\"secondary\"\r\n\t\t\t>\r\n\t\t\t\tПоехали\r\n\t\t\t</Button>\r\n\t\t</header>\r\n\r\n\t)\r\n}\r\n\r\nexport default withStyles(styles)(HomeHeader)","import * as React from 'react'\r\nimport { IHomeStore } from './homeReducer';\r\nimport { Theme, WithStyles, createStyles, withStyles } from '@material-ui/core'\r\nimport { HomeHeader } from './components';\r\n\r\nconst styles = (theme: Theme) => createStyles({\r\n\troot: {\r\n\t\tminWidth: window.innerWidth,\r\n\t\tminHeight: window.innerHeight,\r\n\t\tbackground: theme.palette.background.default,\r\n\t\tpadding: theme.spacing(4)\r\n\t}\r\n})\r\n\r\nexport interface IHomeProps extends IHomeStore, WithStyles<typeof styles> {\r\n\tsetTitle: (title: string) => void,\r\n}\r\n\r\nclass Home extends React.Component<IHomeProps> {\r\n\trender() {\r\n\t\tconst { classes } = this.props\r\n\t\treturn (\r\n\t\t\t<div className={classes.root}>\r\n\t\t\t\t<HomeHeader/>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default withStyles(styles)(Home)","import { HomeActions, SET_TITLE } from \"./homeTypes\";\r\n\r\nexport const setTitle = (title :string) : HomeActions => ({\r\n    type:SET_TITLE,\r\n    title\r\n})","import {connect} from 'react-redux'\r\nimport Home from './home'\r\nimport { AppState } from 'src/store';\r\nimport { Dispatch, bindActionCreators } from 'redux';\r\nimport * as homeActions from './homeActions';\r\n\r\nconst mapStateToProps =  ({home}: AppState) => ({\r\n    title:home.title,\r\n})\r\nconst mapDispatchToProps = (dispatch: Dispatch) => bindActionCreators({...homeActions}, dispatch)\r\n\r\nexport default connect(mapStateToProps,mapDispatchToProps)(Home);","\r\nimport {  createMuiTheme } from '@material-ui/core';\r\nconst theme = createMuiTheme({\r\n    palette: {\r\n        primary: {\r\n            // dark: \"#067d93\",\r\n            dark:\"#0A4467\",\r\n            // main: \"#09B4D3\",\r\n            main: \"#1e779e\",\r\n            // light: \"#3ac3db\"\r\n            light:'#51A8D6'\r\n        },\r\n        secondary: {\r\n            dark: \"#a83e19\",\r\n            main: \"#f15a24\",\r\n            light: \"#f37b4f\"\r\n        },\r\n        background:{\r\n            default:'linear-gradient(35deg, #6863bf 0%, #067d93 50%, #e68a68 100%)'\r\n        }  \r\n        \r\n    },\r\n});\r\n\r\nexport default theme","import * as React from 'react';\nimport { UIFarm, Home } from './pages'\nimport { navPath } from './navigation'\nimport { Switch, Route } from 'react-router-dom';\nimport Helment from 'react-helmet'\nimport * as consts from './static/const';\nimport {CssBaseline} from '@material-ui/core';\nimport theme from './theme'\nimport { ThemeProvider } from '@material-ui/styles';\n\n\ninterface IAppProps {\n\n}\n\n\nclass App extends React.Component<IAppProps> {\n\trender() {\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<Helment\n\t\t\t\t\thtmlAttributes={{\"leng\":\"en\"}}\n\t\t\t\t\ttitleTemplate=\"Truss - %s\"\n\t\t\t\t\tdefaultTitle={consts.title}\n\t\t\t\t\tlink={[\n\t\t\t\t\t\t{\"rel\":\"shortcut icon\", \"href\":consts.bridgeIcon_2},\n\t\t\t\t\t\t{\"rel\":\"image_src\", \"href\":consts.airBridge},\n\t\t\t\t\t\t{\"rel\":\"stylesheet\", \"href\":'https://fonts.googleapis.com/css?family=Roboto:300,400,500'},\n\t\t\t\t\t\t{\"rel\":\"stylesheet\", \"href\":'https://fonts.googleapis.com/icon?family=Material+Icons'}\n\t\t\t\t\t]}\n\t\t\t\t\tmeta={[\n\t\t\t\t\t\t{\"charSet\":\"utf-8\"},\n\t\t\t\t\t\t{\"name\": \"viewport\", \"content\": \"minimum-scale=1, initial-scale=1, width=device-width, shrink-to-fit=no\" },\n\t\t\t\t\t\t{\"name\": \"theme-color\", \"content\": \"#000000\" },\n\t\t\t\t\t\t{\"name\": \"description\", \"content\": consts.description },\n\t\t\t\t\t\t{\"property\": \"og:type\", \"content\": \"website\"},\n\t\t\t\t\t\t{\"property\": \"og:title\", \"content\": consts.title},\n\t\t\t\t\t\t{\"property\": \"og:image\", \"content\": consts.airBridge},\n\t\t\t\t\t\t{\"property\": \"vk:image\", \"content\": consts.airBridge},\n\t\t\t\t\t\t{\"property\": \"twitter:image\", \"content\": consts.airBridge},\n\t\t\t\t\t\t{\"property\": \"og:url\", \"content\": consts.url},\n\t\t\t\t\t]}\n\n\t\t\t\t/>\n\t\t\t\t<CssBaseline/>\n\t\t\t\t<ThemeProvider theme={theme}>\n\t\t\t\t\t<main style={{height:\"100%\"}}>\n\t\t\t\t\t\t<Switch>\n\t\t\t\t\t\t\t<Route path={navPath.HOME_PAGE} component={Home} exact />\n\t\t\t\t\t\t\t<Route path={navPath.FARM_PAGE} component={UIFarm} />\n\t\t\t\t\t\t</Switch>\n\t\t\t\t\t</main>\n\n\t\t\t\t</ThemeProvider>\n\n\t\t\t</React.Fragment>\n\t\t)\n\t}\n}\n\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux'\nimport { history } from './utils';\nimport store from './store';\nimport { HashRouter, Router } from 'react-router-dom';\nimport App from './App';\nimport './index.css';\n\nconst isGitHubPages = process.env.REACT_APP_GHP || 'false';\n\nconst Root = () => {    \n    if (isGitHubPages === 'true') return (\n        <HashRouter>\n            <App />\n        </HashRouter>\n    )\n    else return (\n        <Router history={history}>\n            <App />\n        </Router>\n    )\n}\n\n\nReactDOM.render(\n    <Provider store={store}>\n        <Root/>\n    </Provider>,\n    document.getElementById('root')\n);","// import favicon from './favicon.ico'\r\nimport ogImage from './ogImage.png'\r\nimport bridgeIcon_1 from './icon.png'\r\nimport bridgeIcon_2 from './bridge.png'\r\nimport airBridge from './airBridge.png'\r\nimport path from 'path'\r\n\r\n// Strings\r\nexport const url = process.env.PUBLIC_URL\r\nexport const title = \"Truss - ферма для каждого\"\r\nexport const description = \"Ферма (farm или truss) — стержневая система в строительной механике, остающаяся геометрически неизменяемой после замены её жёстких узлов шарнирными.\"\r\nexport const favicon = path.resolve(__dirname,\"favicon.ico\")\r\n\r\n\r\n// Images\r\nexport {\r\n    ogImage,\r\n    bridgeIcon_1,\r\n    bridgeIcon_2,\r\n    airBridge\r\n}","module.exports = __webpack_public_path__ + \"static/media/ogImage.0619e300.png\";","module.exports = __webpack_public_path__ + \"static/media/icon.68e274b2.png\";","module.exports = __webpack_public_path__ + \"static/media/bridge.e53bced3.png\";","module.exports = __webpack_public_path__ + \"static/media/airBridge.7d581a65.png\";"],"sourceRoot":""}