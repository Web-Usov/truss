(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{122:function(e,t,n){},129:function(e,t,n){},131:function(e,t,n){},132:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(38),o=n.n(r),c=n(25),s=(n(22),n(18)),u=n(40),d=n(23),l={workSpace:new d.a},h=n(33),f=Object(s.b)({farm:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u.a:return{workSpace:new d.a(t.workSpace)};default:return e}},home:h.b}),m=Object(s.c)(f),v=n(30),g=(n(13),n(48));n(131);o.a.render(i.a.createElement(c.a,{store:m},i.a.createElement(function(){return i.a.createElement(v.a,null,i.a.createElement(g.a,null))},null)),document.getElementById("root"))},22:function(e,t,n){"use strict";var a=n(10),i=Object(a.a)(),r=n(8),o=n(9),c=function(){function e(){Object(r.a)(this,e)}return Object(o.a)(e,null,[{key:"angleBePoints",value:function(e,t,n,a){return Math.atan2(-t+a,-e+n)/Math.PI}},{key:"lengthBePoints",value:function(e,t,n,a){return Math.sqrt(Math.pow(e-n,2)+Math.pow(t-a,2))}}]),e}();n.d(t,"b",function(){return i}),n.d(t,"a",function(){return c})},23:function(e,t,n){"use strict";var a=n(8),i=n(9),r=n(17),o=n(15),c=n(16),s=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(r.a)(this,Object(o.a)(t).call(this,e))).beamsID=void 0,n.forcesID=void 0,n.beamsID=e.beamsID||[],n.forcesID=e.forcesID||[],n}return Object(c.a)(t,e),Object(i.a)(t,[{key:"connectBeam",value:function(e){this.beamsID.find(function(t){return t===e})||this.beamsID.push(e)}},{key:"removeBeam",value:function(e){this.beamsID.filter(function(t){return t!==e})}},{key:"connectForce",value:function(e){this.forcesID.find(function(t){return t===e})||this.forcesID.push(e)}},{key:"removeForce",value:function(e){this.forcesID.filter(function(t){return t!==e})}}]),t}(n(41).a),u=n(32),d=function(){function e(t){Object(a.a)(this,e),this.fixedNodes=void 0,this.forces=void 0,this.nodes=void 0,this.beams=void 0,this.time=void 0,this.nodes=t?t.nodes:new Map,this.fixedNodes=t?t.fixedNodes:new Map,this.forces=t?t.forces:new Map,this.beams=t?t.beams:new Map,this.time=Date.now()}return Object(i.a)(e,[{key:"addNode",value:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=new s({x:e,y:t,angle:n,name:a});this.nodes.set(i.id,i)}},{key:"addBeam",value:function(e,t){var n=new u.a({x:e,y:t});return this.beams.set(n.id,n),n}},{key:"deleteNode",value:function(e){this.nodes.delete(e)}},{key:"deleteBeam",value:function(e){this.beams.delete(e)}},{key:"getNode",value:function(e){var t=this.nodes.get(e);if(!t)throw Error("\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d \u0443\u0437\u0435\u043b \u0441 ID ".concat(e));return t}},{key:"getBeam",value:function(e){var t=this.beams.get(e);if(!t)throw Error("\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d \u043b\u0443\u0447 \u0441 ID ".concat(e));return t}},{key:"getForce",value:function(e){var t=this.forces.get(e);if(!t)throw Error("\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430 \u0441\u0438\u043b\u0430 \u0441 ID ".concat(e));return t}},{key:"getNodes",value:function(){var e=[],t=!0,n=!1,a=void 0;try{for(var i,r=this.nodes.values()[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var o=i.value;e.push(o)}}catch(c){n=!0,a=c}finally{try{t||null==r.return||r.return()}finally{if(n)throw a}}return e}},{key:"getBeams",value:function(){var e=[],t=!0,n=!1,a=void 0;try{for(var i,r=this.beams.values()[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var o=i.value;e.push(o)}}catch(c){n=!0,a=c}finally{try{t||null==r.return||r.return()}finally{if(n)throw a}}return e}},{key:"getForcesOnNode",value:function(e){var t=this;return this.getNode(e).forcesID.map(function(e){return t.getForce(e)})}},{key:"getBeamsOnNode",value:function(e){var t=this;return this.getNode(e).beamsID.map(function(e){return t.getBeam(e)})}},{key:"getNodesOnBeam",value:function(e){var t=this.getBeam(e),n=t.startConnectedNodeID,a=t.endConnectedNodeID;return[this.getNode(n),this.getNode(a)]}},{key:"moveNodeTo",value:function(e,t,n){var a=this,i=this.getNode(e);i.x=t,i.y=n,i.beamsID.forEach(function(i){var r=a.getBeam(i);r.startConnectedNodeID===e?r.moveStartPoint(t,n):r.endConnectedNodeID===e&&r.moveEndPoint(t,n)})}}]),e}();n.d(t,"a",function(){return d}),n.d(t,"b",function(){return s})},32:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var a=n(8),i=n(9),r=n(17),o=n(15),c=n(16),s=n(41),u=n(22),d=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(r.a)(this,Object(o.a)(t).call(this,e))).length=void 0,n.startConnectedNodeID=void 0,n.endConnectedNodeID=void 0,n.newAngle=void 0,n.length=e.length||0,n.startConnectedNodeID=e.startConnectedNodeID||0,n.endConnectedNodeID=e.endConnectedNodeID||0,n.newAngle=n.angle,n}return Object(c.a)(t,e),Object(i.a)(t,[{key:"connectNode",value:function(e,t){"start"===t?this.startConnectedNodeID=e:this.endConnectedNodeID=e}},{key:"removeNode",value:function(e){"start"===e?this.startConnectedNodeID=0:this.endConnectedNodeID=0}},{key:"getEndX",value:function(){return this.x+this.length*Math.cos(this.angle*Math.PI)}},{key:"getEndY",value:function(){return this.y+this.length*Math.sin(this.angle*Math.PI)}},{key:"moveStartPoint",value:function(e,t){var n=this.getEndX(),a=this.getEndY();this.x=e,this.y=t,this.angle=u.a.angleBePoints(e,t,n,a),this.length=u.a.lengthBePoints(e,t,n,a)}},{key:"moveEndPoint",value:function(e,t){this.angle=u.a.angleBePoints(this.x,this.y,e,t),this.length=u.a.lengthBePoints(this.x,this.y,e,t)}}]),t}(s.a)},33:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o});var a=n(26),i=n(42),r={title:"Hello, world!"},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i.a:return Object(a.a)({},e,{title:t.title});default:return e}}},34:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a={HOME_PAGE:"/",FARM_PAGE:"/farm"}},40:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a="FARM_UPDATE"},41:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var a=n(8),i=function e(t){Object(a.a)(this,e),this.id=void 0,this.x=void 0,this.y=void 0,this.angle=void 0,this.name=void 0,this.newX=void 0,this.newY=void 0,this.id=Date.now(),this.x=t.x||0,this.y=t.y||0,this.angle=t.angle||0,this.name=t.name||this.id+"",this.newX=this.x,this.newY=this.y}},42:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a="SET_TITLE"},48:function(e,t,n){"use strict";(function(e){var a=n(8),i=n(9),r=n(17),o=n(15),c=n(16),s=n(0),u=n(53),d=n(34),l=n(13),h=n(68),f=n.n(h),m=(n(129),n(51)),v=n(52),g=n.n(v),p=function(t){function n(e){return Object(a.a)(this,n),Object(r.a)(this,Object(o.a)(n).call(this,e))}return Object(c.a)(n,t),Object(i.a)(n,[{key:"render",value:function(){return s.createElement(s.Fragment,null,s.createElement(f.a,{htmlAttributes:{leng:"en"},titleTemplate:"Truss - %s",defaultTitle:m.b,meta:[{charSet:"utf-8"},{name:"viewport",content:"width=device-width, initial-scale=1"},{name:"theme-color",content:"#000000"},{name:"description",content:m.a},{property:"og:type",content:"website"},{property:"og:image",content:g.a.resolve(e,"ogImage.png")}],link:[{rel:"shortcut icon",href:g.a.resolve(e,"favicon.ico")}]}),s.createElement("main",null,s.createElement(l.c,null,s.createElement(l.a,{path:d.a.HOME_PAGE,component:u.a,exact:!0}),s.createElement(l.a,{path:d.a.FARM_PAGE,component:u.b}))))}}]),n}(s.Component);t.a=p}).call(this,"/")},51:function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return i});var a="Truss - \u0444\u0435\u0440\u043c\u0430 \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e",i="\u0424\u0435\u0440\u043c\u0430 (farm \u0438\u043b\u0438 truss) \u2014 \u0441\u0442\u0435\u0440\u0436\u043d\u0435\u0432\u0430\u044f \u0441\u0438\u0441\u0442\u0435\u043c\u0430 \u0432 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0439 \u043c\u0435\u0445\u0430\u043d\u0438\u043a\u0435, \u043e\u0441\u0442\u0430\u044e\u0449\u0430\u044f\u0441\u044f \u0433\u0435\u043e\u043c\u0435\u0442\u0440\u0438\u0447\u0435\u0441\u043a\u0438 \u043d\u0435\u0438\u0437\u043c\u0435\u043d\u044f\u0435\u043c\u043e\u0439 \u043f\u043e\u0441\u043b\u0435 \u0437\u0430\u043c\u0435\u043d\u044b \u0435\u0451 \u0436\u0451\u0441\u0442\u043a\u0438\u0445 \u0443\u0437\u043b\u043e\u0432 \u0448\u0430\u0440\u043d\u0438\u0440\u043d\u044b\u043c\u0438."},53:function(e,t,n){"use strict";var a={};n.r(a),n.d(a,"update",function(){return j});var i={};n.r(i),n.d(i,"setTitle",function(){return P});var r,o=n(26),c=n(25),s=n(8),u=n(9),d=n(17),l=n(15),h=n(21),f=n(16),m=n(0),v=n(20),g=(n(122),n(23));!function(e){e[e.none=0]="none",e[e.drag=1]="drag",e[e.addNode=2]="addNode",e[e.dragNode=3]="dragNode",e[e.addBeam=4]="addBeam",e[e.addBeamStart=5]="addBeamStart",e[e.addBeamEnd=6]="addBeamEnd",e[e.dragBeam=7]="dragBeam"}(r||(r={}));var p=[{name:"None",mod:r.none},{name:"Drag",mod:r.drag},{name:"Add Node",mod:r.addNode},{name:"Add Beam",mod:r.addBeam}],b=function(e){var t=e.onSelect,n=e.selected;return m.createElement("ul",{style:{position:"absolute"}},p.map(function(e,a){return m.createElement("li",{key:a},m.createElement("label",null,m.createElement("span",null,e.name),m.createElement("input",{type:"radio",name:"UiMode",value:e.mod,checked:n===e.mod,onChange:function(n){return t(e.mod)}})))}))},y=function(e){var t=e.node,n=e.drag,a=e.mode,i=e.onClick,o=e.selected;return m.createElement(m.Fragment,null,m.createElement(v.Text,{x:t.x-4*t.name.length,y:t.y-30,text:t.name,_useStrictMode:!0}),m.createElement(v.Circle,{key:t.id,radius:o?8:6,x:t.x,y:t.y,fill:"#ddd",stroke:"#888",strokeWidth:o?2:0,draggable:a===r.drag||a===r.dragNode,_useStrictMode:!0,shadowBlur:5,onDragMove:function(e){return n(e,t)},onClick:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return i(e,t)})}))},k=function(e){var t=e.beam,n=(e.drag,e.mode,e.onClick);e.selected;return m.createElement(m.Fragment,null,m.createElement(v.Line,{points:[t.x,t.y,t.getEndX(),t.getEndY()],stroke:"#bbb",strokeWidth:4,onClick:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return n(e,t)})}))},E=n(32),w=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(d.a)(this,Object(l.a)(t).call(this,e))).state={stageHeight:.75*window.innerHeight,stageWidth:.75*window.innerWidth,farm:e.workSpace,uiMode:r.none,selectedID:-1,paintEntity:void 0},n.onClick=n.onClick.bind(Object(h.a)(n)),n.onDrag=n.onDrag.bind(Object(h.a)(n)),n.onMouseMove=n.onMouseMove.bind(Object(h.a)(n)),n.setFarm=n.setFarm.bind(Object(h.a)(n)),n.updateFarm=n.updateFarm.bind(Object(h.a)(n)),n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.workSpace!==this.state.farm&&this.setState({farm:e.workSpace})}},{key:"setFarm",value:function(e){this.props.update(e)}},{key:"updateFarm",value:function(e){this.setState({farm:e})}},{key:"onClick",value:function(e,t){var n=this.state,a=n.uiMode,i=n.farm,o=e.target.getStage()===e.target;switch(a){case r.addNode:if(o){var c=e.evt,s=c.layerX,u=c.layerY;i.addNode(s,u,0)}break;case r.addBeam:if(!o&&t instanceof g.b){var d=i.addBeam(t.x,t.y);d.connectNode(t.id,"start"),t.connectBeam(d.id),this.setState({paintEntity:d,uiMode:r.addBeamStart})}break;case r.addBeamStart:if(!o&&t instanceof g.b&&this.state.paintEntity instanceof E.a){var l=this.state.paintEntity;l.moveEndPoint(t.x,t.y),l.connectNode(t.id,"end"),t.connectBeam(l.id),this.setState({uiMode:r.addBeam,paintEntity:void 0})}}o&&this.setState({selectedID:-1}),this.updateFarm(i)}},{key:"onMouseMove",value:function(e){var t=this.state,n=t.uiMode,a=t.farm,i=t.paintEntity;switch(n){case r.addBeamStart:if(i&&i instanceof E.a){var o=i,c=e.evt,s=c.layerX,u=c.layerY;o.moveEndPoint(s,u)}else this.setSelectMode(r.addBeam);this.updateFarm(a)}}},{key:"onDrag",value:function(e,t){var n=this.state,a=n.farm,i=n.uiMode;t instanceof g.b&&(i!==r.dragNode&&i!==r.drag||a.moveNodeTo(t.id,e.evt.layerX,e.evt.layerY)),this.updateFarm(a)}},{key:"setSelectMode",value:function(e){this.setState({uiMode:e})}},{key:"render",value:function(){var e=this,t=this.state,n=t.stageHeight,a=t.stageWidth,i=t.farm,r=t.uiMode,o=t.selectedID;return m.createElement("div",null,m.createElement(b,{selected:r,onSelect:this.setSelectMode.bind(this)}),m.createElement(v.Stage,{height:n,width:a,className:"stage",style:{height:n+"px",width:a+"px"},onClick:this.onClick,onMouseMove:this.onMouseMove},m.createElement(v.Layer,{className:"layer"},i.getBeams().map(function(t){return m.createElement(k,{key:t.id,beam:t,mode:r,drag:e.onDrag,onClick:e.onClick,selected:o===t.id})}),i.getNodes().map(function(t){return m.createElement(y,{key:t.id,node:t,mode:r,drag:e.onDrag,onClick:e.onClick,selected:o===t.id})}))))}}]),t}(m.Component),N=n(18),O=n(40),j=function(e){return{type:O.a,workSpace:e}},D=Object(c.b)(function(e){return{workSpace:e.farm.workSpace}},function(e){return Object(N.a)(Object(o.a)({},a),e)})(w),M=n(66),I=n.n(M),S=n(33),B=n(34),C=n(30),x=function(e){function t(){return Object(s.a)(this,t),Object(d.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(u.a)(t,[{key:"_setTitle",value:function(){var e=this.props.title===S.a.title?"To Farm":S.a.title;this.props.setTitle(e+"")}},{key:"render",value:function(){return m.createElement("div",{className:"App"},m.createElement("header",{className:"App-header"},m.createElement("img",{src:I.a,className:"App-logo",alt:"logo"}),m.createElement("p",null,"TypeScript - pain first, then nice"),m.createElement(C.b,{to:B.a.FARM_PAGE,className:"App-link"},this.props.title||"To Farm )"),m.createElement("button",{className:"btn",onClick:this._setTitle.bind(this)},"Change title")))}}]),t}(m.Component),F=n(42),P=function(e){return{type:F.a,title:e}},A=Object(c.b)(function(e){return{title:e.home.title}},function(e){return Object(N.a)(Object(o.a)({},i),e)})(x);n.d(t,"b",function(){return D}),n.d(t,"a",function(){return A})},66:function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},69:function(e,t,n){e.exports=n(132)}},[[69,1,2]]]);
//# sourceMappingURL=main.78c53de5.chunk.js.map