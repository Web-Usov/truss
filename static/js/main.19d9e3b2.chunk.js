(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{108:function(e,t,n){},110:function(e,t,n){},111:function(e,t,n){},112:function(e,t,n){"use strict";n.r(t);var i={};n.r(i),n.d(i,"incCounter",function(){return C});var r={};n.r(r),n.d(r,"setTitle",function(){return W});var a=n(0),o=n.n(a),c=n(31),s=n.n(c),u=n(22),d=n(8),l=(Object(d.a)(),n(14)),h=n(19),f={counter:0},m={title:"Hello, world!"},v=Object(l.b)({farm:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f;switch((arguments.length>1?arguments[1]:void 0).type){case"INC_COUNTER":return Object(h.a)({},e,{counter:e.counter+1});default:return e}},home:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TITLE":return Object(h.a)({},e,{title:t.title});default:return e}}}),b=Object(l.c)(v),g=n(26),p=n(20),y=n(10),O=n(13),j=n(17),N=n(16),E=n(18),k=n(33),w=n(23),I=(n(108),function(e){function t(e,n){var i;return Object(y.a)(this,t),(i=Object(j.a)(this,Object(N.a)(t).call(this,e))).beamsID=void 0,i.forcesID=void 0,i.beamsID=n?n.beamsID:[],i.forcesID=n?n.forcesID:[],i}return Object(E.a)(t,e),Object(O.a)(t,[{key:"addBeam",value:function(e){this.beamsID.find(function(t){return t===e})||this.beamsID.push(e)}},{key:"deleteBeam",value:function(e){this.beamsID.filter(function(t){return t!==e})}},{key:"addForce",value:function(e){this.forcesID.find(function(t){return t===e})||this.forcesID.push(e)}},{key:"deleteForce",value:function(e){this.forcesID.filter(function(t){return t!==e})}}]),t}(function e(t){Object(y.a)(this,e),this.id=void 0,this.x=void 0,this.y=void 0,this.angle=void 0,this.name=void 0,this.newX=void 0,this.newY=void 0,this.id=Date.now(),this.x=t.x||0,this.y=t.y||0,this.angle=t.angle||0,this.name=t.name||this.id+"",this.newX=this.x,this.newY=this.y})),D=function(){function e(){Object(y.a)(this,e),this.fixedNodes=void 0,this.forces=void 0,this.nodes=void 0,this.beams=void 0,this.nodes=[],this.fixedNodes=[],this.forces=[],this.beams=[]}return Object(O.a)(e,[{key:"addNode",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=new I({x:e,y:t,angle:n,name:i});this.nodes.push(r)}},{key:"deleteNode",value:function(e){this.nodes.filter(function(t){return t.id!==e})}},{key:"getNode",value:function(e){var t=this.nodes.find(function(t){return t.id===e});if(!t)throw Error("\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d \u0443\u0437\u0435\u043b \u0441 ID ".concat(e));return t}},{key:"getBeam",value:function(e){var t=this.beams.find(function(t){return t.id===e});if(!t)throw Error("\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d \u043b\u0443\u0447 \u0441 ID ".concat(e));return t}},{key:"getForce",value:function(e){var t=this.forces.find(function(t){return t.id===e});if(!t)throw Error("\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430 \u0441\u0438\u043b\u0430 \u0441 ID ".concat(e));return t}},{key:"getForcesOnNode",value:function(e){return this.forces.filter(function(t){return t.nodeID===e})}},{key:"getBeamsOnNode",value:function(e){var t=this.getNode(e);return this.beams.filter(function(e){return void 0!==t.beamsID.find(function(t){return t===e.id})})}},{key:"getNodesOnBeam",value:function(e){var t=this.getBeam(e),n=t.startConnectedNodeID,i=t.endConnectedNodeID;return[this.getNode(n),this.getNode(i)]}}]),e}(),x=function(e){var t=e.node,n=e.dragNode;return a.createElement(a.Fragment,null,a.createElement(w.Text,{x:t.x-4*t.name.length,y:t.y-30,text:t.name,_useStrictMode:!0}),a.createElement(w.Circle,{key:t.id,radius:10,x:t.x,y:t.y,fill:"#ddd",stroke:"#888",strokeWidth:3,draggable:!0,_useStrictMode:!0,onDragMove:function(e){return n(t,e)}}))},T=function(e){function t(e){var n;return Object(y.a)(this,t),(n=Object(j.a)(this,Object(N.a)(t).call(this,e))).state={stageHeight:.75*window.innerHeight,stageWidth:.75*window.innerWidth,farm:new D},n.addNode=n.addNode.bind(Object(k.a)(n)),n.state.farm.addNode(100,100,0),n}return Object(E.a)(t,e),Object(O.a)(t,[{key:"addNode",value:function(e){if(e.target.getStage()===e.target){var t=e.evt,n=t.layerX,i=t.layerY;this.state.farm.addNode(n,i,0),this.setState({farm:this.state.farm})}}},{key:"dragNode",value:function(e,t){var n=this.state.farm.getNode(e.id);n.x=t.evt.layerX,n.y=t.evt.layerY,this.setState({farm:this.state.farm})}},{key:"render",value:function(){var e=this,t=this.state,n=t.stageHeight,i=t.stageWidth;return a.createElement("div",null,a.createElement(w.Stage,{height:n,width:i,className:"stage",style:{height:n+"px",width:i+"px"},onClick:this.addNode},a.createElement(w.Layer,{className:"layer"},this.state.farm.nodes.map(function(t){return a.createElement(x,{key:t.id,node:t,dragNode:e.dragNode.bind(e)})}))))}}]),t}(a.Component),C=function(){return{type:"INC_COUNTER"}},S=Object(u.b)(function(e){e.farm;return{}},function(e){return Object(l.a)(Object(h.a)({},i),e)})(T),_=n(53),B=n.n(_),F="/",A="/farm",H=function(e){function t(){return Object(y.a)(this,t),Object(j.a)(this,Object(N.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(O.a)(t,[{key:"_setTitle",value:function(){var e=this.props.title===m.title?"To Farm":m.title;this.props.setTitle(e+"")}},{key:"render",value:function(){return a.createElement("div",{className:"App"},a.createElement("header",{className:"App-header"},a.createElement("img",{src:B.a,className:"App-logo",alt:"logo"}),a.createElement("p",null,"TypeScript - pain first, then nice"),a.createElement(g.b,{to:A,className:"App-link"},this.props.title||"To Farm )"),a.createElement("button",{className:"btn",onClick:this._setTitle.bind(this)},"Change title")))}}]),t}(a.Component),W=function(e){return{type:"SET_TITLE",title:e}},X=Object(u.b)(function(e){return{title:e.home.title}},function(e){return Object(l.a)(Object(h.a)({},r),e)})(H),Y=(n(110),function(e){function t(){return Object(y.a)(this,t),Object(j.a)(this,Object(N.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){return a.createElement("main",null,a.createElement(p.c,null,a.createElement(p.a,{path:F,component:X,exact:!0}),a.createElement(p.a,{path:A,component:S})))}}]),t}(a.Component));n(111);s.a.render(o.a.createElement(u.a,{store:b},o.a.createElement(function(){return o.a.createElement(g.a,null,o.a.createElement(Y,null))},null)),document.getElementById("root"))},53:function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},55:function(e,t,n){e.exports=n(112)}},[[55,1,2]]]);
//# sourceMappingURL=main.19d9e3b2.chunk.js.map