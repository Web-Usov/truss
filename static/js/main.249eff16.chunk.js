(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{127:function(e,t,n){e.exports=n.p+"static/media/ogImage.0619e300.png"},128:function(e,t,n){e.exports=n.p+"static/media/icon.68e274b2.png"},129:function(e,t,n){e.exports=n.p+"static/media/bridge.e53bced3.png"},130:function(e,t,n){e.exports=n.p+"static/media/airBridge.7d581a65.png"},131:function(e,t,n){e.exports=n.p+"static/media/fixation.9b63597e.svg"},157:function(e,t,n){e.exports=n(243)},22:function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"str",function(){return h}),n.d(t,"UI",function(){return y}),n.d(t,"canvas",function(){return b}),n.d(t,"img",function(){return v});var o=n(126),r=n.n(o),a=n(127),c=n.n(a),i=n(128),s=n.n(i),l=n(129),d=n.n(l),u=n(130),p=n.n(u),m=n(131),f=n.n(m),h={url:"https://web-usov.github.io/truss",title:"Truss - \u0444\u0435\u0440\u043c\u0430 \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e",description:"\u0424\u0435\u0440\u043c\u0430 (farm \u0438\u043b\u0438 truss) \u2014 \u0441\u0442\u0435\u0440\u0436\u043d\u0435\u0432\u0430\u044f \u0441\u0438\u0441\u0442\u0435\u043c\u0430 \u0432 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0439 \u043c\u0435\u0445\u0430\u043d\u0438\u043a\u0435, \u043e\u0441\u0442\u0430\u044e\u0449\u0430\u044f\u0441\u044f \u0433\u0435\u043e\u043c\u0435\u0442\u0440\u0438\u0447\u0435\u0441\u043a\u0438 \u043d\u0435\u0438\u0437\u043c\u0435\u043d\u044f\u0435\u043c\u043e\u0439 \u043f\u043e\u0441\u043b\u0435 \u0437\u0430\u043c\u0435\u043d\u044b \u0435\u0451 \u0436\u0451\u0441\u0442\u043a\u0438\u0445 \u0443\u0437\u043b\u043e\u0432 \u0448\u0430\u0440\u043d\u0438\u0440\u043d\u044b\u043c\u0438.",favicon:r.a.resolve(e,"favicon.ico")},y={cellSize:45,MMinCell:200,koefOfNewPos:100,nodeSize:0,beamSize:0,koefOnGrid:0,sidebarWidth:240};y.nodeSize=y.cellSize/3,y.beamSize=y.cellSize/7,y.koefOnGrid=y.MMinCell/y.cellSize;var b={width:2500,height:1500},v={ogImage:c.a,bridgeIcon_1:s.a,bridgeIcon_2:d.a,airBridge:p.a,FixationIcon:f.a}}.call(this,"/")},242:function(e,t,n){},243:function(e,t,n){"use strict";n.r(t);var o={};n.r(o),n.d(o,"UIModes",function(){return a}),n.d(o,"theme",function(){return y}),n.d(o,"getNodeColor",function(){return b}),n.d(o,"getNodeStorkeColor",function(){return v}),n.d(o,"getNodeStorkeWidth",function(){return g}),n.d(o,"getBeamColor",function(){return O}),n.d(o,"nodeMouseEnter",function(){return E}),n.d(o,"nodeMouseLeave",function(){return k}),n.d(o,"beamMouseEnter",function(){return j}),n.d(o,"beamMouseLeave",function(){return C});var r={};n.r(r),n.d(r,"mainBackGround",function(){return w}),n.d(r,"node",function(){return N}),n.d(r,"staticNode",function(){return x}),n.d(r,"fixedNode",function(){return S}),n.d(r,"beam",function(){return _});var a,c=n(0),i=n.n(c),s=n(20),l=n.n(s),d=n(44),u=(Object(d.a)(),n(19)),p=n(11),m=n(22),f=n(145);!function(e){e[e.none=0]="none",e[e.move=1]="move",e[e.addNode=2]="addNode",e[e.addBeam=3]="addBeam",e[e.addBeamStart=4]="addBeamStart",e[e.delete=5]="delete"}(a||(a={}));var h,y=Object(f.a)({palette:{primary:{dark:"#0A4467",main:"#1e779e",light:"#51A8D6"},secondary:{dark:"#a83e19",main:"#f15a24",light:"#F39B7C"},background:{default:"linear-gradient(35deg, #6863bf 0%, #067d93 50%, #e68a68 100%)"}},overrides:{MuiTooltip:{tooltip:{fontSize:14}}}}),b=function(e){return e.isStatic?e.fixation?r.fixedNode:r.staticNode:r.node},v=function(e,t){switch(t){case a.move:return e.isStatic?y.palette.secondary.dark:y.palette.primary.light;case a.addBeam:case a.addBeamStart:return y.palette.primary.light;default:return y.palette.secondary.main}},g=function(e,t){switch(t){case a.move:return e.isStatic?0:2;case a.addBeam:case a.addBeamStart:return 2;default:return 0}},O=function(e){return r.beam},E=function(e,t,n){var o=e.target.getStage();switch(n){case a.delete:if(t.isStatic){o.container().style.cursor="default";break}o.container().style.cursor="pointer";break;case a.none:o.container().style.cursor="pointer";break;case a.addBeam:case a.addBeamStart:o.container().style.cursor="crosshair";break;case a.move:if(t.isStatic){o.container().style.cursor="default";break}o.container().style.cursor="move"}},k=function(e){var t=e.target.getStage();t&&(t.container().style.cursor="default")},j=function(e,t,n){var o=e.target.getStage();switch(n){case a.delete:case a.none:o.container().style.cursor="pointer"}},C=function(e){var t=e.target.getStage();t&&(t.container().style.cursor="default")},w="#09B4D3",N=y.palette.secondary.main,x=y.palette.secondary.dark,S=y.palette.secondary.dark,_=y.palette.secondary.light,I=n(308),B=function(){function e(){Object(u.a)(this,e)}return Object(p.a)(e,null,[{key:"angleBePoints",value:function(e,t,n,o){return Math.atan2(-t+o,-e+n)/Math.PI}},{key:"lengthBePoints",value:function(e,t,n,o){return Math.sqrt(Math.pow(e-n,2)+Math.pow(t-o,2))}},{key:"cellX",value:function(e){return Math.round(e/m.UI.cellSize)*m.UI.cellSize}},{key:"cellY",value:function(e){return Math.round(e/m.UI.cellSize)*m.UI.cellSize}},{key:"signum",value:function(e){return e>0?1:e<0?-1:0}},{key:"multMatrxi",value:function(e,t){var n=e.length,o=t.length,r=e[0].length,a=t[0].length,c=[];if(r!==o)throw new Error("\u0420\u0430\u0437\u043c\u0435\u0440\u043d\u043e\u0441\u0442\u044c \u043c\u0430\u0442\u0440\u0438\u0446 \u043d\u0435 \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u043f\u0435\u0440\u0435\u0443\u043c\u043d\u043e\u0436\u0438\u0442\u044c \u0438\u0445");for(var i=0;i<n;i++){for(var s=[],l=0;l<a;l++)s.push(0);c.push(s)}for(var d=0;d<a;d++)for(var u=0;u<n;u++){for(var p=0,m=0;m<o;m++)p+=e[u][m]+t[m][d];c[u][d]=p}return c}},{key:"multMatrxiV2",value:function(e,t){var n=[];try{n=I.b(e,t)}catch(o){console.error("multMatrxiV2:",o)}return n}},{key:"getDetMatrix",value:function(e){return I.a(e)}}]),e}(),D=n(59),M=n(56),U=n(28),P=n(26),T=n(27),z=n(133),A=n.n(z),F=n(306),L=n(307),X=n(312),Y=n(7),G=n(93),V=n(268),W="/",R="/app",H=n(250),K=Object(H.a)(function(e){return Object(X.a)({root:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start"},logo:{width:"20%",height:"20%"},title:{padding:40},descripton:{padding:40},btn:{}})})(function(e){var t=e.classes;return c.createElement("header",{className:t.root},c.createElement("img",{src:m.img.bridgeIcon_2,alt:"logo",className:t.logo}),c.createElement(G.a,{variant:"h3",className:t.title},m.str.title),c.createElement(G.a,{variant:"subtitle1",align:"center",className:t.descripton},m.str.description),c.createElement(V.a,{component:D.b,to:R,variant:"contained",size:"large",color:"secondary"},"\u041f\u043e\u0435\u0445\u0430\u043b\u0438"))}),J=function(e){function t(){return Object(u.a)(this,t),Object(U.a)(this,Object(P.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.classes;return c.createElement("div",{className:e.root},c.createElement(K,null))}}]),t}(c.Component),q=Object(Y.a)(function(e){return Object(X.a)({root:{width:"100%",minHeight:"100%",display:"block",background:e.palette.background.default,padding:e.spacing(4)}})})(J),$=n(30),Q=n.n($),Z=n(47),ee=n(46),te=n(41);!function(e){e[e.None=0]="None",e[e.X=1]="X",e[e.Y=2]="Y",e[e.XY=3]="XY",e[e.YX=3]="YX"}(h||(h={}));var ne,oe,re,ae,ce,ie,se,le,de,ue,pe=n(60),me=n(36),fe=n(6),he=(n(75),n(4)),ye=n(17),be=n(138),ve=n.n(be),ge=(ne=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.coord,o=t.id,r=t.name,a=t.dCoord;Object(u.a)(this,e),this._id=void 0,Object(me.a)(this,"_coord",oe,this),Object(me.a)(this,"_name",re,this),Object(me.a)(this,"_dCoord",ae,this),this._id=o||ve()(),this._name=r||this._id,this._coord=n||{x:0,y:0},this._dCoord=a||{x:0,y:0}}return Object(p.a)(e,[{key:"id",get:function(){return this._id}},{key:"coord",get:function(){return this._coord}},{key:"name",get:function(){return this._name},set:function(e){this._name=e}},{key:"dCoord",get:function(){return this._dCoord},set:function(e){this._dCoord=e}}]),Object(p.a)(e,[{key:"moveTo",value:function(e,t){this._coord.x=e,this._coord.y=t}}]),e}(),oe=Object(fe.a)(ne.prototype,"_coord",[he.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(fe.a)(ne.prototype,"coord",[he.e],Object.getOwnPropertyDescriptor(ne.prototype,"coord"),ne.prototype),re=Object(fe.a)(ne.prototype,"_name",[he.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(fe.a)(ne.prototype,"name",[he.e],Object.getOwnPropertyDescriptor(ne.prototype,"name"),ne.prototype),ae=Object(fe.a)(ne.prototype,"_dCoord",[he.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(fe.a)(ne.prototype,"dCoord",[he.e],Object.getOwnPropertyDescriptor(ne.prototype,"dCoord"),ne.prototype),Object(fe.a)(ne.prototype,"moveTo",[he.d],Object.getOwnPropertyDescriptor(ne.prototype,"moveTo"),ne.prototype),ne),Oe=(ce=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(u.a)(this,t),(e=Object(U.a)(this,Object(P.a)(t).call(this,n)))._entity=void 0,Object(me.a)(e,"_startConnectedNode",ie,Object(ye.a)(e)),Object(me.a)(e,"_endConnectedNode",se,Object(ye.a)(e)),Object(me.a)(e,"_endCoord",le,Object(ye.a)(e)),Object(me.a)(e,"_startForce",de,Object(ye.a)(e)),Object(me.a)(e,"_endForce",ue,Object(ye.a)(e));var o=n.dCoord,r=n.startConnectedNode,a=n.endConnectedNode,c=n.coord,i=n.endCoord,s=n.startForce,l=n.endForce;return e._entity=Object(ee.a)({},Object(ye.a)(e),{coord:c||{x:0,y:0},dCoord:o||{x:0,y:0}}),e._startConnectedNode=r||null,e._endConnectedNode=a||null,e._endCoord=i||e.coord,e._startForce=s||0,e._endForce=l||0,e}return Object(T.a)(t,e),Object(p.a)(t,[{key:"startConnectedNode",get:function(){return this._startConnectedNode}},{key:"endConnectedNode",get:function(){return this._endConnectedNode}},{key:"coord",get:function(){return this._startConnectedNode?this._startConnectedNode.coord:this._entity.coord}},{key:"endCoord",get:function(){return this._endConnectedNode?this._endConnectedNode.coord:this._endCoord}},{key:"dCoord",get:function(){return this._startConnectedNode?this._startConnectedNode.dCoord:this._entity.dCoord}},{key:"dEndCoord",get:function(){return this._endConnectedNode?this._endConnectedNode.dCoord:this._entity.dCoord}},{key:"startForce",get:function(){return this._startForce},set:function(e){this._startForce=e}},{key:"endForce",get:function(){return this._endForce},set:function(e){this._endForce=e}},{key:"name",get:function(){if(this._startConnectedNode&&this._endConnectedNode){var e=this._startConnectedNode.name,t=this._endConnectedNode.name;return e<t?"".concat(e," - ").concat(t):"".concat(t," - ").concat(e)}return"..."}}]),Object(p.a)(t,[{key:"connectStartNode",value:function(e){this._startConnectedNode=e}},{key:"connectEndNode",value:function(e){this._endConnectedNode=e}},{key:"removeStartNode",value:function(){this._startConnectedNode=null}},{key:"removeEndNode",value:function(){this._endConnectedNode=null}},{key:"moveTo",value:function(e,t){this._startConnectedNode||(this.coord.x=e,this.coord.y=t)}},{key:"moveEndTo",value:function(e,t){this._endConnectedNode||(this._endCoord.x=e,this._endCoord.y=t)}},{key:"length",get:function(){var e=B.lengthBePoints(this.coord.x,this.coord.y,this.endCoord.x,this.endCoord.y);return Math.round(e)}}]),t}(ge),ie=Object(fe.a)(ce.prototype,"_startConnectedNode",[he.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(fe.a)(ce.prototype,"startConnectedNode",[he.e],Object.getOwnPropertyDescriptor(ce.prototype,"startConnectedNode"),ce.prototype),se=Object(fe.a)(ce.prototype,"_endConnectedNode",[he.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(fe.a)(ce.prototype,"endConnectedNode",[he.e],Object.getOwnPropertyDescriptor(ce.prototype,"endConnectedNode"),ce.prototype),Object(fe.a)(ce.prototype,"coord",[he.e],Object.getOwnPropertyDescriptor(ce.prototype,"coord"),ce.prototype),le=Object(fe.a)(ce.prototype,"_endCoord",[he.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(fe.a)(ce.prototype,"endCoord",[he.e],Object.getOwnPropertyDescriptor(ce.prototype,"endCoord"),ce.prototype),Object(fe.a)(ce.prototype,"dCoord",[he.e],Object.getOwnPropertyDescriptor(ce.prototype,"dCoord"),ce.prototype),Object(fe.a)(ce.prototype,"dEndCoord",[he.e],Object.getOwnPropertyDescriptor(ce.prototype,"dEndCoord"),ce.prototype),de=Object(fe.a)(ce.prototype,"_startForce",[he.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(fe.a)(ce.prototype,"startForce",[he.e],Object.getOwnPropertyDescriptor(ce.prototype,"startForce"),ce.prototype),ue=Object(fe.a)(ce.prototype,"_endForce",[he.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(fe.a)(ce.prototype,"endForce",[he.e],Object.getOwnPropertyDescriptor(ce.prototype,"endForce"),ce.prototype),Object(fe.a)(ce.prototype,"name",[he.e],Object.getOwnPropertyDescriptor(ce.prototype,"name"),ce.prototype),Object(fe.a)(ce.prototype,"connectStartNode",[he.d],Object.getOwnPropertyDescriptor(ce.prototype,"connectStartNode"),ce.prototype),Object(fe.a)(ce.prototype,"connectEndNode",[he.d],Object.getOwnPropertyDescriptor(ce.prototype,"connectEndNode"),ce.prototype),Object(fe.a)(ce.prototype,"removeStartNode",[he.d],Object.getOwnPropertyDescriptor(ce.prototype,"removeStartNode"),ce.prototype),Object(fe.a)(ce.prototype,"removeEndNode",[he.d],Object.getOwnPropertyDescriptor(ce.prototype,"removeEndNode"),ce.prototype),Object(fe.a)(ce.prototype,"moveTo",[he.d],Object.getOwnPropertyDescriptor(ce.prototype,"moveTo"),ce.prototype),Object(fe.a)(ce.prototype,"moveEndTo",[he.d],Object.getOwnPropertyDescriptor(ce.prototype,"moveEndTo"),ce.prototype),Object(fe.a)(ce.prototype,"length",[he.e],Object.getOwnPropertyDescriptor(ce.prototype,"length"),ce.prototype),ce),Ee=function(){function e(){Object(u.a)(this,e)}return Object(p.a)(e,null,[{key:"init",value:function(){var e=Object(Z.a)(Q.a.mark(function e(t,n,o,r,a){var c,i,s,l,d,u,p,m,f,h,y,b,v,g,O,E,k,j,C,w=this,N=arguments;return Q.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(c=N.length>5&&void 0!==N[5]?N[5]:{},i=c.area||225,s=c.modUpr||72e3,l=[],d=[],u=[],p=[],m=[],h=[],y=[],b=[],v=[],g=[],O=[],r.forEach(function(e,o){l.push(w.Kmest_i(i,s,a[o]));var c=w.Lambda_i(t[r[o].x],t[r[o].y],a[o]);d.push(c),u.push([[c.x,c.y,0,0],[0,0,c.x,c.y]]),p.push(w.Kobs_i(i,s,a[o],d[o])),m.push(w.IndexV_i(n[r[o].x],n[r[o].y]))}),E=r.length,k=n.length,j=Math.max.apply(Math,Object(pe.a)(n.map(function(e){var t=e.x,n=e.y;return Math.max(t,n)}))),h=this.K(j,m,p),!(B.getDetMatrix(h)<1e3)){e.next=21;break}throw Error("\u0414\u0430\u043d\u043d\u0430\u044f \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044f (\u0441\u0442\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u043d\u0435\u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u043c\u0430\u044f) \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043c\u0435\u0445\u0430\u043d\u0438\u0437\u043c\u043e\u043c");case 21:for(y=this.SquareRoot(h,o),b=this.Vi(n,y),v=this.Vij(r,b),C=0;C<E;C++)g.push(this.V_i(u[C],v[C])),O.push(this.P_i(l[C],g[C]));return this.farmCalcDebug&&(console.log("NodeCoord, LinkNodes, NodeV",t,r,n),console.log("Kobs, Kmest",p,l),console.log("Lambda0, Lambda,",d,u),console.log("IndexV",m),console.log("N_Link, N_Nodes, N_DOF",E,k,j),console.log("K, Force",h,o),console.log("Va",y),console.log("Vi",b),console.log("Vij",v),console.log("V",g),console.log("P",O)),f=this.G(a,O),e.abrupt("return",{P:O,LinkNodes:r,Vi:b,G:f});case 28:case"end":return e.stop()}},e,this)}));return function(t,n,o,r,a){return e.apply(this,arguments)}}()},{key:"Kmest_i",value:function(e,t,n){var o=e*t/n,r=[];return r.push([o,-o]),r.push([-o,o]),r}},{key:"Lambda_i",value:function(e,t,n){return{x:(t.x-e.x)/n,y:(t.y-e.y)/-n}}},{key:"Kobs_i",value:function(e,t,n,o){for(var r=e*t/n,a=[{x:o.x*o.x,y:o.x*o.y},{x:o.x*o.y,y:o.y*o.y}],c=[{x:-o.x*o.x,y:-o.x*o.y},{x:-o.x*o.y,y:-o.y*o.y}],i=[],s=[],l=0;l<2;l++)i.push({x1:a[l].x,y1:a[l].y,x2:c[l].x,y2:c[l].y}),s.push({x1:c[l].x,y1:c[l].y,x2:a[l].x,y2:a[l].y});return Array.prototype.concat(i,s).map(function(e){var t=e.x1,n=e.y1,o=e.x2,a=e.y2;return[t*r,n*r,o*r,a*r]})}},{key:"IndexV_i",value:function(e,t){return[e.x,e.y,t.x,t.y]}},{key:"K",value:function(e,t,n){for(var o=[],r=0;r<e;r++){for(var a=[],c=0;c<e;c++)a.push(0);o.push(a)}for(var i=0;i<t.length;i++)for(var s=0;s<4;s++){var l=t[i][s];if(0!==l)for(var d=0;d<4;d++){var u=t[i][d];0!==u&&(o[u-1][l-1]=o[u-1][l-1]+n[i][s][d])}}return o}},{key:"SquareRoot",value:function(e,t){if(e.length!==t.length)throw Error("SquareRoot - \u041c\u0430\u0441\u0441\u0438\u0432\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u043e\u0434\u0438\u043d\u0430\u043a\u043e\u0432\u043e\u0439 \u0434\u043b\u0438\u043d\u044b");for(var n=t.length,o=[],r=[],a=[],c=[],i=[],s=[],l=0;l<n+1;l++){for(var d=[],u=0;u<n;u++)d.push(0);i.push(d),o.push(d),r.push(0),a.push(0),c.push(0),s.push(0)}for(var p=1;p<=n;p++){for(var m=0;m<=n;m++)o[p][m]=e[p-1][m-1];r[p]=t[p-1]}c[1]=B.signum(o[1][1]),i[1][1]=Math.sqrt(Math.abs(o[1][1]));for(var f=2;f<=n;f++)i[1][f]=o[1][f]/(i[1][1]*c[1]);for(var h=2;h<=n;h++){for(var y=0,b=1;b<=h-1;b++)y+=i[b][h]*i[b][h]*c[b];c[h]=B.signum(o[h][h]-y),i[h][h]=Math.sqrt(Math.abs(o[h][h]-y));for(var v=1/(i[h][h]*c[h]),g=h+1;g<=n;g++){for(var O=0,E=1;E<=h-1;E++)O+=i[E][h]*c[E]*i[E][g];i[h][g]=v*(o[h][g]-O)}}s[1]=r[1]/(i[1][1]*c[1]);for(var k=2;k<=n;k++){for(var j=0,C=1;C<=k-1;C++)j+=i[C][k]*c[C]*s[C];s[k]=(r[k]-j)/(i[k][k]*c[k])}a[n]=s[n]/i[n][n];for(var w=n-1;w>=1;w--){for(var N=0,x=w+1;x<=n;x++)N+=i[w][x]*a[x];a[w]=(s[w]-N)/i[w][w]}var S=[];return a.forEach(function(e,t){0!==t&&S.push(e)}),S}},{key:"Vi",value:function(e,t){for(var n=[],o=0;o<e.length;o++){var r=Object(ee.a)({},e[o]);r.x=0===r.x?0:t[r.x-1],r.y=0===r.y?0:t[r.y-1],n.push(r)}return n}},{key:"Vij",value:function(e,t){for(var n=[],o=0;o<e.length;o++){var r=e[o].x,a=e[o].y;n.push([[t[r].x],[t[r].y],[t[a].x],[t[a].y]])}return n}},{key:"V_i",value:function(e,t){return B.multMatrxiV2(e,t)}},{key:"P_i",value:function(e,t){return B.multMatrxiV2(e,t)}},{key:"G",value:function(e,t){var n=0;return e.forEach(function(e,o){n+=e*Math.abs(t[o][0][0])}),n}}]),e}();Ee.farmCalcDebug=!0;var ke,je,Ce,we,Ne,xe,Se=(ke=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(u.a)(this,t),e=Object(U.a)(this,Object(P.a)(t).call(this,n)),Object(me.a)(e,"_beamsID",je,Object(ye.a)(e)),e._forceX=void 0,e._forceY=void 0,e._isStatic=void 0,e._fixation=void 0;var o=n.beamsID,r=n.forceX,a=n.forceY,c=n.isStatic,i=n.fixation;return e._beamsID=o||[],e._forceX=r||0,e._forceY=a||0,e._isStatic=c||!1,e._fixation=i||h.None,e}return Object(T.a)(t,e),Object(p.a)(t,[{key:"beams",get:function(){return this._beamsID}},{key:"forceX",get:function(){return this._forceX},set:function(e){this._forceX=e}},{key:"forceY",get:function(){return this._forceY},set:function(e){this._forceY=e}},{key:"isStatic",get:function(){return this._isStatic}},{key:"fixation",get:function(){return this._fixation}}]),Object(p.a)(t,[{key:"conncetBeam",value:function(e){return!this._beamsID.find(function(t){return t===e})&&(this._beamsID.push(e),!0)}},{key:"removeBeam",value:function(e){var t=!1;return this._beamsID=this._beamsID.filter(function(n){var o=n!==e;return o||(t=!0),o}),t}}]),t}(ge),je=Object(fe.a)(ke.prototype,"_beamsID",[he.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(fe.a)(ke.prototype,"beams",[he.e],Object.getOwnPropertyDescriptor(ke.prototype,"beams"),ke.prototype),Object(fe.a)(ke.prototype,"conncetBeam",[he.d],Object.getOwnPropertyDescriptor(ke.prototype,"conncetBeam"),ke.prototype),Object(fe.a)(ke.prototype,"removeBeam",[he.d],Object.getOwnPropertyDescriptor(ke.prototype,"removeBeam"),ke.prototype),ke),_e=new(Ce=function(){function e(){Object(u.a)(this,e),Object(me.a)(this,"_nodes",we,this),Object(me.a)(this,"_beams",Ne,this),Object(me.a)(this,"_calcData",xe,this),this.sortByName=function(e,t){if(e instanceof Oe){var n=e.name.split(" - "),o=Number(n[0]+n[1]),r=t.name.split(" - ");return o>Number(r[0]+r[1])?1:-1}return e.name>t.name?1:-1},this._nodes=new Map,this._beams=new Map,this.connectBeamToStartNode=this.connectBeamToStartNode.bind(this)}return Object(p.a)(e,[{key:"nodes",get:function(){return this._nodes}},{key:"nodesArray",get:function(){return Array.from(this._nodes.values())}},{key:"beams",get:function(){return this._beams}},{key:"beamsArray",get:function(){return Array.from(this._beams.values())}},{key:"calcData",get:function(){return this._calcData}}]),Object(p.a)(e,[{key:"addNode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._nodes.size>12)throw new Error("\u041f\u0440\u0435\u0432\u044b\u0448\u0435\u043d\u043e \u0447\u0438\u0441\u043b\u043e \u0443\u0437\u043b\u043e\u0432");var t=!0,n=!1,o=void 0;try{for(var r,a=this._nodes.values()[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){if(r.value.coord===e.coord)return}}catch(s){n=!0,o=s}finally{try{t||null==a.return||a.return()}finally{if(n)throw o}}var c=this._nodes.size+1+"",i=new Se(Object(ee.a)({},e,{name:c}));return this._nodes.set(i.id,i),i}},{key:"moveNode",value:function(e,t,n){var o=this._nodes.get(e);if(!o)throw new Error("\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d \u0443\u0437\u0435\u043b");if(!o.isStatic&&o.fixation===h.None){var r=!0,a=!1,c=void 0;try{for(var i,s=this._nodes.values()[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var l=i.value;if(l.coord.x===t&&l.coord.y===n)return}}catch(d){a=!0,c=d}finally{try{r||null==s.return||s.return()}finally{if(a)throw c}}o.moveTo(t,n)}}},{key:"setNodes",value:function(e){this._nodes=new Map(e)}},{key:"sortNodesByCoord",value:function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.nodesArray).sort(function(e,t){return e.coord.y<t.coord.y?-1:e.coord.y===t.coord.y&&e.coord.x<t.coord.x?-1:1}).forEach(function(e,t){e.name=(t+1).toString()})}},{key:"addBeam",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._beams.size>36)throw new Error("\u041f\u0440\u0435\u0432\u044b\u0448\u0435\u043d\u043e \u0447\u0438\u0441\u043b\u043e \u0441\u0442\u0435\u0440\u0436\u043d\u0435\u0439");var t=new Oe(e);return this._beams.set(t.id,t),t}},{key:"moveEndBeamWhileDraving",value:function(e,t,n){var o=this._beams.get(e);if(!o)throw new Error("\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d \u0441\u0442\u0435\u0440\u0436\u0435\u043d\u044c");if(o.endConnectedNode)throw new Error("\u0421\u0442\u0435\u0440\u0436\u0435\u043d\u044c \u043d\u0435\u043b\u044c\u0437\u044f \u043f\u0435\u0440\u0435\u043c\u0435\u0441\u0442\u0438\u0442\u044c - \u043e\u043d \u043f\u0440\u0438\u0432\u044f\u0437\u0430\u043d \u043a \u0443\u0437\u043b\u0443");o.moveEndTo(t,n)}},{key:"connectBeamToStartNode",value:function(e,t){var n=this._beams.get(t),o=this._nodes.get(e);if(!n||!o)throw new Error("\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u044b \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u044b");return n.connectStartNode(o),o.conncetBeam(n.id),n}},{key:"connectBeamToEndNode",value:function(e,t){var n=this._beams.get(t),o=this._nodes.get(e);if(!n||!o)throw new Error("\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u044b \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u044b");var r=!0,a=!1,c=void 0;try{for(var i,s=this._beams.values()[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var l=i.value;if(this._findOldBeamByNode(o,n,l))return}}catch(d){a=!0,c=d}finally{try{r||null==s.return||s.return()}finally{if(a)throw c}}return n.connectEndNode(o),o.conncetBeam(n.id),n}},{key:"setBeams",value:function(e){this._beams=new Map(e)}},{key:"_findOldBeamByNode",value:function(e,t,n){return n.startConnectedNode===t.startConnectedNode&&n.endConnectedNode===e||n.startConnectedNode===e&&n.endConnectedNode===t.startConnectedNode||n===t&&n.startConnectedNode===e}},{key:"calculate",value:function(){var e=Object(Z.a)(Q.a.mark(function e(t){var n,o,r,a,c,i,s,l,d,u;return Q.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],o=[],r=[],a=[],c=[],e.next=7,this.updateBeforeCalc(Object(pe.a)(this.nodesArray),Object(pe.a)(this.beamsArray));case 7:if(i=e.sent,s=i.nodes,l=i.beams,!s.find(function(e){return 0===e.beams.length&&e.isStatic})){e.next=12;break}throw new Error("\u041d\u0435 \u0432\u0441\u0435 \u0443\u0437\u043b\u044b \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u044b");case 12:return d=0,s.forEach(function(e,t){switch(n.push(Object(ee.a)({},e.coord)),e.fixation){case h.X:d++,o.push({x:0,y:d}),a.push(-e.forceY);break;case h.Y:d++,o.push({x:d,y:0}),a.push(-e.forceX);break;case h.YX:case h.XY:o.push({x:0,y:0});break;case h.None:d++,o.push({x:d,y:d+1}),d++,a.push(-e.forceX),a.push(-e.forceY)}}),l.forEach(function(e,t){var n=e.name.split(" - ");r.push({x:Number(n[0])-1,y:Number(n[1])-1}),c.push(e.length)}),e.next=17,Ee.init(n,o,a,r,c,t);case 17:return u=e.sent,e.next=20,this.updateAfterCalc(s,l,u);case 20:return e.abrupt("return",!0);case 21:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"updateBeforeCalc",value:function(){var e=Object(Z.a)(Q.a.mark(function e(){var t,n,o=arguments;return Q.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:this.nodesArray,n=o.length>1&&void 0!==o[1]?o[1]:this.beamsArray,this.sortNodesByCoord(t),n=n.sort(this.sortByName),e.abrupt("return",{nodes:t,beams:n});case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"updateAfterCalc",value:function(){var e=Object(Z.a)(Q.a.mark(function e(t,n,o){var r,a,c,i,s,l,d,u,p,m,f,h,y,b,v,g;return Q.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._calcData=o,r=o.P,(a=o.Vi)&&r){e.next=4;break}throw new Error("\u041d\u0435\u0442 \u0440\u0430\u0441\u0447\u0435\u0442\u043d\u044b\u0445 \u0434\u0430\u043d\u043d\u044b\u0445");case 4:for(c=!0,i=!1,s=void 0,e.prev=7,l=this.nodes.values()[Symbol.iterator]();!(c=(d=l.next()).done);c=!0)u=d.value,p=Object(ee.a)({},a[Number(u.name)-1]),u.dCoord={x:+p.x.toFixed(4),y:+p.y.toFixed(4)};e.next=15;break;case 11:e.prev=11,e.t0=e.catch(7),i=!0,s=e.t0;case 15:e.prev=15,e.prev=16,c||null==l.return||l.return();case 18:if(e.prev=18,!i){e.next=21;break}throw s;case 21:return e.finish(18);case 22:return e.finish(15);case 23:for(m=0,f=!0,h=!1,y=void 0,e.prev=27,b=this.beams.values()[Symbol.iterator]();!(f=(v=b.next()).done);f=!0)(g=v.value).startForce=Math.round(r[m][0][0]),g.endForce=Math.round(r[m][1][0]),m++;e.next=35;break;case 31:e.prev=31,e.t1=e.catch(27),h=!0,y=e.t1;case 35:e.prev=35,e.prev=36,f||null==b.return||b.return();case 38:if(e.prev=38,!h){e.next=41;break}throw y;case 41:return e.finish(38);case 42:return e.finish(35);case 43:return e.abrupt("return",{nodes:t,beams:n});case 44:case"end":return e.stop()}},e,this,[[7,11,15,23],[16,,18,22],[27,31,35,43],[36,,38,42]])}));return function(t,n,o){return e.apply(this,arguments)}}()},{key:"delete",value:function(e){var t=this,n=void 0;if(this._beams.has(e)?n=this._beams.get(e):this._nodes.has(e)&&(n=this._nodes.get(e)),n instanceof Se){if(n.isStatic)return;return this.beamsArray.filter(function(e){return n instanceof Se&&n.beams.includes(e.id)}).forEach(function(e){if(n instanceof Se){var o;if(!e.startConnectedNode||!e.endConnectedNode)throw new Error;(o=e.startConnectedNode.id===n.id?t._nodes.get(e.endConnectedNode.id):t._nodes.get(e.startConnectedNode.id))&&o.removeBeam(e.id),t._beams.delete(e.id)}}),this._nodes.delete(n.id),!0}n instanceof Oe&&([n.startConnectedNode,n.endConnectedNode].forEach(function(e){e&&n&&e.removeBeam(n.id)}),this._beams.delete(n.id))}},{key:"clear",value:function(){this._beams.clear(),this._nodes.clear()}}]),e}(),we=Object(fe.a)(Ce.prototype,"_nodes",[he.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ne=Object(fe.a)(Ce.prototype,"_beams",[he.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xe=Object(fe.a)(Ce.prototype,"_calcData",[he.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(fe.a)(Ce.prototype,"nodes",[he.e],Object.getOwnPropertyDescriptor(Ce.prototype,"nodes"),Ce.prototype),Object(fe.a)(Ce.prototype,"nodesArray",[he.e],Object.getOwnPropertyDescriptor(Ce.prototype,"nodesArray"),Ce.prototype),Object(fe.a)(Ce.prototype,"beams",[he.e],Object.getOwnPropertyDescriptor(Ce.prototype,"beams"),Ce.prototype),Object(fe.a)(Ce.prototype,"beamsArray",[he.e],Object.getOwnPropertyDescriptor(Ce.prototype,"beamsArray"),Ce.prototype),Object(fe.a)(Ce.prototype,"calcData",[he.e],Object.getOwnPropertyDescriptor(Ce.prototype,"calcData"),Ce.prototype),Object(fe.a)(Ce.prototype,"addNode",[he.d],Object.getOwnPropertyDescriptor(Ce.prototype,"addNode"),Ce.prototype),Object(fe.a)(Ce.prototype,"moveNode",[he.d],Object.getOwnPropertyDescriptor(Ce.prototype,"moveNode"),Ce.prototype),Object(fe.a)(Ce.prototype,"setNodes",[he.d],Object.getOwnPropertyDescriptor(Ce.prototype,"setNodes"),Ce.prototype),Object(fe.a)(Ce.prototype,"sortNodesByCoord",[he.d],Object.getOwnPropertyDescriptor(Ce.prototype,"sortNodesByCoord"),Ce.prototype),Object(fe.a)(Ce.prototype,"addBeam",[he.d],Object.getOwnPropertyDescriptor(Ce.prototype,"addBeam"),Ce.prototype),Object(fe.a)(Ce.prototype,"moveEndBeamWhileDraving",[he.d],Object.getOwnPropertyDescriptor(Ce.prototype,"moveEndBeamWhileDraving"),Ce.prototype),Object(fe.a)(Ce.prototype,"connectBeamToStartNode",[he.d],Object.getOwnPropertyDescriptor(Ce.prototype,"connectBeamToStartNode"),Ce.prototype),Object(fe.a)(Ce.prototype,"connectBeamToEndNode",[he.d],Object.getOwnPropertyDescriptor(Ce.prototype,"connectBeamToEndNode"),Ce.prototype),Object(fe.a)(Ce.prototype,"setBeams",[he.d],Object.getOwnPropertyDescriptor(Ce.prototype,"setBeams"),Ce.prototype),Object(fe.a)(Ce.prototype,"calculate",[he.d],Object.getOwnPropertyDescriptor(Ce.prototype,"calculate"),Ce.prototype),Object(fe.a)(Ce.prototype,"updateBeforeCalc",[he.d],Object.getOwnPropertyDescriptor(Ce.prototype,"updateBeforeCalc"),Ce.prototype),Object(fe.a)(Ce.prototype,"updateAfterCalc",[he.d],Object.getOwnPropertyDescriptor(Ce.prototype,"updateAfterCalc"),Ce.prototype),Object(fe.a)(Ce.prototype,"delete",[he.d],Object.getOwnPropertyDescriptor(Ce.prototype,"delete"),Ce.prototype),Object(fe.a)(Ce.prototype,"clear",[he.d],Object.getOwnPropertyDescriptor(Ce.prototype,"clear"),Ce.prototype),Ce),Ie=function(){function e(){Object(u.a)(this,e)}return Object(p.a)(e,null,[{key:"firstPlacement",value:function(e,t){e.forEach(function(e){var t=e.coord.x+Math.round(m.canvas.width/3/m.UI.cellSize)*m.UI.MMinCell,n=e.coord.y+Math.round(m.canvas.height/3/m.UI.cellSize)*m.UI.MMinCell;e.moveTo(t,n)})}},{key:"parse",value:function(){var e=Object(Z.a)(Q.a.mark(function e(t,n){var o,r,a,c;return Q.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,JSON.parse(t);case 2:return o=e.sent,e.next=5,JSON.parse(n);case 5:return r=e.sent,a=new Map,c=new Map,e.next=10,o.forEach(function(e){e.dCoord={x:0,y:0};var t=new Se(e);a.set(t.id,t)});case 10:return e.next=12,r.forEach(function(e){e.startForce=0,e.endForce=0;var t=new Oe(e);e.startConnectedNode&&e.endConnectedNode&&(t.connectStartNode(a.get(e.startConnectedNode.id)),t.connectEndNode(a.get(e.endConnectedNode.id))),c.set(t.id,t)});case 12:return e.abrupt("return",{nodes:a,beams:c});case 13:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"toString",value:function(e){var t=Array.from(e.nodes.values()),n=Array.from(e.beams.values());return{nodesJSON:JSON.stringify(t).replace(/_/g,""),beamsJSON:JSON.stringify(n).replace(/_/g,"")}}},{key:"createNodes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=new Map;return e.forEach(function(e){var t=new Se({coord:{x:e.x,y:e.y},isStatic:!0,fixation:e.fixation});o.set(t.id,t)}),t.forEach(function(e){var t=new Se({coord:{x:e.x,y:e.y},isStatic:!0,forceX:e.forceX||0,forceY:e.forceY||0});o.set(t.id,t)}),n.forEach(function(e){var t=new Se({coord:{x:e.x,y:e.y}});o.set(t.id,t)}),o}}]),e}(),Be=n(244),De=n(94),Me=n(269),Ue=n(270),Pe=n(309),Te=n(271),ze=n(272),Ae=n(273),Fe=Object(Be.a)(function(e){return Object(X.a)({root:{width:"100%",overflowX:"auto",paddingTop:e.spacing(2)},table:{minWidth:650},tableBox:{marginBottom:e.spacing(2)},title:{padding:e.spacing(2)}})}),Le=Object(te.a)(function(e){var t=Fe(e),n=e.Vi,o=e.P,r=e.LinkNodes,a=e.G,i=function(e,n,o){return c.createElement(De.a,{className:t.tableBox},c.createElement(G.a,{variant:"h6",className:t.title},e),c.createElement(Me.a,{className:t.table},Xe(n),c.createElement(Ue.a,null,o.map(function(e){return Ye(e)}))))};return c.createElement(Pe.a,{className:t.root},c.createElement(De.a,{className:t.tableBox},c.createElement(G.a,{variant:"h6",className:t.title},"G: ",Math.round(a)," (\u041d\xb7\u043c\u043c)")),function(e,t){var n=[];return e.forEach(function(e,o){n.push(["".concat(t[o].x+1," - ").concat(t[o].y+1),e[0][0].toFixed(0),e[1][0].toFixed(0)])}),i("\u0423\u0441\u0438\u043b\u0438\u044f \u0432 \u0441\u0442\u0435\u0440\u0436\u043d\u044f\u0445",["\u0421\u0442\u0435\u0440\u0436\u0435\u043d\u044c","\u0421\u0438\u043b\u0430 \u0432 \u043d\u0430\u0447\u0430\u043b\u0435 (H)","\u0421\u0438\u043b\u0430 \u0432 \u043a\u043e\u043d\u0446\u0435 (H)"],n)}(o,r),function(e){var t=[];return e.forEach(function(e,n){t.push([(n+1).toString(),e.x.toFixed(4),e.y.toFixed(4)])}),i("\u041f\u0435\u0440\u0435\u043c\u0435\u0449\u0435\u043d\u0438\u044f \u0443\u0437\u043b\u043e\u0432",["\u0423\u0437\u0435\u043b","\u041f\u043e \u043e\u0441\u0438 X (\u043c\u043c)","\u041f\u043e \u043e\u0441\u0438 Y (\u043c\u043c)"],t)}(n))}),Xe=function(e){return c.createElement(Te.a,null,c.createElement(ze.a,null,e.map(function(e){return c.createElement(Ae.a,{key:e},e)})))},Ye=function(e){return c.createElement(ze.a,null,e.map(function(e){return c.createElement(Ae.a,{key:e},e)}))},Ge=Le,Ve=n(286),We=n(284),Re=n(288),He=n(289),Ke=n(3),Je=n(274),qe=n(275),$e=Object(Y.a)(function(e){return Object(X.a)({appBar:{zIndex:e.zIndex.drawer+1},logo:{marginRight:e.spacing(4),marginLeft:e.spacing(2),"& img":{width:50,height:"auto"}}})})(function(e){var t=e.classes,n=e.children,o=e.className,r=e.color,a=e.position,i=e.withLogo,s=void 0===i||i;return c.createElement(Je.a,{position:a||"fixed",className:Object(Ke.a)(t.appBar,o),color:r||"primary"},c.createElement(qe.a,null,function(){if(s)return c.createElement(D.b,{to:"/",className:t.logo},c.createElement("img",{alt:"Logo Icon",src:m.img.bridgeIcon_2}))}(),n))}),Qe=n(310),Ze=n(277),et=function(e){var t=e.title,n=void 0===t?"":t,o=e.icon,r=void 0===o?c.createElement(c.Fragment,null):o,a=e.disabled,i=void 0!==a&&a,s=e.onClickToAction,l=e.todo,d=e.className,u=e.fab,p=void 0!==u&&u,m=e.size,f=e.onlyIcon,h=void 0!==f&&f;return p?c.createElement(Qe.a,{title:n},c.createElement(Ze.a,{size:m,color:"secondary",onClick:function(e){return s(e,l)},disabled:i,className:d,style:{marginLeft:5,marginRight:5}},r)):c.createElement(Qe.a,{title:n},c.createElement(V.a,{size:m,color:"secondary",variant:"contained",onClick:function(e){return s(e,l)},disabled:i,className:d,style:{marginLeft:5,marginRight:5}},r,!h&&n))},tt=n(146),nt=n(278),ot=n(279),rt=n(280),at=n(281);function ct(e){var t=c.useState(null),n=Object(tt.a)(t,2),o=n[0],r=n[1];function a(e){r(null)}var i=e.items,s=e.title,l=Boolean(o),d=l?s:void 0;return c.createElement("div",null,c.createElement(V.a,{"aria-describedby":d,size:e.size,"aria-haspopup":"menu",onClick:function(e){r(o?null:e.currentTarget)},color:"secondary",variant:e.variant||"contained",style:{marginLeft:5,marginRight:5}},e.icon,"  ",e.title),c.createElement(nt.a,{id:d,open:l,anchorEl:o,onClose:a,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},keepMounted:!0},c.createElement(De.a,{onMouseLeave:a},c.createElement(ot.a,null,i.map(function(t){return c.createElement(rt.a,{onClick:function(n){return function(t,n){e.onClickToAction(t,n),r(null)}(n,t.todo)},disabled:t.disabled},void 0!==t.icon&&c.createElement(at.a,null,t.icon),t.title)})))))}var it=n(67),st=n(140),lt=n(18),dt=n(282),ut=function(e){return Object(X.a)({btn:{marginLeft:e.spacing(2),marginRight:e.spacing(2),borderRadius:"50% !important",border:"1px solid ".concat(Object(lt.b)(e.palette.action.active,.2)," !important"),transition:e.transitions.create(["background-color","box-shadow","border"],{duration:e.transitions.duration.short}),color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.light,"&$selected":{backgroundColor:e.palette.secondary.main,"&:hover":{backgroundColor:e.palette.secondary.dark}},"&:hover":{backgroundColor:e.palette.secondary.dark,"@media (hover: none)":{backgroundColor:e.palette.secondary.main},"&$disabled":{backgroundColor:e.palette.secondary.main}}},selected:{}})},pt=function(e){var t=e.selected,n=e.classes,o=e.value,r=e.name,a=e.icon,i=Object(st.a)(e,["selected","classes","value","name","icon"]);return c.createElement(dt.a,Object.assign({key:r,value:o,className:Object(Ke.a)(n.btn,Object(it.a)({},n.selected,t))},i),c.createElement(Qe.a,{title:r},a))},mt=Object(Y.a)(ut)(pt),ft=(Object(Y.a)(ut)(pt),n(248)),ht=n(283),yt=n(141),bt=n.n(yt),vt=Object(Be.a)(function(e){return Object(X.a)({box:{backgroundColor:e.palette.grey[300],width:"100%",height:"100%",padding:e.spacing(4),overflowX:"auto"},appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1}})}),gt=c.forwardRef(function(e,t){return c.createElement(ft.a,Object.assign({direction:"up",ref:t},e))});function Ot(e){var t=vt(e),n=e.children,o=e.open,r=e.handleClose,a=e.title;return c.createElement(ht.a,{fullScreen:!0,open:o,onClose:r,TransitionComponent:gt},c.createElement(Je.a,{className:t.appBar},c.createElement(qe.a,null,c.createElement(G.a,{variant:"h6",className:t.title},a),c.createElement(We.a,{edge:"end",color:"inherit",onClick:r,"aria-label":"close"},c.createElement(bt.a,null)))),c.createElement(Pe.a,{className:t.box},n))}var Et,kt,jt,Ct,wt=n(285),Nt=n(287),xt=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(U.a)(this,Object(P.a)(t).call(this,e))).state={open:!0,viewTooltip:!1},n.switchDrawer=n.switchDrawer.bind(Object(ye.a)(n)),n}return Object(T.a)(t,e),Object(p.a)(t,[{key:"componentWillMount",value:function(){if(this.props.title){var e=localStorage.getItem("Sidebar_state:"+this.props.title);e&&this.setState({open:"true"===e})}}},{key:"switchDrawer",value:function(){localStorage.setItem("Sidebar_state:"+this.props.title,this.state.open?"false":"true"),this.setState({open:!this.state.open,viewTooltip:!1})}},{key:"changeViewtooltip",value:function(e){this.setState({viewTooltip:e})}},{key:"render",value:function(){var e=this,t=this.props,n=t.classes,o=t.children,r=t.title,a=t.btnIcon,i=t.anchor,s=this.state,l=s.open,d=s.viewTooltip;return c.createElement(c.Fragment,null,c.createElement(wt.a,{className:n.drawer,variant:"persistent",open:l,anchor:i,classes:{paper:n.drawerPaper}},c.createElement("div",{className:n.toolbar}),c.createElement(G.a,{variant:"body2",align:"center",className:n.title},r),c.createElement(Ve.a,null),o),c.createElement(Qe.a,{title:r,open:void 0!==r&&d&&!l,onOpen:function(){return e.changeViewtooltip(!0)},onClose:function(){return e.changeViewtooltip(!1)}},c.createElement(Ze.a,{style:{left:"left"===i?l?m.UI.sidebarWidth+15:15:"auto",right:"right"===i?l?m.UI.sidebarWidth+15:15:"auto"},color:"secondary",size:"medium",className:n.toogleIcon,onClick:this.switchDrawer},l?c.createElement(Nt.a,null):a)))}}]),t}(c.PureComponent),St=Object(Y.a)(function(e){return Object(X.a)({drawer:{position:"relative"},drawerPaper:{width:m.UI.sidebarWidth},toogleIcon:{position:"absolute",top:e.spacing(10),zIndex:e.zIndex.drawer+1},title:{padding:e.spacing(1)},toolbar:e.mixins.toolbar})})(xt),_t=function(e){var t=e.text;e.className;return c.createElement(c.Fragment,null,c.createElement(G.a,{variant:"subtitle2"},t),c.createElement(Ve.a,null))},It=function(e){var t=e.text;e.className;return 0===t.length?c.createElement(c.Fragment,null):c.createElement(c.Fragment,null,t.map(function(e,t){return c.createElement(G.a,{variant:"subtitle2",key:t},e)}),c.createElement(Ve.a,null))},Bt=Object(te.a)(Et=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(U.a)(this,Object(P.a)(t).call(this,e))).state={},n}return Object(T.a)(t,e),Object(p.a)(t,[{key:"viewFixationInfo",value:function(e){switch(e.fixation){case h.X:return c.createElement(_t,{text:"\u0424\u0438\u043a\u0441\u0430\u0446\u0438\u044f \u043f\u043e \u043e\u0441\u0438 X"});case h.Y:return c.createElement(_t,{text:"\u0424\u0438\u043a\u0441\u0430\u0446\u0438\u044f \u043f\u043e \u043e\u0441\u0438 Y"});case h.XY:return c.createElement(_t,{text:"\u0424\u0438\u043a\u0441\u0430\u0446\u0438\u044f \u043f\u043e \u043e\u0441\u044f\u043c \u0425 \u0438 Y"});default:return}}},{key:"NodeInfo",value:function(e){var t=this.props,n=t.classes,o=t.onDelete,r=void 0===o?function(){}:o;return c.createElement(Pe.a,{className:n.root},c.createElement(G.a,{variant:"h6",className:n.title},"\u0423\u0437\u0435\u043b ",e.name),c.createElement(It,{text:["X: ".concat(e.coord.x," \u043c\u043c"),"Y: ".concat(e.coord.y," \u043c\u043c")]}),c.createElement(It,{text:["\u0394X: ".concat(e.dCoord.x," \u043c\u043c"),"\u0394Y': ".concat(e.dCoord.y," \u043c\u043c")]}),0!==e.forceX&&c.createElement(_t,{text:"\u0421\u0438\u043b\u0430 \u043f\u043e \u043e\u0441\u0438 \u0425: ".concat(e.forceX," H")}),0!==e.forceY&&c.createElement(_t,{text:"\u0421\u0438\u043b\u0430 \u043f\u043e \u043e\u0441\u0438 Y: ".concat(e.forceY," H")}),this.viewFixationInfo(e),c.createElement("div",{className:n.btnGroup},c.createElement(We.a,{"aria-label":"Delete",onClick:function(){return r(e)}},c.createElement(Re.a,null))))}},{key:"BeamInfo",value:function(e){var t=this.props,n=t.classes,o=t.onDelete,r=void 0===o?function(){}:o;return c.createElement(Pe.a,{className:n.root},c.createElement(G.a,{variant:"h6",className:n.title},"\u0421\u0442\u0435\u0440\u0436\u0435\u043d\u044c ",e.name),c.createElement(_t,{text:"\u0414\u043b\u0438\u043d\u0430: ".concat(e.length," \u043c\u043c")}),c.createElement(It,{text:["\u0423\u0441\u0438\u043b\u0438\u044f \u0432 \u0441\u0442\u0435\u0440\u0436\u043d\u0435","\u0412 \u043d\u0430\u0447\u0430\u043b\u0435: ".concat(e.startForce," H"),"\u0412 \u043a\u043e\u043d\u0446\u0435: ".concat(e.endForce," H")]}),c.createElement("div",{className:n.btnGroup},c.createElement(We.a,{"aria-label":"Delete",onClick:function(){return r(e)}},c.createElement(Re.a,null))))}},{key:"viewInfo",value:function(e){return e instanceof Se?this.NodeInfo(e):e instanceof Oe?this.BeamInfo(e):void 0}},{key:"render",value:function(){var e=this.props.entity;return c.createElement(St,{anchor:"right",title:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u043e\u043c \u043e\u0431\u044a\u0435\u043a\u0442\u0435",btnIcon:c.createElement(He.a,null)},this.viewInfo(e),c.createElement(Ve.a,null))}}]),t}(c.PureComponent))||Et,Dt=Object(Y.a)(function(e){return Object(X.a)({root:{padding:e.spacing(2)},title:{marginBottom:e.spacing(2)},btnGroup:{marginTop:e.spacing(2)}})})(Bt),Mt=n(142),Ut=n(143),Pt=n(290),Tt=n(291),zt=n(292),At=n(293),Ft=n(294),Lt=n(295),Xt=n(296),Yt={CANVAS:{CLEAR:"header-canvas-clear",SAVE:"header-canvas-save"},CALC:{DO:"header-calc-do",RESULT:"header-calc-result"}},Gt={TRUSS:{CALC:"tools-truss-calc"}},Vt=[{title:"\u0425\u043e\u043b\u0441\u0442",items:[{title:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0432 \u043a\u044d\u0448",todo:Yt.CANVAS.SAVE,icon:c.createElement(Pt.a,null)},{title:"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c",todo:Yt.CANVAS.CLEAR,icon:c.createElement(Tt.a,null)}]},{title:"\u0420\u0430\u0441\u0447\u0435\u0442",items:[{title:"\u0420\u0430\u0441\u0441\u0447\u0438\u0442\u0430\u0442\u044c",todo:Yt.CALC.DO,icon:c.createElement(zt.a,null)},{title:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442",todo:Yt.CALC.RESULT,icon:c.createElement(At.a,null)}]}],Wt=[{title:"\u0420\u0430\u0441\u0447\u0435\u0442 \u0444\u0435\u0440\u043c\u044b",todo:Gt.TRUSS.CALC,icon:c.createElement(zt.a,null),fab:!0}],Rt=[{title:"\u041f\u0435\u0440\u0435\u043c\u0435\u0449\u0435\u043d\u0438\u0435",mod:a.move,icon:c.createElement(Ft.a,null)},{title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0443\u0437\u0435\u043b",mod:a.addNode,icon:c.createElement(Lt.a,null)},{title:"\u0421\u043e\u0435\u0434\u0438\u043d\u0438\u0442\u044c \u0443\u0437\u043b\u044b",mod:a.addBeam,icon:c.createElement(Xt.a,null)},{title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",mod:a.delete,icon:c.createElement(Re.a,null)}],Ht=Yt,Kt=Gt,Jt=Object(te.a)(kt=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(U.a)(this,Object(P.a)(t).call(this,e))).stage=void 0,n.state={stageHeight:m.canvas.height,stageWidth:m.canvas.width,uiMode:a.none,selectedEntityID:"",paintEntity:null,openModal:null},n.UIonClick=n.UIonClick.bind(Object(ye.a)(n)),n.UIonDrag=n.UIonDrag.bind(Object(ye.a)(n)),n.UIonMouseMove=n.UIonMouseMove.bind(Object(ye.a)(n)),n.onKeyHandle=n.onKeyHandle.bind(Object(ye.a)(n)),n.selectEntity=n.selectEntity.bind(Object(ye.a)(n)),n.deleteEntity=n.deleteEntity.bind(Object(ye.a)(n)),n.clearFarm=n.clearFarm.bind(Object(ye.a)(n)),n.saveFarm=n.saveFarm.bind(Object(ye.a)(n)),n.calculate=n.calculate.bind(Object(ye.a)(n)),n.handleBtnClick=n.handleBtnClick.bind(Object(ye.a)(n)),n.modalStateChange=n.modalStateChange.bind(Object(ye.a)(n)),n.stage=c.createRef(),n}return Object(T.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this.stage.current;if(e){var t=e.attrs.container.parentElement.parentElement;t&&(t.scrollTop=(t.scrollHeight-t.offsetHeight)/2,t.scrollLeft=(t.scrollWidth-t.offsetWidth)/2)}}},{key:"UIonClick",value:function(e,t){var n=this.state,o=n.uiMode,r=n.paintEntity,c=this.props.calculation,i=e.target.getStage()===e.target;if(e.evt.preventDefault(),0===e.evt.button&&!c){switch(o){case a.none:!i&&t?this.selectEntity(t.id):this.selectEntity("");break;case a.addNode:if(i){var s=e.evt,l=s.layerX,d=s.layerY,u=B.cellX(l),p=B.cellX(d);this.props.addNode(u,p)}break;case a.addBeam:if(!i&&t instanceof Se){var m=this.props.addBeam({coord:Object(ee.a)({},t.coord)});if(m instanceof Oe){var f=this.props.connectBeamToNode(t,m,"start");f instanceof Oe?this.setState({paintEntity:f,uiMode:a.addBeamStart}):this.props.deleteEntity(m.id)}}break;case a.addBeamStart:!i&&t instanceof Se&&r&&this.props.connectBeamToNode(t,r,"end")&&this.setState({uiMode:a.addBeam,paintEntity:null});break;case a.delete:!i&&t&&this.deleteEntity(t)}i&&this.setState({selectedEntityID:""})}}},{key:"UIonMouseMove",value:function(e){if(!this.props.calculation){var t=this.state,n=t.uiMode,o=t.paintEntity,r=e.evt,c=r.layerX,i=r.layerY;switch(n){case a.addBeamStart:e.target.getStage()&&(o?this.props.moveEndBeam(o,c,i):this.setState({uiMode:a.addBeam}));break;case a.delete:var s=e.target.getStage();s===e.target&&(s.container().style.cursor="default")}}}},{key:"UIonDrag",value:function(e,t){if(!this.props.calculation)switch(this.state.uiMode){case a.move:if(t instanceof Se&&e.evt.defaultPrevented){var n=e.evt,o=n.layerX,r=n.layerY;this.props.moveNode(t,B.cellX(o),B.cellY(r))}}}},{key:"onKeyHandle",value:function(e){switch(e.key){case"Escape":this.deletePaintEntity(),this.setState({uiMode:0})}}},{key:"deletePaintEntity",value:function(){this.state.paintEntity&&this.props.deleteEntity(this.state.paintEntity.id),this.setState({paintEntity:null})}},{key:"deleteEntity",value:function(e){this.props.calculation||(this.state.selectedEntityID&&this.state.selectedEntityID===e.id&&this.setState({selectedEntityID:""}),this.props.deleteEntity(e.id))}},{key:"selectEntity",value:function(e){this.props.calculation||e&&this.setState({selectedEntityID:e})}},{key:"clearFarm",value:function(){window.confirm("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u0445\u043e\u043b\u0441\u0442?")&&this.props.clearTruss()}},{key:"saveFarm",value:function(e){window.confirm("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0445\u043e\u043b\u0441\u0442 \u0432 \u043a\u044d\u0448?")&&this.props.cacheTruss()}},{key:"calculate",value:function(e){this.props.calculate()}},{key:"setSelectedMode",value:function(e){this.props.calculation||(this.state.paintEntity&&this.props.deleteEntity(this.state.paintEntity.id),this.setState({uiMode:e||0,paintEntity:null}))}},{key:"handleBtnClick",value:function(e,t){switch(t){case Ht.CANVAS.CLEAR:this.clearFarm();break;case Ht.CANVAS.SAVE:this.saveFarm(e);break;case Kt.TRUSS.CALC:case Ht.CALC.DO:this.calculate(e);break;case Ht.CALC.RESULT:this.props.farm.calcData&&this.modalStateChange(Ht.CALC.RESULT)}}},{key:"modalStateChange",value:function(e){this.setState({openModal:e})}},{key:"viewDialogs",value:function(){var e=this;if(this.props.farm.calcData)return c.createElement(Ot,{title:"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u0440\u0430\u0441\u0441\u0447\u0435\u0442\u043e\u0432",open:this.state.openModal===Ht.CALC.RESULT,handleClose:function(){return e.modalStateChange(null)}},c.createElement(Ge,this.props.farm.calcData))}},{key:"render",value:function(){var e=this.state,t=e.stageHeight,n=e.stageWidth,o=e.uiMode,r=e.selectedEntityID,a=this.props,i=a.classes,s=a.farm,l=a.calculated,d=r&&(s.beams.get(r)||s.nodes.get(r))||null;return c.createElement(Pe.a,{className:i.root},c.createElement(Ut.a,{isActive:!0}),c.createElement(Mt.a,{keyEventName:"keyup",keyValue:"Escape",onKeyHandle:this.onKeyHandle}),c.createElement($t,{disabled:Object(it.a)({},Ht.CALC.RESULT,!Boolean(this.props.farm.calcData)),onClick:this.handleBtnClick}),c.createElement("div",{className:i.toolbar}),c.createElement(Pe.a,{className:i.stageBox},c.createElement("div",{className:i.toolbar}),c.createElement(mn,{nodes:s.nodesArray,beams:s.beamsArray,selectedEntityID:r,onSelect:this.selectEntity}),c.createElement(Cn,{onClick:this.UIonClick,onDrag:this.UIonDrag,onMouseMove:this.UIonMouseMove,selectedEntity:d,stageHeight:t,stageWidth:n,nodes:s.nodesArray,beams:s.beamsArray,stage:this.stage,uiMode:o,viewNewPos:l}),c.createElement(Dt,{entity:s.nodes.get(r)||s.beams.get(r),onDelete:this.deleteEntity})),c.createElement(Zt,{selected:o,onSelect:this.setSelectedMode.bind(this),onClick:this.handleBtnClick}),this.viewDialogs())}}]),t}(c.Component))||kt,qt=Object(Y.a)(function(e){return Object(X.a)({root:{width:"100%",height:"100%",overflow:"hidden",background:e.palette.background.default,display:"flex",flexDirection:"column"},stageBox:{display:"flex",flexGrow:1,overflow:"hidden"},toolbar:e.mixins.toolbar})})(Jt),$t=Object(Y.a)(function(e){return Object(X.a)({root:{},btnIcon:{fontSize:18,marginTop:3,marginBottom:3},grow:{flexGrow:1}})})(function(e){var t=e.classes,n=e.onClick,o=void 0===n?function(){}:n,r=e.disabled,a=void 0===r?{}:r;return c.createElement($e,{className:t.root},Vt.map(function(e){return e.items.forEach(function(e){e.disabled=!0===a[e.todo]}),c.createElement(ct,Object.assign({},e,{onClickToAction:o,size:"medium"}))}),c.createElement("div",{className:t.grow}))}),Qt=n(311),Zt=Object(Y.a)(function(e){return Object(X.a)({root:{position:"absolute",padding:e.spacing(1),bottom:e.spacing(2),left:"50%",transform:"translateX(-50%)",backgroundColor:Object(lt.b)(e.palette.primary.light,.4),transition:e.transitions.create(["background-color","box-shadow","border"],{duration:e.transitions.duration.short}),"&:hover":{backgroundColor:e.palette.primary.light}},modsBtnGroup:{borderRadius:0,backgroundColor:"transparent",verticalAlign:"middle"},vHr:{display:"inline-block",width:2,height:"100%",minHeight:48,verticalAlign:"middle",backgroundColor:e.palette.secondary.light,opacity:.5,marginRight:10}})})(function(e){var t=e.onSelect,n=e.selected,o=e.classes,r=e.onClick,a=void 0===r?function(){}:r;return c.createElement(De.a,{className:o.root},c.createElement(Qt.a,{value:n,exclusive:!0,onChange:function(e,n){return t(n)},size:"medium",className:o.modsBtnGroup},Rt.map(function(e){return c.createElement(mt,{key:e.mod,value:e.mod,selected:e.mod===n,icon:e.icon,name:e.title})})),c.createElement("div",{className:o.vHr}),Wt.map(function(e){return c.createElement(et,Object.assign({},e,{onClickToAction:a,fab:e.fab,key:e.title,size:"medium"}))}))}),en=n(247),tn=n(297),nn=n(298),on=n(301),rn=n(246),an=n(299),cn=n(300),sn=n(302),ln=n(303),dn=n(304),un=n(305),pn=Object(te.a)(jt=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(U.a)(this,Object(P.a)(t).call(this,e))).state={open:!1,tabs:new Map},n.openTab=n.openTab.bind(Object(ye.a)(n)),n.viewListItem=n.viewListItem.bind(Object(ye.a)(n)),n}return Object(T.a)(t,e),Object(p.a)(t,[{key:"componentWillMount",value:function(){var e=this.state.tabs;e.set("\u0423\u0437\u043b\u044b",!0),e.set("\u0421\u0442\u0435\u0440\u0436\u043d\u0438",!0),this.setState({tabs:new Map(e)})}},{key:"openTab",value:function(e){var t=this.state.tabs;t.set(e,!t.get(e)),this.setState({tabs:new Map(t)})}},{key:"viewListItem",value:function(e,t,n){var r=this,a=this.props,i=a.selectedEntityID,s=void 0===i?"":i,l=a.classes,d=a.onSelect,u=void 0===d?function(){}:d,p=this.state.tabs;return c.createElement(Pe.a,null,c.createElement(en.a,{button:!0,onClick:function(){return r.openTab(t)}},n&&c.createElement(at.a,null,c.createElement(tn.a,{badgeContent:e.length,color:"secondary"},n)),c.createElement(nn.a,{primary:t}),p.get(t)?c.createElement(an.a,null):c.createElement(cn.a,null)),c.createElement(on.a,{in:p.get(t),timeout:"auto",unmountOnExit:!0},c.createElement(rn.a,{component:"div",disablePadding:!0},e.map(function(e){return c.createElement(en.a,{button:!0,className:l.nested,key:e.id,selected:s===e.id,onClick:function(t){return u(e.id)}},e instanceof Se&&c.createElement(at.a,null,c.createElement(sn.a,{style:{color:o.getNodeColor(e)}})),c.createElement(nn.a,{primary:e.name}))}))),c.createElement(Ve.a,null))}},{key:"render",value:function(){var e=this.props,t=e.nodes,n=void 0===t?[]:t,o=e.beams,r=void 0===o?[]:o;return r.sort(function(e,t){return e.name>t.name?1:-1}),n.sort(function(e,t){return e.name>t.name?1:-1}),c.createElement(St,{anchor:"left",title:"\u0421\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0430 \u043f\u0440\u043e\u0435\u043a\u0442\u0430",btnIcon:c.createElement(ln.a,null)},this.viewListItem(n,"\u0423\u0437\u043b\u044b",c.createElement(dn.a,null)),this.viewListItem(r,"\u0421\u0442\u0435\u0440\u0436\u043d\u0438",c.createElement(un.a,null)))}}]),t}(c.PureComponent))||jt,mn=Object(Y.a)(function(e){return Object(X.a)({nested:{paddingLeft:e.spacing(6)}})})(pn),fn=n(32),hn=m.UI.beamSize,yn=Object(te.a)(function(e){var t=e.onClick,n=void 0===t?function(){}:t,r=e.mode,a=void 0===r?o.UIModes.none:r,i=e.selected,s=void 0!==i&&i,l=e.beam,d=e.viewNewPos,u=void 0!==d&&d,p=[l.coord.x/m.UI.koefOnGrid,l.coord.y/m.UI.koefOnGrid,l.endCoord.x/m.UI.koefOnGrid,l.endCoord.y/m.UI.koefOnGrid];return u&&(p=[(l.coord.x+l.dCoord.x*m.UI.koefOfNewPos)/m.UI.koefOnGrid,(l.coord.y-l.dCoord.y*m.UI.koefOfNewPos)/m.UI.koefOnGrid,(l.endCoord.x+l.dEndCoord.x*m.UI.koefOfNewPos)/m.UI.koefOnGrid,(l.endCoord.y-l.dEndCoord.y*m.UI.koefOfNewPos)/m.UI.koefOnGrid]),c.createElement(fn.Line,{opacity:u?.3:1,points:p,stroke:o.getBeamColor(l),strokeWidth:hn,shadowBlur:s&&!u?8:2,hitStrokeWidth:u?0:4*hn,onClick:u?function(){}:function(e){return n(e,l)},onMouseEnter:u?function(){}:function(e){return o.beamMouseEnter(e,l,a)},onMouseLeave:u?function(){}:function(e){return o.beamMouseLeave(e)}})}),bn=c.memo(function(e){var t=e.heightBox,n=e.heightCell,o=e.widthBox,r=e.widthCell,a=o/r,i=t/n;return console.log("UIGrid"),c.createElement(c.Fragment,null,function(e,t,n){for(var o=[],r=0;r<n;r++)o.push(c.createElement(fn.Line,{points:[r*e,0,r*e,t],stroke:"#ddd",strokeWidth:1,key:r}));return o}(r,t,a),function(e,t,n){for(var o=[],r=0;r<n;r++)o.push(c.createElement(fn.Line,{points:[0,r*e,t,r*e],stroke:"#ddd",strokeWidth:1,key:r}));return o}(n,o,i))}),vn=m.UI.nodeSize,gn=Object(te.a)(function(e){var t=e.node,n=e.onClick,r=void 0===n?function(){}:n,i=e.selected,s=void 0!==i&&i,l=e.mode,d=void 0===l?a.none:l,u=e.drag,p=void 0===u?function(){}:u,f=e.viewNewPos,y=void 0!==f&&f,b=function(e,t){if(!y)return c.createElement(c.Fragment,null,c.createElement(fn.Arrow,{points:[0,0,m.UI.cellSize,0],stroke:o.theme.palette.grey[300],strokeWidth:vn/3,shadowBlur:2,pointerLength:m.UI.cellSize/10,pointerWidth:m.UI.cellSize/10,hitStrokeWidth:2*vn,rotation:e>0?t:180+t}),c.createElement(fn.Text,{x:0===t?e>0?m.UI.cellSize/3:-m.UI.cellSize:m.UI.cellSize/3,y:90===t?e>0?m.UI.cellSize/3:-m.UI.cellSize/2:-m.UI.cellSize/1.5,text:e+" H"}))},v=function(e){return c.createElement(fn.Group,{x:0,y:0,rotation:e},c.createElement(fn.Line,{points:[0,0,0,m.UI.cellSize,-m.UI.cellSize/2,m.UI.cellSize,m.UI.cellSize/2,m.UI.cellSize],stroke:o.theme.palette.grey[300],strokeWidth:vn/4,shadowBlur:2}),c.createElement(fn.Circle,{radius:vn/2,fill:o.theme.palette.grey[500],x:0,y:m.UI.cellSize-vn/1.7}))};if(y&&0===t.dCoord.x&&0===t.dCoord.y)return c.createElement(c.Fragment,null);var g=t.coord.x/m.UI.koefOnGrid,O=t.coord.y/m.UI.koefOnGrid;if(y){if(0===t.dCoord.x&&0===t.dCoord.y)return c.createElement(c.Fragment,null);g=(t.coord.x+t.dCoord.x*m.UI.koefOfNewPos)/m.UI.koefOnGrid,O=(t.coord.y-t.dCoord.y*m.UI.koefOfNewPos)/m.UI.koefOnGrid}return c.createElement(fn.Group,{opacity:y?.3:1,x:g,y:O,_useStrictMode:!0,onClick:y?function(){}:function(e){return r(e,t)}},0!==t.forceX&&b(t.forceX,0),0!==t.forceY&&b(t.forceY,90),t.fixation===h.X&&v(90),t.fixation===h.Y&&v(0),t.fixation===h.XY&&v(90),t.fixation===h.YX&&v(0),c.createElement(fn.Circle,{radius:vn,x:0,y:0,fill:o.getNodeColor(t),shadowBlur:s&&!y?8:2,stroke:o.getNodeStorkeColor(t,d),strokeWidth:o.getNodeStorkeWidth(t,d),hitStrokeWidth:y?0:2*vn}),c.createElement(fn.Text,{x:-vn,y:-vn/2-1,align:"center",fontSize:18,fill:"#fff",shadowBlur:8,fontFamily:"Trebuchet MS",width:2*vn,verticalAlign:"middle",text:t.name}),c.createElement(fn.Circle,{radius:vn,x:0,y:0,onDragEnd:function(e){e.target.to({x:0,y:0})},hitStrokeWidth:y?0:2*vn,draggable:d===a.move&&!t.isStatic&&!y,onMouseEnter:y?function(){}:function(e){return o.nodeMouseEnter(e,t,d)},onMouseLeave:y?function(){}:function(e){return o.nodeMouseLeave(e)},onDragMove:function(e){return p(e,t)}}))}),On=n(144),En=n.n(On),kn=n(38),jn=Object(kn.c)(function(e){var t=e.classes,n=e.stage,o=e.stageHeight,r=e.stageWidth,a=e.onClick,i=e.onMouseMove,s=e.onDrag,l=e.beams,d=e.nodes,u=e.uiMode,p=e.selectedEntity,f=e.viewNewPos;return c.createElement(En.a,{autoHide:!0},c.createElement(Pe.a,{style:{width:r+2*m.UI.sidebarWidth+20,height:o+m.UI.sidebarWidth},className:t.root},c.createElement(fn.Stage,{height:o,width:r,style:{height:o,width:r},className:t.stage,onClick:a,onMouseMove:i,ref:n},c.createElement(fn.Layer,{className:"layer"},c.createElement(bn,{heightCell:m.UI.cellSize,widthCell:m.UI.cellSize,heightBox:o,widthBox:r}),l.map(function(e){return c.createElement(yn,{key:e.id,beam:e,mode:u,onClick:a,selected:p===e})}),d.map(function(e){return c.createElement(gn,{key:e.id,node:e,mode:u,drag:s,onClick:a,selected:p===e})}),f&&l.map(function(e){return c.createElement(yn,{key:e.id,beam:e,mode:u,onClick:a,selected:p===e,viewNewPos:!0})}),f&&d.map(function(e){return c.createElement(gn,{key:e.id,node:e,mode:u,drag:s,onClick:a,selected:p===e,viewNewPos:!0})})))))}),Cn=Object(Y.a)(function(e){return Object(X.a)({root:{backgroundColor:"#ddd",display:"flex",alignItems:"center",justifyContent:"center"},stage:{backgroundColor:"#fff",boxShadow:e.shadows[2],borderRadius:8}})})(jn),wn=Object(te.a)(Ct=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(U.a)(this,Object(P.a)(t).call(this,e))).nodesCacheName="nodes:array",n.beamsCacheName="beams:array",n.addNode=function(e,t,o){n.state.calculated&&n.setState({calculated:!1});try{return _e.addNode(Object(ee.a)({},o,{coord:{x:e*m.UI.koefOnGrid,y:t*m.UI.koefOnGrid}}))}catch(r){console.error("addNode",r),r.message?alert(r.message):alert(r)}},n.moveNode=function(e,t,o){n.state.calculated&&n.setState({calculated:!1});try{var r=t*m.UI.koefOnGrid,a=o*m.UI.koefOnGrid;_e.moveNode(e.id,r,a)}catch(c){console.error("moveNode",c),c.message?alert(c.message):alert(c)}},n.addBeam=function(e){n.state.calculated&&n.setState({calculated:!1});try{return _e.addBeam(e)}catch(t){console.error("addBeam",t),t.message?alert(t.message):alert(t)}},n.moveEndBeam=function(e,t,o){n.state.calculated&&n.setState({calculated:!1});try{var r=t*m.UI.koefOnGrid,a=o*m.UI.koefOnGrid;return _e.moveEndBeamWhileDraving(e.id,r,a)}catch(c){console.error("moveEndBeam",c),c.message?alert(c.message):alert(c)}},n.connectBeamToNode=function(e,t,o){n.state.calculated&&n.setState({calculated:!1});try{switch(o){case"start":return _e.connectBeamToStartNode(e.id,t.id);case"end":return _e.connectBeamToEndNode(e.id,t.id)}}catch(r){console.error("connectBeamToNode",r),r.message?alert(r.message):alert(r)}},n.deleteEntity=function(e){n.state.calculated&&n.setState({calculated:!1});try{_e.delete(e)}catch(t){console.error("deleteEntity",t),t.message?alert(t.message):alert(t)}},n.calculate=function(){var e=Object(Z.a)(Q.a.mark(function e(t){return Q.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.state.calculated&&n.setState({calculated:!1}),e.prev=1,n.setState({calculation:!0}),console.log("Calculate"),e.next=6,_e.calculate();case 6:n.setState({calculated:!0,calculation:!1}),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),console.error("calculate",e.t0),e.t0.message?alert(e.t0.message):alert(e.t0),n.setState({calculated:!1,calculation:!1});case 14:case"end":return e.stop()}},e,null,[[1,9]])}));return function(t){return e.apply(this,arguments)}}(),n.setDefaultTruss=function(){n.state.calculated&&n.setState({calculated:!1});try{if(console.log("setDefaultTruss"),n.state.loadFromCache)n.loadTrussFromCache();else{var e=Nn();_e.setNodes(e),_e.sortNodesByCoord(),Ie.firstPlacement(_e.nodesArray,_e.beamsArray)}}catch(t){console.error("setDefaultTruss",t),t.message?alert(t.message):alert(t)}},n.cacheTruss=function(){var e=Ie.toString(_e),t=e.beamsJSON,o=e.nodesJSON;localStorage.setItem(n.nodesCacheName,o),localStorage.setItem(n.beamsCacheName,t)},n.loadTrussFromCache=Object(Z.a)(Q.a.mark(function e(){var t,o,r,a,c;return Q.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=localStorage.getItem(n.nodesCacheName),o=localStorage.getItem(n.beamsCacheName),!t||!o){e.next=10;break}return e.next=5,Ie.parse(t,o);case 5:r=e.sent,a=r.nodes,c=r.beams,_e.setNodes(a),_e.setBeams(c);case 10:case"end":return e.stop()}},e)})),n.clearTruss=Object(Z.a)(Q.a.mark(function e(){return Q.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.setState({loadFromCache:!1});case 2:return localStorage.removeItem(n.nodesCacheName),localStorage.removeItem(n.beamsCacheName),e.next=6,_e.clear();case 6:n.setDefaultTruss();case 7:case"end":return e.stop()}},e)})),n.state={calculation:!1,calculated:!1,loadFromCache:!1},n}return Object(T.a)(t,e),Object(p.a)(t,[{key:"componentWillMount",value:function(){localStorage.getItem(this.nodesCacheName)&&localStorage.getItem(this.beamsCacheName)&&this.setState({loadFromCache:!0})}},{key:"componentDidMount",value:function(){this.setDefaultTruss()}},{key:"render",value:function(){return c.createElement(qt,Object.assign({},this.state,this,{farm:_e}))}}]),t}(c.Component))||Ct,Nn=function(){return Ie.createNodes([{x:0,y:1e3,fixation:h.XY},{x:3e3,y:1e3,fixation:h.Y}],[{x:1e3,y:1e3,forceY:9e3}],[])},xn=wn,Sn=function(e){function t(){return Object(u.a)(this,t),Object(U.a)(this,Object(P.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return c.createElement(c.Fragment,null,c.createElement(A.a,{htmlAttributes:{leng:"en"},titleTemplate:"Truss - %s",defaultTitle:m.str.title,link:[{rel:"shortcut icon",href:m.img.bridgeIcon_2},{rel:"image_src",href:m.img.airBridge},{rel:"stylesheet",href:"https://fonts.googleapis.com/css?family=Roboto:300,400,500"},{rel:"stylesheet",href:"https://fonts.googleapis.com/icon?family=Material+Icons"}],meta:[{charSet:"utf-8"},{name:"viewport",content:"minimum-scale=1, initial-scale=1, width=device-width, shrink-to-fit=no"},{name:"theme-color",content:"#000000"},{name:"description",content:m.str.description},{property:"og:type",content:"website"},{property:"og:title",content:m.str.title},{property:"og:image",content:m.img.airBridge},{property:"vk:image",content:m.img.airBridge},{property:"twitter:image",content:m.img.airBridge},{property:"og:url",content:m.str.url}]}),c.createElement(F.a,null),c.createElement(L.a,{theme:y},c.createElement(M.c,null,c.createElement(M.a,{path:W,component:q,exact:!0}),c.createElement(M.a,{path:R,component:xn}))))}}]),t}(c.Component);n(242);l.a.render(i.a.createElement(function(){return i.a.createElement(D.a,null,i.a.createElement(Sn,null))},null),document.getElementById("root"))}},[[157,1,2]]]);
//# sourceMappingURL=main.249eff16.chunk.js.map